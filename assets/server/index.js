(()=>{var wt=Object.create,Le=Object.defineProperty,St=Object.getPrototypeOf,Ct=Object.prototype.hasOwnProperty,Tt=Object.getOwnPropertyNames,Pt=Object.getOwnPropertyDescriptor;var Et=D=>Le(D,"__esModule",{value:!0});var Be=(D,I)=>()=>(I||D((I={exports:{}}).exports,I),I.exports);var kt=(D,I,C)=>{if(I&&typeof I=="object"||typeof I=="function")for(let g of Tt(I))!Ct.call(D,g)&&g!=="default"&&Le(D,g,{get:()=>I[g],enumerable:!(C=Pt(I,g))||C.enumerable});return D},Ne=D=>kt(Et(Le(D!=null?wt(St(D)):{},"default",D&&D.__esModule&&"default"in D?{get:()=>D.default,enumerable:!0}:{value:D,enumerable:!0})),D);var Ue=(D,I,C)=>new Promise((g,f)=>{var m=w=>{try{P(C.next(w))}catch(y){f(y)}},b=w=>{try{P(C.throw(w))}catch(y){f(y)}},P=w=>w.done?g(w.value):Promise.resolve(w.value).then(m,b);P((C=C.apply(D,I)).next())});var tt=Be((Fe,ze)=>{(function(D,I){typeof Fe=="object"&&typeof ze!="undefined"?ze.exports=I():typeof define=="function"&&define.amd?define(I):(D=D||self,D.Alpine=I())})(Fe,function(){"use strict";function D(v,d,h){return d in v?Object.defineProperty(v,d,{value:h,enumerable:!0,configurable:!0,writable:!0}):v[d]=h,v}function I(v,d){var h=Object.keys(v);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(v);d&&(T=T.filter(function(R){return Object.getOwnPropertyDescriptor(v,R).enumerable})),h.push.apply(h,T)}return h}function C(v){for(var d=1;d<arguments.length;d++){var h=arguments[d]!=null?arguments[d]:{};d%2?I(Object(h),!0).forEach(function(T){D(v,T,h[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(h)):I(Object(h)).forEach(function(T){Object.defineProperty(v,T,Object.getOwnPropertyDescriptor(h,T))})}return v}function g(){return new Promise(v=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",v):v()})}function f(v){return Array.from(new Set(v))}function m(){return navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")}function b(v,d){return v==d}function P(v,d){v.tagName.toLowerCase()!=="template"?console.warn(`Alpine: [${d}] directive should only be added to <template> tags. See https://github.com/alpinejs/alpine#${d}`):v.content.childElementCount!==1&&console.warn(`Alpine: <template> tag with [${d}] encountered with an unexpected number of root elements. Make sure <template> has a single root element. `)}function w(v){return v.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function y(v){return v.toLowerCase().replace(/-(\w)/g,(d,h)=>h.toUpperCase())}function e(v,d){if(d(v)===!1)return;let h=v.firstElementChild;for(;h;)e(h,d),h=h.nextElementSibling}function a(v,d){var h;return function(){var T=this,R=arguments,O=function(){h=null,v.apply(T,R)};clearTimeout(h),h=setTimeout(O,d)}}let o=(v,d,h)=>{if(console.warn(`Alpine Error: "${h}"

Expression: "${d}"
Element:`,v),!m())throw Object.assign(h,{el:v,expression:d}),h};function c(v,{el:d,expression:h}){try{let T=v();return T instanceof Promise?T.catch(R=>o(d,h,R)):T}catch(T){o(d,h,T)}}function l(v,d,h,T={}){return c(()=>typeof d=="function"?d.call(h):new Function(["$data",...Object.keys(T)],`var __alpine_result; with($data) { __alpine_result = ${d} }; return __alpine_result`)(h,...Object.values(T)),{el:v,expression:d})}function s(v,d,h,T={}){return c(()=>{if(typeof d=="function")return Promise.resolve(d.call(h,T.$event));let R=Function;if(R=Object.getPrototypeOf(function(){return Ue(this,null,function*(){})}).constructor,Object.keys(h).includes(d)){let O=new Function(["dataContext",...Object.keys(T)],`with(dataContext) { return ${d} }`)(h,...Object.values(T));return typeof O=="function"?Promise.resolve(O.call(h,T.$event)):Promise.resolve()}return Promise.resolve(new R(["dataContext",...Object.keys(T)],`with(dataContext) { ${d} }`)(h,...Object.values(T)))},{el:v,expression:d})}let u=/^x-(on|bind|data|text|html|model|if|for|show|cloak|transition|ref|spread)\b/;function r(v){let d=S(v.name);return u.test(d)}function n(v,d,h){let T=Array.from(v.attributes).filter(r).map(i),R=T.filter(O=>O.type==="spread")[0];if(R){let O=l(v,R.expression,d.$data);T=T.concat(Object.entries(O).map(([A,j])=>i({name:A,value:j})))}return h?T.filter(O=>O.type===h):t(T)}function t(v){let d=["bind","model","show","catch-all"];return v.sort((h,T)=>{let R=d.indexOf(h.type)===-1?"catch-all":h.type,O=d.indexOf(T.type)===-1?"catch-all":T.type;return d.indexOf(R)-d.indexOf(O)})}function i({name:v,value:d}){let h=S(v),T=h.match(u),R=h.match(/:([a-zA-Z0-9\-:]+)/),O=h.match(/\.[^.\]]+(?=[^\]]*$)/g)||[];return{type:T?T[1]:null,value:R?R[1]:null,modifiers:O.map(A=>A.replace(".","")),expression:d}}function p(v){return["disabled","checked","required","readonly","hidden","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"].includes(v)}function S(v){return v.startsWith("@")?v.replace("@","x-on:"):v.startsWith(":")?v.replace(":","x-bind:"):v}function _(v,d=Boolean){return v.split(" ").filter(d)}let E="in",x="out",M="cancelled";function k(v,d,h,T,R=!1){if(R)return d();if(v.__x_transition&&v.__x_transition.type===E)return;let O=n(v,T,"transition"),A=n(v,T,"show")[0];if(A&&A.modifiers.includes("transition")){let j=A.modifiers;if(j.includes("out")&&!j.includes("in"))return d();j=j.includes("in")&&j.includes("out")?j.filter((V,W)=>W<j.indexOf("out")):j,N(v,j,d,h)}else O.some(j=>["enter","enter-start","enter-end"].includes(j.value))?K(v,T,O,d,h):d()}function L(v,d,h,T,R=!1){if(R)return d();if(v.__x_transition&&v.__x_transition.type===x)return;let O=n(v,T,"transition"),A=n(v,T,"show")[0];if(A&&A.modifiers.includes("transition")){let j=A.modifiers;if(j.includes("in")&&!j.includes("out"))return d();let F=j.includes("in")&&j.includes("out");j=F?j.filter((V,W)=>W>j.indexOf("out")):j,U(v,j,F,d,h)}else O.some(j=>["leave","leave-start","leave-end"].includes(j.value))?$(v,T,O,d,h):d()}function N(v,d,h,T){let R={duration:B(d,"duration",150),origin:B(d,"origin","center"),first:{opacity:0,scale:B(d,"scale",95)},second:{opacity:1,scale:100}};z(v,d,h,()=>{},T,R,E)}function U(v,d,h,T,R){let A={duration:h?B(d,"duration",150):B(d,"duration",150)/2,origin:B(d,"origin","center"),first:{opacity:1,scale:100},second:{opacity:0,scale:B(d,"scale",95)}};z(v,d,()=>{},T,R,A,x)}function B(v,d,h){if(v.indexOf(d)===-1)return h;let T=v[v.indexOf(d)+1];if(!T||d==="scale"&&!X(T))return h;if(d==="duration"){let R=T.match(/([0-9]+)ms/);if(R)return R[1]}return d==="origin"&&["top","right","left","center","bottom"].includes(v[v.indexOf(d)+2])?[T,v[v.indexOf(d)+2]].join(" "):T}function z(v,d,h,T,R,O,A){v.__x_transition&&v.__x_transition.cancel&&v.__x_transition.cancel();let j=v.style.opacity,F=v.style.transform,V=v.style.transformOrigin,W=!d.includes("opacity")&&!d.includes("scale"),Y=W||d.includes("opacity"),J=W||d.includes("scale");Q(v,{start(){Y&&(v.style.opacity=O.first.opacity),J&&(v.style.transform=`scale(${O.first.scale/100})`)},during(){J&&(v.style.transformOrigin=O.origin),v.style.transitionProperty=[Y?"opacity":"",J?"transform":""].join(" ").trim(),v.style.transitionDuration=`${O.duration/1e3}s`,v.style.transitionTimingFunction="cubic-bezier(0.4, 0.0, 0.2, 1)"},show(){h()},end(){Y&&(v.style.opacity=O.second.opacity),J&&(v.style.transform=`scale(${O.second.scale/100})`)},hide(){T()},cleanup(){Y&&(v.style.opacity=j),J&&(v.style.transform=F),J&&(v.style.transformOrigin=V),v.style.transitionProperty=null,v.style.transitionDuration=null,v.style.transitionTimingFunction=null}},A,R)}let G=(v,d,h)=>typeof v=="function"?h.evaluateReturnExpression(d,v):v;function K(v,d,h,T,R){let O=_(G((h.find(F=>F.value==="enter")||{expression:""}).expression,v,d)),A=_(G((h.find(F=>F.value==="enter-start")||{expression:""}).expression,v,d)),j=_(G((h.find(F=>F.value==="enter-end")||{expression:""}).expression,v,d));H(v,O,A,j,T,()=>{},E,R)}function $(v,d,h,T,R){let O=_(G((h.find(F=>F.value==="leave")||{expression:""}).expression,v,d)),A=_(G((h.find(F=>F.value==="leave-start")||{expression:""}).expression,v,d)),j=_(G((h.find(F=>F.value==="leave-end")||{expression:""}).expression,v,d));H(v,O,A,j,()=>{},T,x,R)}function H(v,d,h,T,R,O,A,j){v.__x_transition&&v.__x_transition.cancel&&v.__x_transition.cancel();let F=v.__x_original_classes||[];Q(v,{start(){v.classList.add(...h)},during(){v.classList.add(...d)},show(){R()},end(){v.classList.remove(...h.filter(W=>!F.includes(W))),v.classList.add(...T)},hide(){O()},cleanup(){v.classList.remove(...d.filter(W=>!F.includes(W))),v.classList.remove(...T.filter(W=>!F.includes(W)))}},A,j)}function Q(v,d,h,T){let R=Z(()=>{d.hide(),v.isConnected&&d.cleanup(),delete v.__x_transition});v.__x_transition={type:h,cancel:Z(()=>{T(M),R()}),finish:R,nextFrame:null},d.start(),d.during(),v.__x_transition.nextFrame=requestAnimationFrame(()=>{let O=Number(getComputedStyle(v).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3;O===0&&(O=Number(getComputedStyle(v).animationDuration.replace("s",""))*1e3),d.show(),v.__x_transition.nextFrame=requestAnimationFrame(()=>{d.end(),setTimeout(v.__x_transition.finish,O)})})}function X(v){return!Array.isArray(v)&&!isNaN(v)}function Z(v){let d=!1;return function(){d||(d=!0,v.apply(this,arguments))}}function ne(v,d,h,T,R){P(d,"x-for");let O=typeof h=="function"?de(v.evaluateReturnExpression(d,h)):de(h),A=_e(v,d,O,R),j=d;A.forEach((F,V)=>{let W=ie(O,F,V,A,R()),Y=ee(v,d,V,W),J=Se(j.nextElementSibling,Y);J?(delete J.__x_for_key,J.__x_for=W,v.updateElements(J,()=>J.__x_for)):(J=we(d,j),k(J,()=>{},()=>{},v,T),J.__x_for=W,v.initializeElements(J,()=>J.__x_for)),j=J,j.__x_for_key=Y}),Ce(j,v)}function de(v){let d=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,h=/^\(|\)$/g,T=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,R=String(v).match(T);if(!R)return;let O={};O.items=R[2].trim();let A=R[1].trim().replace(h,""),j=A.match(d);return j?(O.item=A.replace(d,"").trim(),O.index=j[1].trim(),j[2]&&(O.collection=j[2].trim())):O.item=A,O}function ie(v,d,h,T,R){let O=R?C({},R):{};return O[v.item]=d,v.index&&(O[v.index]=h),v.collection&&(O[v.collection]=T),O}function ee(v,d,h,T){let R=n(d,v,"bind").filter(O=>O.value==="key")[0];return R?v.evaluateReturnExpression(d,R.expression,()=>T):h}function _e(v,d,h,T){let R=n(d,v,"if")[0];if(R&&!v.evaluateReturnExpression(d,R.expression))return[];let O=v.evaluateReturnExpression(d,h.items,T);return X(O)&&O>=0&&(O=Array.from(Array(O).keys(),A=>A+1)),O}function we(v,d){let h=document.importNode(v.content,!0);return d.parentElement.insertBefore(h,d.nextElementSibling),d.nextElementSibling}function Se(v,d){if(!v||v.__x_for_key===void 0)return;if(v.__x_for_key===d)return v;let h=v;for(;h;){if(h.__x_for_key===d)return h.parentElement.insertBefore(h,v);h=h.nextElementSibling&&h.nextElementSibling.__x_for_key!==void 0?h.nextElementSibling:!1}}function Ce(v,d){for(var h=v.nextElementSibling&&v.nextElementSibling.__x_for_key!==void 0?v.nextElementSibling:!1;h;){let T=h,R=h.nextElementSibling;L(h,()=>{T.remove()},()=>{},d),h=R&&R.__x_for_key!==void 0?R:!1}}function he(v,d,h,T,R,O,A){var j=v.evaluateReturnExpression(d,T,R);if(h==="value"){if(se.ignoreFocusedForValueBinding&&document.activeElement.isSameNode(d))return;if(j===void 0&&String(T).match(/\./)&&(j=""),d.type==="radio")d.attributes.value===void 0&&O==="bind"?d.value=j:O!=="bind"&&(d.checked=b(d.value,j));else if(d.type==="checkbox")typeof j!="boolean"&&![null,void 0].includes(j)&&O==="bind"?d.value=String(j):O!=="bind"&&(Array.isArray(j)?d.checked=j.some(F=>b(F,d.value)):d.checked=!!j);else if(d.tagName==="SELECT")re(d,j);else{if(d.value===j)return;d.value=j}}else if(h==="class")if(Array.isArray(j)){let F=d.__x_original_classes||[];d.setAttribute("class",f(F.concat(j)).join(" "))}else if(typeof j=="object")Object.keys(j).sort((V,W)=>j[V]-j[W]).forEach(V=>{j[V]?_(V).forEach(W=>d.classList.add(W)):_(V).forEach(W=>d.classList.remove(W))});else{let F=d.__x_original_classes||[],V=j?_(j):[];d.setAttribute("class",f(F.concat(V)).join(" "))}else h=A.includes("camel")?y(h):h,[null,void 0,!1].includes(j)?d.removeAttribute(h):p(h)?te(d,h,h):te(d,h,j)}function te(v,d,h){v.getAttribute(d)!=h&&v.setAttribute(d,h)}function re(v,d){let h=[].concat(d).map(T=>T+"");Array.from(v.options).forEach(T=>{T.selected=h.includes(T.value||T.text)})}function me(v,d,h){d===void 0&&String(h).match(/\./)&&(d=""),v.textContent=d}function q(v,d,h,T){d.innerHTML=v.evaluateReturnExpression(d,h,T)}function ve(v,d,h,T,R=!1){let O=()=>{d.style.display="none",d.__x_is_shown=!1},A=()=>{d.style.length===1&&d.style.display==="none"?d.removeAttribute("style"):d.style.removeProperty("display"),d.__x_is_shown=!0};if(R===!0){h?A():O();return}let j=(F,V)=>{h?((d.style.display==="none"||d.__x_transition)&&k(d,()=>{A()},V,v),F(()=>{})):d.style.display!=="none"?L(d,()=>{F(()=>{O()})},V,v):F(()=>{})};if(T.includes("immediate")){j(F=>F(),()=>{});return}v.showDirectiveLastElement&&!v.showDirectiveLastElement.contains(d)&&v.executeAndClearRemainingShowDirectiveStack(),v.showDirectiveStack.push(j),v.showDirectiveLastElement=d}function Te(v,d,h,T,R){P(d,"x-if");let O=d.nextElementSibling&&d.nextElementSibling.__x_inserted_me===!0;if(h&&(!O||d.__x_transition)){let A=document.importNode(d.content,!0);d.parentElement.insertBefore(A,d.nextElementSibling),k(d.nextElementSibling,()=>{},()=>{},v,T),v.initializeElements(d.nextElementSibling,R),d.nextElementSibling.__x_inserted_me=!0}else!h&&O&&L(d.nextElementSibling,()=>{d.nextElementSibling.remove()},()=>{},v,T)}function ye(v,d,h,T,R,O={}){let A={passive:T.includes("passive")};T.includes("camel")&&(h=y(h));let j,F;if(T.includes("away")?(F=document,j=V=>{d.contains(V.target)||d.offsetWidth<1&&d.offsetHeight<1||(Pe(v,R,V,O),T.includes("once")&&document.removeEventListener(h,j,A))}):(F=T.includes("window")?window:T.includes("document")?document:d,j=V=>{if((F===window||F===document)&&!document.body.contains(d)){F.removeEventListener(h,j,A);return}ct(h)&&ut(V,T)||(T.includes("prevent")&&V.preventDefault(),T.includes("stop")&&V.stopPropagation(),(!T.includes("self")||V.target===d)&&Pe(v,R,V,O).then(Y=>{Y===!1?V.preventDefault():T.includes("once")&&F.removeEventListener(h,j,A)}))}),T.includes("debounce")){let V=T[T.indexOf("debounce")+1]||"invalid-wait",W=X(V.split("ms")[0])?Number(V.split("ms")[0]):250;j=a(j,W)}F.addEventListener(h,j,A)}function Pe(v,d,h,T){return v.evaluateCommandExpression(h.target,d,()=>C(C({},T()),{},{$event:h}))}function ct(v){return["keydown","keyup"].includes(v)}function ut(v,d){let h=d.filter(O=>!["window","document","prevent","stop"].includes(O));if(h.includes("debounce")){let O=h.indexOf("debounce");h.splice(O,X((h[O+1]||"invalid-wait").split("ms")[0])?2:1)}if(h.length===0||h.length===1&&h[0]===Ve(v.key))return!1;let R=["ctrl","shift","alt","meta","cmd","super"].filter(O=>h.includes(O));return h=h.filter(O=>!R.includes(O)),!(R.length>0&&R.filter(A=>((A==="cmd"||A==="super")&&(A="meta"),v[`${A}Key`])).length===R.length&&h[0]===Ve(v.key))}function Ve(v){switch(v){case"/":return"slash";case" ":case"Spacebar":return"space";default:return v&&w(v)}}function dt(v,d,h,T,R){var O=d.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(d.type)||h.includes("lazy")?"change":"input";let A=`${T} = rightSideOfExpression($event, ${T})`;ye(v,d,O,h,A,()=>C(C({},R()),{},{rightSideOfExpression:lt(d,h,T)}))}function lt(v,d,h){return v.type==="radio"&&(v.hasAttribute("name")||v.setAttribute("name",h)),(T,R)=>{if(T instanceof CustomEvent&&T.detail)return T.detail;if(v.type==="checkbox")if(Array.isArray(R)){let O=d.includes("number")?Oe(T.target.value):T.target.value;return T.target.checked?R.concat([O]):R.filter(A=>!b(A,O))}else return T.target.checked;else{if(v.tagName.toLowerCase()==="select"&&v.multiple)return d.includes("number")?Array.from(T.target.selectedOptions).map(O=>{let A=O.value||O.text;return Oe(A)}):Array.from(T.target.selectedOptions).map(O=>O.value||O.text);{let O=T.target.value;return d.includes("number")?Oe(O):d.includes("trim")?O.trim():O}}}}function Oe(v){let d=v?parseFloat(v):null;return X(d)?d:v}let{isArray:xe}=Array,{getPrototypeOf:Me,create:Ot,defineProperty:oe,defineProperties:xt,isExtensible:$e,getOwnPropertyDescriptor:le,getOwnPropertyNames:De,getOwnPropertySymbols:Ie,preventExtensions:We,hasOwnProperty:ge}=Object,{push:Mt,concat:je,map:Dt}=Array.prototype;function ae(v){return v===void 0}function Ee(v){return typeof v=="function"}function pt(v){return typeof v=="object"}let He=new WeakMap;function Ke(v,d){He.set(v,d)}let pe=v=>He.get(v)||v;function Ae(v,d){return v.valueIsObservable(d)?v.getProxy(d):d}function ft(v){return ge.call(v,"value")&&(v.value=pe(v.value)),v}function Je(v,d,h){je.call(De(h),Ie(h)).forEach(R=>{let O=le(h,R);O.configurable||(O=ke(v,O,Ae)),oe(d,R,O)}),We(d)}class ht{constructor(d,h){this.originalTarget=h,this.membrane=d}get(d,h){let{originalTarget:T,membrane:R}=this,O=T[h],{valueObserved:A}=R;return A(T,h),R.getProxy(O)}set(d,h,T){let{originalTarget:R,membrane:{valueMutated:O}}=this;return R[h]!==T?(R[h]=T,O(R,h)):h==="length"&&xe(R)&&O(R,h),!0}deleteProperty(d,h){let{originalTarget:T,membrane:{valueMutated:R}}=this;return delete T[h],R(T,h),!0}apply(d,h,T){}construct(d,h,T){}has(d,h){let{originalTarget:T,membrane:{valueObserved:R}}=this;return R(T,h),h in T}ownKeys(d){let{originalTarget:h}=this;return je.call(De(h),Ie(h))}isExtensible(d){let h=$e(d);if(!h)return h;let{originalTarget:T,membrane:R}=this,O=$e(T);return O||Je(R,d,T),O}setPrototypeOf(d,h){}getPrototypeOf(d){let{originalTarget:h}=this;return Me(h)}getOwnPropertyDescriptor(d,h){let{originalTarget:T,membrane:R}=this,{valueObserved:O}=this.membrane;O(T,h);let A=le(T,h);if(ae(A))return A;let j=le(d,h);return ae(j)?(A=ke(R,A,Ae),A.configurable||oe(d,h,A),A):j}preventExtensions(d){let{originalTarget:h,membrane:T}=this;return Je(T,d,h),We(h),!0}defineProperty(d,h,T){let{originalTarget:R,membrane:O}=this,{valueMutated:A}=O,{configurable:j}=T;if(ge.call(T,"writable")&&!ge.call(T,"value")){let F=le(R,h);T.value=F.value}return oe(R,h,ft(T)),j===!1&&oe(d,h,ke(O,T,Ae)),A(R,h),!0}}function mt(v,d){return v.valueIsObservable(d)?v.getReadOnlyProxy(d):d}class vt{constructor(d,h){this.originalTarget=h,this.membrane=d}get(d,h){let{membrane:T,originalTarget:R}=this,O=R[h],{valueObserved:A}=T;return A(R,h),T.getReadOnlyProxy(O)}set(d,h,T){return!1}deleteProperty(d,h){return!1}apply(d,h,T){}construct(d,h,T){}has(d,h){let{originalTarget:T,membrane:{valueObserved:R}}=this;return R(T,h),h in T}ownKeys(d){let{originalTarget:h}=this;return je.call(De(h),Ie(h))}setPrototypeOf(d,h){}getOwnPropertyDescriptor(d,h){let{originalTarget:T,membrane:R}=this,{valueObserved:O}=R;O(T,h);let A=le(T,h);if(ae(A))return A;let j=le(d,h);return ae(j)?(A=ke(R,A,mt),ge.call(A,"set")&&(A.set=void 0),A.configurable||oe(d,h,A),A):j}preventExtensions(d){return!1}defineProperty(d,h,T){return!1}}function Ye(v){let d;return xe(v)?d=[]:pt(v)&&(d={}),d}let yt=Object.prototype;function Xe(v){if(v===null||typeof v!="object")return!1;if(xe(v))return!0;let d=Me(v);return d===yt||d===null||Me(d)===null}let qe=(v,d)=>{},Ze=(v,d)=>{},Qe=v=>v;function ke(v,d,h){let{set:T,get:R}=d;return ge.call(d,"value")?d.value=h(v,d.value):(ae(R)||(d.get=function(){return h(v,R.call(pe(this)))}),ae(T)||(d.set=function(O){T.call(pe(this),v.unwrapProxy(O))})),d}class gt{constructor(d){if(this.valueDistortion=Qe,this.valueMutated=Ze,this.valueObserved=qe,this.valueIsObservable=Xe,this.objectGraph=new WeakMap,!ae(d)){let{valueDistortion:h,valueMutated:T,valueObserved:R,valueIsObservable:O}=d;this.valueDistortion=Ee(h)?h:Qe,this.valueMutated=Ee(T)?T:Ze,this.valueObserved=Ee(R)?R:qe,this.valueIsObservable=Ee(O)?O:Xe}}getProxy(d){let h=pe(d),T=this.valueDistortion(h);if(this.valueIsObservable(T)){let R=this.getReactiveState(h,T);return R.readOnly===d?d:R.reactive}return T}getReadOnlyProxy(d){d=pe(d);let h=this.valueDistortion(d);return this.valueIsObservable(h)?this.getReactiveState(d,h).readOnly:h}unwrapProxy(d){return pe(d)}getReactiveState(d,h){let{objectGraph:T}=this,R=T.get(h);if(R)return R;let O=this;return R={get reactive(){let A=new ht(O,h),j=new Proxy(Ye(h),A);return Ke(j,d),oe(this,"reactive",{value:j}),j},get readOnly(){let A=new vt(O,h),j=new Proxy(Ye(h),A);return Ke(j,d),oe(this,"readOnly",{value:j}),j}},T.set(h,R),R}}function bt(v,d){let h=new gt({valueMutated(T,R){d(T,R)}});return{data:h.getProxy(v),membrane:h}}function _t(v,d){let h=v.unwrapProxy(d),T={};return Object.keys(h).forEach(R=>{["$el","$refs","$nextTick","$watch"].includes(R)||(T[R]=h[R])}),T}class fe{constructor(d,h=null){this.$el=d;let T=this.$el.getAttribute("x-data"),R=T===""?"{}":T,O=this.$el.getAttribute("x-init"),A={$el:this.$el},j=h?h.$el:this.$el;Object.entries(se.magicProperties).forEach(([Y,J])=>{Object.defineProperty(A,`$${Y}`,{get:function(){return J(j)}})}),this.unobservedData=h?h.getUnobservedData():l(d,R,A);let{membrane:F,data:V}=this.wrapDataInObservable(this.unobservedData);this.$data=V,this.membrane=F,this.unobservedData.$el=this.$el,this.unobservedData.$refs=this.getRefsProxy(),this.nextTickStack=[],this.unobservedData.$nextTick=Y=>{this.nextTickStack.push(Y)},this.watchers={},this.unobservedData.$watch=(Y,J)=>{this.watchers[Y]||(this.watchers[Y]=[]),this.watchers[Y].push(J)},Object.entries(se.magicProperties).forEach(([Y,J])=>{Object.defineProperty(this.unobservedData,`$${Y}`,{get:function(){return J(j,this.$el)}})}),this.showDirectiveStack=[],this.showDirectiveLastElement,h||se.onBeforeComponentInitializeds.forEach(Y=>Y(this));var W;O&&!h&&(this.pauseReactivity=!0,W=this.evaluateReturnExpression(this.$el,O),this.pauseReactivity=!1),this.initializeElements(this.$el,()=>{},h),this.listenForNewElementsToInitialize(),typeof W=="function"&&W.call(this.$data),h||setTimeout(()=>{se.onComponentInitializeds.forEach(Y=>Y(this))},0)}getUnobservedData(){return _t(this.membrane,this.$data)}wrapDataInObservable(d){var h=this;let T=a(function(){h.updateElements(h.$el)},0);return bt(d,(R,O)=>{h.watchers[O]?h.watchers[O].forEach(A=>A(R[O])):Array.isArray(R)?Object.keys(h.watchers).forEach(A=>{let j=A.split(".");O!=="length"&&j.reduce((F,V)=>(Object.is(R,F[V])&&h.watchers[A].forEach(W=>W(R)),F[V]),h.unobservedData)}):Object.keys(h.watchers).filter(A=>A.includes(".")).forEach(A=>{let j=A.split(".");O===j[j.length-1]&&j.reduce((F,V)=>(Object.is(R,F)&&h.watchers[A].forEach(W=>W(R[O])),F[V]),h.unobservedData)}),!h.pauseReactivity&&T()})}walkAndSkipNestedComponents(d,h,T=()=>{}){e(d,R=>R.hasAttribute("x-data")&&!R.isSameNode(this.$el)?(R.__x||T(R),!1):h(R))}initializeElements(d,h=()=>{},T=!1){this.walkAndSkipNestedComponents(d,R=>{if(R.__x_for_key!==void 0||R.__x_inserted_me!==void 0)return!1;this.initializeElement(R,h,!T)},R=>{T||(R.__x=new fe(R))}),this.executeAndClearRemainingShowDirectiveStack(),this.executeAndClearNextTickStack(d)}initializeElement(d,h,T=!0){d.hasAttribute("class")&&n(d,this).length>0&&(d.__x_original_classes=_(d.getAttribute("class"))),T&&this.registerListeners(d,h),this.resolveBoundAttributes(d,!0,h)}updateElements(d,h=()=>{}){this.walkAndSkipNestedComponents(d,T=>{if(T.__x_for_key!==void 0&&!T.isSameNode(this.$el))return!1;this.updateElement(T,h)},T=>{T.__x=new fe(T)}),this.executeAndClearRemainingShowDirectiveStack(),this.executeAndClearNextTickStack(d)}executeAndClearNextTickStack(d){d===this.$el&&this.nextTickStack.length>0&&requestAnimationFrame(()=>{for(;this.nextTickStack.length>0;)this.nextTickStack.shift()()})}executeAndClearRemainingShowDirectiveStack(){this.showDirectiveStack.reverse().map(d=>new Promise((h,T)=>{d(h,T)})).reduce((d,h)=>d.then(()=>h.then(T=>{T()})),Promise.resolve(()=>{})).catch(d=>{if(d!==M)throw d}),this.showDirectiveStack=[],this.showDirectiveLastElement=void 0}updateElement(d,h){this.resolveBoundAttributes(d,!1,h)}registerListeners(d,h){n(d,this).forEach(({type:T,value:R,modifiers:O,expression:A})=>{switch(T){case"on":ye(this,d,R,O,A,h);break;case"model":dt(this,d,O,A,h);break}})}resolveBoundAttributes(d,h=!1,T){let R=n(d,this);R.forEach(({type:O,value:A,modifiers:j,expression:F})=>{switch(O){case"model":he(this,d,"value",F,T,O,j);break;case"bind":if(d.tagName.toLowerCase()==="template"&&A==="key")return;he(this,d,A,F,T,O,j);break;case"text":var V=this.evaluateReturnExpression(d,F,T);me(d,V,F);break;case"html":q(this,d,F,T);break;case"show":var V=this.evaluateReturnExpression(d,F,T);ve(this,d,V,j,h);break;case"if":if(R.some(W=>W.type==="for"))return;var V=this.evaluateReturnExpression(d,F,T);Te(this,d,V,h,T);break;case"for":ne(this,d,F,h,T);break;case"cloak":d.removeAttribute("x-cloak");break}})}evaluateReturnExpression(d,h,T=()=>{}){return l(d,h,this.$data,C(C({},T()),{},{$dispatch:this.getDispatchFunction(d)}))}evaluateCommandExpression(d,h,T=()=>{}){return s(d,h,this.$data,C(C({},T()),{},{$dispatch:this.getDispatchFunction(d)}))}getDispatchFunction(d){return(h,T={})=>{d.dispatchEvent(new CustomEvent(h,{detail:T,bubbles:!0}))}}listenForNewElementsToInitialize(){let d=this.$el,h={childList:!0,attributes:!0,subtree:!0};new MutationObserver(R=>{for(let O=0;O<R.length;O++){let A=R[O].target.closest("[x-data]");if(!!(A&&A.isSameNode(this.$el))){if(R[O].type==="attributes"&&R[O].attributeName==="x-data"){let j=R[O].target.getAttribute("x-data")||"{}",F=l(this.$el,j,{$el:this.$el});Object.keys(F).forEach(V=>{this.$data[V]!==F[V]&&(this.$data[V]=F[V])})}R[O].addedNodes.length>0&&R[O].addedNodes.forEach(j=>{if(!(j.nodeType!==1||j.__x_inserted_me)){if(j.matches("[x-data]")&&!j.__x){j.__x=new fe(j);return}this.initializeElements(j)}})}}}).observe(d,h)}getRefsProxy(){var d=this,h={};return new Proxy(h,{get(T,R){if(R==="$isAlpineProxy")return!0;var O;return d.walkAndSkipNestedComponents(d.$el,A=>{A.hasAttribute("x-ref")&&A.getAttribute("x-ref")===R&&(O=A)}),O}})}}let se={version:"2.8.2",pauseMutationObserver:!1,magicProperties:{},onComponentInitializeds:[],onBeforeComponentInitializeds:[],ignoreFocusedForValueBinding:!1,start:function(){return Ue(this,null,function*(){m()||(yield g()),this.discoverComponents(d=>{this.initializeComponent(d)}),document.addEventListener("turbolinks:load",()=>{this.discoverUninitializedComponents(d=>{this.initializeComponent(d)})}),this.listenForNewUninitializedComponentsAtRunTime()})},discoverComponents:function(d){document.querySelectorAll("[x-data]").forEach(T=>{d(T)})},discoverUninitializedComponents:function(d,h=null){let T=(h||document).querySelectorAll("[x-data]");Array.from(T).filter(R=>R.__x===void 0).forEach(R=>{d(R)})},listenForNewUninitializedComponentsAtRunTime:function(){let d=document.querySelector("body"),h={childList:!0,attributes:!0,subtree:!0};new MutationObserver(R=>{if(!this.pauseMutationObserver)for(let O=0;O<R.length;O++)R[O].addedNodes.length>0&&R[O].addedNodes.forEach(A=>{A.nodeType===1&&(A.parentElement&&A.parentElement.closest("[x-data]")||this.discoverUninitializedComponents(j=>{this.initializeComponent(j)},A.parentElement))})}).observe(d,h)},initializeComponent:function(d){if(!d.__x)try{d.__x=new fe(d)}catch(h){setTimeout(()=>{throw h},0)}},clone:function(d,h){h.__x||(h.__x=new fe(h,d))},addMagicProperty:function(d,h){this.magicProperties[d]=h},onComponentInitialized:function(d){this.onComponentInitializeds.push(d)},onBeforeComponentInitialized:function(d){this.onBeforeComponentInitializeds.push(d)}};return m()||(window.Alpine=se,window.deferLoadingAlpine?window.deferLoadingAlpine(function(){window.Alpine.start()}):window.Alpine.start()),se})});var nt=Be((be,Re)=>{(function(D,I){"use strict";var C="0.7.28",g="",f="?",m="function",b="undefined",P="object",w="string",y="major",e="model",a="name",o="type",c="vendor",l="version",s="architecture",u="console",r="mobile",n="tablet",t="smarttv",i="wearable",p="embedded",S=255,_={extend:function(U,B){var z={};for(var G in U)B[G]&&B[G].length%2==0?z[G]=B[G].concat(U[G]):z[G]=U[G];return z},has:function(U,B){return typeof U===w?B.toLowerCase().indexOf(U.toLowerCase())!==-1:!1},lowerize:function(U){return U.toLowerCase()},major:function(U){return typeof U===w?U.replace(/[^\d\.]/g,"").split(".")[0]:I},trim:function(U,B){return U=U.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),typeof B===b?U:U.substring(0,S)}},E={rgx:function(U,B){for(var z=0,G,K,$,H,Q,X;z<B.length&&!Q;){var Z=B[z],ne=B[z+1];for(G=K=0;G<Z.length&&!Q;)if(Q=Z[G++].exec(U),Q)for($=0;$<ne.length;$++)X=Q[++K],H=ne[$],typeof H===P&&H.length>0?H.length==2?typeof H[1]==m?this[H[0]]=H[1].call(this,X):this[H[0]]=H[1]:H.length==3?typeof H[1]===m&&!(H[1].exec&&H[1].test)?this[H[0]]=X?H[1].call(this,X,H[2]):I:this[H[0]]=X?X.replace(H[1],H[2]):I:H.length==4&&(this[H[0]]=X?H[3].call(this,X.replace(H[1],H[2])):I):this[H]=X||I;z+=2}},str:function(U,B){for(var z in B)if(typeof B[z]===P&&B[z].length>0){for(var G=0;G<B[z].length;G++)if(_.has(B[z][G],U))return z===f?I:z}else if(_.has(B[z],U))return z===f?I:z;return U}},x={browser:{oldSafari:{version:{"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{"0.1":"12.","21":"13.","31":"14.","39":"15.","41":"16.","42":"17.","44":"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0","2000":"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0","7":"NT 6.1","8":"NT 6.2","8.1":"NT 6.3","10":["NT 6.4","NT 10.0"],RT:"ARM"}}}},M={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[l,[a,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[l,[a,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],[a,l],[/opios[\/\s]+([\w\.]+)/i],[l,[a,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[l,[a,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[a,l],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[l,[a,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[l,[a,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[l,[a,"WeChat"]],[/konqueror\/([\w\.]+)/i],[l,[a,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[l,[a,"IE"]],[/yabrowser\/([\w\.]+)/i],[l,[a,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[a,/(.+)/,"$1 Secure Browser"],l],[/focus\/([\w\.]+)/i],[l,[a,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[l,[a,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[l,[a,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[l,[a,"Dolphin"]],[/coast\/([\w\.]+)/i],[l,[a,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[l,[a,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[l,[a,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[a,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[a,/(.+)/,"$1 Browser"],l],[/(comodo_dragon)\/([\w\.]+)/i],[[a,/_/g," "],l],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[a,l],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[a],[/;fbav\/([\w\.]+);/i],[l,[a,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[a,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],[a,l],[/\bgsa\/([\w\.]+)\s.*safari\//i],[l,[a,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[l,[a,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[a,"Chrome WebView"],l],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[l,[a,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[a,l],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[l,[a,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[l,a],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[a,[l,E.str,x.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[a,l],[/(navigator|netscape)\/([\w\.-]+)/i],[[a,"Netscape"],l],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],[l,[a,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[a,l]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[s,"amd64"]],[/(ia32(?=;))/i],[[s,_.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[s,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[s,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[s,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[s,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[s,/ower/,"",_.lowerize]],[/(sun4\w)[;\)]/i],[[s,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[s,_.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],[e,[c,"Samsung"],[o,n]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[e,[c,"Samsung"],[o,r]],[/\((ip(?:hone|od)[\s\w]*);/i],[e,[c,"Apple"],[o,r]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[e,[c,"Apple"],[o,n]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],[e,[c,"Huawei"],[o,n]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[e,[c,"Huawei"],[o,r]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[e,/_/g," "],[c,"Xiaomi"],[o,r]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[e,/_/g," "],[c,"Xiaomi"],[o,n]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[e,[c,"OPPO"],[o,r]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[e,[c,"Vivo"],[o,r]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[e,[c,"Realme"],[o,r]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],[e,[c,"Motorola"],[o,r]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[e,[c,"Motorola"],[o,n]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[e,[c,"LG"],[o,n]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],[e,[c,"LG"],[o,r]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],[e,[c,"Lenovo"],[o,n]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[[e,/_/g," "],[c,"Nokia"],[o,r]],[/droid.+;\s(pixel\sc)[\s)]/i],[e,[c,"Google"],[o,n]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[e,[c,"Google"],[o,r]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[e,[c,"Sony"],[o,r]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[e,"Xperia Tablet"],[c,"Sony"],[o,n]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],[e,[c,"OnePlus"],[o,r]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[e,[c,"Amazon"],[o,n]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[e,"Fire Phone"],[c,"Amazon"],[o,r]],[/\((playbook);[\w\s\),;-]+(rim)/i],[e,c,[o,n]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],[e,[c,"BlackBerry"],[o,r]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],[e,[c,"ASUS"],[o,n]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[e,[c,"ASUS"],[o,r]],[/(nexus\s9)/i],[e,[c,"HTC"],[o,n]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[c,[e,/_/g," "],[o,r]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[e,[c,"Acer"],[o,n]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[e,[c,"Meizu"],[o,r]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[c,e,[o,r]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[c,e,[o,n]],[/\s(surface\sduo)\s/i],[e,[c,"Microsoft"],[o,n]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],[e,[c,"Fairphone"],[o,r]],[/\s(u304aa)\sbuild/i],[e,[c,"AT&T"],[o,r]],[/sie-(\w*)/i],[e,[c,"Siemens"],[o,r]],[/[;\/]\s?(rct\w+)\sbuild/i],[e,[c,"RCA"],[o,n]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[e,[c,"Dell"],[o,n]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[e,[c,"Verizon"],[o,n]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[e,[c,"Barnes & Noble"],[o,n]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[e,[c,"NuVision"],[o,n]],[/;\s(k88)\sbuild/i],[e,[c,"ZTE"],[o,n]],[/;\s(nx\d{3}j)\sbuild/i],[e,[c,"ZTE"],[o,r]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[e,[c,"Swiss"],[o,r]],[/[;\/]\s?(zur\d{3})\sbuild/i],[e,[c,"Swiss"],[o,n]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[e,[c,"Zeki"],[o,n]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[c,"Dragon Touch"],e,[o,n]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[e,[c,"Insignia"],[o,n]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[e,[c,"NextBook"],[o,n]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[c,"Voice"],e,[o,r]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[c,"LvTel"],e,[o,r]],[/;\s(ph-1)\s/i],[e,[c,"Essential"],[o,r]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[e,[c,"Envizen"],[o,n]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[e,[c,"MachSpeed"],[o,n]],[/[;\/]\s?tu_(1491)\sbuild/i],[e,[c,"Rotor"],[o,n]],[/(shield[\w\s]+)\sbuild/i],[e,[c,"Nvidia"],[o,n]],[/(sprint)\s(\w+)/i],[c,e,[o,r]],[/(kin\.[onetw]{3})/i],[[e,/\./g," "],[c,"Microsoft"],[o,r]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[e,[c,"Zebra"],[o,n]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[e,[c,"Zebra"],[o,r]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[c,e,[o,u]],[/droid.+;\s(shield)\sbuild/i],[e,[c,"Nvidia"],[o,u]],[/(playstation\s[345portablevi]+)/i],[e,[c,"Sony"],[o,u]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[e,[c,"Microsoft"],[o,u]],[/smart-tv.+(samsung)/i],[c,[o,t]],[/hbbtv.+maple;(\d+)/i],[[e,/^/,"SmartTV"],[c,"Samsung"],[o,t]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[[c,"LG"],[o,t]],[/(apple)\s?tv/i],[c,[e,"Apple TV"],[o,t]],[/crkey/i],[[e,"Chromecast"],[c,"Google"],[o,t]],[/droid.+aft([\w])(\sbuild\/|\))/i],[e,[c,"Amazon"],[o,t]],[/\(dtv[\);].+(aquos)/i],[e,[c,"Sharp"],[o,t]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[c,_.trim],[e,_.trim],[o,t]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[o,t]],[/((pebble))app\/[\d\.]+\s/i],[c,e,[o,i]],[/droid.+;\s(glass)\s\d/i],[e,[c,"Google"],[o,i]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[e,[c,"Zebra"],[o,i]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],[c,[o,p]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[e,[o,r]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[e,[o,n]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[o,_.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[e,[c,"Generic"]],[/(phone)/i],[[o,r]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[l,[a,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[l,[a,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[a,l],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[l,a]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[a,l],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[a,[l,E.str,x.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[a,"Windows"],[l,E.str,x.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[l,/_/g,"."],[a,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[a,"Mac OS"],[l,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],[a,l],[/\(bb(10);/i],[l,[a,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[l,[a,"Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[a,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[l,[a,"webOS"]],[/crkey\/([\d\.]+)/i],[l,[a,"Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[a,"Chromium OS"],l],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],[a,l],[/(sunos)\s?([\w\.\d]*)/i],[[a,"Solaris"],l],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[a,l]]},k=function(U,B){if(typeof U=="object"&&(B=U,U=I),!(this instanceof k))return new k(U,B).getResult();var z=U||(typeof D!="undefined"&&D.navigator&&D.navigator.userAgent?D.navigator.userAgent:g),G=B?_.extend(M,B):M;return this.getBrowser=function(){var K={name:I,version:I};return E.rgx.call(K,z,G.browser),K.major=_.major(K.version),K},this.getCPU=function(){var K={architecture:I};return E.rgx.call(K,z,G.cpu),K},this.getDevice=function(){var K={vendor:I,model:I,type:I};return E.rgx.call(K,z,G.device),K},this.getEngine=function(){var K={name:I,version:I};return E.rgx.call(K,z,G.engine),K},this.getOS=function(){var K={name:I,version:I};return E.rgx.call(K,z,G.os),K},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return z},this.setUA=function(K){return z=typeof K===w&&K.length>S?_.trim(K,S):K,this},this.setUA(z),this};k.VERSION=C,k.BROWSER={NAME:a,MAJOR:y,VERSION:l},k.CPU={ARCHITECTURE:s},k.DEVICE={MODEL:e,VENDOR:c,TYPE:o,CONSOLE:u,MOBILE:r,SMARTTV:t,TABLET:n,WEARABLE:i,EMBEDDED:p},k.ENGINE={NAME:a,VERSION:l},k.OS={NAME:a,VERSION:l},typeof be!==b?(typeof Re!==b&&Re.exports&&(be=Re.exports=k),be.UAParser=k):typeof define=="function"&&define.amd?define(function(){return k}):typeof D!="undefined"&&(D.UAParser=k);var L=typeof D!="undefined"&&(D.jQuery||D.Zepto);if(L&&!L.ua){var N=new k;L.ua=N.getResult(),L.ua.get=function(){return N.getUA()},L.ua.set=function(U){N.setUA(U);var B=N.getResult();for(var z in B)L.ua[z]=B[z]}}})(typeof window=="object"?window:be)});var it=Be((rt,Ge)=>{parcelRequire=function(D,I,C,g){var f,m=typeof parcelRequire=="function"&&parcelRequire,b=typeof require=="function"&&require;function P(e,a){if(!I[e]){if(!D[e]){var o=typeof parcelRequire=="function"&&parcelRequire;if(!a&&o)return o(e,!0);if(m)return m(e,!0);if(b&&typeof e=="string")return b(e);var c=new Error("Cannot find module '"+e+"'");throw c.code="MODULE_NOT_FOUND",c}s.resolve=function(u){return D[e][1][u]||u},s.cache={};var l=I[e]=new P.Module(e);D[e][0].call(l.exports,s,l,l.exports,this)}return I[e].exports;function s(u){return P(s.resolve(u))}}P.isParcelRequire=!0,P.Module=function(e){this.id=e,this.bundle=P,this.exports={}},P.modules=D,P.cache=I,P.parent=m,P.register=function(e,a){D[e]=[function(o,c){c.exports=a},{}]};for(var w=0;w<C.length;w++)try{P(C[w])}catch(e){f||(f=e)}if(C.length){var y=P(C[C.length-1]);typeof rt=="object"&&typeof Ge!="undefined"?Ge.exports=y:typeof define=="function"&&define.amd?define(function(){return y}):g&&(this[g]=y)}if(parcelRequire=P,f)throw f;return P}({EgBh:[function(D,I,C){var g={};g.useBlobBuilder=function(){try{return new Blob([]),!1}catch(b){return!0}}(),g.useArrayBufferView=!g.useBlobBuilder&&function(){try{return new Blob([new Uint8Array([])]).size===0}catch(b){return!0}}(),I.exports.binaryFeatures=g;var f=I.exports.BlobBuilder;function m(){this._pieces=[],this._parts=[]}typeof window!="undefined"&&(f=I.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),m.prototype.append=function(b){typeof b=="number"?this._pieces.push(b):(this.flush(),this._parts.push(b))},m.prototype.flush=function(){if(this._pieces.length>0){var b=new Uint8Array(this._pieces);g.useArrayBufferView||(b=b.buffer),this._parts.push(b),this._pieces=[]}},m.prototype.getBuffer=function(){if(this.flush(),g.useBlobBuilder){for(var b=new f,P=0,w=this._parts.length;P<w;P++)b.append(this._parts[P]);return b.getBlob()}return new Blob(this._parts)},I.exports.BufferBuilder=m},{}],kdPp:[function(D,I,C){var g=D("./bufferbuilder").BufferBuilder,f=D("./bufferbuilder").binaryFeatures,m={unpack:function(e){return new b(e).unpack()},pack:function(e){var a=new P;return a.pack(e),a.getBuffer()}};function b(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function P(){this.bufferBuilder=new g}function w(e){var a=e.charCodeAt(0);return a<=2047?"00":a<=65535?"000":a<=2097151?"0000":a<=67108863?"00000":"000000"}function y(e){return e.length>600?new Blob([e]).size:e.replace(/[^\u0000-\u007F]/g,w).length}I.exports=m,b.prototype.unpack=function(){var e,a=this.unpack_uint8();if(a<128)return a;if((224^a)<32)return(224^a)-32;if((e=160^a)<=15)return this.unpack_raw(e);if((e=176^a)<=15)return this.unpack_string(e);if((e=144^a)<=15)return this.unpack_array(e);if((e=128^a)<=15)return this.unpack_map(e);switch(a){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:case 213:case 214:case 215:return;case 216:return e=this.unpack_uint16(),this.unpack_string(e);case 217:return e=this.unpack_uint32(),this.unpack_string(e);case 218:return e=this.unpack_uint16(),this.unpack_raw(e);case 219:return e=this.unpack_uint32(),this.unpack_raw(e);case 220:return e=this.unpack_uint16(),this.unpack_array(e);case 221:return e=this.unpack_uint32(),this.unpack_array(e);case 222:return e=this.unpack_uint16(),this.unpack_map(e);case 223:return e=this.unpack_uint32(),this.unpack_map(e)}},b.prototype.unpack_uint8=function(){var e=255&this.dataView[this.index];return this.index++,e},b.prototype.unpack_uint16=function(){var e=this.read(2),a=256*(255&e[0])+(255&e[1]);return this.index+=2,a},b.prototype.unpack_uint32=function(){var e=this.read(4),a=256*(256*(256*e[0]+e[1])+e[2])+e[3];return this.index+=4,a},b.prototype.unpack_uint64=function(){var e=this.read(8),a=256*(256*(256*(256*(256*(256*(256*e[0]+e[1])+e[2])+e[3])+e[4])+e[5])+e[6])+e[7];return this.index+=8,a},b.prototype.unpack_int8=function(){var e=this.unpack_uint8();return e<128?e:e-256},b.prototype.unpack_int16=function(){var e=this.unpack_uint16();return e<32768?e:e-65536},b.prototype.unpack_int32=function(){var e=this.unpack_uint32();return e<Math.pow(2,31)?e:e-Math.pow(2,32)},b.prototype.unpack_int64=function(){var e=this.unpack_uint64();return e<Math.pow(2,63)?e:e-Math.pow(2,64)},b.prototype.unpack_raw=function(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+e+" "+this.length);var a=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,a},b.prototype.unpack_string=function(e){for(var a,o,c=this.read(e),l=0,s="";l<e;)(a=c[l])<128?(s+=String.fromCharCode(a),l++):(192^a)<32?(o=(192^a)<<6|63&c[l+1],s+=String.fromCharCode(o),l+=2):(o=(15&a)<<12|(63&c[l+1])<<6|63&c[l+2],s+=String.fromCharCode(o),l+=3);return this.index+=e,s},b.prototype.unpack_array=function(e){for(var a=new Array(e),o=0;o<e;o++)a[o]=this.unpack();return a},b.prototype.unpack_map=function(e){for(var a={},o=0;o<e;o++){var c=this.unpack(),l=this.unpack();a[c]=l}return a},b.prototype.unpack_float=function(){var e=this.unpack_uint32(),a=(e>>23&255)-127;return(e>>31==0?1:-1)*(8388607&e|8388608)*Math.pow(2,a-23)},b.prototype.unpack_double=function(){var e=this.unpack_uint32(),a=this.unpack_uint32(),o=(e>>20&2047)-1023;return(e>>31==0?1:-1)*((1048575&e|1048576)*Math.pow(2,o-20)+a*Math.pow(2,o-52))},b.prototype.read=function(e){var a=this.index;if(a+e<=this.length)return this.dataView.subarray(a,a+e);throw new Error("BinaryPackFailure: read index out of range")},P.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},P.prototype.pack=function(e){var a=typeof e;if(a==="string")this.pack_string(e);else if(a==="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(a==="boolean")e===!0?this.bufferBuilder.append(195):e===!1&&this.bufferBuilder.append(194);else if(a==="undefined")this.bufferBuilder.append(192);else{if(a!=="object")throw new Error('Type "'+a+'" not yet supported');if(e===null)this.bufferBuilder.append(192);else{var o=e.constructor;if(o==Array)this.pack_array(e);else if(o==Blob||o==File||e instanceof Blob||e instanceof File)this.pack_bin(e);else if(o==ArrayBuffer)f.useArrayBufferView?this.pack_bin(new Uint8Array(e)):this.pack_bin(e);else if("BYTES_PER_ELEMENT"in e)f.useArrayBufferView?this.pack_bin(new Uint8Array(e.buffer)):this.pack_bin(e.buffer);else if(o==Object||o.toString().startsWith("class"))this.pack_object(e);else if(o==Date)this.pack_string(e.toString());else{if(typeof e.toBinaryPack!="function")throw new Error('Type "'+o.toString()+'" not yet supported');this.bufferBuilder.append(e.toBinaryPack())}}}this.bufferBuilder.flush()},P.prototype.pack_bin=function(e){var a=e.length||e.byteLength||e.size;if(a<=15)this.pack_uint8(160+a);else if(a<=65535)this.bufferBuilder.append(218),this.pack_uint16(a);else{if(!(a<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(a)}this.bufferBuilder.append(e)},P.prototype.pack_string=function(e){var a=y(e);if(a<=15)this.pack_uint8(176+a);else if(a<=65535)this.bufferBuilder.append(216),this.pack_uint16(a);else{if(!(a<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(a)}this.bufferBuilder.append(e)},P.prototype.pack_array=function(e){var a=e.length;if(a<=15)this.pack_uint8(144+a);else if(a<=65535)this.bufferBuilder.append(220),this.pack_uint16(a);else{if(!(a<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(a)}for(var o=0;o<a;o++)this.pack(e[o])},P.prototype.pack_integer=function(e){if(e>=-32&&e<=127)this.bufferBuilder.append(255&e);else if(e>=0&&e<=255)this.bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this.bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this.bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this.bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this.bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this.bufferBuilder.append(211),this.pack_int64(e);else{if(!(e>=0&&e<=18446744073709552e3))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(e)}},P.prototype.pack_double=function(e){var a=0;e<0&&(a=1,e=-e);var o=Math.floor(Math.log(e)/Math.LN2),c=e/Math.pow(2,o)-1,l=Math.floor(c*Math.pow(2,52)),s=Math.pow(2,32),u=a<<31|o+1023<<20|l/s&1048575,r=l%s;this.bufferBuilder.append(203),this.pack_int32(u),this.pack_int32(r)},P.prototype.pack_object=function(e){var a=Object.keys(e).length;if(a<=15)this.pack_uint8(128+a);else if(a<=65535)this.bufferBuilder.append(222),this.pack_uint16(a);else{if(!(a<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(a)}for(var o in e)e.hasOwnProperty(o)&&(this.pack(o),this.pack(e[o]))},P.prototype.pack_uint8=function(e){this.bufferBuilder.append(e)},P.prototype.pack_uint16=function(e){this.bufferBuilder.append(e>>8),this.bufferBuilder.append(255&e)},P.prototype.pack_uint32=function(e){var a=4294967295&e;this.bufferBuilder.append((4278190080&a)>>>24),this.bufferBuilder.append((16711680&a)>>>16),this.bufferBuilder.append((65280&a)>>>8),this.bufferBuilder.append(255&a)},P.prototype.pack_uint64=function(e){var a=e/Math.pow(2,32),o=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&a)>>>24),this.bufferBuilder.append((16711680&a)>>>16),this.bufferBuilder.append((65280&a)>>>8),this.bufferBuilder.append(255&a),this.bufferBuilder.append((4278190080&o)>>>24),this.bufferBuilder.append((16711680&o)>>>16),this.bufferBuilder.append((65280&o)>>>8),this.bufferBuilder.append(255&o)},P.prototype.pack_int8=function(e){this.bufferBuilder.append(255&e)},P.prototype.pack_int16=function(e){this.bufferBuilder.append((65280&e)>>8),this.bufferBuilder.append(255&e)},P.prototype.pack_int32=function(e){this.bufferBuilder.append(e>>>24&255),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)},P.prototype.pack_int64=function(e){var a=Math.floor(e/Math.pow(2,32)),o=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&a)>>>24),this.bufferBuilder.append((16711680&a)>>>16),this.bufferBuilder.append((65280&a)>>>8),this.bufferBuilder.append(255&a),this.bufferBuilder.append((4278190080&o)>>>24),this.bufferBuilder.append((16711680&o)>>>16),this.bufferBuilder.append((65280&o)>>>8),this.bufferBuilder.append(255&o)}},{"./bufferbuilder":"EgBh"}],iSxC:[function(D,I,C){"use strict";function g(n,t,i){return t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}function f(n){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}Object.defineProperty(C,"__esModule",{value:!0}),C.extractVersion=P,C.wrapPeerConnectionEvent=w,C.disableLog=y,C.disableWarnings=e,C.log=a,C.deprecated=o,C.detectBrowser=c,C.compactObject=s,C.walkStats=u,C.filterStats=r;var m=!0,b=!0;function P(n,t,i){var p=n.match(t);return p&&p.length>=i&&parseInt(p[i],10)}function w(n,t,i){if(n.RTCPeerConnection){var p=n.RTCPeerConnection.prototype,S=p.addEventListener;p.addEventListener=function(E,x){if(E!==t)return S.apply(this,arguments);var M=function(k){var L=i(k);L&&(x.handleEvent?x.handleEvent(L):x(L))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(x,M),S.apply(this,[E,M])};var _=p.removeEventListener;p.removeEventListener=function(E,x){if(E!==t||!this._eventMap||!this._eventMap[t])return _.apply(this,arguments);if(!this._eventMap[t].has(x))return _.apply(this,arguments);var M=this._eventMap[t].get(x);return this._eventMap[t].delete(x),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,_.apply(this,[E,M])},Object.defineProperty(p,"on"+t,{get:function(){return this["_on"+t]},set:function(E){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),E&&this.addEventListener(t,this["_on"+t]=E)},enumerable:!0,configurable:!0})}}function y(n){return typeof n!="boolean"?new Error("Argument type: "+f(n)+". Please use a boolean."):(m=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function e(n){return typeof n!="boolean"?new Error("Argument type: "+f(n)+". Please use a boolean."):(b=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function a(){if((typeof window=="undefined"?"undefined":f(window))==="object"){if(m)return;typeof console!="undefined"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function o(n,t){b&&console.warn(n+" is deprecated, please use "+t+" instead.")}function c(n){var t={browser:null,version:null};if(n===void 0||!n.navigator)return t.browser="Not a browser.",t;var{navigator:i}=n;if(i.mozGetUserMedia)t.browser="firefox",t.version=P(i.userAgent,/Firefox\/(\d+)\./,1);else if(i.webkitGetUserMedia||n.isSecureContext===!1&&n.webkitRTCPeerConnection&&!n.RTCIceGatherer)t.browser="chrome",t.version=P(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(i.mediaDevices&&i.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=P(i.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!n.RTCPeerConnection||!i.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=P(i.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype}return t}function l(n){return Object.prototype.toString.call(n)==="[object Object]"}function s(n){return l(n)?Object.keys(n).reduce(function(t,i){var p=l(n[i]),S=p?s(n[i]):n[i],_=p&&!Object.keys(S).length;return S===void 0||_?t:Object.assign(t,g({},i,S))},{}):n}function u(n,t,i){t&&!i.has(t.id)&&(i.set(t.id,t),Object.keys(t).forEach(function(p){p.endsWith("Id")?u(n,n.get(t[p]),i):p.endsWith("Ids")&&t[p].forEach(function(S){u(n,n.get(S),i)})}))}function r(n,t,i){var p=i?"outbound-rtp":"inbound-rtp",S=new Map;if(t===null)return S;var _=[];return n.forEach(function(E){E.type==="track"&&E.trackIdentifier===t.id&&_.push(E)}),_.forEach(function(E){n.forEach(function(x){x.type===p&&x.trackId===E.id&&u(n,x,S)})}),S}},{}],s6SN:[function(D,I,C){"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.shimGetUserMedia=w;var g=m(D("../utils.js"));function f(){if(typeof WeakMap!="function")return null;var y=new WeakMap;return f=function(){return y},y}function m(y){if(y&&y.__esModule)return y;if(y===null||typeof y!="object"&&typeof y!="function")return{default:y};var e=f();if(e&&e.has(y))return e.get(y);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in y)if(Object.prototype.hasOwnProperty.call(y,c)){var l=o?Object.getOwnPropertyDescriptor(y,c):null;l&&(l.get||l.set)?Object.defineProperty(a,c,l):a[c]=y[c]}return a.default=y,e&&e.set(y,a),a}function b(y){return(b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(y)}var P=g.log;function w(y,e){var a=y&&y.navigator;if(a.mediaDevices){var o=function(u){if(b(u)!=="object"||u.mandatory||u.optional)return u;var r={};return Object.keys(u).forEach(function(n){if(n!=="require"&&n!=="advanced"&&n!=="mediaSource"){var t=b(u[n])==="object"?u[n]:{ideal:u[n]};t.exact!==void 0&&typeof t.exact=="number"&&(t.min=t.max=t.exact);var i=function(S,_){return S?S+_.charAt(0).toUpperCase()+_.slice(1):_==="deviceId"?"sourceId":_};if(t.ideal!==void 0){r.optional=r.optional||[];var p={};typeof t.ideal=="number"?(p[i("min",n)]=t.ideal,r.optional.push(p),(p={})[i("max",n)]=t.ideal,r.optional.push(p)):(p[i("",n)]=t.ideal,r.optional.push(p))}t.exact!==void 0&&typeof t.exact!="number"?(r.mandatory=r.mandatory||{},r.mandatory[i("",n)]=t.exact):["min","max"].forEach(function(S){t[S]!==void 0&&(r.mandatory=r.mandatory||{},r.mandatory[i(S,n)]=t[S])})}}),u.advanced&&(r.optional=(r.optional||[]).concat(u.advanced)),r},c=function(u,r){if(e.version>=61)return r(u);if((u=JSON.parse(JSON.stringify(u)))&&b(u.audio)==="object"){var n=function(S,_,E){_ in S&&!(E in S)&&(S[E]=S[_],delete S[_])};n((u=JSON.parse(JSON.stringify(u))).audio,"autoGainControl","googAutoGainControl"),n(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=o(u.audio)}if(u&&b(u.video)==="object"){var t=u.video.facingMode;t=t&&(b(t)==="object"?t:{ideal:t});var i,p=e.version<66;if(t&&(t.exact==="user"||t.exact==="environment"||t.ideal==="user"||t.ideal==="environment")&&(!a.mediaDevices.getSupportedConstraints||!a.mediaDevices.getSupportedConstraints().facingMode||p)&&(delete u.video.facingMode,t.exact==="environment"||t.ideal==="environment"?i=["back","rear"]:t.exact!=="user"&&t.ideal!=="user"||(i=["front"]),i))return a.mediaDevices.enumerateDevices().then(function(S){var _=(S=S.filter(function(E){return E.kind==="videoinput"})).find(function(E){return i.some(function(x){return E.label.toLowerCase().includes(x)})});return!_&&S.length&&i.includes("back")&&(_=S[S.length-1]),_&&(u.video.deviceId=t.exact?{exact:_.deviceId}:{ideal:_.deviceId}),u.video=o(u.video),P("chrome: "+JSON.stringify(u)),r(u)});u.video=o(u.video)}return P("chrome: "+JSON.stringify(u)),r(u)},l=function(u){return e.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(a.getUserMedia=function(u,r,n){c(u,function(t){a.webkitGetUserMedia(t,r,function(i){n&&n(l(i))})})}.bind(a),a.mediaDevices.getUserMedia){var s=a.mediaDevices.getUserMedia.bind(a.mediaDevices);a.mediaDevices.getUserMedia=function(u){return c(u,function(r){return s(r).then(function(n){if(r.audio&&!n.getAudioTracks().length||r.video&&!n.getVideoTracks().length)throw n.getTracks().forEach(function(t){t.stop()}),new DOMException("","NotFoundError");return n},function(n){return Promise.reject(l(n))})})}}}}},{"../utils.js":"iSxC"}],VHa8:[function(D,I,C){"use strict";function g(f,m){f.navigator.mediaDevices&&"getDisplayMedia"in f.navigator.mediaDevices||f.navigator.mediaDevices&&(typeof m=="function"?f.navigator.mediaDevices.getDisplayMedia=function(b){return m(b).then(function(P){var w=b.video&&b.video.width,y=b.video&&b.video.height,e=b.video&&b.video.frameRate;return b.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:P,maxFrameRate:e||3}},w&&(b.video.mandatory.maxWidth=w),y&&(b.video.mandatory.maxHeight=y),f.navigator.mediaDevices.getUserMedia(b)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}Object.defineProperty(C,"__esModule",{value:!0}),C.shimGetDisplayMedia=g},{}],uI5X:[function(D,I,C){"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.shimMediaStream=e,C.shimOnTrack=a,C.shimGetSendersWithDtmf=o,C.shimGetStats=c,C.shimSenderReceiverGetStats=l,C.shimAddTrackRemoveTrackWithNative=s,C.shimAddTrackRemoveTrack=u,C.shimPeerConnection=r,C.fixNegotiationNeeded=n,Object.defineProperty(C,"shimGetUserMedia",{enumerable:!0,get:function(){return f.shimGetUserMedia}}),Object.defineProperty(C,"shimGetDisplayMedia",{enumerable:!0,get:function(){return m.shimGetDisplayMedia}});var g=P(D("../utils.js")),f=D("./getusermedia"),m=D("./getdisplaymedia");function b(){if(typeof WeakMap!="function")return null;var t=new WeakMap;return b=function(){return t},t}function P(t){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var i=b();if(i&&i.has(t))return i.get(t);var p={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in t)if(Object.prototype.hasOwnProperty.call(t,_)){var E=S?Object.getOwnPropertyDescriptor(t,_):null;E&&(E.get||E.set)?Object.defineProperty(p,_,E):p[_]=t[_]}return p.default=t,i&&i.set(t,p),p}function w(t,i,p){return i in t?Object.defineProperty(t,i,{value:p,enumerable:!0,configurable:!0,writable:!0}):t[i]=p,t}function y(t){return(y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(t)}function e(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function a(t){if(y(t)!=="object"||!t.RTCPeerConnection||"ontrack"in t.RTCPeerConnection.prototype)g.wrapPeerConnectionEvent(t,"track",function(p){return p.transceiver||Object.defineProperty(p,"transceiver",{value:{receiver:p.receiver}}),p});else{Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(p){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=p)},enumerable:!0,configurable:!0});var i=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){var p=this;return this._ontrackpoly||(this._ontrackpoly=function(S){S.stream.addEventListener("addtrack",function(_){var E;E=t.RTCPeerConnection.prototype.getReceivers?p.getReceivers().find(function(M){return M.track&&M.track.id===_.track.id}):{track:_.track};var x=new Event("track");x.track=_.track,x.receiver=E,x.transceiver={receiver:E},x.streams=[S.stream],p.dispatchEvent(x)}),S.stream.getTracks().forEach(function(_){var E;E=t.RTCPeerConnection.prototype.getReceivers?p.getReceivers().find(function(M){return M.track&&M.track.id===_.id}):{track:_};var x=new Event("track");x.track=_,x.receiver=E,x.transceiver={receiver:E},x.streams=[S.stream],p.dispatchEvent(x)})},this.addEventListener("addstream",this._ontrackpoly)),i.apply(this,arguments)}}}function o(t){if(y(t)==="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){var i=function(M,k){return{track:k,get dtmf(){return this._dtmf===void 0&&(k.kind==="audio"?this._dtmf=M.createDTMFSender(k):this._dtmf=null),this._dtmf},_pc:M}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var p=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(M,k){var L=p.apply(this,arguments);return L||(L=i(this,M),this._senders.push(L)),L};var S=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(M){S.apply(this,arguments);var k=this._senders.indexOf(M);k!==-1&&this._senders.splice(k,1)}}var _=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(M){var k=this;this._senders=this._senders||[],_.apply(this,[M]),M.getTracks().forEach(function(L){k._senders.push(i(k,L))})};var E=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(M){var k=this;this._senders=this._senders||[],E.apply(this,[M]),M.getTracks().forEach(function(L){var N=k._senders.find(function(U){return U.track===L});N&&k._senders.splice(k._senders.indexOf(N),1)})}}else if(y(t)==="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){var x=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){var M=this,k=x.apply(this,[]);return k.forEach(function(L){return L._pc=M}),k},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function c(t){if(t.RTCPeerConnection){var i=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){var p=this,[S,_,E]=arguments;if(arguments.length>0&&typeof S=="function")return i.apply(this,arguments);if(i.length===0&&(arguments.length===0||typeof S!="function"))return i.apply(this,[]);var x=function(k){var L={};return k.result().forEach(function(N){var U={id:N.id,timestamp:N.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[N.type]||N.type};N.names().forEach(function(B){U[B]=N.stat(B)}),L[U.id]=U}),L},M=function(k){return new Map(Object.keys(k).map(function(L){return[L,k[L]]}))};return arguments.length>=2?i.apply(this,[function(k){_(M(x(k)))},S]):new Promise(function(k,L){i.apply(p,[function(N){k(M(x(N)))},L])}).then(_,E)}}}function l(t){if(y(t)==="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver){if(!("getStats"in t.RTCRtpSender.prototype)){var i=t.RTCPeerConnection.prototype.getSenders;i&&(t.RTCPeerConnection.prototype.getSenders=function(){var E=this,x=i.apply(this,[]);return x.forEach(function(M){return M._pc=E}),x});var p=t.RTCPeerConnection.prototype.addTrack;p&&(t.RTCPeerConnection.prototype.addTrack=function(){var E=p.apply(this,arguments);return E._pc=this,E}),t.RTCRtpSender.prototype.getStats=function(){var E=this;return this._pc.getStats().then(function(x){return g.filterStats(x,E.track,!0)})}}if(!("getStats"in t.RTCRtpReceiver.prototype)){var S=t.RTCPeerConnection.prototype.getReceivers;S&&(t.RTCPeerConnection.prototype.getReceivers=function(){var E=this,x=S.apply(this,[]);return x.forEach(function(M){return M._pc=E}),x}),g.wrapPeerConnectionEvent(t,"track",function(E){return E.receiver._pc=E.srcElement,E}),t.RTCRtpReceiver.prototype.getStats=function(){var E=this;return this._pc.getStats().then(function(x){return g.filterStats(x,E.track,!1)})}}if("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype){var _=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){var E,x,M,k=arguments[0];return this.getSenders().forEach(function(L){L.track===k&&(E?M=!0:E=L)}),this.getReceivers().forEach(function(L){return L.track===k&&(x?M=!0:x=L),L.track===k}),M||E&&x?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):E?E.getStats():x?x.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return _.apply(this,arguments)}}}}function s(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){var E=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(x){return E._shimmedLocalStreams[x][0]})};var i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(E,x){if(!x)return i.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var M=i.apply(this,arguments);return this._shimmedLocalStreams[x.id]?this._shimmedLocalStreams[x.id].indexOf(M)===-1&&this._shimmedLocalStreams[x.id].push(M):this._shimmedLocalStreams[x.id]=[x,M],M};var p=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(E){var x=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},E.getTracks().forEach(function(L){if(x.getSenders().find(function(N){return N.track===L}))throw new DOMException("Track already exists.","InvalidAccessError")});var M=this.getSenders();p.apply(this,arguments);var k=this.getSenders().filter(function(L){return M.indexOf(L)===-1});this._shimmedLocalStreams[E.id]=[E].concat(k)};var S=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(E){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[E.id],S.apply(this,arguments)};var _=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(E){var x=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},E&&Object.keys(this._shimmedLocalStreams).forEach(function(M){var k=x._shimmedLocalStreams[M].indexOf(E);k!==-1&&x._shimmedLocalStreams[M].splice(k,1),x._shimmedLocalStreams[M].length===1&&delete x._shimmedLocalStreams[M]}),_.apply(this,arguments)}}function u(t,i){if(t.RTCPeerConnection){if(t.RTCPeerConnection.prototype.addTrack&&i.version>=65)return s(t);var p=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){var k=this,L=p.apply(this);return this._reverseStreams=this._reverseStreams||{},L.map(function(N){return k._reverseStreams[N.id]})};var S=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(k){var L=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},k.getTracks().forEach(function(U){if(L.getSenders().find(function(B){return B.track===U}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[k.id]){var N=new t.MediaStream(k.getTracks());this._streams[k.id]=N,this._reverseStreams[N.id]=k,k=N}S.apply(this,[k])};var _=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(k){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},_.apply(this,[this._streams[k.id]||k]),delete this._reverseStreams[this._streams[k.id]?this._streams[k.id].id:k.id],delete this._streams[k.id]},t.RTCPeerConnection.prototype.addTrack=function(k,L){var N=this;if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var U=[].slice.call(arguments,1);if(U.length!==1||!U[0].getTracks().find(function(G){return G===k}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(G){return G.track===k}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var B=this._streams[L.id];if(B)B.addTrack(k),Promise.resolve().then(function(){N.dispatchEvent(new Event("negotiationneeded"))});else{var z=new t.MediaStream([k]);this._streams[L.id]=z,this._reverseStreams[z.id]=L,this.addStream(z)}return this.getSenders().find(function(G){return G.track===k})},["createOffer","createAnswer"].forEach(function(k){var L=t.RTCPeerConnection.prototype[k],N=w({},k,function(){var U=this,B=arguments;return arguments.length&&typeof arguments[0]=="function"?L.apply(this,[function(z){var G=M(U,z);B[0].apply(null,[G])},function(z){B[1]&&B[1].apply(null,z)},arguments[2]]):L.apply(this,arguments).then(function(z){return M(U,z)})});t.RTCPeerConnection.prototype[k]=N[k]});var E=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=(k=this,L=arguments[0],N=L.sdp,Object.keys(k._reverseStreams||[]).forEach(function(U){var B=k._reverseStreams[U],z=k._streams[B.id];N=N.replace(new RegExp(B.id,"g"),z.id)}),new RTCSessionDescription({type:L.type,sdp:N})),E.apply(this,arguments)):E.apply(this,arguments);var k,L,N};var x=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get:function(){var k=x.get.apply(this);return k.type===""?k:M(this,k)}}),t.RTCPeerConnection.prototype.removeTrack=function(k){var L,N=this;if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!k._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(k._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach(function(U){N._streams[U].getTracks().find(function(B){return k.track===B})&&(L=N._streams[U])}),L&&(L.getTracks().length===1?this.removeStream(this._reverseStreams[L.id]):L.removeTrack(k.track),this.dispatchEvent(new Event("negotiationneeded")))}}function M(k,L){var N=L.sdp;return Object.keys(k._reverseStreams||[]).forEach(function(U){var B=k._reverseStreams[U],z=k._streams[B.id];N=N.replace(new RegExp(z.id,"g"),B.id)}),new RTCSessionDescription({type:L.type,sdp:N})}}function r(t,i){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&i.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(p){var S=t.RTCPeerConnection.prototype[p],_=w({},p,function(){return arguments[0]=new(p==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),S.apply(this,arguments)});t.RTCPeerConnection.prototype[p]=_[p]})}function n(t,i){g.wrapPeerConnectionEvent(t,"negotiationneeded",function(p){var S=p.target;if(!(i.version<72||S.getConfiguration&&S.getConfiguration().sdpSemantics==="plan-b")||S.signalingState==="stable")return p})}},{"../utils.js":"iSxC","./getusermedia":"s6SN","./getdisplaymedia":"VHa8"}],NZ1C:[function(D,I,C){"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.filterIceServers=b;var g=m(D("../utils"));function f(){if(typeof WeakMap!="function")return null;var P=new WeakMap;return f=function(){return P},P}function m(P){if(P&&P.__esModule)return P;if(P===null||typeof P!="object"&&typeof P!="function")return{default:P};var w=f();if(w&&w.has(P))return w.get(P);var y={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in P)if(Object.prototype.hasOwnProperty.call(P,a)){var o=e?Object.getOwnPropertyDescriptor(P,a):null;o&&(o.get||o.set)?Object.defineProperty(y,a,o):y[a]=P[a]}return y.default=P,w&&w.set(P,y),y}function b(P,w){var y=!1;return(P=JSON.parse(JSON.stringify(P))).filter(function(e){if(e&&(e.urls||e.url)){var a=e.urls||e.url;e.url&&!e.urls&&g.deprecated("RTCIceServer.url","RTCIceServer.urls");var o=typeof a=="string";return o&&(a=[a]),a=a.filter(function(c){if(c.indexOf("stun:")===0)return!1;var l=c.startsWith("turn")&&!c.startsWith("turn:[")&&c.includes("transport=udp");return l&&!y?(y=!0,!0):l&&!y}),delete e.url,e.urls=o?a[0]:a,!!a.length}})}},{"../utils":"iSxC"}],YHvh:[function(D,I,C){"use strict";var g={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};g.localCName=g.generateIdentifier(),g.splitLines=function(f){return f.trim().split(`
`).map(function(m){return m.trim()})},g.splitSections=function(f){return f.split(`
m=`).map(function(m,b){return(b>0?"m="+m:m).trim()+`\r
`})},g.getDescription=function(f){var m=g.splitSections(f);return m&&m[0]},g.getMediaSections=function(f){var m=g.splitSections(f);return m.shift(),m},g.matchPrefix=function(f,m){return g.splitLines(f).filter(function(b){return b.indexOf(m)===0})},g.parseCandidate=function(f){for(var m,b={foundation:(m=f.indexOf("a=candidate:")===0?f.substring(12).split(" "):f.substring(10).split(" "))[0],component:parseInt(m[1],10),protocol:m[2].toLowerCase(),priority:parseInt(m[3],10),ip:m[4],address:m[4],port:parseInt(m[5],10),type:m[7]},P=8;P<m.length;P+=2)switch(m[P]){case"raddr":b.relatedAddress=m[P+1];break;case"rport":b.relatedPort=parseInt(m[P+1],10);break;case"tcptype":b.tcpType=m[P+1];break;case"ufrag":b.ufrag=m[P+1],b.usernameFragment=m[P+1];break;default:b[m[P]]=m[P+1]}return b},g.writeCandidate=function(f){var m=[];m.push(f.foundation),m.push(f.component),m.push(f.protocol.toUpperCase()),m.push(f.priority),m.push(f.address||f.ip),m.push(f.port);var b=f.type;return m.push("typ"),m.push(b),b!=="host"&&f.relatedAddress&&f.relatedPort&&(m.push("raddr"),m.push(f.relatedAddress),m.push("rport"),m.push(f.relatedPort)),f.tcpType&&f.protocol.toLowerCase()==="tcp"&&(m.push("tcptype"),m.push(f.tcpType)),(f.usernameFragment||f.ufrag)&&(m.push("ufrag"),m.push(f.usernameFragment||f.ufrag)),"candidate:"+m.join(" ")},g.parseIceOptions=function(f){return f.substr(14).split(" ")},g.parseRtpMap=function(f){var m=f.substr(9).split(" "),b={payloadType:parseInt(m.shift(),10)};return m=m[0].split("/"),b.name=m[0],b.clockRate=parseInt(m[1],10),b.channels=m.length===3?parseInt(m[2],10):1,b.numChannels=b.channels,b},g.writeRtpMap=function(f){var m=f.payloadType;f.preferredPayloadType!==void 0&&(m=f.preferredPayloadType);var b=f.channels||f.numChannels||1;return"a=rtpmap:"+m+" "+f.name+"/"+f.clockRate+(b!==1?"/"+b:"")+`\r
`},g.parseExtmap=function(f){var m=f.substr(9).split(" ");return{id:parseInt(m[0],10),direction:m[0].indexOf("/")>0?m[0].split("/")[1]:"sendrecv",uri:m[1]}},g.writeExtmap=function(f){return"a=extmap:"+(f.id||f.preferredId)+(f.direction&&f.direction!=="sendrecv"?"/"+f.direction:"")+" "+f.uri+`\r
`},g.parseFmtp=function(f){for(var m,b={},P=f.substr(f.indexOf(" ")+1).split(";"),w=0;w<P.length;w++)b[(m=P[w].trim().split("="))[0].trim()]=m[1];return b},g.writeFmtp=function(f){var m="",b=f.payloadType;if(f.preferredPayloadType!==void 0&&(b=f.preferredPayloadType),f.parameters&&Object.keys(f.parameters).length){var P=[];Object.keys(f.parameters).forEach(function(w){f.parameters[w]?P.push(w+"="+f.parameters[w]):P.push(w)}),m+="a=fmtp:"+b+" "+P.join(";")+`\r
`}return m},g.parseRtcpFb=function(f){var m=f.substr(f.indexOf(" ")+1).split(" ");return{type:m.shift(),parameter:m.join(" ")}},g.writeRtcpFb=function(f){var m="",b=f.payloadType;return f.preferredPayloadType!==void 0&&(b=f.preferredPayloadType),f.rtcpFeedback&&f.rtcpFeedback.length&&f.rtcpFeedback.forEach(function(P){m+="a=rtcp-fb:"+b+" "+P.type+(P.parameter&&P.parameter.length?" "+P.parameter:"")+`\r
`}),m},g.parseSsrcMedia=function(f){var m=f.indexOf(" "),b={ssrc:parseInt(f.substr(7,m-7),10)},P=f.indexOf(":",m);return P>-1?(b.attribute=f.substr(m+1,P-m-1),b.value=f.substr(P+1)):b.attribute=f.substr(m+1),b},g.parseSsrcGroup=function(f){var m=f.substr(13).split(" ");return{semantics:m.shift(),ssrcs:m.map(function(b){return parseInt(b,10)})}},g.getMid=function(f){var m=g.matchPrefix(f,"a=mid:")[0];if(m)return m.substr(6)},g.parseFingerprint=function(f){var m=f.substr(14).split(" ");return{algorithm:m[0].toLowerCase(),value:m[1]}},g.getDtlsParameters=function(f,m){return{role:"auto",fingerprints:g.matchPrefix(f+m,"a=fingerprint:").map(g.parseFingerprint)}},g.writeDtlsParameters=function(f,m){var b="a=setup:"+m+`\r
`;return f.fingerprints.forEach(function(P){b+="a=fingerprint:"+P.algorithm+" "+P.value+`\r
`}),b},g.parseCryptoLine=function(f){var m=f.substr(9).split(" ");return{tag:parseInt(m[0],10),cryptoSuite:m[1],keyParams:m[2],sessionParams:m.slice(3)}},g.writeCryptoLine=function(f){return"a=crypto:"+f.tag+" "+f.cryptoSuite+" "+(typeof f.keyParams=="object"?g.writeCryptoKeyParams(f.keyParams):f.keyParams)+(f.sessionParams?" "+f.sessionParams.join(" "):"")+`\r
`},g.parseCryptoKeyParams=function(f){if(f.indexOf("inline:")!==0)return null;var m=f.substr(7).split("|");return{keyMethod:"inline",keySalt:m[0],lifeTime:m[1],mkiValue:m[2]?m[2].split(":")[0]:void 0,mkiLength:m[2]?m[2].split(":")[1]:void 0}},g.writeCryptoKeyParams=function(f){return f.keyMethod+":"+f.keySalt+(f.lifeTime?"|"+f.lifeTime:"")+(f.mkiValue&&f.mkiLength?"|"+f.mkiValue+":"+f.mkiLength:"")},g.getCryptoParameters=function(f,m){return g.matchPrefix(f+m,"a=crypto:").map(g.parseCryptoLine)},g.getIceParameters=function(f,m){var b=g.matchPrefix(f+m,"a=ice-ufrag:")[0],P=g.matchPrefix(f+m,"a=ice-pwd:")[0];return b&&P?{usernameFragment:b.substr(12),password:P.substr(10)}:null},g.writeIceParameters=function(f){return"a=ice-ufrag:"+f.usernameFragment+`\r
a=ice-pwd:`+f.password+`\r
`},g.parseRtpParameters=function(f){for(var m={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},b=g.splitLines(f)[0].split(" "),P=3;P<b.length;P++){var w=b[P],y=g.matchPrefix(f,"a=rtpmap:"+w+" ")[0];if(y){var e=g.parseRtpMap(y),a=g.matchPrefix(f,"a=fmtp:"+w+" ");switch(e.parameters=a.length?g.parseFmtp(a[0]):{},e.rtcpFeedback=g.matchPrefix(f,"a=rtcp-fb:"+w+" ").map(g.parseRtcpFb),m.codecs.push(e),e.name.toUpperCase()){case"RED":case"ULPFEC":m.fecMechanisms.push(e.name.toUpperCase())}}}return g.matchPrefix(f,"a=extmap:").forEach(function(o){m.headerExtensions.push(g.parseExtmap(o))}),m},g.writeRtpDescription=function(f,m){var b="";b+="m="+f+" ",b+=m.codecs.length>0?"9":"0",b+=" UDP/TLS/RTP/SAVPF ",b+=m.codecs.map(function(w){return w.preferredPayloadType!==void 0?w.preferredPayloadType:w.payloadType}).join(" ")+`\r
`,b+=`c=IN IP4 0.0.0.0\r
`,b+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,m.codecs.forEach(function(w){b+=g.writeRtpMap(w),b+=g.writeFmtp(w),b+=g.writeRtcpFb(w)});var P=0;return m.codecs.forEach(function(w){w.maxptime>P&&(P=w.maxptime)}),P>0&&(b+="a=maxptime:"+P+`\r
`),b+=`a=rtcp-mux\r
`,m.headerExtensions&&m.headerExtensions.forEach(function(w){b+=g.writeExtmap(w)}),b},g.parseRtpEncodingParameters=function(f){var m,b=[],P=g.parseRtpParameters(f),w=P.fecMechanisms.indexOf("RED")!==-1,y=P.fecMechanisms.indexOf("ULPFEC")!==-1,e=g.matchPrefix(f,"a=ssrc:").map(function(l){return g.parseSsrcMedia(l)}).filter(function(l){return l.attribute==="cname"}),a=e.length>0&&e[0].ssrc,o=g.matchPrefix(f,"a=ssrc-group:FID").map(function(l){return l.substr(17).split(" ").map(function(s){return parseInt(s,10)})});o.length>0&&o[0].length>1&&o[0][0]===a&&(m=o[0][1]),P.codecs.forEach(function(l){if(l.name.toUpperCase()==="RTX"&&l.parameters.apt){var s={ssrc:a,codecPayloadType:parseInt(l.parameters.apt,10)};a&&m&&(s.rtx={ssrc:m}),b.push(s),w&&((s=JSON.parse(JSON.stringify(s))).fec={ssrc:a,mechanism:y?"red+ulpfec":"red"},b.push(s))}}),b.length===0&&a&&b.push({ssrc:a});var c=g.matchPrefix(f,"b=");return c.length&&(c=c[0].indexOf("b=TIAS:")===0?parseInt(c[0].substr(7),10):c[0].indexOf("b=AS:")===0?1e3*parseInt(c[0].substr(5),10)*.95-16e3:void 0,b.forEach(function(l){l.maxBitrate=c})),b},g.parseRtcpParameters=function(f){var m={},b=g.matchPrefix(f,"a=ssrc:").map(function(y){return g.parseSsrcMedia(y)}).filter(function(y){return y.attribute==="cname"})[0];b&&(m.cname=b.value,m.ssrc=b.ssrc);var P=g.matchPrefix(f,"a=rtcp-rsize");m.reducedSize=P.length>0,m.compound=P.length===0;var w=g.matchPrefix(f,"a=rtcp-mux");return m.mux=w.length>0,m},g.parseMsid=function(f){var m,b=g.matchPrefix(f,"a=msid:");if(b.length===1)return{stream:(m=b[0].substr(7).split(" "))[0],track:m[1]};var P=g.matchPrefix(f,"a=ssrc:").map(function(w){return g.parseSsrcMedia(w)}).filter(function(w){return w.attribute==="msid"});return P.length>0?{stream:(m=P[0].value.split(" "))[0],track:m[1]}:void 0},g.parseSctpDescription=function(f){var m,b=g.parseMLine(f),P=g.matchPrefix(f,"a=max-message-size:");P.length>0&&(m=parseInt(P[0].substr(19),10)),isNaN(m)&&(m=65536);var w=g.matchPrefix(f,"a=sctp-port:");if(w.length>0)return{port:parseInt(w[0].substr(12),10),protocol:b.fmt,maxMessageSize:m};if(g.matchPrefix(f,"a=sctpmap:").length>0){var y=g.matchPrefix(f,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(y[0],10),protocol:y[1],maxMessageSize:m}}},g.writeSctpDescription=function(f,m){var b=[];return b=f.protocol!=="DTLS/SCTP"?["m="+f.kind+" 9 "+f.protocol+" "+m.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+m.port+`\r
`]:["m="+f.kind+" 9 "+f.protocol+" "+m.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+m.port+" "+m.protocol+` 65535\r
`],m.maxMessageSize!==void 0&&b.push("a=max-message-size:"+m.maxMessageSize+`\r
`),b.join("")},g.generateSessionId=function(){return Math.random().toString().substr(2,21)},g.writeSessionBoilerplate=function(f,m,b){var P=m!==void 0?m:2;return`v=0\r
o=`+(b||"thisisadapterortc")+" "+(f||g.generateSessionId())+" "+P+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},g.writeMediaSection=function(f,m,b,P){var w=g.writeRtpDescription(f.kind,m);if(w+=g.writeIceParameters(f.iceGatherer.getLocalParameters()),w+=g.writeDtlsParameters(f.dtlsTransport.getLocalParameters(),b==="offer"?"actpass":"active"),w+="a=mid:"+f.mid+`\r
`,f.direction?w+="a="+f.direction+`\r
`:f.rtpSender&&f.rtpReceiver?w+=`a=sendrecv\r
`:f.rtpSender?w+=`a=sendonly\r
`:f.rtpReceiver?w+=`a=recvonly\r
`:w+=`a=inactive\r
`,f.rtpSender){var y="msid:"+P.id+" "+f.rtpSender.track.id+`\r
`;w+="a="+y,w+="a=ssrc:"+f.sendEncodingParameters[0].ssrc+" "+y,f.sendEncodingParameters[0].rtx&&(w+="a=ssrc:"+f.sendEncodingParameters[0].rtx.ssrc+" "+y,w+="a=ssrc-group:FID "+f.sendEncodingParameters[0].ssrc+" "+f.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return w+="a=ssrc:"+f.sendEncodingParameters[0].ssrc+" cname:"+g.localCName+`\r
`,f.rtpSender&&f.sendEncodingParameters[0].rtx&&(w+="a=ssrc:"+f.sendEncodingParameters[0].rtx.ssrc+" cname:"+g.localCName+`\r
`),w},g.getDirection=function(f,m){for(var b=g.splitLines(f),P=0;P<b.length;P++)switch(b[P]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return b[P].substr(2)}return m?g.getDirection(m):"sendrecv"},g.getKind=function(f){return g.splitLines(f)[0].split(" ")[0].substr(2)},g.isRejected=function(f){return f.split(" ",2)[1]==="0"},g.parseMLine=function(f){var m=g.splitLines(f)[0].substr(2).split(" ");return{kind:m[0],port:parseInt(m[1],10),protocol:m[2],fmt:m.slice(3).join(" ")}},g.parseOLine=function(f){var m=g.matchPrefix(f,"o=")[0].substr(2).split(" ");return{username:m[0],sessionId:m[1],sessionVersion:parseInt(m[2],10),netType:m[3],addressType:m[4],address:m[5]}},g.isValidSDP=function(f){if(typeof f!="string"||f.length===0)return!1;for(var m=g.splitLines(f),b=0;b<m.length;b++)if(m[b].length<2||m[b].charAt(1)!=="=")return!1;return!0},typeof I=="object"&&(I.exports=g)},{}],NJ2u:[function(D,I,C){"use strict";var g=D("sdp");function f(a){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[a.type]||a.type}function m(a,o,c,l,s){var u=g.writeRtpDescription(a.kind,o);if(u+=g.writeIceParameters(a.iceGatherer.getLocalParameters()),u+=g.writeDtlsParameters(a.dtlsTransport.getLocalParameters(),c==="offer"?"actpass":s||"active"),u+="a=mid:"+a.mid+`\r
`,a.rtpSender&&a.rtpReceiver?u+=`a=sendrecv\r
`:a.rtpSender?u+=`a=sendonly\r
`:a.rtpReceiver?u+=`a=recvonly\r
`:u+=`a=inactive\r
`,a.rtpSender){var r=a.rtpSender._initialTrackId||a.rtpSender.track.id;a.rtpSender._initialTrackId=r;var n="msid:"+(l?l.id:"-")+" "+r+`\r
`;u+="a="+n,u+="a=ssrc:"+a.sendEncodingParameters[0].ssrc+" "+n,a.sendEncodingParameters[0].rtx&&(u+="a=ssrc:"+a.sendEncodingParameters[0].rtx.ssrc+" "+n,u+="a=ssrc-group:FID "+a.sendEncodingParameters[0].ssrc+" "+a.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return u+="a=ssrc:"+a.sendEncodingParameters[0].ssrc+" cname:"+g.localCName+`\r
`,a.rtpSender&&a.sendEncodingParameters[0].rtx&&(u+="a=ssrc:"+a.sendEncodingParameters[0].rtx.ssrc+" cname:"+g.localCName+`\r
`),u}function b(a,o){var c=!1;return(a=JSON.parse(JSON.stringify(a))).filter(function(l){if(l&&(l.urls||l.url)){var s=l.urls||l.url;l.url&&!l.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var u=typeof s=="string";return u&&(s=[s]),s=s.filter(function(r){return r.indexOf("turn:")===0&&r.indexOf("transport=udp")!==-1&&r.indexOf("turn:[")===-1&&!c?(c=!0,!0):r.indexOf("stun:")===0&&o>=14393&&r.indexOf("?transport=udp")===-1}),delete l.url,l.urls=u?s[0]:s,!!s.length}})}function P(a,o){var c={codecs:[],headerExtensions:[],fecMechanisms:[]},l=function(u,r){u=parseInt(u,10);for(var n=0;n<r.length;n++)if(r[n].payloadType===u||r[n].preferredPayloadType===u)return r[n]},s=function(u,r,n,t){var i=l(u.parameters.apt,n),p=l(r.parameters.apt,t);return i&&p&&i.name.toLowerCase()===p.name.toLowerCase()};return a.codecs.forEach(function(u){for(var r=0;r<o.codecs.length;r++){var n=o.codecs[r];if(u.name.toLowerCase()===n.name.toLowerCase()&&u.clockRate===n.clockRate){if(u.name.toLowerCase()==="rtx"&&u.parameters&&n.parameters.apt&&!s(u,n,a.codecs,o.codecs))continue;(n=JSON.parse(JSON.stringify(n))).numChannels=Math.min(u.numChannels,n.numChannels),c.codecs.push(n),n.rtcpFeedback=n.rtcpFeedback.filter(function(t){for(var i=0;i<u.rtcpFeedback.length;i++)if(u.rtcpFeedback[i].type===t.type&&u.rtcpFeedback[i].parameter===t.parameter)return!0;return!1});break}}}),a.headerExtensions.forEach(function(u){for(var r=0;r<o.headerExtensions.length;r++){var n=o.headerExtensions[r];if(u.uri===n.uri){c.headerExtensions.push(n);break}}}),c}function w(a,o,c){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[o][a].indexOf(c)!==-1}function y(a,o){var c=a.getRemoteCandidates().find(function(l){return o.foundation===l.foundation&&o.ip===l.ip&&o.port===l.port&&o.priority===l.priority&&o.protocol===l.protocol&&o.type===l.type});return c||a.addRemoteCandidate(o),!c}function e(a,o){var c=new Error(o);return c.name=a,c.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[a],c}I.exports=function(a,o){function c(r,n){n.addTrack(r),n.dispatchEvent(new a.MediaStreamTrackEvent("addtrack",{track:r}))}function l(r,n,t,i){var p=new Event("track");p.track=n,p.receiver=t,p.transceiver={receiver:t},p.streams=i,a.setTimeout(function(){r._dispatchEvent("track",p)})}var s=function(r){var n=this,t=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(p){n[p]=t[p].bind(t)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",r=JSON.parse(JSON.stringify(r||{})),this.usingBundle=r.bundlePolicy==="max-bundle",r.rtcpMuxPolicy==="negotiate")throw e("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(r.rtcpMuxPolicy||(r.rtcpMuxPolicy="require"),r.iceTransportPolicy){case"all":case"relay":break;default:r.iceTransportPolicy="all"}switch(r.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:r.bundlePolicy="balanced"}if(r.iceServers=b(r.iceServers||[],o),this._iceGatherers=[],r.iceCandidatePoolSize)for(var i=r.iceCandidatePoolSize;i>0;i--)this._iceGatherers.push(new a.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}));else r.iceCandidatePoolSize=0;this._config=r,this.transceivers=[],this._sdpSessionId=g.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(s.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(s.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),s.prototype.onicecandidate=null,s.prototype.onaddstream=null,s.prototype.ontrack=null,s.prototype.onremovestream=null,s.prototype.onsignalingstatechange=null,s.prototype.oniceconnectionstatechange=null,s.prototype.onconnectionstatechange=null,s.prototype.onicegatheringstatechange=null,s.prototype.onnegotiationneeded=null,s.prototype.ondatachannel=null,s.prototype._dispatchEvent=function(r,n){this._isClosed||(this.dispatchEvent(n),typeof this["on"+r]=="function"&&this["on"+r](n))},s.prototype._emitGatheringStateChange=function(){var r=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",r)},s.prototype.getConfiguration=function(){return this._config},s.prototype.getLocalStreams=function(){return this.localStreams},s.prototype.getRemoteStreams=function(){return this.remoteStreams},s.prototype._createTransceiver=function(r,n){var t=this.transceivers.length>0,i={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:r,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&t)i.iceTransport=this.transceivers[0].iceTransport,i.dtlsTransport=this.transceivers[0].dtlsTransport;else{var p=this._createIceAndDtlsTransports();i.iceTransport=p.iceTransport,i.dtlsTransport=p.dtlsTransport}return n||this.transceivers.push(i),i},s.prototype.addTrack=function(r,n){if(this._isClosed)throw e("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var t;if(this.transceivers.find(function(p){return p.track===r}))throw e("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==r.kind||(t=this.transceivers[i]);return t||(t=this._createTransceiver(r.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(n)===-1&&this.localStreams.push(n),t.track=r,t.stream=n,t.rtpSender=new a.RTCRtpSender(r,t.dtlsTransport),t.rtpSender},s.prototype.addStream=function(r){var n=this;if(o>=15025)r.getTracks().forEach(function(i){n.addTrack(i,r)});else{var t=r.clone();r.getTracks().forEach(function(i,p){var S=t.getTracks()[p];i.addEventListener("enabled",function(_){S.enabled=_.enabled})}),t.getTracks().forEach(function(i){n.addTrack(i,t)})}},s.prototype.removeTrack=function(r){if(this._isClosed)throw e("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(r instanceof a.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find(function(i){return i.rtpSender===r});if(!n)throw e("InvalidAccessError","Sender was not created by this connection.");var t=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,this.transceivers.map(function(i){return i.stream}).indexOf(t)===-1&&this.localStreams.indexOf(t)>-1&&this.localStreams.splice(this.localStreams.indexOf(t),1),this._maybeFireNegotiationNeeded()},s.prototype.removeStream=function(r){var n=this;r.getTracks().forEach(function(t){var i=n.getSenders().find(function(p){return p.track===t});i&&n.removeTrack(i)})},s.prototype.getSenders=function(){return this.transceivers.filter(function(r){return!!r.rtpSender}).map(function(r){return r.rtpSender})},s.prototype.getReceivers=function(){return this.transceivers.filter(function(r){return!!r.rtpReceiver}).map(function(r){return r.rtpReceiver})},s.prototype._createIceGatherer=function(r,n){var t=this;if(n&&r>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new a.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[r].bufferedCandidateEvents=[],this.transceivers[r].bufferCandidates=function(p){var S=!p.candidate||Object.keys(p.candidate).length===0;i.state=S?"completed":"gathering",t.transceivers[r].bufferedCandidateEvents!==null&&t.transceivers[r].bufferedCandidateEvents.push(p)},i.addEventListener("localcandidate",this.transceivers[r].bufferCandidates),i},s.prototype._gather=function(r,n){var t=this,i=this.transceivers[n].iceGatherer;if(!i.onlocalcandidate){var p=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),i.onlocalcandidate=function(S){if(!(t.usingBundle&&n>0)){var _=new Event("icecandidate");_.candidate={sdpMid:r,sdpMLineIndex:n};var E=S.candidate,x=!E||Object.keys(E).length===0;if(x)i.state!=="new"&&i.state!=="gathering"||(i.state="completed");else{i.state==="new"&&(i.state="gathering"),E.component=1,E.ufrag=i.getLocalParameters().usernameFragment;var M=g.writeCandidate(E);_.candidate=Object.assign(_.candidate,g.parseCandidate(M)),_.candidate.candidate=M,_.candidate.toJSON=function(){return{candidate:_.candidate.candidate,sdpMid:_.candidate.sdpMid,sdpMLineIndex:_.candidate.sdpMLineIndex,usernameFragment:_.candidate.usernameFragment}}}var k=g.getMediaSections(t._localDescription.sdp);k[_.candidate.sdpMLineIndex]+=x?`a=end-of-candidates\r
`:"a="+_.candidate.candidate+`\r
`,t._localDescription.sdp=g.getDescription(t._localDescription.sdp)+k.join("");var L=t.transceivers.every(function(N){return N.iceGatherer&&N.iceGatherer.state==="completed"});t.iceGatheringState!=="gathering"&&(t.iceGatheringState="gathering",t._emitGatheringStateChange()),x||t._dispatchEvent("icecandidate",_),L&&(t._dispatchEvent("icecandidate",new Event("icecandidate")),t.iceGatheringState="complete",t._emitGatheringStateChange())}},a.setTimeout(function(){p.forEach(function(S){i.onlocalcandidate(S)})},0)}},s.prototype._createIceAndDtlsTransports=function(){var r=this,n=new a.RTCIceTransport(null);n.onicestatechange=function(){r._updateIceConnectionState(),r._updateConnectionState()};var t=new a.RTCDtlsTransport(n);return t.ondtlsstatechange=function(){r._updateConnectionState()},t.onerror=function(){Object.defineProperty(t,"state",{value:"failed",writable:!0}),r._updateConnectionState()},{iceTransport:n,dtlsTransport:t}},s.prototype._disposeIceAndDtlsTransports=function(r){var n=this.transceivers[r].iceGatherer;n&&(delete n.onlocalcandidate,delete this.transceivers[r].iceGatherer);var t=this.transceivers[r].iceTransport;t&&(delete t.onicestatechange,delete this.transceivers[r].iceTransport);var i=this.transceivers[r].dtlsTransport;i&&(delete i.ondtlsstatechange,delete i.onerror,delete this.transceivers[r].dtlsTransport)},s.prototype._transceive=function(r,n,t){var i=P(r.localCapabilities,r.remoteCapabilities);n&&r.rtpSender&&(i.encodings=r.sendEncodingParameters,i.rtcp={cname:g.localCName,compound:r.rtcpParameters.compound},r.recvEncodingParameters.length&&(i.rtcp.ssrc=r.recvEncodingParameters[0].ssrc),r.rtpSender.send(i)),t&&r.rtpReceiver&&i.codecs.length>0&&(r.kind==="video"&&r.recvEncodingParameters&&o<15019&&r.recvEncodingParameters.forEach(function(p){delete p.rtx}),r.recvEncodingParameters.length?i.encodings=r.recvEncodingParameters:i.encodings=[{}],i.rtcp={compound:r.rtcpParameters.compound},r.rtcpParameters.cname&&(i.rtcp.cname=r.rtcpParameters.cname),r.sendEncodingParameters.length&&(i.rtcp.ssrc=r.sendEncodingParameters[0].ssrc),r.rtpReceiver.receive(i))},s.prototype.setLocalDescription=function(r){var n,t,i=this;if(["offer","answer"].indexOf(r.type)===-1)return Promise.reject(e("TypeError",'Unsupported type "'+r.type+'"'));if(!w("setLocalDescription",r.type,i.signalingState)||i._isClosed)return Promise.reject(e("InvalidStateError","Can not set local "+r.type+" in state "+i.signalingState));if(r.type==="offer")n=g.splitSections(r.sdp),t=n.shift(),n.forEach(function(S,_){var E=g.parseRtpParameters(S);i.transceivers[_].localCapabilities=E}),i.transceivers.forEach(function(S,_){i._gather(S.mid,_)});else if(r.type==="answer"){n=g.splitSections(i._remoteDescription.sdp),t=n.shift();var p=g.matchPrefix(t,"a=ice-lite").length>0;n.forEach(function(S,_){var E=i.transceivers[_],x=E.iceGatherer,M=E.iceTransport,k=E.dtlsTransport,L=E.localCapabilities,N=E.remoteCapabilities;if(!(g.isRejected(S)&&g.matchPrefix(S,"a=bundle-only").length===0)&&!E.rejected){var U=g.getIceParameters(S,t),B=g.getDtlsParameters(S,t);p&&(B.role="server"),i.usingBundle&&_!==0||(i._gather(E.mid,_),M.state==="new"&&M.start(x,U,p?"controlling":"controlled"),k.state==="new"&&k.start(B));var z=P(L,N);i._transceive(E,z.codecs.length>0,!1)}})}return i._localDescription={type:r.type,sdp:r.sdp},r.type==="offer"?i._updateSignalingState("have-local-offer"):i._updateSignalingState("stable"),Promise.resolve()},s.prototype.setRemoteDescription=function(r){var n=this;if(["offer","answer"].indexOf(r.type)===-1)return Promise.reject(e("TypeError",'Unsupported type "'+r.type+'"'));if(!w("setRemoteDescription",r.type,n.signalingState)||n._isClosed)return Promise.reject(e("InvalidStateError","Can not set remote "+r.type+" in state "+n.signalingState));var t={};n.remoteStreams.forEach(function(M){t[M.id]=M});var i=[],p=g.splitSections(r.sdp),S=p.shift(),_=g.matchPrefix(S,"a=ice-lite").length>0,E=g.matchPrefix(S,"a=group:BUNDLE ").length>0;n.usingBundle=E;var x=g.matchPrefix(S,"a=ice-options:")[0];return n.canTrickleIceCandidates=!!x&&x.substr(14).split(" ").indexOf("trickle")>=0,p.forEach(function(M,k){var L=g.splitLines(M),N=g.getKind(M),U=g.isRejected(M)&&g.matchPrefix(M,"a=bundle-only").length===0,B=L[0].substr(2).split(" ")[2],z=g.getDirection(M,S),G=g.parseMsid(M),K=g.getMid(M)||g.generateIdentifier();if(U||N==="application"&&(B==="DTLS/SCTP"||B==="UDP/DTLS/SCTP"))n.transceivers[k]={mid:K,kind:N,protocol:B,rejected:!0};else{var $,H,Q,X,Z,ne,de,ie,ee;!U&&n.transceivers[k]&&n.transceivers[k].rejected&&(n.transceivers[k]=n._createTransceiver(N,!0));var _e,we,Se=g.parseRtpParameters(M);U||(_e=g.getIceParameters(M,S),(we=g.getDtlsParameters(M,S)).role="client"),de=g.parseRtpEncodingParameters(M);var Ce=g.parseRtcpParameters(M),he=g.matchPrefix(M,"a=end-of-candidates",S).length>0,te=g.matchPrefix(M,"a=candidate:").map(function(q){return g.parseCandidate(q)}).filter(function(q){return q.component===1});if((r.type==="offer"||r.type==="answer")&&!U&&E&&k>0&&n.transceivers[k]&&(n._disposeIceAndDtlsTransports(k),n.transceivers[k].iceGatherer=n.transceivers[0].iceGatherer,n.transceivers[k].iceTransport=n.transceivers[0].iceTransport,n.transceivers[k].dtlsTransport=n.transceivers[0].dtlsTransport,n.transceivers[k].rtpSender&&n.transceivers[k].rtpSender.setTransport(n.transceivers[0].dtlsTransport),n.transceivers[k].rtpReceiver&&n.transceivers[k].rtpReceiver.setTransport(n.transceivers[0].dtlsTransport)),r.type!=="offer"||U)r.type==="answer"&&!U&&(H=($=n.transceivers[k]).iceGatherer,Q=$.iceTransport,X=$.dtlsTransport,Z=$.rtpReceiver,ne=$.sendEncodingParameters,ie=$.localCapabilities,n.transceivers[k].recvEncodingParameters=de,n.transceivers[k].remoteCapabilities=Se,n.transceivers[k].rtcpParameters=Ce,te.length&&Q.state==="new"&&(!_&&!he||E&&k!==0?te.forEach(function(q){y($.iceTransport,q)}):Q.setRemoteCandidates(te)),E&&k!==0||(Q.state==="new"&&Q.start(H,_e,"controlling"),X.state==="new"&&X.start(we)),!P($.localCapabilities,$.remoteCapabilities).codecs.filter(function(q){return q.name.toLowerCase()==="rtx"}).length&&$.sendEncodingParameters[0].rtx&&delete $.sendEncodingParameters[0].rtx,n._transceive($,z==="sendrecv"||z==="recvonly",z==="sendrecv"||z==="sendonly"),!Z||z!=="sendrecv"&&z!=="sendonly"?delete $.rtpReceiver:(ee=Z.track,G?(t[G.stream]||(t[G.stream]=new a.MediaStream),c(ee,t[G.stream]),i.push([ee,Z,t[G.stream]])):(t.default||(t.default=new a.MediaStream),c(ee,t.default),i.push([ee,Z,t.default]))));else{($=n.transceivers[k]||n._createTransceiver(N)).mid=K,$.iceGatherer||($.iceGatherer=n._createIceGatherer(k,E)),te.length&&$.iceTransport.state==="new"&&(!he||E&&k!==0?te.forEach(function(q){y($.iceTransport,q)}):$.iceTransport.setRemoteCandidates(te)),ie=a.RTCRtpReceiver.getCapabilities(N),o<15019&&(ie.codecs=ie.codecs.filter(function(q){return q.name!=="rtx"})),ne=$.sendEncodingParameters||[{ssrc:1001*(2*k+2)}];var re,me=!1;z==="sendrecv"||z==="sendonly"?(me=!$.rtpReceiver,Z=$.rtpReceiver||new a.RTCRtpReceiver($.dtlsTransport,N),me&&(ee=Z.track,G&&G.stream==="-"||(G?(t[G.stream]||(t[G.stream]=new a.MediaStream,Object.defineProperty(t[G.stream],"id",{get:function(){return G.stream}})),Object.defineProperty(ee,"id",{get:function(){return G.track}}),re=t[G.stream]):(t.default||(t.default=new a.MediaStream),re=t.default)),re&&(c(ee,re),$.associatedRemoteMediaStreams.push(re)),i.push([ee,Z,re]))):$.rtpReceiver&&$.rtpReceiver.track&&($.associatedRemoteMediaStreams.forEach(function(q){var ve,Te,ye=q.getTracks().find(function(Pe){return Pe.id===$.rtpReceiver.track.id});ye&&(ve=ye,(Te=q).removeTrack(ve),Te.dispatchEvent(new a.MediaStreamTrackEvent("removetrack",{track:ve})))}),$.associatedRemoteMediaStreams=[]),$.localCapabilities=ie,$.remoteCapabilities=Se,$.rtpReceiver=Z,$.rtcpParameters=Ce,$.sendEncodingParameters=ne,$.recvEncodingParameters=de,n._transceive(n.transceivers[k],!1,me)}}}),n._dtlsRole===void 0&&(n._dtlsRole=r.type==="offer"?"active":"passive"),n._remoteDescription={type:r.type,sdp:r.sdp},r.type==="offer"?n._updateSignalingState("have-remote-offer"):n._updateSignalingState("stable"),Object.keys(t).forEach(function(M){var k=t[M];if(k.getTracks().length){if(n.remoteStreams.indexOf(k)===-1){n.remoteStreams.push(k);var L=new Event("addstream");L.stream=k,a.setTimeout(function(){n._dispatchEvent("addstream",L)})}i.forEach(function(N){var U=N[0],B=N[1];k.id===N[2].id&&l(n,U,B,[k])})}}),i.forEach(function(M){M[2]||l(n,M[0],M[1],[])}),a.setTimeout(function(){n&&n.transceivers&&n.transceivers.forEach(function(M){M.iceTransport&&M.iceTransport.state==="new"&&M.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),M.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},s.prototype.close=function(){this.transceivers.forEach(function(r){r.iceTransport&&r.iceTransport.stop(),r.dtlsTransport&&r.dtlsTransport.stop(),r.rtpSender&&r.rtpSender.stop(),r.rtpReceiver&&r.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},s.prototype._updateSignalingState=function(r){this.signalingState=r;var n=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",n)},s.prototype._maybeFireNegotiationNeeded=function(){var r=this;this.signalingState==="stable"&&this.needNegotiation!==!0&&(this.needNegotiation=!0,a.setTimeout(function(){if(r.needNegotiation){r.needNegotiation=!1;var n=new Event("negotiationneeded");r._dispatchEvent("negotiationneeded",n)}},0))},s.prototype._updateIceConnectionState=function(){var r,n={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(i){i.iceTransport&&!i.rejected&&n[i.iceTransport.state]++}),r="new",n.failed>0?r="failed":n.checking>0?r="checking":n.disconnected>0?r="disconnected":n.new>0?r="new":n.connected>0?r="connected":n.completed>0&&(r="completed"),r!==this.iceConnectionState){this.iceConnectionState=r;var t=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",t)}},s.prototype._updateConnectionState=function(){var r,n={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(i){i.iceTransport&&i.dtlsTransport&&!i.rejected&&(n[i.iceTransport.state]++,n[i.dtlsTransport.state]++)}),n.connected+=n.completed,r="new",n.failed>0?r="failed":n.connecting>0?r="connecting":n.disconnected>0?r="disconnected":n.new>0?r="new":n.connected>0&&(r="connected"),r!==this.connectionState){this.connectionState=r;var t=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",t)}},s.prototype.createOffer=function(){var r=this;if(r._isClosed)return Promise.reject(e("InvalidStateError","Can not call createOffer after close"));var n=r.transceivers.filter(function(_){return _.kind==="audio"}).length,t=r.transceivers.filter(function(_){return _.kind==="video"}).length,i=arguments[0];if(i){if(i.mandatory||i.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");i.offerToReceiveAudio!==void 0&&(n=i.offerToReceiveAudio===!0?1:i.offerToReceiveAudio===!1?0:i.offerToReceiveAudio),i.offerToReceiveVideo!==void 0&&(t=i.offerToReceiveVideo===!0?1:i.offerToReceiveVideo===!1?0:i.offerToReceiveVideo)}for(r.transceivers.forEach(function(_){_.kind==="audio"?--n<0&&(_.wantReceive=!1):_.kind==="video"&&--t<0&&(_.wantReceive=!1)});n>0||t>0;)n>0&&(r._createTransceiver("audio"),n--),t>0&&(r._createTransceiver("video"),t--);var p=g.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach(function(_,E){var x=_.track,M=_.kind,k=_.mid||g.generateIdentifier();_.mid=k,_.iceGatherer||(_.iceGatherer=r._createIceGatherer(E,r.usingBundle));var L=a.RTCRtpSender.getCapabilities(M);o<15019&&(L.codecs=L.codecs.filter(function(U){return U.name!=="rtx"})),L.codecs.forEach(function(U){U.name==="H264"&&U.parameters["level-asymmetry-allowed"]===void 0&&(U.parameters["level-asymmetry-allowed"]="1"),_.remoteCapabilities&&_.remoteCapabilities.codecs&&_.remoteCapabilities.codecs.forEach(function(B){U.name.toLowerCase()===B.name.toLowerCase()&&U.clockRate===B.clockRate&&(U.preferredPayloadType=B.payloadType)})}),L.headerExtensions.forEach(function(U){(_.remoteCapabilities&&_.remoteCapabilities.headerExtensions||[]).forEach(function(B){U.uri===B.uri&&(U.id=B.id)})});var N=_.sendEncodingParameters||[{ssrc:1001*(2*E+1)}];x&&o>=15019&&M==="video"&&!N[0].rtx&&(N[0].rtx={ssrc:N[0].ssrc+1}),_.wantReceive&&(_.rtpReceiver=new a.RTCRtpReceiver(_.dtlsTransport,M)),_.localCapabilities=L,_.sendEncodingParameters=N}),r._config.bundlePolicy!=="max-compat"&&(p+="a=group:BUNDLE "+r.transceivers.map(function(_){return _.mid}).join(" ")+`\r
`),p+=`a=ice-options:trickle\r
`,r.transceivers.forEach(function(_,E){p+=m(_,_.localCapabilities,"offer",_.stream,r._dtlsRole),p+=`a=rtcp-rsize\r
`,!_.iceGatherer||r.iceGatheringState==="new"||E!==0&&r.usingBundle||(_.iceGatherer.getLocalCandidates().forEach(function(x){x.component=1,p+="a="+g.writeCandidate(x)+`\r
`}),_.iceGatherer.state==="completed"&&(p+=`a=end-of-candidates\r
`))});var S=new a.RTCSessionDescription({type:"offer",sdp:p});return Promise.resolve(S)},s.prototype.createAnswer=function(){var r=this;if(r._isClosed)return Promise.reject(e("InvalidStateError","Can not call createAnswer after close"));if(r.signalingState!=="have-remote-offer"&&r.signalingState!=="have-local-pranswer")return Promise.reject(e("InvalidStateError","Can not call createAnswer in signalingState "+r.signalingState));var n=g.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.usingBundle&&(n+="a=group:BUNDLE "+r.transceivers.map(function(p){return p.mid}).join(" ")+`\r
`),n+=`a=ice-options:trickle\r
`;var t=g.getMediaSections(r._remoteDescription.sdp).length;r.transceivers.forEach(function(p,S){if(!(S+1>t)){if(p.rejected)return p.kind==="application"?p.protocol==="DTLS/SCTP"?n+=`m=application 0 DTLS/SCTP 5000\r
`:n+="m=application 0 "+p.protocol+` webrtc-datachannel\r
`:p.kind==="audio"?n+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:p.kind==="video"&&(n+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),void(n+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+p.mid+`\r
`);var _;p.stream&&(p.kind==="audio"?_=p.stream.getAudioTracks()[0]:p.kind==="video"&&(_=p.stream.getVideoTracks()[0]),_&&o>=15019&&p.kind==="video"&&!p.sendEncodingParameters[0].rtx&&(p.sendEncodingParameters[0].rtx={ssrc:p.sendEncodingParameters[0].ssrc+1}));var E=P(p.localCapabilities,p.remoteCapabilities);!E.codecs.filter(function(x){return x.name.toLowerCase()==="rtx"}).length&&p.sendEncodingParameters[0].rtx&&delete p.sendEncodingParameters[0].rtx,n+=m(p,E,"answer",p.stream,r._dtlsRole),p.rtcpParameters&&p.rtcpParameters.reducedSize&&(n+=`a=rtcp-rsize\r
`)}});var i=new a.RTCSessionDescription({type:"answer",sdp:n});return Promise.resolve(i)},s.prototype.addIceCandidate=function(r){var n,t=this;return r&&r.sdpMLineIndex===void 0&&!r.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(i,p){if(!t._remoteDescription)return p(e("InvalidStateError","Can not add ICE candidate without a remote description"));if(r&&r.candidate!==""){var S=r.sdpMLineIndex;if(r.sdpMid){for(var _=0;_<t.transceivers.length;_++)if(t.transceivers[_].mid===r.sdpMid){S=_;break}}var E=t.transceivers[S];if(!E)return p(e("OperationError","Can not add ICE candidate"));if(E.rejected)return i();var x=Object.keys(r.candidate).length>0?g.parseCandidate(r.candidate):{};if(x.protocol==="tcp"&&(x.port===0||x.port===9)||x.component&&x.component!==1)return i();if((S===0||S>0&&E.iceTransport!==t.transceivers[0].iceTransport)&&!y(E.iceTransport,x))return p(e("OperationError","Can not add ICE candidate"));var M=r.candidate.trim();M.indexOf("a=")===0&&(M=M.substr(2)),(n=g.getMediaSections(t._remoteDescription.sdp))[S]+="a="+(x.type?M:"end-of-candidates")+`\r
`,t._remoteDescription.sdp=g.getDescription(t._remoteDescription.sdp)+n.join("")}else for(var k=0;k<t.transceivers.length&&(t.transceivers[k].rejected||(t.transceivers[k].iceTransport.addRemoteCandidate({}),(n=g.getMediaSections(t._remoteDescription.sdp))[k]+=`a=end-of-candidates\r
`,t._remoteDescription.sdp=g.getDescription(t._remoteDescription.sdp)+n.join(""),!t.usingBundle));k++);i()})},s.prototype.getStats=function(r){if(r&&r instanceof a.MediaStreamTrack){var n=null;if(this.transceivers.forEach(function(i){i.rtpSender&&i.rtpSender.track===r?n=i.rtpSender:i.rtpReceiver&&i.rtpReceiver.track===r&&(n=i.rtpReceiver)}),!n)throw e("InvalidAccessError","Invalid selector.");return n.getStats()}var t=[];return this.transceivers.forEach(function(i){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(p){i[p]&&t.push(i[p].getStats())})}),Promise.all(t).then(function(i){var p=new Map;return i.forEach(function(S){S.forEach(function(_){p.set(_.id,_)})}),p})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(r){var n=a[r];if(n&&n.prototype&&n.prototype.getStats){var t=n.prototype.getStats;n.prototype.getStats=function(){return t.apply(this).then(function(i){var p=new Map;return Object.keys(i).forEach(function(S){i[S].type=f(i[S]),p.set(S,i[S])}),p})}}});var u=["createOffer","createAnswer"];return u.forEach(function(r){var n=s.prototype[r];s.prototype[r]=function(){var t=arguments;return typeof t[0]=="function"||typeof t[1]=="function"?n.apply(this,[arguments[2]]).then(function(i){typeof t[0]=="function"&&t[0].apply(null,[i])},function(i){typeof t[1]=="function"&&t[1].apply(null,[i])}):n.apply(this,arguments)}}),(u=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(r){var n=s.prototype[r];s.prototype[r]=function(){var t=arguments;return typeof t[1]=="function"||typeof t[2]=="function"?n.apply(this,arguments).then(function(){typeof t[1]=="function"&&t[1].apply(null)},function(i){typeof t[2]=="function"&&t[2].apply(null,[i])}):n.apply(this,arguments)}}),["getStats"].forEach(function(r){var n=s.prototype[r];s.prototype[r]=function(){var t=arguments;return typeof t[1]=="function"?n.apply(this,arguments).then(function(){typeof t[1]=="function"&&t[1].apply(null)}):n.apply(this,arguments)}}),s}},{sdp:"YHvh"}],YdKx:[function(D,I,C){"use strict";function g(f){var m=f&&f.navigator,b=m.mediaDevices.getUserMedia.bind(m.mediaDevices);m.mediaDevices.getUserMedia=function(P){return b(P).catch(function(w){return Promise.reject(function(y){return{name:{PermissionDeniedError:"NotAllowedError"}[y.name]||y.name,message:y.message,constraint:y.constraint,toString:function(){return this.name}}}(w))})}}Object.defineProperty(C,"__esModule",{value:!0}),C.shimGetUserMedia=g},{}],P3bV:[function(D,I,C){"use strict";function g(f){"getDisplayMedia"in f.navigator&&f.navigator.mediaDevices&&(f.navigator.mediaDevices&&"getDisplayMedia"in f.navigator.mediaDevices||(f.navigator.mediaDevices.getDisplayMedia=f.navigator.getDisplayMedia.bind(f.navigator)))}Object.defineProperty(C,"__esModule",{value:!0}),C.shimGetDisplayMedia=g},{}],XRic:[function(D,I,C){"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.shimPeerConnection=a,C.shimReplaceTrack=o,Object.defineProperty(C,"shimGetUserMedia",{enumerable:!0,get:function(){return b.shimGetUserMedia}}),Object.defineProperty(C,"shimGetDisplayMedia",{enumerable:!0,get:function(){return P.shimGetDisplayMedia}});var g=e(D("../utils")),f=D("./filtericeservers"),m=w(D("rtcpeerconnection-shim")),b=D("./getusermedia"),P=D("./getdisplaymedia");function w(c){return c&&c.__esModule?c:{default:c}}function y(){if(typeof WeakMap!="function")return null;var c=new WeakMap;return y=function(){return c},c}function e(c){if(c&&c.__esModule)return c;if(c===null||typeof c!="object"&&typeof c!="function")return{default:c};var l=y();if(l&&l.has(c))return l.get(c);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in c)if(Object.prototype.hasOwnProperty.call(c,r)){var n=u?Object.getOwnPropertyDescriptor(c,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=c[r]}return s.default=c,l&&l.set(c,s),s}function a(c,l){if(c.RTCIceGatherer&&(c.RTCIceCandidate||(c.RTCIceCandidate=function(r){return r}),c.RTCSessionDescription||(c.RTCSessionDescription=function(r){return r}),l.version<15025)){var s=Object.getOwnPropertyDescriptor(c.MediaStreamTrack.prototype,"enabled");Object.defineProperty(c.MediaStreamTrack.prototype,"enabled",{set:function(r){s.set.call(this,r);var n=new Event("enabled");n.enabled=r,this.dispatchEvent(n)}})}!c.RTCRtpSender||"dtmf"in c.RTCRtpSender.prototype||Object.defineProperty(c.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new c.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),c.RTCDtmfSender&&!c.RTCDTMFSender&&(c.RTCDTMFSender=c.RTCDtmfSender);var u=(0,m.default)(c,l.version);c.RTCPeerConnection=function(r){return r&&r.iceServers&&(r.iceServers=(0,f.filterIceServers)(r.iceServers,l.version),g.log("ICE servers after filtering:",r.iceServers)),new u(r)},c.RTCPeerConnection.prototype=u.prototype}function o(c){!c.RTCRtpSender||"replaceTrack"in c.RTCRtpSender.prototype||(c.RTCRtpSender.prototype.replaceTrack=c.RTCRtpSender.prototype.setTrack)}},{"../utils":"iSxC","./filtericeservers":"NZ1C","rtcpeerconnection-shim":"NJ2u","./getusermedia":"YdKx","./getdisplaymedia":"P3bV"}],GzSv:[function(D,I,C){"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.shimGetUserMedia=P;var g=m(D("../utils"));function f(){if(typeof WeakMap!="function")return null;var w=new WeakMap;return f=function(){return w},w}function m(w){if(w&&w.__esModule)return w;if(w===null||typeof w!="object"&&typeof w!="function")return{default:w};var y=f();if(y&&y.has(w))return y.get(w);var e={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in w)if(Object.prototype.hasOwnProperty.call(w,o)){var c=a?Object.getOwnPropertyDescriptor(w,o):null;c&&(c.get||c.set)?Object.defineProperty(e,o,c):e[o]=w[o]}return e.default=w,y&&y.set(w,e),e}function b(w){return(b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(w)}function P(w,y){var e=w&&w.navigator,a=w&&w.MediaStreamTrack;if(e.getUserMedia=function(u,r,n){g.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),e.mediaDevices.getUserMedia(u).then(r,n)},!(y.version>55&&"autoGainControl"in e.mediaDevices.getSupportedConstraints())){var o=function(u,r,n){r in u&&!(n in u)&&(u[n]=u[r],delete u[r])},c=e.mediaDevices.getUserMedia.bind(e.mediaDevices);if(e.mediaDevices.getUserMedia=function(u){return b(u)==="object"&&b(u.audio)==="object"&&(u=JSON.parse(JSON.stringify(u)),o(u.audio,"autoGainControl","mozAutoGainControl"),o(u.audio,"noiseSuppression","mozNoiseSuppression")),c(u)},a&&a.prototype.getSettings){var l=a.prototype.getSettings;a.prototype.getSettings=function(){var u=l.apply(this,arguments);return o(u,"mozAutoGainControl","autoGainControl"),o(u,"mozNoiseSuppression","noiseSuppression"),u}}if(a&&a.prototype.applyConstraints){var s=a.prototype.applyConstraints;a.prototype.applyConstraints=function(u){return this.kind==="audio"&&b(u)==="object"&&(u=JSON.parse(JSON.stringify(u)),o(u,"autoGainControl","mozAutoGainControl"),o(u,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[u])}}}}},{"../utils":"iSxC"}],UuGU:[function(D,I,C){"use strict";function g(f,m){f.navigator.mediaDevices&&"getDisplayMedia"in f.navigator.mediaDevices||f.navigator.mediaDevices&&(f.navigator.mediaDevices.getDisplayMedia=function(b){if(!b||!b.video){var P=new DOMException("getDisplayMedia without video constraints is undefined");return P.name="NotFoundError",P.code=8,Promise.reject(P)}return b.video===!0?b.video={mediaSource:m}:b.video.mediaSource=m,f.navigator.mediaDevices.getUserMedia(b)})}Object.defineProperty(C,"__esModule",{value:!0}),C.shimGetDisplayMedia=g},{}],Fzdr:[function(D,I,C){"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.shimOnTrack=e,C.shimPeerConnection=a,C.shimSenderGetStats=o,C.shimReceiverGetStats=c,C.shimRemoveStream=l,C.shimRTCDataChannel=s,C.shimAddTransceiver=u,C.shimGetParameters=r,C.shimCreateOffer=n,C.shimCreateAnswer=t,Object.defineProperty(C,"shimGetUserMedia",{enumerable:!0,get:function(){return f.shimGetUserMedia}}),Object.defineProperty(C,"shimGetDisplayMedia",{enumerable:!0,get:function(){return m.shimGetDisplayMedia}});var g=P(D("../utils")),f=D("./getusermedia"),m=D("./getdisplaymedia");function b(){if(typeof WeakMap!="function")return null;var i=new WeakMap;return b=function(){return i},i}function P(i){if(i&&i.__esModule)return i;if(i===null||typeof i!="object"&&typeof i!="function")return{default:i};var p=b();if(p&&p.has(i))return p.get(i);var S={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in i)if(Object.prototype.hasOwnProperty.call(i,E)){var x=_?Object.getOwnPropertyDescriptor(i,E):null;x&&(x.get||x.set)?Object.defineProperty(S,E,x):S[E]=i[E]}return S.default=i,p&&p.set(i,S),S}function w(i,p,S){return p in i?Object.defineProperty(i,p,{value:S,enumerable:!0,configurable:!0,writable:!0}):i[p]=S,i}function y(i){return(y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(i)}function e(i){y(i)==="object"&&i.RTCTrackEvent&&"receiver"in i.RTCTrackEvent.prototype&&!("transceiver"in i.RTCTrackEvent.prototype)&&Object.defineProperty(i.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function a(i,p){if(y(i)==="object"&&(i.RTCPeerConnection||i.mozRTCPeerConnection)){!i.RTCPeerConnection&&i.mozRTCPeerConnection&&(i.RTCPeerConnection=i.mozRTCPeerConnection),p.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(E){var x=i.RTCPeerConnection.prototype[E],M=w({},E,function(){return arguments[0]=new(E==="addIceCandidate"?i.RTCIceCandidate:i.RTCSessionDescription)(arguments[0]),x.apply(this,arguments)});i.RTCPeerConnection.prototype[E]=M[E]});var S={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},_=i.RTCPeerConnection.prototype.getStats;i.RTCPeerConnection.prototype.getStats=function(){var[E,x,M]=arguments;return _.apply(this,[E||null]).then(function(k){if(p.version<53&&!x)try{k.forEach(function(L){L.type=S[L.type]||L.type})}catch(L){if(L.name!=="TypeError")throw L;k.forEach(function(N,U){k.set(U,Object.assign({},N,{type:S[N.type]||N.type}))})}return k}).then(x,M)}}}function o(i){if(y(i)==="object"&&i.RTCPeerConnection&&i.RTCRtpSender&&!(i.RTCRtpSender&&"getStats"in i.RTCRtpSender.prototype)){var p=i.RTCPeerConnection.prototype.getSenders;p&&(i.RTCPeerConnection.prototype.getSenders=function(){var _=this,E=p.apply(this,[]);return E.forEach(function(x){return x._pc=_}),E});var S=i.RTCPeerConnection.prototype.addTrack;S&&(i.RTCPeerConnection.prototype.addTrack=function(){var _=S.apply(this,arguments);return _._pc=this,_}),i.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function c(i){if(y(i)==="object"&&i.RTCPeerConnection&&i.RTCRtpSender&&!(i.RTCRtpSender&&"getStats"in i.RTCRtpReceiver.prototype)){var p=i.RTCPeerConnection.prototype.getReceivers;p&&(i.RTCPeerConnection.prototype.getReceivers=function(){var S=this,_=p.apply(this,[]);return _.forEach(function(E){return E._pc=S}),_}),g.wrapPeerConnectionEvent(i,"track",function(S){return S.receiver._pc=S.srcElement,S}),i.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function l(i){!i.RTCPeerConnection||"removeStream"in i.RTCPeerConnection.prototype||(i.RTCPeerConnection.prototype.removeStream=function(p){var S=this;g.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(_){_.track&&p.getTracks().includes(_.track)&&S.removeTrack(_)})})}function s(i){i.DataChannel&&!i.RTCDataChannel&&(i.RTCDataChannel=i.DataChannel)}function u(i){if(y(i)==="object"&&i.RTCPeerConnection){var p=i.RTCPeerConnection.prototype.addTransceiver;p&&(i.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var S=arguments[1],_=S&&"sendEncodings"in S;_&&S.sendEncodings.forEach(function(k){if("rid"in k&&!/^[a-z0-9]{0,16}$/i.test(k.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in k&&!(parseFloat(k.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in k&&!(parseFloat(k.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});var E=p.apply(this,arguments);if(_){var{sender:x}=E,M=x.getParameters();"encodings"in M&&(M.encodings.length!==1||Object.keys(M.encodings[0]).length!==0)||(M.encodings=S.sendEncodings,x.sendEncodings=S.sendEncodings,this.setParametersPromises.push(x.setParameters(M).then(function(){delete x.sendEncodings}).catch(function(){delete x.sendEncodings})))}return E})}}function r(i){if(y(i)==="object"&&i.RTCRtpSender){var p=i.RTCRtpSender.prototype.getParameters;p&&(i.RTCRtpSender.prototype.getParameters=function(){var S=p.apply(this,arguments);return"encodings"in S||(S.encodings=[].concat(this.sendEncodings||[{}])),S})}}function n(i){if(y(i)==="object"&&i.RTCPeerConnection){var p=i.RTCPeerConnection.prototype.createOffer;i.RTCPeerConnection.prototype.createOffer=function(){var S=arguments,_=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return p.apply(_,S)}).finally(function(){_.setParametersPromises=[]}):p.apply(this,arguments)}}}function t(i){if(y(i)==="object"&&i.RTCPeerConnection){var p=i.RTCPeerConnection.prototype.createAnswer;i.RTCPeerConnection.prototype.createAnswer=function(){var S=arguments,_=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return p.apply(_,S)}).finally(function(){_.setParametersPromises=[]}):p.apply(this,arguments)}}}},{"../utils":"iSxC","./getusermedia":"GzSv","./getdisplaymedia":"UuGU"}],t1lL:[function(D,I,C){"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.shimLocalStreamsAPI=P,C.shimRemoteStreamsAPI=w,C.shimCallbacksAPI=y,C.shimGetUserMedia=e,C.shimConstraints=a,C.shimRTCIceServerUrls=o,C.shimTrackEventTransceiver=c,C.shimCreateOfferLegacy=l,C.shimAudioContext=s;var g=m(D("../utils"));function f(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return f=function(){return u},u}function m(u){if(u&&u.__esModule)return u;if(u===null||typeof u!="object"&&typeof u!="function")return{default:u};var r=f();if(r&&r.has(u))return r.get(u);var n={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in u)if(Object.prototype.hasOwnProperty.call(u,i)){var p=t?Object.getOwnPropertyDescriptor(u,i):null;p&&(p.get||p.set)?Object.defineProperty(n,i,p):n[i]=u[i]}return n.default=u,r&&r.set(u,n),n}function b(u){return(b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(u)}function P(u){if(b(u)==="object"&&u.RTCPeerConnection){if("getLocalStreams"in u.RTCPeerConnection.prototype||(u.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in u.RTCPeerConnection.prototype)){var r=u.RTCPeerConnection.prototype.addTrack;u.RTCPeerConnection.prototype.addStream=function(n){var t=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(function(i){return r.call(t,i,n)}),n.getVideoTracks().forEach(function(i){return r.call(t,i,n)})},u.RTCPeerConnection.prototype.addTrack=function(n){for(var t=this,i=arguments.length,p=new Array(i>1?i-1:0),S=1;S<i;S++)p[S-1]=arguments[S];return p&&p.forEach(function(_){t._localStreams?t._localStreams.includes(_)||t._localStreams.push(_):t._localStreams=[_]}),r.apply(this,arguments)}}"removeStream"in u.RTCPeerConnection.prototype||(u.RTCPeerConnection.prototype.removeStream=function(n){var t=this;this._localStreams||(this._localStreams=[]);var i=this._localStreams.indexOf(n);if(i!==-1){this._localStreams.splice(i,1);var p=n.getTracks();this.getSenders().forEach(function(S){p.includes(S.track)&&t.removeTrack(S)})}})}}function w(u){if(b(u)==="object"&&u.RTCPeerConnection&&("getRemoteStreams"in u.RTCPeerConnection.prototype||(u.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in u.RTCPeerConnection.prototype))){Object.defineProperty(u.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(n){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(function(p){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(p)){t._remoteStreams.push(p);var S=new Event("addstream");S.stream=p,t.dispatchEvent(S)}})})}});var r=u.RTCPeerConnection.prototype.setRemoteDescription;u.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(function(i){if(n._remoteStreams||(n._remoteStreams=[]),!(n._remoteStreams.indexOf(i)>=0)){n._remoteStreams.push(i);var p=new Event("addstream");p.stream=i,n.dispatchEvent(p)}})}),r.apply(n,arguments)}}}function y(u){if(b(u)==="object"&&u.RTCPeerConnection){var r=u.RTCPeerConnection.prototype,n=r.createOffer,t=r.createAnswer,i=r.setLocalDescription,p=r.setRemoteDescription,S=r.addIceCandidate;r.createOffer=function(E,x){var M=arguments.length>=2?arguments[2]:arguments[0],k=n.apply(this,[M]);return x?(k.then(E,x),Promise.resolve()):k},r.createAnswer=function(E,x){var M=arguments.length>=2?arguments[2]:arguments[0],k=t.apply(this,[M]);return x?(k.then(E,x),Promise.resolve()):k};var _=function(E,x,M){var k=i.apply(this,[E]);return M?(k.then(x,M),Promise.resolve()):k};r.setLocalDescription=_,_=function(E,x,M){var k=p.apply(this,[E]);return M?(k.then(x,M),Promise.resolve()):k},r.setRemoteDescription=_,_=function(E,x,M){var k=S.apply(this,[E]);return M?(k.then(x,M),Promise.resolve()):k},r.addIceCandidate=_}}function e(u){var r=u&&u.navigator;if(r.mediaDevices&&r.mediaDevices.getUserMedia){var n=r.mediaDevices,t=n.getUserMedia.bind(n);r.mediaDevices.getUserMedia=function(i){return t(a(i))}}!r.getUserMedia&&r.mediaDevices&&r.mediaDevices.getUserMedia&&(r.getUserMedia=function(i,p,S){r.mediaDevices.getUserMedia(i).then(p,S)}.bind(r))}function a(u){return u&&u.video!==void 0?Object.assign({},u,{video:g.compactObject(u.video)}):u}function o(u){if(u.RTCPeerConnection){var r=u.RTCPeerConnection;u.RTCPeerConnection=function(n,t){if(n&&n.iceServers){for(var i=[],p=0;p<n.iceServers.length;p++){var S=n.iceServers[p];!S.hasOwnProperty("urls")&&S.hasOwnProperty("url")?(g.deprecated("RTCIceServer.url","RTCIceServer.urls"),(S=JSON.parse(JSON.stringify(S))).urls=S.url,delete S.url,i.push(S)):i.push(n.iceServers[p])}n.iceServers=i}return new r(n,t)},u.RTCPeerConnection.prototype=r.prototype,"generateCertificate"in r&&Object.defineProperty(u.RTCPeerConnection,"generateCertificate",{get:function(){return r.generateCertificate}})}}function c(u){b(u)==="object"&&u.RTCTrackEvent&&"receiver"in u.RTCTrackEvent.prototype&&!("transceiver"in u.RTCTrackEvent.prototype)&&Object.defineProperty(u.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function l(u){var r=u.RTCPeerConnection.prototype.createOffer;u.RTCPeerConnection.prototype.createOffer=function(n){if(n){n.offerToReceiveAudio!==void 0&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);var t=this.getTransceivers().find(function(p){return p.receiver.track.kind==="audio"});n.offerToReceiveAudio===!1&&t?t.direction==="sendrecv"?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":t.direction==="recvonly"&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):n.offerToReceiveAudio!==!0||t||this.addTransceiver("audio"),n.offerToReceiveVideo!==void 0&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);var i=this.getTransceivers().find(function(p){return p.receiver.track.kind==="video"});n.offerToReceiveVideo===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):n.offerToReceiveVideo!==!0||i||this.addTransceiver("video")}return r.apply(this,arguments)}}function s(u){b(u)!=="object"||u.AudioContext||(u.AudioContext=u.webkitAudioContext)}},{"../utils":"iSxC"}],GOQK:[function(D,I,C){"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.shimRTCIceCandidate=y,C.shimMaxMessageSize=e,C.shimSendThrowTypeError=a,C.shimConnectionState=o,C.removeExtmapAllowMixed=c,C.shimAddIceCandidateNullOrEmpty=l;var g=P(D("sdp")),f=b(D("./utils"));function m(){if(typeof WeakMap!="function")return null;var s=new WeakMap;return m=function(){return s},s}function b(s){if(s&&s.__esModule)return s;if(s===null||typeof s!="object"&&typeof s!="function")return{default:s};var u=m();if(u&&u.has(s))return u.get(s);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in s)if(Object.prototype.hasOwnProperty.call(s,t)){var i=n?Object.getOwnPropertyDescriptor(s,t):null;i&&(i.get||i.set)?Object.defineProperty(r,t,i):r[t]=s[t]}return r.default=s,u&&u.set(s,r),r}function P(s){return s&&s.__esModule?s:{default:s}}function w(s){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(s)}function y(s){if(s.RTCIceCandidate&&!(s.RTCIceCandidate&&"foundation"in s.RTCIceCandidate.prototype)){var u=s.RTCIceCandidate;s.RTCIceCandidate=function(r){if(w(r)==="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&((r=JSON.parse(JSON.stringify(r))).candidate=r.candidate.substr(2)),r.candidate&&r.candidate.length){var n=new u(r),t=g.default.parseCandidate(r.candidate),i=Object.assign(n,t);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new u(r)},s.RTCIceCandidate.prototype=u.prototype,f.wrapPeerConnectionEvent(s,"icecandidate",function(r){return r.candidate&&Object.defineProperty(r,"candidate",{value:new s.RTCIceCandidate(r.candidate),writable:"false"}),r})}}function e(s,u){if(s.RTCPeerConnection){"sctp"in s.RTCPeerConnection.prototype||Object.defineProperty(s.RTCPeerConnection.prototype,"sctp",{get:function(){return this._sctp===void 0?null:this._sctp}});var r=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,u.browser==="chrome"&&u.version>=76){var{sdpSemantics:n}=this.getConfiguration();n==="plan-b"&&Object.defineProperty(this,"sctp",{get:function(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if(function(M){if(!M||!M.sdp)return!1;var k=g.default.splitSections(M.sdp);return k.shift(),k.some(function(L){var N=g.default.parseMLine(L);return N&&N.kind==="application"&&N.protocol.indexOf("SCTP")!==-1})}(arguments[0])){var t,i=function(M){var k=M.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(k===null||k.length<2)return-1;var L=parseInt(k[1],10);return L!=L?-1:L}(arguments[0]),p=(E=i,x=65536,u.browser==="firefox"&&(x=u.version<57?E===-1?16384:2147483637:u.version<60?u.version===57?65535:65536:2147483637),x),S=function(M,k){var L=65536;u.browser==="firefox"&&u.version===57&&(L=65535);var N=g.default.matchPrefix(M.sdp,"a=max-message-size:");return N.length>0?L=parseInt(N[0].substr(19),10):u.browser==="firefox"&&k!==-1&&(L=2147483637),L}(arguments[0],i);t=p===0&&S===0?Number.POSITIVE_INFINITY:p===0||S===0?Math.max(p,S):Math.min(p,S);var _={};Object.defineProperty(_,"maxMessageSize",{get:function(){return t}}),this._sctp=_}var E,x;return r.apply(this,arguments)}}}function a(s){if(s.RTCPeerConnection&&"createDataChannel"in s.RTCPeerConnection.prototype){var u=s.RTCPeerConnection.prototype.createDataChannel;s.RTCPeerConnection.prototype.createDataChannel=function(){var n=u.apply(this,arguments);return r(n,this),n},f.wrapPeerConnectionEvent(s,"datachannel",function(n){return r(n.channel,n.target),n})}function r(n,t){var i=n.send;n.send=function(){var p=arguments[0],S=p.length||p.size||p.byteLength;if(n.readyState==="open"&&t.sctp&&S>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return i.apply(n,arguments)}}}function o(s){if(s.RTCPeerConnection&&!("connectionState"in s.RTCPeerConnection.prototype)){var u=s.RTCPeerConnection.prototype;Object.defineProperty(u,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(u,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(r){var n=u[r];u[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(t){var i=t.target;if(i._lastConnectionState!==i.connectionState){i._lastConnectionState=i.connectionState;var p=new Event("connectionstatechange",t);i.dispatchEvent(p)}return t},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}}function c(s,u){if(s.RTCPeerConnection&&!(u.browser==="chrome"&&u.version>=71||u.browser==="safari"&&u.version>=605)){var r=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(n){if(n&&n.sdp&&n.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){var t=n.sdp.split(`
`).filter(function(i){return i.trim()!=="a=extmap-allow-mixed"}).join(`
`);s.RTCSessionDescription&&n instanceof s.RTCSessionDescription?arguments[0]=new s.RTCSessionDescription({type:n.type,sdp:t}):n.sdp=t}return r.apply(this,arguments)}}}function l(s,u){if(s.RTCPeerConnection&&s.RTCPeerConnection.prototype){var r=s.RTCPeerConnection.prototype.addIceCandidate;r&&r.length!==0&&(s.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(u.browser==="chrome"&&u.version<78||u.browser==="firefox"&&u.version<68||u.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}},{sdp:"YHvh","./utils":"iSxC"}],KtlG:[function(D,I,C){"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.adapterFactory=a;var g=e(D("./utils")),f=e(D("./chrome/chrome_shim")),m=e(D("./edge/edge_shim")),b=e(D("./firefox/firefox_shim")),P=e(D("./safari/safari_shim")),w=e(D("./common_shim"));function y(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return y=function(){return o},o}function e(o){if(o&&o.__esModule)return o;if(o===null||typeof o!="object"&&typeof o!="function")return{default:o};var c=y();if(c&&c.has(o))return c.get(o);var l={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in o)if(Object.prototype.hasOwnProperty.call(o,u)){var r=s?Object.getOwnPropertyDescriptor(o,u):null;r&&(r.get||r.set)?Object.defineProperty(l,u,r):l[u]=o[u]}return l.default=o,c&&c.set(o,l),l}function a(){var{window:o}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},l=g.log,s=g.detectBrowser(o),u={browserDetails:s,commonShim:w,extractVersion:g.extractVersion,disableLog:g.disableLog,disableWarnings:g.disableWarnings};switch(s.browser){case"chrome":if(!f||!f.shimPeerConnection||!c.shimChrome)return l("Chrome shim is not included in this adapter release."),u;if(s.version===null)return l("Chrome shim can not determine version, not shimming."),u;l("adapter.js shimming chrome."),u.browserShim=f,w.shimAddIceCandidateNullOrEmpty(o,s),f.shimGetUserMedia(o,s),f.shimMediaStream(o,s),f.shimPeerConnection(o,s),f.shimOnTrack(o,s),f.shimAddTrackRemoveTrack(o,s),f.shimGetSendersWithDtmf(o,s),f.shimGetStats(o,s),f.shimSenderReceiverGetStats(o,s),f.fixNegotiationNeeded(o,s),w.shimRTCIceCandidate(o,s),w.shimConnectionState(o,s),w.shimMaxMessageSize(o,s),w.shimSendThrowTypeError(o,s),w.removeExtmapAllowMixed(o,s);break;case"firefox":if(!b||!b.shimPeerConnection||!c.shimFirefox)return l("Firefox shim is not included in this adapter release."),u;l("adapter.js shimming firefox."),u.browserShim=b,w.shimAddIceCandidateNullOrEmpty(o,s),b.shimGetUserMedia(o,s),b.shimPeerConnection(o,s),b.shimOnTrack(o,s),b.shimRemoveStream(o,s),b.shimSenderGetStats(o,s),b.shimReceiverGetStats(o,s),b.shimRTCDataChannel(o,s),b.shimAddTransceiver(o,s),b.shimGetParameters(o,s),b.shimCreateOffer(o,s),b.shimCreateAnswer(o,s),w.shimRTCIceCandidate(o,s),w.shimConnectionState(o,s),w.shimMaxMessageSize(o,s),w.shimSendThrowTypeError(o,s);break;case"edge":if(!m||!m.shimPeerConnection||!c.shimEdge)return l("MS edge shim is not included in this adapter release."),u;l("adapter.js shimming edge."),u.browserShim=m,m.shimGetUserMedia(o,s),m.shimGetDisplayMedia(o,s),m.shimPeerConnection(o,s),m.shimReplaceTrack(o,s),w.shimMaxMessageSize(o,s),w.shimSendThrowTypeError(o,s);break;case"safari":if(!P||!c.shimSafari)return l("Safari shim is not included in this adapter release."),u;l("adapter.js shimming safari."),u.browserShim=P,w.shimAddIceCandidateNullOrEmpty(o,s),P.shimRTCIceServerUrls(o,s),P.shimCreateOfferLegacy(o,s),P.shimCallbacksAPI(o,s),P.shimLocalStreamsAPI(o,s),P.shimRemoteStreamsAPI(o,s),P.shimTrackEventTransceiver(o,s),P.shimGetUserMedia(o,s),P.shimAudioContext(o,s),w.shimRTCIceCandidate(o,s),w.shimMaxMessageSize(o,s),w.shimSendThrowTypeError(o,s),w.removeExtmapAllowMixed(o,s);break;default:l("Unsupported browser!")}return u}},{"./utils":"iSxC","./chrome/chrome_shim":"uI5X","./edge/edge_shim":"XRic","./firefox/firefox_shim":"Fzdr","./safari/safari_shim":"t1lL","./common_shim":"GOQK"}],tI1X:[function(D,I,C){"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.default=void 0;var g=D("./adapter_factory.js"),f=(0,g.adapterFactory)({window:typeof window=="undefined"?void 0:window}),m=f;C.default=m},{"./adapter_factory.js":"KtlG"}],sXtV:[function(D,I,C){"use strict";var g=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(C,"__esModule",{value:!0}),C.webRTCAdapter=void 0;var f=g(D("webrtc-adapter"));C.webRTCAdapter=f.default},{"webrtc-adapter":"tI1X"}],I31f:[function(D,I,C){"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.Supports=void 0;var g=D("./adapter");C.Supports=new(function(){function f(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return f.prototype.isWebRTCSupported=function(){return typeof RTCPeerConnection!="undefined"},f.prototype.isBrowserSupported=function(){var m=this.getBrowser(),b=this.getVersion();return!!this.supportedBrowsers.includes(m)&&(m==="chrome"?b>=this.minChromeVersion:m==="firefox"?b>=this.minFirefoxVersion:m==="safari"&&!this.isIOS&&b>=this.minSafariVersion)},f.prototype.getBrowser=function(){return g.webRTCAdapter.browserDetails.browser},f.prototype.getVersion=function(){return g.webRTCAdapter.browserDetails.version||0},f.prototype.isUnifiedPlanSupported=function(){var m,b=this.getBrowser(),P=g.webRTCAdapter.browserDetails.version||0;if(b==="chrome"&&P<72)return!1;if(b==="firefox"&&P>=59)return!0;if(!(window.RTCRtpTransceiver&&"currentDirection"in RTCRtpTransceiver.prototype))return!1;var w=!1;try{(m=new RTCPeerConnection).addTransceiver("audio"),w=!0}catch(y){}finally{m&&m.close()}return w},f.prototype.toString=function(){return`Supports: 
    browser:`+this.getBrowser()+` 
    version:`+this.getVersion()+` 
    isIOS:`+this.isIOS+` 
    isWebRTCSupported:`+this.isWebRTCSupported()+` 
    isBrowserSupported:`+this.isBrowserSupported()+` 
    isUnifiedPlanSupported:`+this.isUnifiedPlanSupported()},f}())},{"./adapter":"sXtV"}],BHXf:[function(D,I,C){"use strict";var g=this&&this.__createBinding||(Object.create?function(y,e,a,o){o===void 0&&(o=a),Object.defineProperty(y,o,{enumerable:!0,get:function(){return e[a]}})}:function(y,e,a,o){o===void 0&&(o=a),y[o]=e[a]}),f=this&&this.__setModuleDefault||(Object.create?function(y,e){Object.defineProperty(y,"default",{enumerable:!0,value:e})}:function(y,e){y.default=e}),m=this&&this.__importStar||function(y){if(y&&y.__esModule)return y;var e={};if(y!=null)for(var a in y)a!=="default"&&Object.prototype.hasOwnProperty.call(y,a)&&g(e,y,a);return f(e,y),e};Object.defineProperty(C,"__esModule",{value:!0}),C.util=void 0;var b=m(D("peerjs-js-binarypack")),P=D("./supports"),w={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:0.peerjs.com:3478",username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};C.util=new(function(){function y(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=w,this.browser=P.Supports.getBrowser(),this.browserVersion=P.Supports.getVersion(),this.supports=function(){var e,a={browser:P.Supports.isBrowserSupported(),webRTC:P.Supports.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!a.webRTC)return a;try{e=new RTCPeerConnection(w),a.audioVideo=!0;var o=void 0;try{o=e.createDataChannel("_PEERJSTEST",{ordered:!0}),a.data=!0,a.reliable=!!o.ordered;try{o.binaryType="blob",a.binaryBlob=!P.Supports.isIOS}catch(c){}}catch(c){}finally{o&&o.close()}}catch(c){}finally{e&&e.close()}return a}(),this.pack=b.pack,this.unpack=b.unpack,this._dataCount=1}return y.prototype.noop=function(){},y.prototype.validateId=function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e)},y.prototype.chunk=function(e){for(var a=[],o=e.size,c=Math.ceil(o/C.util.chunkedMTU),l=0,s=0;s<o;){var u=Math.min(o,s+C.util.chunkedMTU),r=e.slice(s,u),n={__peerData:this._dataCount,n:l,data:r,total:c};a.push(n),s=u,l++}return this._dataCount++,a},y.prototype.blobToArrayBuffer=function(e,a){var o=new FileReader;return o.onload=function(c){c.target&&a(c.target.result)},o.readAsArrayBuffer(e),o},y.prototype.binaryStringToArrayBuffer=function(e){for(var a=new Uint8Array(e.length),o=0;o<e.length;o++)a[o]=255&e.charCodeAt(o);return a.buffer},y.prototype.randomToken=function(){return Math.random().toString(36).substr(2)},y.prototype.isSecure=function(){return location.protocol==="https:"},y}())},{"peerjs-js-binarypack":"kdPp","./supports":"I31f"}],JJlS:[function(D,I,C){"use strict";var g=Object.prototype.hasOwnProperty,f="~";function m(){}function b(e,a,o){this.fn=e,this.context=a,this.once=o||!1}function P(e,a,o,c,l){if(typeof o!="function")throw new TypeError("The listener must be a function");var s=new b(o,c||e,l),u=f?f+a:a;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function w(e,a){--e._eventsCount==0?e._events=new m:delete e._events[a]}function y(){this._events=new m,this._eventsCount=0}Object.create&&(m.prototype=Object.create(null),new m().__proto__||(f=!1)),y.prototype.eventNames=function(){var e,a,o=[];if(this._eventsCount===0)return o;for(a in e=this._events)g.call(e,a)&&o.push(f?a.slice(1):a);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},y.prototype.listeners=function(e){var a=f?f+e:e,o=this._events[a];if(!o)return[];if(o.fn)return[o.fn];for(var c=0,l=o.length,s=new Array(l);c<l;c++)s[c]=o[c].fn;return s},y.prototype.listenerCount=function(e){var a=f?f+e:e,o=this._events[a];return o?o.fn?1:o.length:0},y.prototype.emit=function(e,a,o,c,l,s){var u=f?f+e:e;if(!this._events[u])return!1;var r,n,t=this._events[u],i=arguments.length;if(t.fn){switch(t.once&&this.removeListener(e,t.fn,void 0,!0),i){case 1:return t.fn.call(t.context),!0;case 2:return t.fn.call(t.context,a),!0;case 3:return t.fn.call(t.context,a,o),!0;case 4:return t.fn.call(t.context,a,o,c),!0;case 5:return t.fn.call(t.context,a,o,c,l),!0;case 6:return t.fn.call(t.context,a,o,c,l,s),!0}for(n=1,r=new Array(i-1);n<i;n++)r[n-1]=arguments[n];t.fn.apply(t.context,r)}else{var p,S=t.length;for(n=0;n<S;n++)switch(t[n].once&&this.removeListener(e,t[n].fn,void 0,!0),i){case 1:t[n].fn.call(t[n].context);break;case 2:t[n].fn.call(t[n].context,a);break;case 3:t[n].fn.call(t[n].context,a,o);break;case 4:t[n].fn.call(t[n].context,a,o,c);break;default:if(!r)for(p=1,r=new Array(i-1);p<i;p++)r[p-1]=arguments[p];t[n].fn.apply(t[n].context,r)}}return!0},y.prototype.on=function(e,a,o){return P(this,e,a,o,!1)},y.prototype.once=function(e,a,o){return P(this,e,a,o,!0)},y.prototype.removeListener=function(e,a,o,c){var l=f?f+e:e;if(!this._events[l])return this;if(!a)return w(this,l),this;var s=this._events[l];if(s.fn)s.fn!==a||c&&!s.once||o&&s.context!==o||w(this,l);else{for(var u=0,r=[],n=s.length;u<n;u++)(s[u].fn!==a||c&&!s[u].once||o&&s[u].context!==o)&&r.push(s[u]);r.length?this._events[l]=r.length===1?r[0]:r:w(this,l)}return this},y.prototype.removeAllListeners=function(e){var a;return e?(a=f?f+e:e,this._events[a]&&w(this,a)):(this._events=new m,this._eventsCount=0),this},y.prototype.off=y.prototype.removeListener,y.prototype.addListener=y.prototype.on,y.prefixed=f,y.EventEmitter=y,typeof I!="undefined"&&(I.exports=y)},{}],WOs9:[function(D,I,C){"use strict";var g=this&&this.__read||function(w,y){var e=typeof Symbol=="function"&&w[Symbol.iterator];if(!e)return w;var a,o,c=e.call(w),l=[];try{for(;(y===void 0||y-- >0)&&!(a=c.next()).done;)l.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(e=c.return)&&e.call(c)}finally{if(o)throw o.error}}return l},f=this&&this.__spreadArray||function(w,y){for(var e=0,a=y.length,o=w.length;e<a;e++,o++)w[o]=y[e];return w};Object.defineProperty(C,"__esModule",{value:!0}),C.LogLevel=void 0;var m,b="PeerJS: ";(function(w){w[w.Disabled=0]="Disabled",w[w.Errors=1]="Errors",w[w.Warnings=2]="Warnings",w[w.All=3]="All"})(m=C.LogLevel||(C.LogLevel={}));var P=function(){function w(){this._logLevel=m.Disabled}return Object.defineProperty(w.prototype,"logLevel",{get:function(){return this._logLevel},set:function(y){this._logLevel=y},enumerable:!1,configurable:!0}),w.prototype.log=function(){for(var y=[],e=0;e<arguments.length;e++)y[e]=arguments[e];this._logLevel>=m.All&&this._print.apply(this,f([m.All],g(y)))},w.prototype.warn=function(){for(var y=[],e=0;e<arguments.length;e++)y[e]=arguments[e];this._logLevel>=m.Warnings&&this._print.apply(this,f([m.Warnings],g(y)))},w.prototype.error=function(){for(var y=[],e=0;e<arguments.length;e++)y[e]=arguments[e];this._logLevel>=m.Errors&&this._print.apply(this,f([m.Errors],g(y)))},w.prototype.setLogFunction=function(y){this._print=y},w.prototype._print=function(y){for(var e=[],a=1;a<arguments.length;a++)e[a-1]=arguments[a];var o=f([b],g(e));for(var c in o)o[c]instanceof Error&&(o[c]="("+o[c].name+") "+o[c].message);y>=m.All?console.log.apply(console,f([],g(o))):y>=m.Warnings?console.warn.apply(console,f(["WARNING"],g(o))):y>=m.Errors&&console.error.apply(console,f(["ERROR"],g(o)))},w}();C.default=new P},{}],ZRYf:[function(D,I,C){"use strict";var g,f,m,b,P,w,y;Object.defineProperty(C,"__esModule",{value:!0}),C.ServerMessageType=C.SocketEventType=C.SerializationType=C.PeerErrorType=C.PeerEventType=C.ConnectionType=C.ConnectionEventType=void 0,function(e){e.Open="open",e.Stream="stream",e.Data="data",e.Close="close",e.Error="error",e.IceStateChanged="iceStateChanged"}(g=C.ConnectionEventType||(C.ConnectionEventType={})),function(e){e.Data="data",e.Media="media"}(f=C.ConnectionType||(C.ConnectionType={})),function(e){e.Open="open",e.Close="close",e.Connection="connection",e.Call="call",e.Disconnected="disconnected",e.Error="error"}(m=C.PeerEventType||(C.PeerEventType={})),function(e){e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc"}(b=C.PeerErrorType||(C.PeerErrorType={})),function(e){e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json"}(P=C.SerializationType||(C.SerializationType={})),function(e){e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close"}(w=C.SocketEventType||(C.SocketEventType={})),function(e){e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE"}(y=C.ServerMessageType||(C.ServerMessageType={}))},{}],wJlv:[function(D,I,C){"use strict";var g=this&&this.__extends||function(){var o=function(c,l){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,u){s.__proto__=u}||function(s,u){for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&(s[r]=u[r])})(c,l)};return function(c,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function s(){this.constructor=c}o(c,l),c.prototype=l===null?Object.create(l):(s.prototype=l.prototype,new s)}}(),f=this&&this.__read||function(o,c){var l=typeof Symbol=="function"&&o[Symbol.iterator];if(!l)return o;var s,u,r=l.call(o),n=[];try{for(;(c===void 0||c-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(t){u={error:t}}finally{try{s&&!s.done&&(l=r.return)&&l.call(r)}finally{if(u)throw u.error}}return n},m=this&&this.__spreadArray||function(o,c){for(var l=0,s=c.length,u=o.length;l<s;l++,u++)o[u]=c[l];return o},b=this&&this.__values||function(o){var c=typeof Symbol=="function"&&Symbol.iterator,l=c&&o[c],s=0;if(l)return l.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&s>=o.length&&(o=void 0),{value:o&&o[s++],done:!o}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")},P=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(C,"__esModule",{value:!0}),C.Socket=void 0;var w=D("eventemitter3"),y=P(D("./logger")),e=D("./enums"),a=function(o){function c(l,s,u,r,n,t){t===void 0&&(t=5e3);var i=o.call(this)||this;i.pingInterval=t,i._disconnected=!0,i._messagesQueue=[];var p=l?"wss://":"ws://";return i._baseUrl=p+s+":"+u+r+"peerjs?key="+n,i}return g(c,o),c.prototype.start=function(l,s){var u=this;this._id=l;var r=this._baseUrl+"&id="+l+"&token="+s;!this._socket&&this._disconnected&&(this._socket=new WebSocket(r),this._disconnected=!1,this._socket.onmessage=function(n){var t;try{t=JSON.parse(n.data),y.default.log("Server message received:",t)}catch(i){return void y.default.log("Invalid server message",n.data)}u.emit(e.SocketEventType.Message,t)},this._socket.onclose=function(n){u._disconnected||(y.default.log("Socket closed.",n),u._cleanup(),u._disconnected=!0,u.emit(e.SocketEventType.Disconnected))},this._socket.onopen=function(){u._disconnected||(u._sendQueuedMessages(),y.default.log("Socket open"),u._scheduleHeartbeat())})},c.prototype._scheduleHeartbeat=function(){var l=this;this._wsPingTimer=setTimeout(function(){l._sendHeartbeat()},this.pingInterval)},c.prototype._sendHeartbeat=function(){if(this._wsOpen()){var l=JSON.stringify({type:e.ServerMessageType.Heartbeat});this._socket.send(l),this._scheduleHeartbeat()}else y.default.log("Cannot send heartbeat, because socket closed")},c.prototype._wsOpen=function(){return!!this._socket&&this._socket.readyState===1},c.prototype._sendQueuedMessages=function(){var l,s,u=m([],f(this._messagesQueue));this._messagesQueue=[];try{for(var r=b(u),n=r.next();!n.done;n=r.next()){var t=n.value;this.send(t)}}catch(i){l={error:i}}finally{try{n&&!n.done&&(s=r.return)&&s.call(r)}finally{if(l)throw l.error}}},c.prototype.send=function(l){if(!this._disconnected)if(this._id)if(l.type){if(this._wsOpen()){var s=JSON.stringify(l);this._socket.send(s)}}else this.emit(e.SocketEventType.Error,"Invalid message");else this._messagesQueue.push(l)},c.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},c.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},c}(w.EventEmitter);C.Socket=a},{eventemitter3:"JJlS","./logger":"WOs9","./enums":"ZRYf"}],HCdX:[function(D,I,C){"use strict";var g=this&&this.__assign||function(){return(g=Object.assign||function(a){for(var o,c=1,l=arguments.length;c<l;c++)for(var s in o=arguments[c])Object.prototype.hasOwnProperty.call(o,s)&&(a[s]=o[s]);return a}).apply(this,arguments)},f=this&&this.__awaiter||function(a,o,c,l){return new(c||(c=Promise))(function(s,u){function r(i){try{t(l.next(i))}catch(p){u(p)}}function n(i){try{t(l.throw(i))}catch(p){u(p)}}function t(i){var p;i.done?s(i.value):(p=i.value,p instanceof c?p:new c(function(S){S(p)})).then(r,n)}t((l=l.apply(a,o||[])).next())})},m=this&&this.__generator||function(a,o){var c,l,s,u,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function n(t){return function(i){return function(p){if(c)throw new TypeError("Generator is already executing.");for(;r;)try{if(c=1,l&&(s=2&p[0]?l.return:p[0]?l.throw||((s=l.return)&&s.call(l),0):l.next)&&!(s=s.call(l,p[1])).done)return s;switch(l=0,s&&(p=[2&p[0],s.value]),p[0]){case 0:case 1:s=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(!(s=(s=r.trys).length>0&&s[s.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!s||p[1]>s[0]&&p[1]<s[3])){r.label=p[1];break}if(p[0]===6&&r.label<s[1]){r.label=s[1],s=p;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(p);break}s[2]&&r.ops.pop(),r.trys.pop();continue}p=o.call(a,r)}catch(S){p=[6,S],l=0}finally{c=s=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([t,i])}}},b=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(C,"__esModule",{value:!0}),C.Negotiator=void 0;var P=D("./util"),w=b(D("./logger")),y=D("./enums"),e=function(){function a(o){this.connection=o}return a.prototype.startConnection=function(o){var c=this._startPeerConnection();if(this.connection.peerConnection=c,this.connection.type===y.ConnectionType.Media&&o._stream&&this._addTracksToConnection(o._stream,c),o.originator){if(this.connection.type===y.ConnectionType.Data){var l=this.connection,s={ordered:!!o.reliable},u=c.createDataChannel(l.label,s);l.initialize(u)}this._makeOffer()}else this.handleSDP("OFFER",o.sdp)},a.prototype._startPeerConnection=function(){w.default.log("Creating RTCPeerConnection.");var o=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(o),o},a.prototype._setupListeners=function(o){var c=this,l=this.connection.peer,s=this.connection.connectionId,u=this.connection.type,r=this.connection.provider;w.default.log("Listening for ICE candidates."),o.onicecandidate=function(n){n.candidate&&n.candidate.candidate&&(w.default.log("Received ICE candidates for "+l+":",n.candidate),r.socket.send({type:y.ServerMessageType.Candidate,payload:{candidate:n.candidate,type:u,connectionId:s},dst:l}))},o.oniceconnectionstatechange=function(){switch(o.iceConnectionState){case"failed":w.default.log("iceConnectionState is failed, closing connections to "+l),c.connection.emit(y.ConnectionEventType.Error,new Error("Negotiation of connection to "+l+" failed.")),c.connection.close();break;case"closed":w.default.log("iceConnectionState is closed, closing connections to "+l),c.connection.emit(y.ConnectionEventType.Error,new Error("Connection to "+l+" closed.")),c.connection.close();break;case"disconnected":w.default.log("iceConnectionState changed to disconnected on the connection with "+l);break;case"completed":o.onicecandidate=P.util.noop}c.connection.emit(y.ConnectionEventType.IceStateChanged,o.iceConnectionState)},w.default.log("Listening for data channel"),o.ondatachannel=function(n){w.default.log("Received data channel");var t=n.channel;r.getConnection(l,s).initialize(t)},w.default.log("Listening for remote stream"),o.ontrack=function(n){w.default.log("Received remote stream");var t=n.streams[0],i=r.getConnection(l,s);if(i.type===y.ConnectionType.Media){var p=i;c._addStreamToMediaConnection(t,p)}}},a.prototype.cleanup=function(){w.default.log("Cleaning up PeerConnection to "+this.connection.peer);var o=this.connection.peerConnection;if(o){this.connection.peerConnection=null,o.onicecandidate=o.oniceconnectionstatechange=o.ondatachannel=o.ontrack=function(){};var c=o.signalingState!=="closed",l=!1;if(this.connection.type===y.ConnectionType.Data){var s=this.connection.dataChannel;s&&(l=!!s.readyState&&s.readyState!=="closed")}(c||l)&&o.close()}},a.prototype._makeOffer=function(){return f(this,void 0,Promise,function(){var o,c,l,s,u,r,n;return m(this,function(t){switch(t.label){case 0:o=this.connection.peerConnection,c=this.connection.provider,t.label=1;case 1:return t.trys.push([1,7,,8]),[4,o.createOffer(this.connection.options.constraints)];case 2:l=t.sent(),w.default.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(l.sdp=this.connection.options.sdpTransform(l.sdp)||l.sdp),t.label=3;case 3:return t.trys.push([3,5,,6]),[4,o.setLocalDescription(l)];case 4:return t.sent(),w.default.log("Set localDescription:",l,"for:"+this.connection.peer),s={sdp:l,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:P.util.browser},this.connection.type===y.ConnectionType.Data&&(u=this.connection,s=g(g({},s),{label:u.label,reliable:u.reliable,serialization:u.serialization})),c.socket.send({type:y.ServerMessageType.Offer,payload:s,dst:this.connection.peer}),[3,6];case 5:return(r=t.sent())!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(c.emitError(y.PeerErrorType.WebRTC,r),w.default.log("Failed to setLocalDescription, ",r)),[3,6];case 6:return[3,8];case 7:return n=t.sent(),c.emitError(y.PeerErrorType.WebRTC,n),w.default.log("Failed to createOffer, ",n),[3,8];case 8:return[2]}})})},a.prototype._makeAnswer=function(){return f(this,void 0,Promise,function(){var o,c,l,s,u;return m(this,function(r){switch(r.label){case 0:o=this.connection.peerConnection,c=this.connection.provider,r.label=1;case 1:return r.trys.push([1,7,,8]),[4,o.createAnswer()];case 2:l=r.sent(),w.default.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(l.sdp=this.connection.options.sdpTransform(l.sdp)||l.sdp),r.label=3;case 3:return r.trys.push([3,5,,6]),[4,o.setLocalDescription(l)];case 4:return r.sent(),w.default.log("Set localDescription:",l,"for:"+this.connection.peer),c.socket.send({type:y.ServerMessageType.Answer,payload:{sdp:l,type:this.connection.type,connectionId:this.connection.connectionId,browser:P.util.browser},dst:this.connection.peer}),[3,6];case 5:return s=r.sent(),c.emitError(y.PeerErrorType.WebRTC,s),w.default.log("Failed to setLocalDescription, ",s),[3,6];case 6:return[3,8];case 7:return u=r.sent(),c.emitError(y.PeerErrorType.WebRTC,u),w.default.log("Failed to create answer, ",u),[3,8];case 8:return[2]}})})},a.prototype.handleSDP=function(o,c){return f(this,void 0,Promise,function(){var l,s,u,r;return m(this,function(n){switch(n.label){case 0:c=new RTCSessionDescription(c),l=this.connection.peerConnection,s=this.connection.provider,w.default.log("Setting remote description",c),u=this,n.label=1;case 1:return n.trys.push([1,5,,6]),[4,l.setRemoteDescription(c)];case 2:return n.sent(),w.default.log("Set remoteDescription:"+o+" for:"+this.connection.peer),o!=="OFFER"?[3,4]:[4,u._makeAnswer()];case 3:n.sent(),n.label=4;case 4:return[3,6];case 5:return r=n.sent(),s.emitError(y.PeerErrorType.WebRTC,r),w.default.log("Failed to setRemoteDescription, ",r),[3,6];case 6:return[2]}})})},a.prototype.handleCandidate=function(o){return f(this,void 0,Promise,function(){var c,l,s,u,r,n;return m(this,function(t){switch(t.label){case 0:w.default.log("handleCandidate:",o),c=o.candidate,l=o.sdpMLineIndex,s=o.sdpMid,u=this.connection.peerConnection,r=this.connection.provider,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,u.addIceCandidate(new RTCIceCandidate({sdpMid:s,sdpMLineIndex:l,candidate:c}))];case 2:return t.sent(),w.default.log("Added ICE candidate for:"+this.connection.peer),[3,4];case 3:return n=t.sent(),r.emitError(y.PeerErrorType.WebRTC,n),w.default.log("Failed to handleCandidate, ",n),[3,4];case 4:return[2]}})})},a.prototype._addTracksToConnection=function(o,c){if(w.default.log("add tracks from stream "+o.id+" to peer connection"),!c.addTrack)return w.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");o.getTracks().forEach(function(l){c.addTrack(l,o)})},a.prototype._addStreamToMediaConnection=function(o,c){w.default.log("add stream "+o.id+" to media connection "+c.connectionId),c.addStream(o)},a}();C.Negotiator=e},{"./util":"BHXf","./logger":"WOs9","./enums":"ZRYf"}],tQFK:[function(D,I,C){"use strict";var g=this&&this.__extends||function(){var b=function(P,w){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,e){y.__proto__=e}||function(y,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(y[a]=e[a])})(P,w)};return function(P,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function y(){this.constructor=P}b(P,w),P.prototype=w===null?Object.create(w):(y.prototype=w.prototype,new y)}}();Object.defineProperty(C,"__esModule",{value:!0}),C.BaseConnection=void 0;var f=D("eventemitter3"),m=function(b){function P(w,y,e){var a=b.call(this)||this;return a.peer=w,a.provider=y,a.options=e,a._open=!1,a.metadata=e.metadata,a}return g(P,b),Object.defineProperty(P.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),P}(f.EventEmitter);C.BaseConnection=m},{eventemitter3:"JJlS"}],dbHP:[function(D,I,C){"use strict";var g=this&&this.__extends||function(){var c=function(l,s){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,r){u.__proto__=r}||function(u,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(u[n]=r[n])})(l,s)};return function(l,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=l}c(l,s),l.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}(),f=this&&this.__assign||function(){return(f=Object.assign||function(c){for(var l,s=1,u=arguments.length;s<u;s++)for(var r in l=arguments[s])Object.prototype.hasOwnProperty.call(l,r)&&(c[r]=l[r]);return c}).apply(this,arguments)},m=this&&this.__values||function(c){var l=typeof Symbol=="function"&&Symbol.iterator,s=l&&c[l],u=0;if(s)return s.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&u>=c.length&&(c=void 0),{value:c&&c[u++],done:!c}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")},b=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(C,"__esModule",{value:!0}),C.MediaConnection=void 0;var P=D("./util"),w=b(D("./logger")),y=D("./negotiator"),e=D("./enums"),a=D("./baseconnection"),o=function(c){function l(s,u,r){var n=c.call(this,s,u,r)||this;return n._localStream=n.options._stream,n.connectionId=n.options.connectionId||l.ID_PREFIX+P.util.randomToken(),n._negotiator=new y.Negotiator(n),n._localStream&&n._negotiator.startConnection({_stream:n._localStream,originator:!0}),n}return g(l,c),Object.defineProperty(l.prototype,"type",{get:function(){return e.ConnectionType.Media},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),l.prototype.addStream=function(s){w.default.log("Receiving stream",s),this._remoteStream=s,c.prototype.emit.call(this,e.ConnectionEventType.Stream,s)},l.prototype.handleMessage=function(s){var u=s.type,r=s.payload;switch(s.type){case e.ServerMessageType.Answer:this._negotiator.handleSDP(u,r.sdp),this._open=!0;break;case e.ServerMessageType.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:w.default.warn("Unrecognized message type:"+u+" from peer:"+this.peer)}},l.prototype.answer=function(s,u){var r,n;if(u===void 0&&(u={}),this._localStream)w.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");else{this._localStream=s,u&&u.sdpTransform&&(this.options.sdpTransform=u.sdpTransform),this._negotiator.startConnection(f(f({},this.options._payload),{_stream:s}));var t=this.provider._getMessages(this.connectionId);try{for(var i=m(t),p=i.next();!p.done;p=i.next()){var S=p.value;this.handleMessage(S)}}catch(_){r={error:_}}finally{try{p&&!p.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}this._open=!0}},l.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,c.prototype.emit.call(this,e.ConnectionEventType.Close))},l.ID_PREFIX="mc_",l}(a.BaseConnection);C.MediaConnection=o},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK"}],GGp6:[function(D,I,C){"use strict";var g=this&&this.__extends||function(){var w=function(y,e){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(a[c]=o[c])})(y,e)};return function(y,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function a(){this.constructor=y}w(y,e),y.prototype=e===null?Object.create(e):(a.prototype=e.prototype,new a)}}(),f=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(C,"__esModule",{value:!0}),C.EncodingQueue=void 0;var m=D("eventemitter3"),b=f(D("./logger")),P=function(w){function y(){var e=w.call(this)||this;return e.fileReader=new FileReader,e._queue=[],e._processing=!1,e.fileReader.onload=function(a){e._processing=!1,a.target&&e.emit("done",a.target.result),e.doNextTask()},e.fileReader.onerror=function(a){b.default.error("EncodingQueue error:",a),e._processing=!1,e.destroy(),e.emit("error",a)},e}return g(y,w),Object.defineProperty(y.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),y.prototype.enque=function(e){this.queue.push(e),this.processing||this.doNextTask()},y.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},y.prototype.doNextTask=function(){this.size!==0&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},y}(m.EventEmitter);C.EncodingQueue=P},{eventemitter3:"JJlS","./logger":"WOs9"}],GBTQ:[function(D,I,C){"use strict";var g=this&&this.__extends||function(){var c=function(l,s){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,r){u.__proto__=r}||function(u,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(u[n]=r[n])})(l,s)};return function(l,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=l}c(l,s),l.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}(),f=this&&this.__values||function(c){var l=typeof Symbol=="function"&&Symbol.iterator,s=l&&c[l],u=0;if(s)return s.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&u>=c.length&&(c=void 0),{value:c&&c[u++],done:!c}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")},m=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(C,"__esModule",{value:!0}),C.DataConnection=void 0;var b=D("./util"),P=m(D("./logger")),w=D("./negotiator"),y=D("./enums"),e=D("./baseconnection"),a=D("./encodingQueue"),o=function(c){function l(s,u,r){var n=c.call(this,s,u,r)||this;return n.stringify=JSON.stringify,n.parse=JSON.parse,n._buffer=[],n._bufferSize=0,n._buffering=!1,n._chunkedData={},n._encodingQueue=new a.EncodingQueue,n.connectionId=n.options.connectionId||l.ID_PREFIX+b.util.randomToken(),n.label=n.options.label||n.connectionId,n.serialization=n.options.serialization||y.SerializationType.Binary,n.reliable=!!n.options.reliable,n._encodingQueue.on("done",function(t){n._bufferedSend(t)}),n._encodingQueue.on("error",function(){P.default.error("DC#"+n.connectionId+": Error occured in encoding from blob to arraybuffer, close DC"),n.close()}),n._negotiator=new w.Negotiator(n),n._negotiator.startConnection(n.options._payload||{originator:!0}),n}return g(l,c),Object.defineProperty(l.prototype,"type",{get:function(){return y.ConnectionType.Data},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),l.prototype.initialize=function(s){this._dc=s,this._configureDataChannel()},l.prototype._configureDataChannel=function(){var s=this;b.util.supports.binaryBlob&&!b.util.supports.reliable||(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){P.default.log("DC#"+s.connectionId+" dc connection success"),s._open=!0,s.emit(y.ConnectionEventType.Open)},this.dataChannel.onmessage=function(u){P.default.log("DC#"+s.connectionId+" dc onmessage:",u.data),s._handleDataMessage(u)},this.dataChannel.onclose=function(){P.default.log("DC#"+s.connectionId+" dc closed for:",s.peer),s.close()}},l.prototype._handleDataMessage=function(s){var u=this,r=s.data,n=r.constructor,t=r;if(this.serialization===y.SerializationType.Binary||this.serialization===y.SerializationType.BinaryUTF8){if(n===Blob)return void b.util.blobToArrayBuffer(r,function(p){var S=b.util.unpack(p);u.emit(y.ConnectionEventType.Data,S)});if(n===ArrayBuffer)t=b.util.unpack(r);else if(n===String){var i=b.util.binaryStringToArrayBuffer(r);t=b.util.unpack(i)}}else this.serialization===y.SerializationType.JSON&&(t=this.parse(r));t.__peerData?this._handleChunk(t):c.prototype.emit.call(this,y.ConnectionEventType.Data,t)},l.prototype._handleChunk=function(s){var u=s.__peerData,r=this._chunkedData[u]||{data:[],count:0,total:s.total};if(r.data[s.n]=s.data,r.count++,this._chunkedData[u]=r,r.total===r.count){delete this._chunkedData[u];var n=new Blob(r.data);this._handleDataMessage({data:n})}},l.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,c.prototype.emit.call(this,y.ConnectionEventType.Close))},l.prototype.send=function(s,u){if(this.open)if(this.serialization===y.SerializationType.JSON)this._bufferedSend(this.stringify(s));else if(this.serialization===y.SerializationType.Binary||this.serialization===y.SerializationType.BinaryUTF8){var r=b.util.pack(s);if(!u&&r.size>b.util.chunkedMTU)return void this._sendChunks(r);b.util.supports.binaryBlob?this._bufferedSend(r):this._encodingQueue.enque(r)}else this._bufferedSend(s);else c.prototype.emit.call(this,y.ConnectionEventType.Error,new Error("Connection is not open. You should listen for the `open` event before sending messages."))},l.prototype._bufferedSend=function(s){!this._buffering&&this._trySend(s)||(this._buffer.push(s),this._bufferSize=this._buffer.length)},l.prototype._trySend=function(s){var u=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>l.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){u._buffering=!1,u._tryBuffer()},50),!1;try{this.dataChannel.send(s)}catch(r){return P.default.error("DC#:"+this.connectionId+" Error when sending:",r),this._buffering=!0,this.close(),!1}return!0},l.prototype._tryBuffer=function(){if(this.open&&this._buffer.length!==0){var s=this._buffer[0];this._trySend(s)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},l.prototype._sendChunks=function(s){var u,r,n=b.util.chunk(s);P.default.log("DC#"+this.connectionId+" Try to send "+n.length+" chunks...");try{for(var t=f(n),i=t.next();!i.done;i=t.next()){var p=i.value;this.send(p,!0)}}catch(S){u={error:S}}finally{try{i&&!i.done&&(r=t.return)&&r.call(t)}finally{if(u)throw u.error}}},l.prototype.handleMessage=function(s){var u=s.payload;switch(s.type){case y.ServerMessageType.Answer:this._negotiator.handleSDP(s.type,u.sdp);break;case y.ServerMessageType.Candidate:this._negotiator.handleCandidate(u.candidate);break;default:P.default.warn("Unrecognized message type:",s.type,"from peer:",this.peer)}},l.ID_PREFIX="dc_",l.MAX_BUFFERED_AMOUNT=8388608,l}(e.BaseConnection);C.DataConnection=o},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK","./encodingQueue":"GGp6"}],in7L:[function(D,I,C){"use strict";var g=this&&this.__awaiter||function(y,e,a,o){return new(a||(a=Promise))(function(c,l){function s(n){try{r(o.next(n))}catch(t){l(t)}}function u(n){try{r(o.throw(n))}catch(t){l(t)}}function r(n){var t;n.done?c(n.value):(t=n.value,t instanceof a?t:new a(function(i){i(t)})).then(s,u)}r((o=o.apply(y,e||[])).next())})},f=this&&this.__generator||function(y,e){var a,o,c,l,s={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(r){return function(n){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(c=2&t[0]?o.return:t[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,t[1])).done)return c;switch(o=0,c&&(t=[2&t[0],c.value]),t[0]){case 0:case 1:c=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(c=(c=s.trys).length>0&&c[c.length-1])&&(t[0]===6||t[0]===2)){s=0;continue}if(t[0]===3&&(!c||t[1]>c[0]&&t[1]<c[3])){s.label=t[1];break}if(t[0]===6&&s.label<c[1]){s.label=c[1],c=t;break}if(c&&s.label<c[2]){s.label=c[2],s.ops.push(t);break}c[2]&&s.ops.pop(),s.trys.pop();continue}t=e.call(y,s)}catch(i){t=[6,i],o=0}finally{a=c=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([r,n])}}},m=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(C,"__esModule",{value:!0}),C.API=void 0;var b=D("./util"),P=m(D("./logger")),w=function(){function y(e){this._options=e}return y.prototype._buildUrl=function(e){var a=(this._options.secure?"https://":"http://")+this._options.host+":"+this._options.port+this._options.path+this._options.key+"/"+e;return a+="?ts="+new Date().getTime()+Math.random()},y.prototype.retrieveId=function(){return g(this,void 0,Promise,function(){var e,a,o,c;return f(this,function(l){switch(l.label){case 0:e=this._buildUrl("id"),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,fetch(e)];case 2:if((a=l.sent()).status!==200)throw new Error("Error. Status:"+a.status);return[2,a.text()];case 3:throw o=l.sent(),P.default.error("Error retrieving ID",o),c="",this._options.path==="/"&&this._options.host!==b.util.CLOUD_HOST&&(c=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+c);case 4:return[2]}})})},y.prototype.listAllPeers=function(){return g(this,void 0,Promise,function(){var e,a,o,c;return f(this,function(l){switch(l.label){case 0:e=this._buildUrl("peers"),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,fetch(e)];case 2:if((a=l.sent()).status!==200)throw a.status===401?(o="",o=this._options.host===b.util.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+o)):new Error("Error. Status:"+a.status);return[2,a.json()];case 3:throw c=l.sent(),P.default.error("Error retrieving list peers",c),new Error("Could not get list peers from the server."+c);case 4:return[2]}})})},y}();C.API=w},{"./util":"BHXf","./logger":"WOs9"}],Hxpd:[function(D,I,C){"use strict";var g=this&&this.__extends||function(){var n=function(t,i){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,S){p.__proto__=S}||function(p,S){for(var _ in S)Object.prototype.hasOwnProperty.call(S,_)&&(p[_]=S[_])})(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function p(){this.constructor=t}n(t,i),t.prototype=i===null?Object.create(i):(p.prototype=i.prototype,new p)}}(),f=this&&this.__assign||function(){return(f=Object.assign||function(n){for(var t,i=1,p=arguments.length;i<p;i++)for(var S in t=arguments[i])Object.prototype.hasOwnProperty.call(t,S)&&(n[S]=t[S]);return n}).apply(this,arguments)},m=this&&this.__values||function(n){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&n[t],p=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&p>=n.length&&(n=void 0),{value:n&&n[p++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},b=this&&this.__read||function(n,t){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var p,S,_=i.call(n),E=[];try{for(;(t===void 0||t-- >0)&&!(p=_.next()).done;)E.push(p.value)}catch(x){S={error:x}}finally{try{p&&!p.done&&(i=_.return)&&i.call(_)}finally{if(S)throw S.error}}return E},P=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(C,"__esModule",{value:!0}),C.Peer=void 0;var w=D("eventemitter3"),y=D("./util"),e=P(D("./logger")),a=D("./socket"),o=D("./mediaconnection"),c=D("./dataconnection"),l=D("./enums"),s=D("./api"),u=function(){return function(){}}(),r=function(n){function t(i,p){var S,_=n.call(this)||this;return _._id=null,_._lastServerId=null,_._destroyed=!1,_._disconnected=!1,_._open=!1,_._connections=new Map,_._lostMessages=new Map,i&&i.constructor==Object?p=i:i&&(S=i.toString()),p=f({debug:0,host:y.util.CLOUD_HOST,port:y.util.CLOUD_PORT,path:"/",key:t.DEFAULT_KEY,token:y.util.randomToken(),config:y.util.defaultConfig},p),_._options=p,_._options.host==="/"&&(_._options.host=window.location.hostname),_._options.path&&(_._options.path[0]!=="/"&&(_._options.path="/"+_._options.path),_._options.path[_._options.path.length-1]!=="/"&&(_._options.path+="/")),_._options.secure===void 0&&_._options.host!==y.util.CLOUD_HOST?_._options.secure=y.util.isSecure():_._options.host==y.util.CLOUD_HOST&&(_._options.secure=!0),_._options.logFunction&&e.default.setLogFunction(_._options.logFunction),e.default.logLevel=_._options.debug||0,_._api=new s.API(p),_._socket=_._createServerConnection(),y.util.supports.audioVideo||y.util.supports.data?S&&!y.util.validateId(S)?(_._delayedAbort(l.PeerErrorType.InvalidID,'ID "'+S+'" is invalid'),_):(S?_._initialize(S):_._api.retrieveId().then(function(E){return _._initialize(E)}).catch(function(E){return _._abort(l.PeerErrorType.ServerError,E)}),_):(_._delayedAbort(l.PeerErrorType.BrowserIncompatible,"The current browser does not support WebRTC"),_)}return g(t,n),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connections",{get:function(){var i,p,S=Object.create(null);try{for(var _=m(this._connections),E=_.next();!E.done;E=_.next()){var x=b(E.value,2),M=x[0],k=x[1];S[M]=k}}catch(L){i={error:L}}finally{try{E&&!E.done&&(p=_.return)&&p.call(_)}finally{if(i)throw i.error}}return S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),t.prototype._createServerConnection=function(){var i=this,p=new a.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return p.on(l.SocketEventType.Message,function(S){i._handleMessage(S)}),p.on(l.SocketEventType.Error,function(S){i._abort(l.PeerErrorType.SocketError,S)}),p.on(l.SocketEventType.Disconnected,function(){i.disconnected||(i.emitError(l.PeerErrorType.Network,"Lost connection to server."),i.disconnect())}),p.on(l.SocketEventType.Close,function(){i.disconnected||i._abort(l.PeerErrorType.SocketClosed,"Underlying socket is already closed.")}),p},t.prototype._initialize=function(i){this._id=i,this.socket.start(i,this._options.token)},t.prototype._handleMessage=function(i){var p,S,_=i.type,E=i.payload,x=i.src;switch(_){case l.ServerMessageType.Open:this._lastServerId=this.id,this._open=!0,this.emit(l.PeerEventType.Open,this.id);break;case l.ServerMessageType.Error:this._abort(l.PeerErrorType.ServerError,E.msg);break;case l.ServerMessageType.IdTaken:this._abort(l.PeerErrorType.UnavailableID,'ID "'+this.id+'" is taken');break;case l.ServerMessageType.InvalidKey:this._abort(l.PeerErrorType.InvalidKey,'API KEY "'+this._options.key+'" is invalid');break;case l.ServerMessageType.Leave:e.default.log("Received leave message from "+x),this._cleanupPeer(x),this._connections.delete(x);break;case l.ServerMessageType.Expire:this.emitError(l.PeerErrorType.PeerUnavailable,"Could not connect to peer "+x);break;case l.ServerMessageType.Offer:var M=E.connectionId;if((B=this.getConnection(x,M))&&(B.close(),e.default.warn("Offer received for existing Connection ID:"+M)),E.type===l.ConnectionType.Media)B=new o.MediaConnection(x,this,{connectionId:M,_payload:E,metadata:E.metadata}),this._addConnection(x,B),this.emit(l.PeerEventType.Call,B);else{if(E.type!==l.ConnectionType.Data)return void e.default.warn("Received malformed connection type:"+E.type);B=new c.DataConnection(x,this,{connectionId:M,_payload:E,metadata:E.metadata,label:E.label,serialization:E.serialization,reliable:E.reliable}),this._addConnection(x,B),this.emit(l.PeerEventType.Connection,B)}var k=this._getMessages(M);try{for(var L=m(k),N=L.next();!N.done;N=L.next()){var U=N.value;B.handleMessage(U)}}catch(z){p={error:z}}finally{try{N&&!N.done&&(S=L.return)&&S.call(L)}finally{if(p)throw p.error}}break;default:if(!E)return void e.default.warn("You received a malformed message from "+x+" of type "+_);var B;M=E.connectionId,(B=this.getConnection(x,M))&&B.peerConnection?B.handleMessage(i):M?this._storeMessage(M,i):e.default.warn("You received an unrecognized message:",i)}},t.prototype._storeMessage=function(i,p){this._lostMessages.has(i)||this._lostMessages.set(i,[]),this._lostMessages.get(i).push(p)},t.prototype._getMessages=function(i){var p=this._lostMessages.get(i);return p?(this._lostMessages.delete(i),p):[]},t.prototype.connect=function(i,p){if(p===void 0&&(p={}),this.disconnected)return e.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(l.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");var S=new c.DataConnection(i,this,p);return this._addConnection(i,S),S},t.prototype.call=function(i,p,S){if(S===void 0&&(S={}),this.disconnected)return e.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(l.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(p){S._stream=p;var _=new o.MediaConnection(i,this,S);return this._addConnection(i,_),_}e.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.")},t.prototype._addConnection=function(i,p){e.default.log("add connection "+p.type+":"+p.connectionId+" to peerId:"+i),this._connections.has(i)||this._connections.set(i,[]),this._connections.get(i).push(p)},t.prototype._removeConnection=function(i){var p=this._connections.get(i.peer);if(p){var S=p.indexOf(i);S!==-1&&p.splice(S,1)}this._lostMessages.delete(i.connectionId)},t.prototype.getConnection=function(i,p){var S,_,E=this._connections.get(i);if(!E)return null;try{for(var x=m(E),M=x.next();!M.done;M=x.next()){var k=M.value;if(k.connectionId===p)return k}}catch(L){S={error:L}}finally{try{M&&!M.done&&(_=x.return)&&_.call(x)}finally{if(S)throw S.error}}return null},t.prototype._delayedAbort=function(i,p){var S=this;setTimeout(function(){S._abort(i,p)},0)},t.prototype._abort=function(i,p){e.default.error("Aborting!"),this.emitError(i,p),this._lastServerId?this.disconnect():this.destroy()},t.prototype.emitError=function(i,p){var S;e.default.error("Error:",p),(S=typeof p=="string"?new Error(p):p).type=i,this.emit(l.PeerEventType.Error,S)},t.prototype.destroy=function(){this.destroyed||(e.default.log("Destroy peer with ID:"+this.id),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit(l.PeerEventType.Close))},t.prototype._cleanup=function(){var i,p;try{for(var S=m(this._connections.keys()),_=S.next();!_.done;_=S.next()){var E=_.value;this._cleanupPeer(E),this._connections.delete(E)}}catch(x){i={error:x}}finally{try{_&&!_.done&&(p=S.return)&&p.call(S)}finally{if(i)throw i.error}}this.socket.removeAllListeners()},t.prototype._cleanupPeer=function(i){var p,S,_=this._connections.get(i);if(_)try{for(var E=m(_),x=E.next();!x.done;x=E.next())x.value.close()}catch(M){p={error:M}}finally{try{x&&!x.done&&(S=E.return)&&S.call(E)}finally{if(p)throw p.error}}},t.prototype.disconnect=function(){if(!this.disconnected){var i=this.id;e.default.log("Disconnect peer with ID:"+i),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=i,this._id=null,this.emit(l.PeerEventType.Disconnected,i)}},t.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)e.default.log("Attempting reconnection to server with ID "+this._lastServerId),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer "+this.id+" cannot reconnect because it is not disconnected from the server!");e.default.error("In a hurry? We're still trying to make the initial connection!")}},t.prototype.listAllPeers=function(i){var p=this;i===void 0&&(i=function(S){}),this._api.listAllPeers().then(function(S){return i(S)}).catch(function(S){return p._abort(l.PeerErrorType.ServerError,S)})},t.DEFAULT_KEY="peerjs",t}(w.EventEmitter);C.Peer=r},{eventemitter3:"JJlS","./util":"BHXf","./logger":"WOs9","./socket":"wJlv","./mediaconnection":"dbHP","./dataconnection":"GBTQ","./enums":"ZRYf","./api":"in7L"}],iTK6:[function(D,I,C){"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.peerjs=void 0;var g=D("./util"),f=D("./peer");C.peerjs={Peer:f.Peer,util:g.util},C.default=f.Peer,window.peerjs=C.peerjs,window.Peer=f.Peer},{"./util":"BHXf","./peer":"Hxpd"}]},{},["iTK6"],null)});var jt=Ne(tt()),ot=Ne(nt()),at=Ne(it());function ce(){return window}function ue(D){console.log(`[Server] ${D}`)}function Rt(){return new ot.default().getBrowser().name==="Chrome"}var st=class{constructor(){this.hostId="";this.isSpeechRunning=!1;this.UpdateNetworkStatus=I=>{let C=document.querySelector("#status-network");C&&(C.innerHTML=I)};this.UpdateSTTStatus=I=>{let C=document.querySelector("#status-stt");C&&(C.innerHTML=I)};this.UpdatLanguageStatus=I=>{let C=document.querySelector("#status-language");C&&(C.innerHTML=I)};if(!Rt()){this.ShowOverlay();return}ue("Create host instance"),this.ShowView("connect"),this.hostId=localStorage.getItem("obs_key")}ChangeHostId(I){localStorage.setItem("obs_key",I),this.hostId=I}ShowOverlay(){let I=document.querySelector("#block-overlay"),C=document.importNode(I.content,!0);document.body.appendChild(C)}ShowView(I){let C=document.querySelector("#view");if(!C)return;let g=document.querySelector(`#view-${I}`),f=document.importNode(g.content,!0);C.innerHTML="",C.appendChild(f)}UpdateSttValue(I){var g,f;let C=document.querySelector("#stt-value");C&&(C.innerHTML=I);for(let m in(g=this.peerInstance)==null?void 0:g.connections)for(let b of(f=this.peerInstance)==null?void 0:f.connections[m])b.send({type:"stt",value:I})}Reset(){var I,C;ue("Reset"),this.isSpeechRunning=!1,(I=this.peerInstance)==null||I.destroy(),(C=this.recognitionInstance)==null||C.stop(),this.ShowView("connect"),this.UpdateNetworkStatus("-"),this.UpdateSTTStatus("-"),this.UpdatLanguageStatus("-")}CopyLink(){var C;let I=location.href.split("/").slice(0,-2).join("/");console.log(I),navigator.clipboard.writeText(`${I}/client#${(C=this.peerInstance)==null?void 0:C.id}`)}BindPeer(){var I,C,g;ue("Bind peer"),this.UpdateNetworkStatus("Connecting"),this.peerInstance=new at.default(this.hostId||""),(I=this.peerInstance)==null||I.on("open",f=>{this.UpdateNetworkStatus("Connected"),this.BindRecognition()}),(C=this.peerInstance)==null||C.on("error",f=>{console.error(f),this.Reset()}),(g=this.peerInstance)==null||g.on("connection",f=>this.BindClientConnection(f))}BindClientConnection(I){I.on("open",()=>{})}SelectDialect(I){this.languageDialect=I}BindRecognition(){var I;ue("Initialize recognition"),!!this.languageDialect&&(this.UpdateSTTStatus("Connecting"),this.recognitionInstance=new(ce()).webkitSpeechRecognition,this.recognitionInstance.lang=this.languageDialect,this.recognitionInstance.continuous=!0,this.recognitionInstance.interimResults=!0,this.recognitionInstance.onerror=C=>{C.error==="no-speech"?ue("OnError Silence error"):(this.Reset(),console.error(C))},this.recognitionInstance.onend=C=>{!this.isSpeechRunning||(ue("OnEnd Restart recognition"),this.recognitionInstance.start())},this.recognitionInstance.onstart=()=>{this.isSpeechRunning||(ue("Start recognition"),this.isSpeechRunning=!0,this.UpdateSTTStatus("Connected"),this.languageDialect&&this.UpdatLanguageStatus(this.languageDialect),this.ShowView("running"))},this.recognitionInstance.onresult=C=>{for(var g="",f="",m=C.resultIndex;m<C.results.length;++m)C.results[m].isFinal?(f+=C.results[m][0].transcript,this.UpdateSttValue(f)):(g+=C.results[m][0].transcript,this.UpdateSttValue(g))},(I=this.recognitionInstance)==null||I.start())}Init(){!this.languageDialect||(this.ShowView("starting"),this.BindPeer())}};ce().dialectList=[];ce().getDialectList=D=>{let I=ce().langs[D],[C,...g]=I;return ce().dialectList=I[1],g};window.onload=()=>ce().server=new st;ce().langs=[["Afrikaans",["af-ZA"]],["\u12A0\u121B\u122D\u129B",["am-ET"]],["Az\u0259rbaycanca",["az-AZ"]],["\u09AC\u09BE\u0982\u09B2\u09BE",["bn-BD","\u09AC\u09BE\u0982\u09B2\u09BE\u09A6\u09C7\u09B6"],["bn-IN","\u09AD\u09BE\u09B0\u09A4"]],["Bahasa Indonesia",["id-ID"]],["Bahasa Melayu",["ms-MY"]],["Catal\xE0",["ca-ES"]],["\u010Ce\u0161tina",["cs-CZ"]],["Dansk",["da-DK"]],["Deutsch",["de-DE"]],["English",["en-AU","Australia"],["en-CA","Canada"],["en-IN","India"],["en-KE","Kenya"],["en-TZ","Tanzania"],["en-GH","Ghana"],["en-IE","Ireland"],["en-NZ","New Zealand"],["en-NG","Nigeria"],["en-ZA","South Africa"],["en-PH","Philippines"],["en-GB","United Kingdom"],["en-US","United States"]],["Espa\xF1ol",["es-AR","Argentina"],["es-BO","Bolivia"],["es-CL","Chile"],["es-CO","Colombia"],["es-CR","Costa Rica"],["es-EC","Ecuador"],["es-SV","El Salvador"],["es-ES","Espa\xF1a"],["es-US","Estados Unidos"],["es-GT","Guatemala"],["es-HN","Honduras"],["es-MX","M\xE9xico"],["es-NI","Nicaragua"],["es-PA","Panam\xE1"],["es-PY","Paraguay"],["es-PE","Per\xFA"],["es-PR","Puerto Rico"],["es-DO","Rep\xFAblica Dominicana"],["es-UY","Uruguay"],["es-VE","Venezuela"]],["Euskara",["eu-ES"]],["Filipino",["fil-PH"]],["Fran\xE7ais",["fr-FR"]],["Basa Jawa",["jv-ID"]],["Galego",["gl-ES"]],["\u0A97\u0AC1\u0A9C\u0AB0\u0ABE\u0AA4\u0AC0",["gu-IN"]],["Hrvatski",["hr-HR"]],["IsiZulu",["zu-ZA"]],["\xCDslenska",["is-IS"]],["Italiano",["it-IT","Italia"],["it-CH","Svizzera"]],["\u0C95\u0CA8\u0CCD\u0CA8\u0CA1",["kn-IN"]],["\u1797\u17B6\u179F\u17B6\u1781\u17D2\u1798\u17C2\u179A",["km-KH"]],["Latvie\u0161u",["lv-LV"]],["Lietuvi\u0173",["lt-LT"]],["\u0D2E\u0D32\u0D2F\u0D3E\u0D33\u0D02",["ml-IN"]],["\u092E\u0930\u093E\u0920\u0940",["mr-IN"]],["Magyar",["hu-HU"]],["\u0EA5\u0EB2\u0EA7",["lo-LA"]],["Nederlands",["nl-NL"]],["\u0928\u0947\u092A\u093E\u0932\u0940 \u092D\u093E\u0937\u093E",["ne-NP"]],["Norsk bokm\xE5l",["nb-NO"]],["Polski",["pl-PL"]],["Portugu\xEAs",["pt-BR","Brasil"],["pt-PT","Portugal"]],["Rom\xE2n\u0103",["ro-RO"]],["\u0DC3\u0DD2\u0D82\u0DC4\u0DBD",["si-LK"]],["Sloven\u0161\u010Dina",["sl-SI"]],["Basa Sunda",["su-ID"]],["Sloven\u010Dina",["sk-SK"]],["Suomi",["fi-FI"]],["Svenska",["sv-SE"]],["Kiswahili",["sw-TZ","Tanzania"],["sw-KE","Kenya"]],["\u10E5\u10D0\u10E0\u10D7\u10E3\u10DA\u10D8",["ka-GE"]],["\u0540\u0561\u0575\u0565\u0580\u0565\u0576",["hy-AM"]],["\u0BA4\u0BAE\u0BBF\u0BB4\u0BCD",["ta-IN","\u0B87\u0BA8\u0BCD\u0BA4\u0BBF\u0BAF\u0BBE"],["ta-SG","\u0B9A\u0BBF\u0B99\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0BC2\u0BB0\u0BCD"],["ta-LK","\u0B87\u0BB2\u0B99\u0BCD\u0B95\u0BC8"],["ta-MY","\u0BAE\u0BB2\u0BC7\u0B9A\u0BBF\u0BAF\u0BBE"]],["\u0C24\u0C46\u0C32\u0C41\u0C17\u0C41",["te-IN"]],["Ti\u1EBFng Vi\u1EC7t",["vi-VN"]],["T\xFCrk\xE7e",["tr-TR"]],["\u0627\u064F\u0631\u062F\u064F\u0648",["ur-PK","\u067E\u0627\u06A9\u0633\u062A\u0627\u0646"],["ur-IN","\u0628\u06BE\u0627\u0631\u062A"]],["\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC",["el-GR"]],["\u0431\u044A\u043B\u0433\u0430\u0440\u0441\u043A\u0438",["bg-BG"]],["P\u0443\u0441\u0441\u043A\u0438\u0439",["ru-RU"]],["\u0421\u0440\u043F\u0441\u043A\u0438",["sr-RS"]],["\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430",["uk-UA"]],["\uD55C\uAD6D\uC5B4",["ko-KR"]],["\u4E2D\u6587",["cmn-Hans-CN","\u666E\u901A\u8BDD (\u4E2D\u56FD\u5927\u9646)"],["cmn-Hans-HK","\u666E\u901A\u8BDD (\u9999\u6E2F)"],["cmn-Hant-TW","\u4E2D\u6587 (\u53F0\u7063)"],["yue-Hant-HK","\u7CB5\u8A9E (\u9999\u6E2F)"]],["\u65E5\u672C\u8A9E",["ja-JP"]],["\u0939\u093F\u0928\u094D\u0926\u0940",["hi-IN"]],["\u0E20\u0E32\u0E29\u0E32\u0E44\u0E17\u0E22",["th-TH"]]];})();
/*!@license
 * UAParser.js v0.7.28
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright  2012-2021 Faisal Salman <f@faisalman.com>
 * Licensed under MIT License
 */
