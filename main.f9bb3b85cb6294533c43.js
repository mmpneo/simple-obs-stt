(self.webpackChunksimple_obs_stt=self.webpackChunksimple_obs_stt||[]).push([[179],{8255:e=>{function t(e){return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=()=>[],t.resolve=t,t.id=8255,e.exports=t},7238:(e,t,n)=>{"use strict";n.d(t,{l3:()=>s,_j:()=>r,LC:()=>i,ZN:()=>d,jt:()=>a,vP:()=>c,oB:()=>u,eR:()=>l,X$:()=>o,ZE:()=>p,k1:()=>f});class r{}class i{}const s="*";function o(e,t){return{type:7,name:e,definitions:t,options:{}}}function a(e,t=null){return{type:4,styles:t,timings:e}}function c(e,t=null){return{type:2,steps:e,options:t}}function u(e){return{type:6,styles:e,offset:null}}function l(e,t,n=null){return{type:1,expr:e,animation:t,options:n}}function h(e){Promise.resolve(null).then(e)}class d{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){h(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class p{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,r=0;const i=this.players.length;0==i?h(()=>this._onFinish()):this.players.forEach(e=>{e.onDone(()=>{++t==i&&this._onFinish()}),e.onDestroy(()=>{++n==i&&this._onDestroy()}),e.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((e,t)=>Math.max(e,t.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(e=>{const n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)})}getPosition(){const e=this.players.reduce((e,t)=>null===e||t.totalTime>e.totalTime?t:e,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}const f="!"},8583:(e,t,n)=>{"use strict";n.d(t,{mr:()=>S,Ov:()=>K,ez:()=>X,K0:()=>c,Do:()=>_,Nd:()=>Y,V_:()=>h,Ye:()=>C,S$:()=>y,mk:()=>I,sg:()=>N,O5:()=>M,PC:()=>H,RF:()=>B,n9:()=>z,ED:()=>U,tP:()=>V,b0:()=>w,lw:()=>u,OU:()=>J,EM:()=>re,JF:()=>oe,NF:()=>te,PM:()=>ne,w_:()=>a,bD:()=>ee,q:()=>s,Mx:()=>O,HT:()=>o});var r=n(5040);let i=null;function s(){return i}function o(e){i||(i=e)}class a{}const c=new r.OlP("DocumentToken");let u=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:l,token:e,providedIn:"platform"}),e})();function l(){return(0,r.LFG)(d)}const h=new r.OlP("Location Initialized");let d=(()=>{class e extends u{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),()=>t.removeEventListener("popstate",e)}onHashChange(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),()=>t.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){p()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){p()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(c))},e.\u0275prov=(0,r.Yz7)({factory:f,token:e,providedIn:"platform"}),e})();function p(){return!!window.history.pushState}function f(){return new d((0,r.LFG)(c))}function v(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function m(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function g(e){return e&&"?"!==e[0]?"?"+e:e}let y=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:b,token:e,providedIn:"root"}),e})();function b(e){const t=(0,r.LFG)(c).location;return new w((0,r.LFG)(u),t&&t.origin||"")}const S=new r.OlP("appBaseHref");let w=(()=>{class e extends y{constructor(e,t){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return v(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(u),r.LFG(S,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),_=(()=>{class e extends y{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=t&&(this._baseHref=t)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=v(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(u),r.LFG(S,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),C=(()=>{class e{constructor(e,t){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=m(E(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+g(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,E(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+g(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+g(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformStrategy).historyGo)||void 0===n||n.call(t,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}))}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(y),r.LFG(u))},e.normalizeQueryParams=g,e.joinWithSlash=v,e.stripTrailingSlash=m,e.\u0275prov=(0,r.Yz7)({factory:T,token:e,providedIn:"root"}),e})();function T(){return new C((0,r.LFG)(y),(0,r.LFG)(u))}function E(e){return e.replace(/\/index.html$/,"")}var x=(()=>((x=x||{})[x.Zero=0]="Zero",x[x.One=1]="One",x[x.Two=2]="Two",x[x.Few=3]="Few",x[x.Many=4]="Many",x[x.Other=5]="Other",x))();const P=r.kL8;class k{}let R=(()=>{class e extends k{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(P(t||this.locale)(e)){case x.Zero:return"zero";case x.One:return"one";case x.Two:return"two";case x.Few:return"few";case x.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.soG))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function O(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,i]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}let I=(()=>{class e{constructor(e,t,n,r){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,r.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,r.AaK)(e.item)}`);this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(t=>this._toggleClass(t,!!e[t])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,t){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{t?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.ZZ4),r.Y36(r.aQg),r.Y36(r.SBq),r.Y36(r.Qsj))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e})();class A{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let N=(()=>{class e{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${n}' of type '${e=n,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,r)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new A(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new D(e,n);t.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new D(e,i);t.push(s)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=r,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();class D{constructor(e,t){this.record=e,this.view=t}}let M=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new L,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){j("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){j("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class L{constructor(){this.$implicit=null,this.ngIf=null}}function j(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${(0,r.AaK)(t)}'.`)}class F{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let B=(()=>{class e{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const t=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||t,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),t}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let t=0;t<this._defaultViews.length;t++)this._defaultViews[t].enforceState(e)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.lG2({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),e})(),z=(()=>{class e{constructor(e,t,n){this.ngSwitch=n,n._addCase(),this._view=new F(e,t)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(B,9))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),e})(),U=(()=>{class e{constructor(e,t,n){n._addDefault(new F(e,t))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(B,9))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngSwitchDefault",""]]}),e})(),H=(()=>{class e{constructor(e,t,n){this._ngEl=e,this._differs=t,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,t){const[n,r]=e.split(".");null!=(t=null!=t&&r?`${t}${r}`:t)?this._renderer.setStyle(this._ngEl.nativeElement,n,t):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(e){e.forEachRemovedItem(e=>this._setStyle(e.key,null)),e.forEachAddedItem(e=>this._setStyle(e.key,e.currentValue)),e.forEachChangedItem(e=>this._setStyle(e.key,e.currentValue))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(r.aQg),r.Y36(r.Qsj))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),e})(),V=(()=>{class e{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const e=this._viewContainerRef;this._viewRef&&e.remove(e.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?e.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[r.TTD]}),e})();function q(e,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${(0,r.AaK)(e)}'`)}class ${createSubscription(e,t){return e.subscribe({next:t,error:e=>{throw e}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class G{createSubscription(e,t){return e.then(t,e=>{throw e})}dispose(e){}onDestroy(e){}}const W=new G,Z=new $;let K=(()=>{class e{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,t=>this._updateLatestValue(e,t))}_selectStrategy(t){if((0,r.QGY)(t))return W;if((0,r.F4k)(t))return Z;throw q(e,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.sBO,16))},e.\u0275pipe=r.Yjl({name:"async",type:e,pure:!1}),e})(),Y=(()=>{class e{constructor(e){this.differs=e,this.keyValues=[],this.compareFn=Q}transform(e,t=Q){if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());const n=this.differ.diff(e),r=t!==this.compareFn;return n&&(this.keyValues=[],n.forEachItem(e=>{this.keyValues.push({key:e.key,value:e.currentValue})})),(n||r)&&(this.keyValues.sort(t),this.compareFn=t),this.keyValues}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.aQg,16))},e.\u0275pipe=r.Yjl({name:"keyvalue",type:e,pure:!1}),e})();function Q(e,t){const n=e.key,r=t.key;if(n===r)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(null===n)return 1;if(null===r)return-1;if("string"==typeof n&&"string"==typeof r)return n<r?-1:1;if("number"==typeof n&&"number"==typeof r)return n-r;if("boolean"==typeof n&&"boolean"==typeof r)return n<r?-1:1;const i=String(n),s=String(r);return i==s?0:i<s?-1:1}let J=(()=>{class e{transform(t,n,r){if(null==t)return null;if(!this.supports(t))throw q(e,t);return t.slice(n,r)}supports(e){return"string"==typeof e||Array.isArray(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Yjl({name:"slice",type:e,pure:!1}),e})(),X=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[{provide:k,useClass:R}]}),e})();const ee="browser";function te(e){return e===ee}function ne(e){return"server"===e}let re=(()=>{class e{}return e.\u0275prov=(0,r.Yz7)({token:e,providedIn:"root",factory:()=>new ie((0,r.LFG)(c),window)}),e})();class ie{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const n=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const e=r.shadowRoot;if(e){const n=e.getElementById(t)||e.querySelector(`[name="${t}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=se(this.window.history)||se(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function se(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class oe{}},5040:(e,t,n)=>{"use strict";n.d(t,{deG:()=>un,tb:()=>su,AFp:()=>eu,ip1:()=>Jc,CZH:()=>Xc,hGG:()=>Ju,z2F:()=>Hu,sBO:()=>$a,Sil:()=>mu,_Vd:()=>va,EJc:()=>cu,SBq:()=>ba,qLn:()=>Pr,vpe:()=>Ac,gxx:()=>fs,tBr:()=>Rn,XFs:()=>I,OlP:()=>cn,zs3:()=>Rs,ZZ4:()=>Fa,aQg:()=>za,soG:()=>au,YKP:()=>tc,v3s:()=>qu,h0i:()=>ec,PXZ:()=>ju,R0b:()=>bu,FiY:()=>On,Lbi:()=>iu,g9A:()=>ru,Qsj:()=>_a,FYo:()=>wa,JOm:()=>Ir,Tiy:()=>Ta,q3G:()=>br,tp0:()=>In,EAV:()=>Wu,Rgc:()=>Ya,dDg:()=>xu,DyG:()=>ln,GfV:()=>Ea,s_b:()=>rc,ifc:()=>j,eFA:()=>Fu,G48:()=>Mu,Gpc:()=>v,X6Q:()=>Du,_c5:()=>Yu,VLi:()=>Ru,c2e:()=>ou,zSh:()=>ms,wAp:()=>ta,vHH:()=>y,EiD:()=>gr,mCW:()=>er,qzn:()=>Vn,JVY:()=>$n,pB0:()=>Kn,eBb:()=>Wn,L6k:()=>Gn,LAX:()=>Zn,cg1:()=>Jo,Tjo:()=>Ku,kL8:()=>Xo,yhl:()=>qn,dqk:()=>H,sIi:()=>Bs,CqO:()=>ao,QGY:()=>so,F4k:()=>oo,RDi:()=>Pe,AaK:()=>d,z3N:()=>Hn,qOj:()=>Is,TTD:()=>Se,_Bn:()=>da,xp6:()=>yi,uIk:()=>qs,Gre:()=>Wo,ekj:()=>ko,Suo:()=>Gc,Xpm:()=>X,lG2:()=>oe,Yz7:()=>_,cJS:()=>C,oAB:()=>re,Yjl:()=>ae,Y36:()=>Zs,_UZ:()=>eo,GkF:()=>ro,BQk:()=>no,ynx:()=>to,qZA:()=>Xs,TgZ:()=>Js,EpF:()=>io,n5z:()=>nn,Ikx:()=>Zo,LFG:()=>xn,$8M:()=>sn,$Z:()=>Ks,NdJ:()=>co,CRH:()=>Wc,kcU:()=>St,O4$:()=>bt,oxw:()=>ho,ALo:()=>xc,lcZ:()=>Pc,xi3:()=>kc,Hsn:()=>vo,F$t:()=>fo,Q6J:()=>Ys,DdM:()=>yc,VKq:()=>bc,WLB:()=>Sc,kEZ:()=>wc,l5B:()=>_c,iGM:()=>qc,MAs:()=>Ws,Jf7:()=>Rr,CHM:()=>Ge,oJD:()=>Sr,LSH:()=>wr,kYT:()=>ie,Akn:()=>Ro,Udp:()=>Po,YNc:()=>Gs,W1O:()=>Qc,_uU:()=>Vo,Oqu:()=>qo,hij:()=>$o,AsE:()=>Go,Gf:()=>$c});var r=n(6889),i=n(8839),s=n(1776),o=n(3763),a=n(2049),c=n(8476),u=n(424);function l(e){for(let t in e)if(e[t]===l)return t;throw Error("Could not find renamed property on target object.")}function h(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function d(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(d).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function p(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const f=l({__forward_ref__:l});function v(e){return e.__forward_ref__=v,e.toString=function(){return d(this())},e}function m(e){return g(e)?e():e}function g(e){return"function"==typeof e&&e.hasOwnProperty(f)&&e.__forward_ref__===v}class y extends Error{constructor(e,t){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(e,t)),this.code=e}}function b(e){return"string"==typeof e?e:null==e?"":String(e)}function S(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():b(e)}function w(e,t){const n=t?` in ${t}`:"";throw new y("201",`No provider for ${S(e)} found${n}`)}function _(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function C(e){return{providers:e.providers||[],imports:e.imports||[]}}function T(e){return E(e,P)||E(e,R)}function E(e,t){return e.hasOwnProperty(t)?e[t]:null}function x(e){return e&&(e.hasOwnProperty(k)||e.hasOwnProperty(O))?e[k]:null}const P=l({"\u0275prov":l}),k=l({"\u0275inj":l}),R=l({ngInjectableDef:l}),O=l({ngInjectorDef:l});var I=(()=>((I=I||{})[I.Default=0]="Default",I[I.Host=1]="Host",I[I.Self=2]="Self",I[I.SkipSelf=4]="SkipSelf",I[I.Optional=8]="Optional",I))();let A;function N(e){const t=A;return A=e,t}function D(e,t,n){const r=T(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&I.Optional?null:void 0!==t?t:void w(d(e),"Injector")}function M(e){return{toString:e}.toString()}var L=(()=>((L=L||{})[L.OnPush=0]="OnPush",L[L.Default=1]="Default",L))(),j=(()=>((j=j||{})[j.Emulated=0]="Emulated",j[j.None=2]="None",j[j.ShadowDom=3]="ShadowDom",j))();const F="undefined"!=typeof globalThis&&globalThis,B="undefined"!=typeof window&&window,z="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,U="undefined"!=typeof global&&global,H=F||U||B||z,V={},q=[],$=l({"\u0275cmp":l}),G=l({"\u0275dir":l}),W=l({"\u0275pipe":l}),Z=l({"\u0275mod":l}),K=l({"\u0275loc":l}),Y=l({"\u0275fac":l}),Q=l({__NG_ELEMENT_ID__:l});let J=0;function X(e){return M(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===L.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||q,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||j.Emulated,id:"c",styles:e.styles||q,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,s=e.pipes;return n.id+=J++,n.inputs=se(e.inputs,t),n.outputs=se(e.outputs),i&&i.forEach(e=>e(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(ee):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(te):null,n})}function ee(e){return ce(e)||function(e){return e[G]||null}(e)}function te(e){return function(e){return e[W]||null}(e)}const ne={};function re(e){return M(()=>{const t={type:e.type,bootstrap:e.bootstrap||q,declarations:e.declarations||q,imports:e.imports||q,exports:e.exports||q,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(ne[e.id]=e.type),t})}function ie(e,t){return M(()=>{const n=ue(e,!0);n.declarations=t.declarations||q,n.imports=t.imports||q,n.exports=t.exports||q})}function se(e,t){if(null==e)return V;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}const oe=X;function ae(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function ce(e){return e[$]||null}function ue(e,t){const n=e[Z]||null;if(!n&&!0===t)throw new Error(`Type ${d(e)} does not have '\u0275mod' property.`);return n}const le=20,he=10;function de(e){return Array.isArray(e)&&"object"==typeof e[1]}function pe(e){return Array.isArray(e)&&!0===e[1]}function fe(e){return 0!=(8&e.flags)}function ve(e){return 2==(2&e.flags)}function me(e){return 1==(1&e.flags)}function ge(e){return null!==e.template}function ye(e,t){return e.hasOwnProperty(Y)?e[Y]:null}class be{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function Se(){return we}function we(e){return e.type.prototype.ngOnChanges&&(e.setInput=Ce),_e}function _e(){const e=Te(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===V)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function Ce(e,t,n,r){const i=Te(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:V,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],c=o[a];s[a]=new be(c&&c.currentValue,t,o===V),e[r]=t}function Te(e){return e.__ngSimpleChanges__||null}Se.ngInherit=!0;const Ee="http://www.w3.org/2000/svg";let xe;function Pe(e){xe=e}function ke(){return void 0!==xe?xe:"undefined"!=typeof document?document:void 0}function Re(e){return!!e.listen}const Oe={createRenderer:(e,t)=>ke()};function Ie(e){for(;Array.isArray(e);)e=e[0];return e}function Ae(e,t){return Ie(t[e])}function Ne(e,t){return Ie(t[e.index])}function De(e,t){return e.data[t]}function Me(e,t){return e[t]}function Le(e,t){const n=t[e];return de(n)?n:n[0]}function je(e){return 4==(4&e[2])}function Fe(e){return 128==(128&e[2])}function Be(e,t){return null==t?null:e[t]}function ze(e){e[18]=0}function Ue(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const He={lFrame:dt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ve(){return He.bindingsEnabled}function qe(){return He.lFrame.lView}function $e(){return He.lFrame.tView}function Ge(e){return He.lFrame.contextLView=e,e[8]}function We(){let e=Ze();for(;null!==e&&64===e.type;)e=e.parent;return e}function Ze(){return He.lFrame.currentTNode}function Ke(e,t){const n=He.lFrame;n.currentTNode=e,n.isParent=t}function Ye(){return He.lFrame.isParent}function Qe(){He.lFrame.isParent=!1}function Je(){return He.isInCheckNoChangesMode}function Xe(e){He.isInCheckNoChangesMode=e}function et(){const e=He.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function tt(){return He.lFrame.bindingIndex}function nt(){return He.lFrame.bindingIndex++}function rt(e){const t=He.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function it(e,t){const n=He.lFrame;n.bindingIndex=n.bindingRootIndex=e,st(t)}function st(e){He.lFrame.currentDirectiveIndex=e}function ot(){return He.lFrame.currentQueryIndex}function at(e){He.lFrame.currentQueryIndex=e}function ct(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function ut(e,t,n){if(n&I.SkipSelf){let r=t,i=e;for(;r=r.parent,!(null!==r||n&I.Host||(r=ct(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;t=r,e=i}const r=He.lFrame=ht();return r.currentTNode=t,r.lView=e,!0}function lt(e){const t=ht(),n=e[1];He.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function ht(){const e=He.lFrame,t=null===e?null:e.child;return null===t?dt(e):t}function dt(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function pt(){const e=He.lFrame;return He.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const ft=pt;function vt(){const e=pt();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function mt(){return He.lFrame.selectedIndex}function gt(e){He.lFrame.selectedIndex=e}function yt(){const e=He.lFrame;return De(e.tView,e.selectedIndex)}function bt(){He.lFrame.currentNamespace=Ee}function St(){He.lFrame.currentNamespace=null}function wt(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=t;r&&(e.contentHooks||(e.contentHooks=[])).push(-n,r),i&&((e.contentHooks||(e.contentHooks=[])).push(n,i),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),o&&((e.viewHooks||(e.viewHooks=[])).push(n,o),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,o)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function _t(e,t,n){Et(e,t,3,n)}function Ct(e,t,n,r){(3&e[2])===n&&Et(e,t,n,r)}function Tt(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Et(e,t,n,r){const i=null!=r?r:-1,s=t.length-1;let o=0;for(let a=void 0!==r?65535&e[18]:0;a<s;a++)if("number"==typeof t[a+1]){if(o=t[a],null!=r&&o>=r)break}else t[a]<0&&(e[18]+=65536),(o<i||-1==i)&&(xt(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function xt(e,t,n,r){const i=n[r]<0,s=n[r+1],o=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const Pt=-1;class kt{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function Rt(e,t,n){const r=Re(e);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],c=n[i++];r?e.setAttribute(t,a,c,o):t.setAttributeNS(o,a,c)}else{const o=s,a=n[++i];It(o)?r&&e.setProperty(t,o,a):r?e.setAttribute(t,o,a):t.setAttribute(o,a),i++}}return i}function Ot(e){return 3===e||4===e||6===e}function It(e){return 64===e.charCodeAt(0)}function At(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||Nt(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function Nt(e,t,n,r,i){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const n=e[s++];if("number"==typeof n){if(n===t){o=-1;break}if(n>t){o=s-1;break}}}for(;s<e.length;){const t=e[s];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function Dt(e){return e!==Pt}function Mt(e){return 32767&e}function Lt(e,t){let n=e>>16,r=t;for(;n>0;)r=r[15],n--;return r}let jt=!0;function Ft(e){const t=jt;return jt=e,t}let Bt=0;function zt(e,t){const n=Ht(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Ut(r.data,e),Ut(t,null),Ut(r.blueprint,null));const i=Vt(e,t),s=e.injectorIndex;if(Dt(i)){const e=Mt(i),n=Lt(i,t),r=n[1].data;for(let i=0;i<8;i++)t[s+i]=n[e+i]|r[e+i]}return t[s+8]=i,s}function Ut(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Ht(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Vt(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){const e=i[1],t=e.type;if(r=2===t?e.declTNode:1===t?i[6]:null,null===r)return Pt;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Pt}function qt(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Q)&&(r=n[Q]),null==r&&(r=n[Q]=Bt++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function $t(e,t,n){if(n&I.Optional)return e;w(t,"NodeInjector")}function Gt(e,t,n,r){if(n&I.Optional&&void 0===r&&(r=null),0==(n&(I.Self|I.Host))){const i=e[9],s=N(void 0);try{return i?i.get(t,r,n&I.Optional):D(t,r,n&I.Optional)}finally{N(s)}}return $t(r,t,n)}function Wt(e,t,n,r=I.Default,i){if(null!==e){const s=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Q)?e[Q]:void 0;return"number"==typeof t?t>=0?255&t:Kt:t}(n);if("function"==typeof s){if(!ut(t,e,r))return r&I.Host?$t(i,n,r):Gt(t,n,r,i);try{const e=s(r);if(null!=e||r&I.Optional)return e;w(n)}finally{ft()}}else if("number"==typeof s){let i=null,o=Ht(e,t),a=Pt,c=r&I.Host?t[16][6]:null;for((-1===o||r&I.SkipSelf)&&(a=-1===o?Vt(e,t):t[o+8],a!==Pt&&en(r,!1)?(i=t[1],o=Mt(a),t=Lt(a,t)):o=-1);-1!==o;){const e=t[1];if(Xt(s,o,e.data)){const e=Yt(o,t,n,i,r,c);if(e!==Zt)return e}a=t[o+8],a!==Pt&&en(r,t[1].data[o+8]===c)&&Xt(s,o,t)?(i=e,o=Mt(a),t=Lt(a,t)):o=-1}}}return Gt(t,n,r,i)}const Zt={};function Kt(){return new tn(We(),qe())}function Yt(e,t,n,r,i,s){const o=t[1],a=o.data[e+8],c=Qt(a,o,n,null==r?ve(a)&&jt:r!=o&&0!=(3&a.type),i&I.Host&&s===a);return null!==c?Jt(t,o,c,a):Zt}function Qt(e,t,n,r,i){const s=e.providerIndexes,o=t.data,a=1048575&s,c=e.directiveStart,u=s>>20,l=i?a+u:e.directiveEnd;for(let h=r?a:a+u;h<l;h++){const e=o[h];if(h<c&&n===e||h>=c&&e.type===n)return h}if(i){const e=o[c];if(e&&ge(e)&&e.type===n)return c}return null}function Jt(e,t,n,r){let i=e[n];const s=t.data;if(i instanceof kt){const o=i;o.resolving&&function(e,t){throw new y("200",`Circular dependency in DI detected for ${e}`)}(S(s[n]));const a=Ft(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?N(o.injectImpl):null;ut(e,r,I.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const r=we(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==c&&N(c),Ft(a),o.resolving=!1,ft()}}return i}function Xt(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function en(e,t){return!(e&I.Self||e&I.Host&&t)}class tn{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return Wt(this._tNode,this._lView,e,void 0,t)}}function nn(e){return M(()=>{const t=e.prototype.constructor,n=t[Y]||rn(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const e=i[Y]||rn(i);if(e&&e!==n)return e;i=Object.getPrototypeOf(i)}return e=>new e})}function rn(e){return g(e)?()=>{const t=rn(m(e));return t&&t()}:ye(e)}function sn(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const e=n.length;let r=0;for(;r<e;){const i=n[r];if(Ot(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<e&&"string"==typeof n[r];)r++;else{if(i===t)return n[r+1];r+=2}}}return null}(We(),e)}const on="__parameters__";function an(e,t,n){return M(()=>{const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty(on)?e[on]:Object.defineProperty(e,on,{value:[]})[on];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class cn{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=_({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const un=new cn("AnalyzeForEntryComponents"),ln=Function;function hn(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),hn(r,t)):t!==e&&t.push(r)}return t}function dn(e,t){e.forEach(e=>Array.isArray(e)?dn(e,t):t(e))}function pn(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function fn(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function vn(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}function mn(e,t,n){let r=yn(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function gn(e,t){const n=yn(e,t);if(n>=0)return e[1|n]}function yn(e,t){return function(e,t,n){let r=0,i=e.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=e[n<<1];if(t===s)return n<<1;s>t?i=n:r=n+1}return~(i<<1)}(e,t)}const bn={},Sn=/\n/gm,wn="__source",_n=l({provide:String,useValue:l});let Cn;function Tn(e){const t=Cn;return Cn=e,t}function En(e,t=I.Default){if(void 0===Cn)throw new Error("inject() must be called from an injection context");return null===Cn?D(e,void 0,t):Cn.get(e,t&I.Optional?null:void 0,t)}function xn(e,t=I.Default){return(A||En)(m(e),t)}function Pn(e){const t=[];for(let n=0;n<e.length;n++){const r=m(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e,n=I.Default;for(let t=0;t<r.length;t++){const i=r[t],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?e=i.token:n|=s:e=i}t.push(xn(e,n))}else t.push(xn(r))}return t}function kn(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}const Rn=kn(an("Inject",e=>({token:e})),-1),On=kn(an("Optional"),8),In=kn(an("SkipSelf"),4);let An,Nn;function Dn(e){var t;return(null===(t=function(){if(void 0===An&&(An=null,H.trustedTypes))try{An=H.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(t){}return An}())||void 0===t?void 0:t.createHTML(e))||e}function Mn(e){var t;return(null===(t=function(){if(void 0===Nn&&(Nn=null,H.trustedTypes))try{Nn=H.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(t){}return Nn}())||void 0===t?void 0:t.createHTML(e))||e}class Ln{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class jn extends Ln{getTypeName(){return"HTML"}}class Fn extends Ln{getTypeName(){return"Style"}}class Bn extends Ln{getTypeName(){return"Script"}}class zn extends Ln{getTypeName(){return"URL"}}class Un extends Ln{getTypeName(){return"ResourceURL"}}function Hn(e){return e instanceof Ln?e.changingThisBreaksApplicationSecurity:e}function Vn(e,t){const n=qn(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}function qn(e){return e instanceof Ln&&e.getTypeName()||null}function $n(e){return new jn(e)}function Gn(e){return new Fn(e)}function Wn(e){return new Bn(e)}function Zn(e){return new zn(e)}function Kn(e){return new Un(e)}class Yn{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Dn(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class Qn{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const t=this.inertDocument.createElement("body");e.appendChild(t)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Dn(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=Dn(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const n=t.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Jn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Xn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function er(e){return(e=String(e)).match(Jn)||e.match(Xn)?e:"unsafe:"+e}function tr(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function nr(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const rr=tr("area,br,col,hr,img,wbr"),ir=tr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),sr=tr("rp,rt"),or=nr(sr,ir),ar=nr(rr,nr(ir,tr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),nr(sr,tr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),or),cr=tr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ur=tr("srcset"),lr=nr(cr,ur,tr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),tr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),hr=tr("script,style,template");class dr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!ar.hasOwnProperty(t))return this.sanitizedSomething=!0,!hr.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let i=0;i<n.length;i++){const e=n.item(i),t=e.name,s=t.toLowerCase();if(!lr.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=e.value;cr[s]&&(o=er(o)),ur[s]&&(r=o,o=(r=String(r)).split(",").map(e=>er(e.trim())).join(", ")),this.buf.push(" ",t,'="',vr(o),'"')}var r;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();ar.hasOwnProperty(t)&&!rr.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(vr(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const pr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,fr=/([^\#-~ |!])/g;function vr(e){return e.replace(/&/g,"&amp;").replace(pr,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(fr,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let mr;function gr(e,t){let n=null;try{mr=mr||function(e){const t=new Qn(e);return function(){try{return!!(new window.DOMParser).parseFromString(Dn(""),"text/html")}catch(e){return!1}}()?new Yn(t):t}(e);let r=t?String(t):"";n=mr.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=mr.getInertBodyElement(r)}while(r!==s);return Dn((new dr).sanitizeChildren(yr(n)||n))}finally{if(n){const e=yr(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}function yr(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var br=(()=>((br=br||{})[br.NONE=0]="NONE",br[br.HTML=1]="HTML",br[br.STYLE=2]="STYLE",br[br.SCRIPT=3]="SCRIPT",br[br.URL=4]="URL",br[br.RESOURCE_URL=5]="RESOURCE_URL",br))();function Sr(e){const t=_r();return t?Mn(t.sanitize(br.HTML,e)||""):Vn(e,"HTML")?Mn(Hn(e)):gr(ke(),b(e))}function wr(e){const t=_r();return t?t.sanitize(br.URL,e)||"":Vn(e,"URL")?Hn(e):er(b(e))}function _r(){const e=qe();return e&&e[12]}function Cr(e,t){e.__ngContext__=t}function Tr(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Er(e){return e.ngOriginalError}function xr(e,...t){e.error(...t)}class Pr{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e&&e.ngErrorLogger||xr}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?function(e){return e.ngDebugContext}(e)||this._findContext(Er(e)):null}_findOriginalError(e){let t=e&&Er(e);for(;t&&Er(t);)t=Er(t);return t||null}}const kr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(H))();function Rr(e){return e.ownerDocument.defaultView}function Or(e){return e instanceof Function?e():e}var Ir=(()=>((Ir=Ir||{})[Ir.Important=1]="Important",Ir[Ir.DashCase=2]="DashCase",Ir))();function Ar(e,t){return(void 0)(e,t)}function Nr(e){const t=e[3];return pe(t)?t[3]:t}function Dr(e){return Lr(e[13])}function Mr(e){return Lr(e[4])}function Lr(e){for(;null!==e&&!pe(e);)e=e[4];return e}function jr(e,t,n,r,i){if(null!=r){let s,o=!1;pe(r)?s=r:de(r)&&(o=!0,r=r[0]);const a=Ie(r);0===e&&null!==n?null==i?$r(t,n,a):qr(t,n,a,i||null,!0):1===e&&null!==n?qr(t,n,a,i||null,!0):2===e?function(e,t,n){const r=Wr(e,t);r&&function(e,t,n,r){Re(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function(e,t,n,r,i){const s=n[7];s!==Ie(n)&&jr(t,e,r,s,i);for(let o=he;o<n.length;o++){const i=n[o];ti(i[1],i,e,t,r,s)}}(t,e,s,n,i)}}function Fr(e,t,n){return Re(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Br(e,t){const n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,Ue(i,-1)),n.splice(r,1)}function zr(e,t){if(e.length<=he)return;const n=he+t,r=e[n];if(r){const s=r[17];null!==s&&s!==e&&Br(s,r),t>0&&(e[n-1][4]=r[4]);const o=fn(e,he+t);ti(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Ur(e,t){if(!(256&t[2])){const n=t[11];Re(n)&&n.destroyNode&&ti(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Hr(e[1],e);for(;t;){let n=null;if(de(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)de(t)&&Hr(t[1],t),t=t[3];null===t&&(t=e),de(t)&&Hr(t[1],t),n=t&&t[4]}t=n}}(t)}}function Hr(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof kt)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2){const r=e[t[n]],i=t[n+1];try{i.call(r)}finally{}}else try{t.call(e)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const e=n[s+1],o="function"==typeof e?e(t):Ie(t[e]),a=r[i=n[s+2]],c=n[s+3];"boolean"==typeof c?o.removeEventListener(n[s],a,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),s+=2}else{const e=r[i=n[s+1]];n[s].call(e)}if(null!==r){for(let e=i+1;e<r.length;e++)(0,r[e])();t[7]=null}}(e,t),1===t[1].type&&Re(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&pe(t[3])){n!==t[3]&&Br(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function Vr(e,t,n){return function(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const t=e.data[r.directiveStart].encapsulation;if(t===j.None||t===j.Emulated)return null}return Ne(r,n)}(e,t.parent,n)}function qr(e,t,n,r,i){Re(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function $r(e,t,n){Re(e)?e.appendChild(t,n):t.appendChild(n)}function Gr(e,t,n,r,i){null!==r?qr(e,t,n,r,i):$r(e,t,n)}function Wr(e,t){return Re(e)?e.parentNode(t):t.parentNode}function Zr(e,t,n){return Kr(e,t,n)}let Kr=function(e,t,n){return 40&e.type?Ne(e,n):null};function Yr(e,t,n,r){const i=Vr(e,r,t),s=t[11],o=Zr(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Gr(s,i,n[a],o,!1);else Gr(s,i,n,o,!1)}function Qr(e,t){if(null!==t){const n=t.type;if(3&n)return Ne(t,e);if(4&n)return Xr(-1,e[t.index]);if(8&n){const n=t.child;if(null!==n)return Qr(e,n);{const n=e[t.index];return pe(n)?Xr(-1,n):Ie(n)}}if(32&n)return Ar(t,e)()||Ie(e[t.index]);{const n=Jr(e,t);return null!==n?Array.isArray(n)?n[0]:Qr(Nr(e[16]),n):Qr(e,t.next)}}return null}function Jr(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Xr(e,t){const n=he+e+1;if(n<t.length){const e=t[n],r=e[1].firstChild;if(null!==r)return Qr(e,r)}return t[7]}function ei(e,t,n,r,i,s,o){for(;null!=n;){const a=r[n.index],c=n.type;if(o&&0===t&&(a&&Cr(Ie(a),r),n.flags|=4),64!=(64&n.flags))if(8&c)ei(e,t,n.child,r,i,s,!1),jr(t,e,i,a,s);else if(32&c){const o=Ar(n,r);let c;for(;c=o();)jr(t,e,i,c,s);jr(t,e,i,a,s)}else 16&c?ni(e,t,r,n,i,s):jr(t,e,i,a,s);n=o?n.projectionNext:n.next}}function ti(e,t,n,r,i,s){ei(n,r,e.firstChild,t,i,s,!1)}function ni(e,t,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let c=0;c<a.length;c++)jr(t,e,i,a[c],s);else ei(e,t,a,o[3],i,s,!0)}function ri(e,t,n){Re(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function ii(e,t,n){Re(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function si(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const n=t.length;if(i+n===r||e.charCodeAt(i+n)<=32)return i}n=i+1}}const oi="ng-template";function ai(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==si(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function ci(e){return 4===e.type&&e.value!==oi}function ui(e,t,n){return t===(4!==e.type||n?e.value:oi)}function li(e,t,n){let r=4;const i=e.attrs||[],s=function(e){for(let t=0;t<e.length;t++)if(Ot(e[t]))return t;return e.length}(i);let o=!1;for(let a=0;a<t.length;a++){const c=t[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!ui(e,c,n)||""===c&&1===t.length){if(hi(r))return!1;o=!0}}else{const u=8&r?c:t[++a];if(8&r&&null!==e.attrs){if(!ai(e.attrs,u,n)){if(hi(r))return!1;o=!0}continue}const l=di(8&r?"class":c,i,ci(e),n);if(-1===l){if(hi(r))return!1;o=!0;continue}if(""!==u){let e;e=l>s?"":i[l+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==si(t,u,0)||2&r&&u!==e){if(hi(r))return!1;o=!0}}}}else{if(!o&&!hi(r)&&!hi(c))return!1;if(o&&hi(c))continue;o=!1,r=c|1&r}}return hi(r)||o}function hi(e){return 0==(1&e)}function di(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let n=!1;for(;i<t.length;){const r=t[i];if(r===e)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++i];for(;"string"==typeof e;)e=t[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function pi(e,t,n=!1){for(let r=0;r<t.length;r++)if(li(e,t[r],n))return!0;return!1}function fi(e,t){e:for(let n=0;n<t.length;n++){const r=t[n];if(e.length===r.length){for(let t=0;t<e.length;t++)if(e[t]!==r[t])continue e;return!0}}return!1}function vi(e,t){return e?":not("+t.trim()+")":t}function mi(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const t=e[++n];i+="["+o+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||hi(o)||(t+=vi(s,i),i=""),r=o,s=s||!hi(r);n++}return""!==i&&(t+=vi(s,i)),t}const gi={};function yi(e){bi($e(),qe(),mt()+e,Je())}function bi(e,t,n,r){if(!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&_t(t,r,n)}else{const r=e.preOrderHooks;null!==r&&Ct(t,r,0,n)}gt(n)}function Si(e,t){return e<<17|t<<2}function wi(e){return e>>17&32767}function _i(e){return 2|e}function Ci(e){return(131068&e)>>2}function Ti(e,t){return-131069&e|t<<2}function Ei(e){return 1|e}function xi(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=e.data[s];at(i),n.contentQueries(2,t[s],s)}}}function Pi(e,t,n,r,i,s,o,a,c,u){const l=t.blueprint.slice();return l[0]=i,l[2]=140|r,ze(l),l[3]=l[15]=e,l[8]=n,l[10]=o||e&&e[10],l[11]=a||e&&e[11],l[12]=c||e&&e[12]||null,l[9]=u||e&&e[9]||null,l[6]=s,l[16]=2==t.type?e[16]:l,l}function ki(e,t,n,r,i){let s=e.data[t];if(null===s)s=function(e,t,n,r,i){const s=Ze(),o=Ye(),a=e.data[t]=function(e,t,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(e,t,n,r,i),He.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const e=function(){const e=He.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===e?-1:e.injectorIndex}return Ke(s,!0),s}function Ri(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Oi(e,t,n){lt(t);try{const r=e.viewQuery;null!==r&&os(1,r,n);const i=e.template;null!==i&&Ni(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&xi(e,t),e.staticViewQueries&&os(2,e.viewQuery,n);const s=e.components;null!==s&&function(e,t){for(let n=0;n<t.length;n++)ts(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),r}finally{t[2]&=-5,vt()}}function Ii(e,t,n,r){const i=t[2];if(256==(256&i))return;lt(t);const s=Je();try{ze(t),He.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&Ni(e,t,n,2,r);const o=3==(3&i);if(!s)if(o){const n=e.preOrderCheckHooks;null!==n&&_t(t,n,null)}else{const n=e.preOrderHooks;null!==n&&Ct(t,n,0,null),Tt(t,0)}if(function(e){for(let t=Dr(e);null!==t;t=Mr(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&Ue(r,1),n[2]|=1024}}}(t),function(e){for(let t=Dr(e);null!==t;t=Mr(t))for(let e=he;e<t.length;e++){const n=t[e],r=n[1];Fe(n)&&Ii(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&xi(e,t),!s)if(o){const n=e.contentCheckHooks;null!==n&&_t(t,n)}else{const n=e.contentHooks;null!==n&&Ct(t,n,1),Tt(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const r=n[e];if(r<0)gt(~r);else{const i=r,s=n[++e],o=n[++e];it(s,i),o(2,t[i])}}}finally{gt(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)Xi(e,t[n])}(t,a);const c=e.viewQuery;if(null!==c&&os(2,c,r),!s)if(o){const n=e.viewCheckHooks;null!==n&&_t(t,n)}else{const n=e.viewHooks;null!==n&&Ct(t,n,2),Tt(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Ue(t[3],-1))}finally{vt()}}function Ai(e,t,n,r){const i=t[10],s=!Je(),o=je(t);try{s&&!o&&i.begin&&i.begin(),o&&Oi(e,t,r),Ii(e,t,n,r)}finally{s&&!o&&i.end&&i.end()}}function Ni(e,t,n,r,i){const s=mt(),o=2&r;try{gt(-1),o&&t.length>le&&bi(e,t,le,Je()),n(r,i)}finally{gt(s)}}function Di(e,t,n){if(fe(t)){const r=t.directiveEnd;for(let i=t.directiveStart;i<r;i++){const t=e.data[i];t.contentQueries&&t.contentQueries(1,n[i],i)}}}function Mi(e,t,n){Ve()&&(function(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||zt(n,t),Cr(r,t);const o=n.initialInputs;for(let a=i;a<s;a++){const r=e.data[a],s=ge(r);s&&Ki(t,n,r);const c=Jt(t,e,a,n);Cr(c,t),null!==o&&Yi(0,a-i,c,r,0,o),s&&(Le(n.index,t)[8]=c)}}(e,t,n,Ne(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=He.lFrame.currentDirectiveIndex;try{gt(s);for(let n=r;n<i;n++){const r=e.data[n],i=t[n];st(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||qi(r,i)}}finally{gt(-1),st(o)}}(e,t,n))}function Li(e,t,n=Ne){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(t,e):e[o];e[i++]=a}}}function ji(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Fi(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Fi(e,t,n,r,i,s,o,a,c,u){const l=le+r,h=l+i,d=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:gi);return n}(l,h),p="function"==typeof u?u():u;return d[1]={type:e,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1}}function Bi(e,t,n,r){const i=cs(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&us(e).push(r,i.length-1))}function zi(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Ui(e,t,n,r,i,s,o,a){const c=Ne(t,n);let u,l=t.inputs;var h;!a&&null!=l&&(u=l[r])?(hs(e,n,u,r,i),ve(t)&&function(e,t){const n=Le(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,t.value||"",r):i,Re(s)?s.setProperty(c,r,i):It(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function Hi(e,t,n,r){let i=!1;if(Ve()){const s=function(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];pi(n,o.selectors,!1)&&(i||(i=[]),qt(zt(n,t),e,o.type),ge(o)?($i(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==s){i=!0,Wi(n,e.data.length,s.length);for(let e=0;e<s.length;e++){const t=s[e];t.providersResolver&&t.providersResolver(t)}let r=!1,a=!1,c=Ri(e,t,s.length,null);for(let i=0;i<s.length;i++){const u=s[i];n.mergedAttrs=At(n.mergedAttrs,u.hostAttrs),Zi(e,n,t,c,u),Gi(c,u,o),null!==u.contentQueries&&(n.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(n.flags|=128);const l=u.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),c++}!function(e,t){const n=t.directiveEnd,r=e.data,i=t.attrs,s=[];let o=null,a=null;for(let c=t.directiveStart;c<n;c++){const e=r[c],n=e.inputs,u=null===i||ci(t)?null:Qi(n,i);s.push(u),o=zi(n,c,o),a=zi(e.outputs,c,a)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=o,t.outputs=a}(e,n)}o&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const i=n[t[e+1]];if(null==i)throw new y("301",`Export of name '${t[e+1]}' not found!`);r.push(t[e],i)}}}(n,r,o)}return n.mergedAttrs=At(n.mergedAttrs,n.attrs),i}function Vi(e,t,n,r,i,s){const o=s.hostBindings;if(o){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const s=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function qi(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function $i(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Gi(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;ge(t)&&(n[""]=e)}}function Wi(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Zi(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=ye(i.type)),o=new kt(s,ge(i),null);e.blueprint[r]=o,n[r]=o,Vi(e,t,0,r,Ri(e,n,i.hostVars,gi),i)}function Ki(e,t,n){const r=Ne(t,e),i=ji(n),s=e[10],o=ns(e,Pi(e,i,null,n.onPush?64:16,r,t,s,s.createRenderer(r,n),null,null));e[t.index]=o}function Yi(e,t,n,r,i,s){const o=s[t];if(null!==o){const e=r.setInput;for(let t=0;t<o.length;){const i=o[t++],s=o[t++],a=o[t++];null!==e?r.setInput(n,a,i,s):n[s]=a}}}function Qi(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Ji(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function Xi(e,t){const n=Le(t,e);if(Fe(n)){const e=n[1];80&n[2]?Ii(e,n,e.template,n[8]):n[5]>0&&es(n)}}function es(e){for(let n=Dr(e);null!==n;n=Mr(n))for(let e=he;e<n.length;e++){const t=n[e];if(1024&t[2]){const e=t[1];Ii(e,t,e.template,t[8])}else t[5]>0&&es(t)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=Le(t[n],e);Fe(r)&&r[5]>0&&es(r)}}function ts(e,t){const n=Le(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),Oi(r,n,n[8])}function ns(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function rs(e){for(;e;){e[2]|=64;const t=Nr(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function is(e,t,n){const r=t[10];r.begin&&r.begin();try{Ii(e,t,e.template,n)}catch(i){throw ls(t,i),i}finally{r.end&&r.end()}}function ss(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=Tr(n),i=r[1];Ai(i,r,i.template,n)}}(e[8])}function os(e,t,n){at(0),t(e,n)}const as=(()=>Promise.resolve(null))();function cs(e){return e[7]||(e[7]=[])}function us(e){return e.cleanup||(e.cleanup=[])}function ls(e,t){const n=e[9],r=n?n.get(Pr,null):null;r&&r.handleError(t)}function hs(e,t,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],c=t[o],u=e.data[o];null!==u.setInput?u.setInput(c,i,r,a):c[a]=i}}function ds(e,t,n){const r=Ae(t,e);!function(e,t,n){Re(e)?e.setValue(t,n):t.textContent=n}(e[11],r,n)}function ps(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const e=t[o];"number"==typeof e?s=e:1==s?i=p(i,e):2==s&&(r=p(r,e+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}const fs=new cn("INJECTOR",-1);class vs{get(e,t=bn){if(t===bn){const t=new Error(`NullInjectorError: No provider for ${d(e)}!`);throw t.name="NullInjectorError",t}return t}}const ms=new cn("Set Injector scope."),gs={},ys={};let bs;function Ss(){return void 0===bs&&(bs=new vs),bs}function ws(e,t=null,n=null,r){return new _s(e,n,t||Ss(),r)}class _s{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];t&&dn(t,n=>this.processProvider(n,e,t)),dn([e],e=>this.processInjectorType(e,[],i)),this.records.set(fs,Es(void 0,this));const s=this.records.get(ms);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof e?null:d(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=bn,n=I.Default){this.assertNotDestroyed();const r=Tn(this),i=N(void 0);try{if(!(n&I.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(s=e)||"object"==typeof s&&s instanceof cn)&&T(e);t=n&&this.injectableDefInScope(n)?Es(Cs(e),gs):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&I.Self?Ss():this.parent).get(e,t=n&I.Optional&&t===bn?null:t)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(d(e)),r)throw o;return function(e,t,n,r){const i=e.ngTempTokenPath;throw t[wn]&&i.unshift(t[wn]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=d(t);if(Array.isArray(t))i=t.map(d).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):d(r)))}i=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(Sn,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(o,e,"R3InjectorError",this.source)}throw o}finally{N(i),Tn(r)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(d(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=m(e)))return!1;let r=x(e);const i=null==r&&e.ngModule||void 0,s=void 0===i?e:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=x(i)),null==r)return!1;if(null!=r.imports&&!o){let e;n.push(s);try{dn(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];dn(r,e=>this.processProvider(e,n,r||q))}}this.injectorDefTypes.add(s);const a=ye(s)||(()=>new s);this.records.set(s,Es(a,gs));const c=r.providers;if(null!=c&&!o){const t=e;dn(c,e=>this.processProvider(e,t,c))}return void 0!==i&&void 0!==e.providers}processProvider(e,t,n){let r=Ps(e=m(e))?e:m(e&&e.provide);const i=function(e,t,n){return xs(e)?Es(void 0,e.useValue):Es(Ts(e),gs)}(e);if(Ps(e)||!0!==e.multi)this.records.get(r);else{let t=this.records.get(r);t||(t=Es(void 0,gs,!0),t.factory=()=>Pn(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,i)}hydrate(e,t){var n;return t.value===gs&&(t.value=ys,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=m(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function Cs(e){const t=T(e),n=null!==t?t.factory:ye(e);if(null!==n)return n;if(e instanceof cn)throw new Error(`Token ${d(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=vn(t,"?");throw new Error(`Can't resolve all parameters for ${d(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[P]||e[R]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function Ts(e,t,n){let r;if(Ps(e)){const t=m(e);return ye(t)||Cs(t)}if(xs(e))r=()=>m(e.useValue);else if((i=e)&&i.useFactory)r=()=>e.useFactory(...Pn(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>xn(m(e.useExisting));else{const t=m(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return ye(t)||Cs(t);r=()=>new t(...Pn(e.deps))}var i;return r}function Es(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function xs(e){return null!==e&&"object"==typeof e&&_n in e}function Ps(e){return"function"==typeof e}const ks=function(e,t,n){return function(e,t=null,n=null,r){const i=ws(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)};class Rs{static create(e,t){return Array.isArray(e)?ks(e,t,""):ks(e.providers,e.parent,e.name||"")}}function Os(e,t){wt(Tr(e)[1],We())}function Is(e){let t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0;const r=[e];for(;t;){let i;if(ge(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);const t=e;t.inputs=As(e.inputs),t.declaredInputs=As(e.declaredInputs),t.outputs=As(e.outputs);const n=i.hostBindings;n&&Ms(e,n);const s=i.viewQuery,o=i.contentQueries;if(s&&Ns(e,s),o&&Ds(e,o),h(e.inputs,i.inputs),h(e.declaredInputs,i.declaredInputs),h(e.outputs,i.outputs),ge(i)&&i.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(i.data.animation)}}const t=i.features;if(t)for(let r=0;r<t.length;r++){const i=t[r];i&&i.ngInherit&&i(e),i===Is&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=At(i.hostAttrs,n=At(n,i.hostAttrs))}}(r)}function As(e){return e===V?{}:e===q?[]:e}function Ns(e,t){const n=e.viewQuery;e.viewQuery=n?(e,r)=>{t(e,r),n(e,r)}:t}function Ds(e,t){const n=e.contentQueries;e.contentQueries=n?(e,r,i)=>{t(e,r,i),n(e,r,i)}:t}function Ms(e,t){const n=e.hostBindings;e.hostBindings=n?(e,r)=>{t(e,r),n(e,r)}:t}Rs.THROW_IF_NOT_FOUND=bn,Rs.NULL=new vs,Rs.\u0275prov=_({token:Rs,providedIn:"any",factory:()=>xn(fs)}),Rs.__NG_ELEMENT_ID__=-1;let Ls=null;function js(){if(!Ls){const e=H.Symbol;if(e&&e.iterator)Ls=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ls=n)}}}return Ls}class Fs{constructor(e){this.wrapped=e}static wrap(e){return new Fs(e)}static unwrap(e){return Fs.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Fs}}function Bs(e){return!!zs(e)&&(Array.isArray(e)||!(e instanceof Map)&&js()in e)}function zs(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Us(e,t,n){return e[t]=n}function Hs(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Vs(e,t,n,r){const i=Hs(e,t,n);return Hs(e,t+1,r)||i}function qs(e,t,n,r){const i=qe();return Hs(i,nt(),t)&&($e(),function(e,t,n,r,i,s){const o=Ne(e,t);!function(e,t,n,r,i,s,o){if(null==s)Re(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{const a=null==o?b(s):o(s,r||"",i);Re(e)?e.setAttribute(t,i,a,n):n?t.setAttributeNS(n,i,a):t.setAttribute(i,a)}}(t[11],o,s,e.value,n,r,i)}(yt(),i,e,t,n,r)),qs}function $s(e,t,n,r){return Hs(e,nt(),n)?t+b(n)+r:gi}function Gs(e,t,n,r,i,s,o,a){const c=qe(),u=$e(),l=e+le,h=u.firstCreatePass?function(e,t,n,r,i,s,o,a,c){const u=t.consts,l=ki(t,e,4,o||null,Be(u,a));Hi(t,n,l,Be(u,c)),wt(t,l);const h=l.tViews=Fi(2,l,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u);return null!==t.queries&&(t.queries.template(t,l),h.queries=t.queries.embeddedTView(l)),l}(l,u,c,t,n,r,i,s,o):u.data[l];Ke(h,!1);const d=c[11].createComment("");Yr(u,c,d,h),Cr(d,c),ns(c,c[l]=Ji(d,c,d,h)),me(h)&&Mi(u,c,h),null!=o&&Li(c,h,a)}function Ws(e){return Me(He.lFrame.contextLView,le+e)}function Zs(e,t=I.Default){const n=qe();return null===n?xn(e,t):Wt(We(),n,m(e),t)}function Ks(){throw new Error("invalid")}function Ys(e,t,n){const r=qe();return Hs(r,nt(),t)&&Ui($e(),yt(),r,e,t,r[11],n,!1),Ys}function Qs(e,t,n,r,i){const s=i?"class":"style";hs(e,n,t.inputs[s],s,r)}function Js(e,t,n,r){const i=qe(),s=$e(),o=le+e,a=i[11],c=i[o]=Fr(a,t,He.lFrame.currentNamespace),u=s.firstCreatePass?function(e,t,n,r,i,s,o){const a=t.consts,c=ki(t,e,2,i,Be(a,s));return Hi(t,n,c,Be(a,o)),null!==c.attrs&&ps(c,c.attrs,!1),null!==c.mergedAttrs&&ps(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(o,s,i,0,t,n,r):s.data[o];Ke(u,!0);const l=u.mergedAttrs;null!==l&&Rt(a,c,l);const h=u.classes;null!==h&&ii(a,c,h);const d=u.styles;null!==d&&ri(a,c,d),64!=(64&u.flags)&&Yr(s,i,c,u),0===He.lFrame.elementDepthCount&&Cr(c,i),He.lFrame.elementDepthCount++,me(u)&&(Mi(s,i,u),Di(s,u,i)),null!==r&&Li(i,u)}function Xs(){let e=We();Ye()?Qe():(e=e.parent,Ke(e,!1));const t=e;He.lFrame.elementDepthCount--;const n=$e();n.firstCreatePass&&(wt(n,e),fe(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Qs(n,t,qe(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Qs(n,t,qe(),t.stylesWithoutHost,!1)}function eo(e,t,n,r){Js(e,t,n,r),Xs()}function to(e,t,n){const r=qe(),i=$e(),s=e+le,o=i.firstCreatePass?function(e,t,n,r,i){const s=t.consts,o=Be(s,r),a=ki(t,e,8,"ng-container",o);return null!==o&&ps(a,o,!0),Hi(t,n,a,Be(s,i)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,i,r,t,n):i.data[s];Ke(o,!0);const a=r[s]=r[11].createComment("");Yr(i,r,a,o),Cr(a,r),me(o)&&(Mi(i,r,o),Di(i,o,r)),null!=n&&Li(r,o)}function no(){let e=We();const t=$e();Ye()?Qe():(e=e.parent,Ke(e,!1)),t.firstCreatePass&&(wt(t,e),fe(e)&&t.queries.elementEnd(e))}function ro(e,t,n){to(e,t,n),no()}function io(){return qe()}function so(e){return!!e&&"function"==typeof e.then}function oo(e){return!!e&&"function"==typeof e.subscribe}const ao=oo;function co(e,t,n,r){const i=qe(),s=$e(),o=We();return function(e,t,n,r,i,s,o,a){const c=me(r),u=e.firstCreatePass&&us(e),l=cs(t);let h=!0;if(3&r.type||a){const d=Ne(r,t),p=a?a(d):d,f=l.length,v=a?e=>a(Ie(e[r.index])):r.index;if(Re(n)){let o=null;if(!a&&c&&(o=function(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const e=i[s];if(e===n&&i[s+1]===r){const e=t[7],n=i[s+2];return e.length>n?e[n]:null}"string"==typeof e&&(s+=2)}return null}(e,t,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=lo(r,t,0,s,!1);const e=n.listen(p,i,s);l.push(s,e),u&&u.push(i,v,f,f+1)}}else s=lo(r,t,0,s,!0),p.addEventListener(i,s,o),l.push(s),u&&u.push(i,v,f,o)}else s=lo(r,t,0,s,!1);const d=r.outputs;let p;if(h&&null!==d&&(p=d[i])){const e=p.length;if(e)for(let n=0;n<e;n+=2){const e=t[p[n]][p[n+1]].subscribe(s),o=l.length;l.push(s,e),u&&u.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,e,t,!!n,r),co}function uo(e,t,n,r){try{return!1!==n(r)}catch(i){return ls(e,i),!1}}function lo(e,t,n,r,i){return function n(s){if(s===Function)return r;const o=2&e.flags?Le(e.index,t):t;0==(32&t[2])&&rs(o);let a=uo(t,0,r,s),c=n.__ngNextListenerFn__;for(;c;)a=uo(t,0,c,s)&&a,c=c.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function ho(e=1){return function(e){return(He.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,He.lFrame.contextLView))[8]}(e)}function po(e,t){let n=null;const r=function(e){const t=e.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(e);for(let i=0;i<t.length;i++){const s=t[i];if("*"!==s){if(null===r?pi(e,s,!0):fi(r,s))return i}else n=i}return n}function fo(e){const t=qe()[16][6];if(!t.projection){const n=t.projection=vn(e?e.length:1,null),r=n.slice();let i=t.child;for(;null!==i;){const t=e?po(i,e):0;null!==t&&(r[t]?r[t].projectionNext=i:n[t]=i,r[t]=i),i=i.next}}}function vo(e,t=0,n){const r=qe(),i=$e(),s=ki(i,le+e,16,null,n||null);null===s.projection&&(s.projection=t),Qe(),64!=(64&s.flags)&&function(e,t,n){ni(t[11],0,t,n,Vr(e,n,t),Zr(n.parent||t[6],n,t))}(i,r,s)}function mo(e,t,n,r,i){const s=e[n+1],o=null===t;let a=r?wi(s):Ci(s),c=!1;for(;0!==a&&(!1===c||o);){const n=e[a+1];go(e[a],t)&&(c=!0,e[a+1]=r?Ei(n):_i(n)),a=r?wi(n):Ci(n)}c&&(e[n+1]=r?_i(s):Ei(s))}function go(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&yn(e,t)>=0}const yo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function bo(e){return e.substring(yo.key,yo.keyEnd)}function So(e){return e.substring(yo.value,yo.valueEnd)}function wo(e,t){const n=yo.textEnd;return n===t?-1:(t=yo.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,yo.key=t,n),To(e,t,n))}function _o(e,t){const n=yo.textEnd;let r=yo.key=To(e,t,n);return n===r?-1:(r=yo.keyEnd=function(e,t,n){let r;for(;t<n&&(45===(r=e.charCodeAt(t))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)t++;return t}(e,r,n),r=Eo(e,r,n),r=yo.value=To(e,r,n),r=yo.valueEnd=function(e,t,n){let r=-1,i=-1,s=-1,o=t,a=o;for(;o<n;){const c=e.charCodeAt(o++);if(59===c)return a;34===c||39===c?a=o=xo(e,c,o,n):t===o-4&&85===s&&82===i&&76===r&&40===c?a=o=xo(e,41,o,n):c>32&&(a=o),s=i,i=r,r=-33&c}return a}(e,r,n),Eo(e,r,n))}function Co(e){yo.key=0,yo.keyEnd=0,yo.value=0,yo.valueEnd=0,yo.textEnd=e.length}function To(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function Eo(e,t,n,r){return(t=To(e,t,n))<n&&t++,t}function xo(e,t,n,r){let i=-1,s=n;for(;s<r;){const n=e.charCodeAt(s++);if(n==t&&92!==i)return s;i=92==n&&92===i?0:n}throw new Error}function Po(e,t,n){return Ao(e,t,n,!1),Po}function ko(e,t){return Ao(e,t,null,!0),ko}function Ro(e){No(Fo,Oo,e,!1)}function Oo(e,t){for(let n=function(e){return Co(e),_o(e,To(e,0,yo.textEnd))}(t);n>=0;n=_o(t,n))Fo(e,bo(t),So(t))}function Io(e,t){for(let n=function(e){return Co(e),wo(e,To(e,0,yo.textEnd))}(t);n>=0;n=wo(t,n))mn(e,bo(t),!0)}function Ao(e,t,n,r){const i=qe(),s=$e(),o=rt(2);s.firstUpdatePass&&Mo(s,e,o,r),t!==gi&&Hs(i,o,t)&&Bo(s,s.data[mt()],i,i[11],e,i[o+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=d(Hn(e)))),e}(t,n),r,o)}function No(e,t,n,r){const i=$e(),s=rt(2);i.firstUpdatePass&&Mo(i,null,s,r);const o=qe();if(n!==gi&&Hs(o,s,n)){const a=i.data[mt()];if(Ho(a,r)&&!Do(i,s)){let e=r?a.classesWithoutHost:a.stylesWithoutHost;null!==e&&(n=p(e,n||"")),Qs(i,a,o,n,r)}else!function(e,t,n,r,i,s,o,a){i===gi&&(i=q);let c=0,u=0,l=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==l||null!==h;){const d=c<i.length?i[c+1]:void 0,p=u<s.length?s[u+1]:void 0;let f,v=null;l===h?(c+=2,u+=2,d!==p&&(v=h,f=p)):null===h||null!==l&&l<h?(c+=2,v=l):(u+=2,v=h,f=p),null!==v&&Bo(e,t,n,r,v,f,o,a),l=c<i.length?i[c]:null,h=u<s.length?s[u]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function(e,t,n){if(null==n||""===n)return q;const r=[],i=Hn(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)e(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&e(r,s,i[s]);else"string"==typeof i&&t(r,i);return r}(e,t,n),r,s)}}function Do(e,t){return t>=e.expandoStartIndex}function Mo(e,t,n,r){const i=e.data;if(null===i[n+1]){const s=i[mt()],o=Do(e,n);Ho(s,r)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){const i=function(e){const t=He.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let s=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=jo(n=Lo(null,e,t,n,r),t.attrs,r),s=null);else{const o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=Lo(i,e,t,n,r),null===s){let n=function(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==Ci(r))return e[wi(r)]}(e,t,r);void 0!==n&&Array.isArray(n)&&(n=Lo(null,e,t,n[1],r),n=jo(n,t.attrs,r),function(e,t,n,r){e[wi(n?t.classBindings:t.styleBindings)]=r}(e,t,r,n))}else s=function(e,t,n){let r;const i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++)r=jo(r,e[s].hostAttrs,n);return jo(r,t.attrs,n)}(e,t,r)}return void 0!==s&&(r?t.residualClasses=s:t.residualStyles=s),n}(i,s,t,r),function(e,t,n,r,i,s){let o=s?t.classBindings:t.styleBindings,a=wi(o),c=Ci(o);e[r]=n;let u,l=!1;if(Array.isArray(n)){const e=n;u=e[1],(null===u||yn(e,u)>0)&&(l=!0)}else u=n;if(i)if(0!==c){const t=wi(e[a+1]);e[r+1]=Si(t,a),0!==t&&(e[t+1]=Ti(e[t+1],r)),e[a+1]=131071&e[a+1]|r<<17}else e[r+1]=Si(a,0),0!==a&&(e[a+1]=Ti(e[a+1],r)),a=r;else e[r+1]=Si(c,0),0===a?a=r:e[c+1]=Ti(e[c+1],r),c=r;l&&(e[r+1]=_i(e[r+1])),mo(e,u,r,!0),mo(e,u,r,!1),function(e,t,n,r,i){const s=i?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof t&&yn(s,t)>=0&&(n[r+1]=Ei(n[r+1]))}(t,u,e,r,s),o=Si(a,c),s?t.classBindings=o:t.styleBindings=o}(i,s,t,n,o,r)}}function Lo(e,t,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=t[a],r=jo(r,s.hostAttrs,i),s!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function jo(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),mn(e,o,!!n||t[++s]))}return void 0===e?null:e}function Fo(e,t,n){mn(e,t,Hn(n))}function Bo(e,t,n,r,i,s,o,a){if(!(3&t.type))return;const c=e.data,u=c[a+1];Uo(1==(1&u)?zo(c,t,n,i,Ci(u),o):void 0)||(Uo(s)||2==(2&u)&&(s=zo(c,null,n,i,a,o)),function(e,t,n,r,i){const s=Re(e);if(t)i?s?e.addClass(n,r):n.classList.add(r):s?e.removeClass(n,r):n.classList.remove(r);else{let t=-1===r.indexOf("-")?void 0:Ir.DashCase;if(null==i)s?e.removeStyle(n,r,t):n.style.removeProperty(r);else{const o="string"==typeof i&&i.endsWith("!important");o&&(i=i.slice(0,-10),t|=Ir.Important),s?e.setStyle(n,r,i,t):n.style.setProperty(r,i,o?"important":"")}}}(r,o,Ae(mt(),n),i,s))}function zo(e,t,n,r,i,s){const o=null===t;let a;for(;i>0;){const t=e[i],s=Array.isArray(t),c=s?t[1]:t,u=null===c;let l=n[i+1];l===gi&&(l=u?q:void 0);let h=u?gn(l,r):c===r?l:void 0;if(s&&!Uo(h)&&(h=gn(t,r)),Uo(h)&&(a=h,o))return a;const d=e[i+1];i=o?wi(d):Ci(d)}if(null!==t){let e=s?t.residualClasses:t.residualStyles;null!=e&&(a=gn(e,r))}return a}function Uo(e){return void 0!==e}function Ho(e,t){return 0!=(e.flags&(t?16:32))}function Vo(e,t=""){const n=qe(),r=$e(),i=e+le,s=r.firstCreatePass?ki(r,i,1,t,null):r.data[i],o=n[i]=function(e,t){return Re(e)?e.createText(t):e.createTextNode(t)}(n[11],t);Yr(r,n,o,s),Ke(s,!1)}function qo(e){return $o("",e,""),qo}function $o(e,t,n){const r=qe(),i=$s(r,e,t,n);return i!==gi&&ds(r,mt(),i),$o}function Go(e,t,n,r,i){const s=qe(),o=function(e,t,n,r,i,s){const o=Vs(e,tt(),n,i);return rt(2),o?t+b(n)+r+b(i)+s:gi}(s,e,t,n,r,i);return o!==gi&&ds(s,mt(),o),Go}function Wo(e,t,n){No(mn,Io,$s(qe(),e,t,n),!0)}function Zo(e,t,n){const r=qe();return Hs(r,nt(),t)&&Ui($e(),yt(),r,e,t,r[11],n,!0),Zo}const Ko=void 0;var Yo=["en",[["a","p"],["AM","PM"],Ko],[["AM","PM"],Ko,Ko],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ko,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ko,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ko,"{1} 'at' {0}",Ko],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let Qo={};function Jo(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=ea(t);if(n)return n;const r=t.split("-")[0];if(n=ea(r),n)return n;if("en"===r)return Yo;throw new Error(`Missing locale data for the locale "${e}".`)}function Xo(e){return Jo(e)[ta.PluralCase]}function ea(e){return e in Qo||(Qo[e]=H.ng&&H.ng.common&&H.ng.common.locales&&H.ng.common.locales[e]),Qo[e]}var ta=(()=>((ta=ta||{})[ta.LocaleId=0]="LocaleId",ta[ta.DayPeriodsFormat=1]="DayPeriodsFormat",ta[ta.DayPeriodsStandalone=2]="DayPeriodsStandalone",ta[ta.DaysFormat=3]="DaysFormat",ta[ta.DaysStandalone=4]="DaysStandalone",ta[ta.MonthsFormat=5]="MonthsFormat",ta[ta.MonthsStandalone=6]="MonthsStandalone",ta[ta.Eras=7]="Eras",ta[ta.FirstDayOfWeek=8]="FirstDayOfWeek",ta[ta.WeekendRange=9]="WeekendRange",ta[ta.DateFormat=10]="DateFormat",ta[ta.TimeFormat=11]="TimeFormat",ta[ta.DateTimeFormat=12]="DateTimeFormat",ta[ta.NumberSymbols=13]="NumberSymbols",ta[ta.NumberFormats=14]="NumberFormats",ta[ta.CurrencyCode=15]="CurrencyCode",ta[ta.CurrencySymbol=16]="CurrencySymbol",ta[ta.CurrencyName=17]="CurrencyName",ta[ta.Currencies=18]="Currencies",ta[ta.Directionality=19]="Directionality",ta[ta.PluralCase=20]="PluralCase",ta[ta.ExtraData=21]="ExtraData",ta))();const na="en-US";let ra=na;function ia(e){var t,n;n="Expected localeId to be defined",null==(t=e)&&function(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e} [Expected=> null != ${t} <=Actual]`)}(n,t),"string"==typeof e&&(ra=e.toLowerCase().replace(/_/g,"-"))}function sa(e,t,n,r,i){if(e=m(e),Array.isArray(e))for(let s=0;s<e.length;s++)sa(e[s],t,n,r,i);else{const s=$e(),o=qe();let a=Ps(e)?e:m(e.provide),c=Ts(e);const u=We(),l=1048575&u.providerIndexes,h=u.directiveStart,d=u.providerIndexes>>20;if(Ps(e)||!e.multi){const r=new kt(c,i,Zs),p=ca(a,t,i?l:l+d,h);-1===p?(qt(zt(u,o),s,a),oa(s,e,t.length),t.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(r),o.push(r)):(n[p]=r,o[p]=r)}else{const p=ca(a,t,l+d,h),f=ca(a,t,l,l+d),v=p>=0&&n[p],m=f>=0&&n[f];if(i&&!m||!i&&!v){qt(zt(u,o),s,a);const l=function(e,t,n,r,i){const s=new kt(e,n,Zs);return s.multi=[],s.index=t,s.componentProviders=0,aa(s,i,r&&!n),s}(i?la:ua,n.length,i,r,c);!i&&m&&(n[f].providerFactory=l),oa(s,e,t.length,0),t.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(l),o.push(l)}else oa(s,e,p>-1?p:f,aa(n[i?f:p],c,!i&&r));!i&&r&&m&&n[f].componentProviders++}}}function oa(e,t,n,r){const i=Ps(t);if(i||t.useClass){const s=(t.useClass||t).prototype.ngOnDestroy;if(s){const o=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const e=o.indexOf(n);-1===e?o.push(n,[r,s]):o[e+1].push(r,s)}else o.push(n,s)}}}function aa(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function ca(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function ua(e,t,n,r){return ha(this.multi,[])}function la(e,t,n,r){const i=this.multi;let s;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=Jt(n,n[1],this.providerFactory.index,r);s=t.slice(0,e),ha(i,s);for(let n=e;n<t.length;n++)s.push(t[n])}else s=[],ha(i,s);return s}function ha(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function da(e,t=[]){return n=>{n.providersResolver=(n,r)=>function(e,t,n){const r=$e();if(r.firstCreatePass){const i=ge(e);sa(n,r.data,r.blueprint,i,!0),sa(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}class pa{}class fa{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${d(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}class va{}function ma(...e){}function ga(e,t){return new ba(Ne(e,t))}va.NULL=new fa;const ya=function(){return ga(We(),qe())};let ba=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=ya,e})();function Sa(e){return e instanceof ba?e.nativeElement:e}class wa{}let _a=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Ca(),e})();const Ca=function(){const e=qe(),t=Le(We().index,e);return function(e){return e[11]}(de(t)?t:e)};let Ta=(()=>{class e{}return e.\u0275prov=_({token:e,providedIn:"root",factory:()=>null}),e})();class Ea{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const xa=new Ea("12.1.4");class Pa{constructor(){}supports(e){return Bs(e)}create(e){return new Ra(e)}}const ka=(e,t)=>t;class Ra{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||ka}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const s=!n||t&&t.currentIndex<Na(n,r,i)?t:n,o=Na(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{i||(i=[]);const e=o-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;t<=s&&s<e&&(i[n]=r+1)}i[s.previousIndex]=t-e}}o!==a&&e(s,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Bs(e))throw new Error(`Error trying to diff '${d(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,t)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),s=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[js()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,e,r,t)),Object.is(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),s=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new Oa(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Aa),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Aa),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Oa{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ia{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class Aa{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new Ia,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Na(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class Da{constructor(){}supports(e){return e instanceof Map||zs(e)}create(){return new Ma}}class Ma{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||zs(e)))throw new Error(`Error trying to diff '${d(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new La(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class La{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ja(){return new Fa([new Pa])}let Fa=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||ja()),deps:[[e,new In,new On]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=_({token:e,providedIn:"root",factory:ja}),e})();function Ba(){return new za([new Da])}let za=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||Ba()),deps:[[e,new In,new On]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=_({token:e,providedIn:"root",factory:Ba}),e})();function Ua(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&r.push(Ie(s)),pe(s))for(let e=he;e<s.length;e++){const t=s[e],n=t[1].firstChild;null!==n&&Ua(t[1],t,n,r)}const o=n.type;if(8&o)Ua(e,t,n.child,r);else if(32&o){const e=Ar(n,t);let i;for(;i=e();)r.push(i)}else if(16&o){const e=Jr(t,n);if(Array.isArray(e))r.push(...e);else{const n=Nr(t[16]);Ua(n[1],n,e,r,!0)}}n=i?n.projectionNext:n.next}return r}class Ha{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Ua(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(pe(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(zr(e,n),fn(t,n))}this._attachedToViewContainer=!1}Ur(this._lView[1],this._lView)}onDestroy(e){Bi(this._lView[1],this._lView,null,e)}markForCheck(){rs(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){is(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){Xe(!0);try{is(e,t,n)}finally{Xe(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,ti(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class Va extends Ha{constructor(e){super(e),this._view=e}detectChanges(){ss(this._view)}checkNoChanges(){!function(e){Xe(!0);try{ss(e)}finally{Xe(!1)}}(this._view)}get context(){return null}}const qa=function(e){return function(e,t,n){if(ve(e)&&!n){const n=Le(e.index,t);return new Ha(n,n)}return 47&e.type?new Ha(t[16],t):null}(We(),qe(),16==(16&e))};let $a=(()=>{class e{}return e.__NG_ELEMENT_ID__=qa,e})();const Ga=[new Da],Wa=new Fa([new Pa]),Za=new za(Ga),Ka=function(){return Xa(We(),qe())};let Ya=(()=>{class e{}return e.__NG_ELEMENT_ID__=Ka,e})();const Qa=Ya,Ja=class extends Qa{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=Pi(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),Oi(t,n,e),new Ha(n)}};function Xa(e,t){return 4&e.type?new Ja(t,e,ga(e,t)):null}class ec{}class tc{}const nc=function(){return cc(We(),qe())};let rc=(()=>{class e{}return e.__NG_ELEMENT_ID__=nc,e})();const ic=rc,sc=class extends ic{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return ga(this._hostTNode,this._hostLView)}get injector(){return new tn(this._hostTNode,this._hostLView)}get parentInjector(){const e=Vt(this._hostTNode,this._hostLView);if(Dt(e)){const t=Lt(e,this._hostLView),n=Mt(e);return new tn(t[1].data[n+8],t)}return new tn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=oc(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-he}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,i){const s=n||this.parentInjector;if(!i&&null==e.ngModule&&s){const e=s.get(ec,null);e&&(i=e)}const o=e.create(s,r,void 0,i);return this.insert(o.hostView,t),o}insert(e,t){const n=e._lView,r=n[1];if(pe(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],r=new sc(t,t[6],t[3]);r.detach(r.indexOf(e))}}const i=this._adjustIndex(t),s=this._lContainer;!function(e,t,n,r){const i=he+r,s=n.length;r>0&&(n[i-1][4]=t),r<s-he?(t[4]=n[i],pn(n,he+r,t)):(n.push(t),t[4]=null),t[3]=n;const o=t[17];null!==o&&n!==o&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,n,s,i);const o=Xr(i,s),a=n[11],c=Wr(a,s[7]);return null!==c&&function(e,t,n,r,i,s){r[0]=i,r[6]=t,ti(e,r,n,1,i,s)}(r,s[6],a,n,c,o),e.attachToViewContainerRef(),pn(ac(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=oc(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=zr(this._lContainer,t);n&&(fn(ac(this._lContainer),t),Ur(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=zr(this._lContainer,t);return n&&null!=fn(ac(this._lContainer),t)?new Ha(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function oc(e){return e[8]}function ac(e){return e[8]||(e[8]=[])}function cc(e,t){let n;const r=t[e.index];if(pe(r))n=r;else{let i;if(8&e.type)i=Ie(r);else{const n=t[11];i=n.createComment("");const r=Ne(e,t);qr(n,Wr(n,r),i,function(e,t){return Re(e)?e.nextSibling(t):t.nextSibling}(n,r),!1)}t[e.index]=n=Ji(r,t,i,e),ns(t,n)}return new sc(n,e,t)}const uc={};class lc extends va{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=ce(e);return new pc(t,this.ngModule)}}function hc(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const dc=new cn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>kr});class pc extends pa{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(mi).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return hc(this.componentDef.inputs)}get outputs(){return hc(this.componentDef.outputs)}create(e,t,n,r){const i=(r=r||this.ngModule)?function(e,t){return{get:(n,r,i)=>{const s=e.get(n,uc,i);return s!==uc||r===uc?s:t.get(n,r,i)}}}(e,r.injector):e,s=i.get(wa,Oe),o=i.get(Ta,null),a=s.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=n?function(e,t,n){if(Re(e))return e.selectRootElement(t,n===j.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Fr(s.createRenderer(null,this.componentDef),c,function(e){const t=e.toLowerCase();return"svg"===t?Ee:"math"===t?"http://www.w3.org/1998/MathML/":null}(c)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:kr,clean:as,playerHandler:null,flags:0},d=Fi(0,null,null,1,0,null,null,null,null,null),p=Pi(null,d,h,l,null,null,s,a,o,i);let f,v;lt(p);try{const e=function(e,t,n,r,i,s){const o=n[1];n[20]=e;const a=ki(o,20,2,"#host",null),c=a.mergedAttrs=t.hostAttrs;null!==c&&(ps(a,c,!0),null!==e&&(Rt(i,e,c),null!==a.classes&&ii(i,e,a.classes),null!==a.styles&&ri(i,e,a.styles)));const u=r.createRenderer(e,t),l=Pi(n,ji(t),null,t.onPush?64:16,n[20],a,r,u,null,null);return o.firstCreatePass&&(qt(zt(a,n),o,t.type),$i(o,a),Wi(a,n.length,1)),ns(n,l),n[20]=l}(u,this.componentDef,p,s,a);if(u)if(n)Rt(a,u,["ng-version",xa.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!hi(i))break;i=s}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&Rt(a,u,e),t&&t.length>0&&ii(a,u,t.join(" "))}if(v=De(d,le),void 0!==t){const e=v.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}f=function(e,t,n,r,i){const s=n[1],o=function(e,t,n){const r=We();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Zi(e,r,t,Ri(e,t,1,null),n));const i=Jt(t,e,r.directiveStart,r);Cr(i,t);const s=Ne(r,t);return s&&Cr(s,t),i}(s,n,t);if(r.components.push(o),e[8]=o,i&&i.forEach(e=>e(o,t)),t.contentQueries){const e=We();t.contentQueries(1,o,e.directiveStart)}const a=We();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(gt(a.index),Vi(n[1],a,0,a.directiveStart,a.directiveEnd,t),qi(t,o)),o}(e,this.componentDef,p,h,[Os]),Oi(d,p,null)}finally{vt()}return new fc(this.componentType,f,ga(v,p),p,v)}}class fc extends class{}{constructor(e,t,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=t,this.hostView=this.changeDetectorRef=new Va(r),this.componentType=e}get injector(){return new tn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const vc=new Map;class mc extends ec{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new lc(this);const n=ue(e),r=e[K]||null;r&&ia(r),this._bootstrapComponents=Or(n.bootstrap),this._r3Injector=ws(e,t,[{provide:ec,useValue:this},{provide:va,useValue:this.componentFactoryResolver}],d(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Rs.THROW_IF_NOT_FOUND,n=I.Default){return e===Rs||e===ec||e===fs?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class gc extends tc{constructor(e){super(),this.moduleType=e,null!==ue(e)&&function(e){const t=new Set;!function e(n){const r=ue(n,!0),i=r.id;null!==i&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${d(t)} vs ${d(t.name)}`)}(i,vc.get(i),n),vc.set(i,n));const s=Or(r.imports);for(const o of s)t.has(o)||(t.add(o),e(o))}(e)}(e)}create(e){return new mc(this.moduleType,e)}}function yc(e,t,n){const r=et()+e,i=qe();return i[r]===gi?Us(i,r,n?t.call(n):t()):function(e,t){return e[t]}(i,r)}function bc(e,t,n,r){return Tc(qe(),et(),e,t,n,r)}function Sc(e,t,n,r,i){return Ec(qe(),et(),e,t,n,r,i)}function wc(e,t,n,r,i,s){return function(e,t,n,r,i,s,o,a){const c=t+n;return function(e,t,n,r,i){const s=Vs(e,t,n,r);return Hs(e,t+2,i)||s}(e,c,i,s,o)?Us(e,c+3,a?r.call(a,i,s,o):r(i,s,o)):Cc(e,c+3)}(qe(),et(),e,t,n,r,i,s)}function _c(e,t,n,r,i,s,o){return function(e,t,n,r,i,s,o,a,c){const u=t+n;return function(e,t,n,r,i,s){const o=Vs(e,t,n,r);return Vs(e,t+2,i,s)||o}(e,u,i,s,o,a)?Us(e,u+4,c?r.call(c,i,s,o,a):r(i,s,o,a)):Cc(e,u+4)}(qe(),et(),e,t,n,r,i,s,o)}function Cc(e,t){const n=e[t];return n===gi?void 0:n}function Tc(e,t,n,r,i,s){const o=t+n;return Hs(e,o,i)?Us(e,o+1,s?r.call(s,i):r(i)):Cc(e,o+1)}function Ec(e,t,n,r,i,s,o){const a=t+n;return Vs(e,a,i,s)?Us(e,a+2,o?r.call(o,i,s):r(i,s)):Cc(e,a+2)}function xc(e,t){const n=$e();let r;const i=e+le;n.firstCreatePass?(r=function(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}throw new y("302",`The pipe '${e}' could not be found!`)}(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=ye(r.type)),o=N(Zs);try{const e=Ft(!1),t=s();return Ft(e),function(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(n,qe(),i,t),t}finally{N(o)}}function Pc(e,t,n){const r=e+le,i=qe(),s=Me(i,r);return Oc(i,Rc(i,r)?Tc(i,et(),t,s.transform,n,s):s.transform(n))}function kc(e,t,n,r){const i=e+le,s=qe(),o=Me(s,i);return Oc(s,Rc(s,i)?Ec(s,et(),t,o.transform,n,r,o):o.transform(n,r))}function Rc(e,t){return e[1].data[t].pure}function Oc(e,t){return Fs.isWrapped(t)&&(t=Fs.unwrap(t),e[tt()]=gi),t}function Ic(e){return t=>{setTimeout(e,void 0,t)}}const Ac=class extends r.x{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){var r,s,o;let a=e,c=t||(()=>null),u=n;if(e&&"object"==typeof e){const t=e;a=null===(r=t.next)||void 0===r?void 0:r.bind(t),c=null===(s=t.error)||void 0===s?void 0:s.bind(t),u=null===(o=t.complete)||void 0===o?void 0:o.bind(t)}this.__isAsync&&(c=Ic(c),a&&(a=Ic(a)),u&&(u=Ic(u)));const l=super.subscribe({next:a,error:c,complete:u});return e instanceof i.w0&&e.add(l),l}};function Nc(){return this._results[js()]()}class Dc{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=js(),n=Dc.prototype;n[t]||(n[t]=Nc)}get changes(){return this._changes||(this._changes=new Ac)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const r=hn(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Mc{constructor(e){this.queryList=e,this.matches=null}clone(){return new Mc(this.queryList)}setDirty(){this.queryList.setDirty()}}class Lc{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let e=0;e<n;e++){const n=t.getByIndex(e);r.push(this.queries[n.indexInDeclarationView].clone())}return new Lc(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==Yc(e,t).matches&&this.queries[t].setDirty()}}class jc{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class Fc{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,i=this.getByIndex(n).embeddedTView(e,r);i&&(i.indexInDeclarationView=n,null!==t?t.push(i):t=[i])}return null!==t?new Fc(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Bc{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Bc(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(e,t,zc(t,i)),this.matchTNodeWithReadOption(e,t,Qt(t,e,i,!1,!1))}else n===Ya?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Qt(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===ba||r===rc||r===Ya&&4&t.type)this.addMatch(t.index,-2);else{const n=Qt(t,e,r,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function zc(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function Uc(e,t,n,r){return-1===n?function(e,t){return 11&e.type?ga(e,t):4&e.type?Xa(e,t):null}(t,e):-2===n?function(e,t,n){return n===ba?ga(t,e):n===Ya?Xa(t,e):n===rc?cc(t,e):void 0}(e,t,r):Jt(e,e[1],n,t)}function Hc(e,t,n,r){const i=t[19].queries[r];if(null===i.matches){const r=e.data,s=n.matches,o=[];for(let e=0;e<s.length;e+=2){const i=s[e];o.push(i<0?null:Uc(t,r[i],s[e+1],n.metadata.read))}i.matches=o}return i.matches}function Vc(e,t,n,r){const i=e.queries.getByIndex(n),s=i.matches;if(null!==s){const o=Hc(e,t,i,n);for(let e=0;e<s.length;e+=2){const n=s[e];if(n>0)r.push(o[e/2]);else{const i=s[e+1],o=t[-n];for(let e=he;e<o.length;e++){const t=o[e];t[17]===t[3]&&Vc(t[1],t,i,r)}if(null!==o[9]){const e=o[9];for(let t=0;t<e.length;t++){const n=e[t];Vc(n[1],n,i,r)}}}}}return r}function qc(e){const t=qe(),n=$e(),r=ot();at(r+1);const i=Yc(n,r);if(e.dirty&&je(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const s=i.crossesNgTemplate?Vc(n,t,r,[]):Hc(n,t,i,r);e.reset(s,Sa),e.notifyOnChanges()}return!0}return!1}function $c(e,t,n){const r=$e();r.firstCreatePass&&(Kc(r,new jc(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),Zc(r,qe(),t)}function Gc(e,t,n,r){const i=$e();if(i.firstCreatePass){const s=We();Kc(i,new jc(t,n,r),s.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}Zc(i,qe(),n)}function Wc(){return e=qe(),t=ot(),e[19].queries[t].queryList;var e,t}function Zc(e,t,n){const r=new Dc(4==(4&n));Bi(e,t,r,r.destroy),null===t[19]&&(t[19]=new Lc),t[19].queries.push(new Mc(r))}function Kc(e,t,n){null===e.queries&&(e.queries=new Fc),e.queries.track(new Bc(t,n))}function Yc(e,t){return e.queries.getByIndex(t)}function Qc(e,t){return Xa(e,t)}const Jc=new cn("Application Initializer");let Xc=(()=>{class e{constructor(e){this.appInits=e,this.resolve=ma,this.reject=ma,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();if(so(t))e.push(t);else if(ao(t)){const n=new Promise((e,n)=>{t.subscribe({complete:e,error:n})});e.push(n)}}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(xn(Jc,8))},e.\u0275prov=_({token:e,factory:e.\u0275fac}),e})();const eu=new cn("AppId"),tu={provide:eu,useFactory:function(){return`${nu()}${nu()}${nu()}`},deps:[]};function nu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ru=new cn("Platform Initializer"),iu=new cn("Platform ID"),su=new cn("appBootstrapListener");let ou=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=_({token:e,factory:e.\u0275fac}),e})();const au=new cn("LocaleId"),cu=new cn("DefaultCurrencyCode");class uu{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const lu=function(e){return new gc(e)},hu=lu,du=function(e){return Promise.resolve(lu(e))},pu=function(e){const t=lu(e),n=Or(ue(e).declarations).reduce((e,t)=>{const n=ce(t);return n&&e.push(new pc(n)),e},[]);return new uu(t,n)},fu=pu,vu=function(e){return Promise.resolve(pu(e))};let mu=(()=>{class e{constructor(){this.compileModuleSync=hu,this.compileModuleAsync=du,this.compileModuleAndAllComponentsSync=fu,this.compileModuleAndAllComponentsAsync=vu}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=_({token:e,factory:e.\u0275fac}),e})();const gu=(()=>Promise.resolve(0))();function yu(e){"undefined"==typeof Zone?gu.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class bu{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ac(!1),this.onMicrotaskEmpty=new Ac(!1),this.onStable=new Ac(!1),this.onError=new Ac(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let e=H.requestAnimationFrame,t=H.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(H,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,_u(e),e.isCheckStableRunning=!0,wu(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),_u(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return Cu(e),n.invokeTask(i,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),Tu(e)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return Cu(e),n.invoke(i,s,o,a,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),Tu(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,_u(e),wu(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!bu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(bu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,e,Su,ma,ma);try{return i.runTask(s,t,n)}finally{i.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const Su={};function wu(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function _u(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Cu(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Tu(e){e._nesting--,wu(e)}class Eu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ac,this.onMicrotaskEmpty=new Ac,this.onStable=new Ac,this.onError=new Ac}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let xu=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{bu.assertNotInAngularZone(),yu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())yu(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(xn(bu))},e.\u0275prov=_({token:e,factory:e.\u0275fac}),e})(),Pu=(()=>{class e{constructor(){this._applications=new Map,Iu.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return Iu.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=_({token:e,factory:e.\u0275fac}),e})();class ku{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}function Ru(e){Iu=e}let Ou,Iu=new ku,Au=!0,Nu=!1;function Du(){return Nu=!0,Au}function Mu(){if(Nu)throw new Error("Cannot enable prod mode after platform setup.");Au=!1}const Lu=new cn("AllowMultipleToken");class ju{constructor(e,t){this.name=e,this.token=t}}function Fu(e,t,n=[]){const r=`Platform: ${t}`,i=new cn(r);return(t=[])=>{let s=Bu();if(!s||s.injector.get(Lu,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0},{provide:ms,useValue:"platform"});!function(e){if(Ou&&!Ou.destroyed&&!Ou.injector.get(Lu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ou=e.get(zu);const t=e.get(ru,null);t&&t.forEach(e=>e())}(Rs.create({providers:e,name:r}))}return function(e){const t=Bu();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function Bu(){return Ou&&!Ou.destroyed?Ou:null}let zu=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new Eu:("zone.js"===e?void 0:e)||new bu({enableLongStackTrace:Du(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),r=[{provide:bu,useValue:n}];return n.run(()=>{const t=Rs.create({providers:r,parent:this.injector,name:e.moduleType.name}),i=e.create(t),s=i.injector.get(Pr,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const e=n.onError.subscribe({next:e=>{s.handleError(e)}});i.onDestroy(()=>{Vu(this._modules,i),e.unsubscribe()})}),function(e,t,n){try{const r=n();return so(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,n,()=>{const e=i.injector.get(Xc);return e.runInitializers(),e.donePromise.then(()=>(ia(i.injector.get(au,na)||na),this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,t=[]){const n=Uu({},t);return function(e,t,n){const r=new gc(n);return Promise.resolve(r)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(Hu);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${d(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(xn(Rs))},e.\u0275prov=_({token:e,factory:e.\u0275fac}),e})();function Uu(e,t){return Array.isArray(t)?t.reduce(Uu,e):Object.assign(Object.assign({},e),t)}let Hu=(()=>{class e{constructor(e,t,n,i,l){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=i,this._initStatus=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new s.y(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),d=new s.y(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{bu.assertNotInAngularZone(),yu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{bu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});var p,f,v,m,g,y,b,S,w,_,C,T,E,x,P;this.isStable=(0,o.T)(h,d.pipe((f=(p=p||{}).connector,v=void 0===f?function(){return new r.x}:f,g=void 0===(m=p.resetOnComplete)||m,b=void 0===(y=p.resetOnError)||y,w=void 0===(S=p.resetOnRefCountZero)||S,_=null,C=null,T=0,E=!1,x=!1,P=function(){_=C=null,E=x=!1},(0,u.e)(function(e,t){T++,C=null!=C?C:v(),t.add(function(){if(T--,w&&!T&&!x&&!E){var e=_;P(),null==e||e.unsubscribe()}}),C.subscribe(t),_||(_=new a.Hp({next:function(e){return C.next(e)},error:function(e){x=!0;var t=C;b&&P(),t.error(e)},complete:function(){E=!0;var e=C;g&&P(),e.complete()}}),(0,c.Dp)(e).subscribe(_))}))))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof pa?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ec),i=n.create(Rs.NULL,[],t||n.selector,r),s=i.location.nativeElement,o=i.injector.get(xu,null),a=o&&i.injector.get(Pu);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),Vu(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;Vu(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(su,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(xn(bu),xn(Rs),xn(Pr),xn(va),xn(Xc))},e.\u0275prov=_({token:e,factory:e.\u0275fac}),e})();function Vu(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class qu{}class $u{}const Gu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Wu=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||Gu}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split("#");return void 0===r&&(r="default"),n(8255)(t).then(e=>e[r]).then(e=>Zu(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+i]).then(e=>Zu(e,t,r))}}return e.\u0275fac=function(t){return new(t||e)(xn(mu),xn($u,8))},e.\u0275prov=_({token:e,factory:e.\u0275fac}),e})();function Zu(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const Ku=function(e){return null},Yu=Fu(null,"core",[{provide:iu,useValue:"unknown"},{provide:zu,deps:[Rs]},{provide:Pu,deps:[]},{provide:ou,deps:[]}]),Qu=[{provide:Hu,useClass:Hu,deps:[bu,Rs,Pr,va,Xc]},{provide:dc,deps:[bu],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Xc,useClass:Xc,deps:[[new On,Jc]]},{provide:mu,useClass:mu,deps:[]},tu,{provide:Fa,useFactory:function(){return Wa},deps:[]},{provide:za,useFactory:function(){return Za},deps:[]},{provide:au,useFactory:function(e){return ia(e=e||"undefined"!=typeof $localize&&$localize.locale||na),e},deps:[[new Rn(au),new On,new In]]},{provide:cu,useValue:"USD"}];let Ju=(()=>{class e{constructor(e){}}return e.\u0275fac=function(t){return new(t||e)(xn(Hu))},e.\u0275mod=re({type:e}),e.\u0275inj=C({providers:Qu}),e})()},9075:(e,t,n)=>{"use strict";n.d(t,{b2:()=>F,H7:()=>N,q6:()=>L,se:()=>C});var r=n(8583),i=n(5040);class s extends r.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class o extends s{static makeCurrent(){(0,r.HT)(new o)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(c=c||document.querySelector("base"),c?c.getAttribute("href"):null);return null==t?null:function(e){a=a||document.createElement("a"),a.setAttribute("href",e);const t=a.pathname;return"/"===t.charAt(0)?t:`/${t}`}(t)}resetBaseElement(){c=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return(0,r.Mx)(document.cookie,e)}}let a,c=null;const u=new i.OlP("TRANSITION_ID"),l=[{provide:i.ip1,useFactory:function(e,t,n){return()=>{n.get(i.CZH).donePromise.then(()=>{const n=(0,r.q)();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[u,r.K0,i.zs3],multi:!0}];class h{static init(){(0,i.VLi)(new h)}addToWindow(e){i.dqk.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},i.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),i.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),i.dqk.frameworkStabilizers||(i.dqk.frameworkStabilizers=[]),i.dqk.frameworkStabilizers.push(e=>{const t=i.dqk.getAllAngularTestabilities();let n=t.length,r=!1;const s=function(t){r=r||t,n--,0==n&&e(r)};t.forEach(function(e){e.whenStable(s)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:n?(0,r.q)().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let d=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const p=new i.OlP("EventManagerPlugins");let f=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(p),i.LFG(i.R0b))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class v{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const i=(0,r.q)().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,n)}}let m=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),g=(()=>{class e extends m{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,t,n){e.forEach(e=>{const r=this._doc.createElement("style");r.textContent=e,n.push(t.appendChild(r))})}addHost(e){const t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}removeHost(e){const t=this._hostNodes.get(e);t&&t.forEach(y),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((t,n)=>{this._addStylesToHost(e,n,t)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(y))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.K0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();function y(e){(0,r.q)().remove(e)}const b={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},S=/%COMP%/g;function w(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?w(e,i,n):(i=i.replace(S,e),n.push(i))}return n}function _(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let C=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new T(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case i.ifc.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new E(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case 1:case i.ifc.ShadowDom:return new x(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=w(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(f),i.LFG(g),i.LFG(i.AFp))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class T{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(b[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const i=b[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=b[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(i.JOm.DashCase|i.JOm.Important)?e.style.setProperty(t,n,r&i.JOm.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&i.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,_(n)):this.eventManager.addEventListener(e,t,_(n))}}class E extends T{constructor(e,t,n,r){super(e),this.component=n;const i=w(r+"-"+n.id,n.styles,[]);t.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(S,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(S,r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class x extends T{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=w(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const e=document.createElement("style");e.textContent=i[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let P=(()=>{class e extends v{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.K0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const k=["alt","control","meta","shift"],R={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},O={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},I={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let A=(()=>{class e extends v{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,i){const s=e.parseEventName(n),o=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,r.q)().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=e._normalizeKey(n.pop());let s="";if(k.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),s+=e+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&O.hasOwnProperty(t)&&(t=O[t]))}return R[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),k.forEach(r=>{r!=n&&(0,I[r])(e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return i=>{e.getEventFullKey(i)===t&&r.runGuarded(()=>n(i))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.K0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,i.Yz7)({factory:function(){return(0,i.LFG)(M)},token:e,providedIn:"root"}),e})();function D(e){return new M(e.get(r.K0))}let M=(()=>{class e extends N{constructor(e){super(),this._doc=e}sanitize(e,t){if(null==t)return null;switch(e){case i.q3G.NONE:return t;case i.q3G.HTML:return(0,i.qzn)(t,"HTML")?(0,i.z3N)(t):(0,i.EiD)(this._doc,String(t)).toString();case i.q3G.STYLE:return(0,i.qzn)(t,"Style")?(0,i.z3N)(t):t;case i.q3G.SCRIPT:if((0,i.qzn)(t,"Script"))return(0,i.z3N)(t);throw new Error("unsafe value used in a script context");case i.q3G.URL:return(0,i.yhl)(t),(0,i.qzn)(t,"URL")?(0,i.z3N)(t):(0,i.mCW)(String(t));case i.q3G.RESOURCE_URL:if((0,i.qzn)(t,"ResourceURL"))return(0,i.z3N)(t);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return(0,i.JVY)(e)}bypassSecurityTrustStyle(e){return(0,i.L6k)(e)}bypassSecurityTrustScript(e){return(0,i.eBb)(e)}bypassSecurityTrustUrl(e){return(0,i.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,i.pB0)(e)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.K0))},e.\u0275prov=(0,i.Yz7)({factory:function(){return D((0,i.LFG)(i.gxx))},token:e,providedIn:"root"}),e})();const L=(0,i.eFA)(i._c5,"browser",[{provide:i.Lbi,useValue:r.bD},{provide:i.g9A,useValue:function(){o.makeCurrent(),h.init()},multi:!0},{provide:r.K0,useFactory:function(){return(0,i.RDi)(document),document},deps:[]}]),j=[[],{provide:i.zSh,useValue:"root"},{provide:i.qLn,useFactory:function(){return new i.qLn},deps:[]},{provide:p,useClass:P,multi:!0,deps:[r.K0,i.R0b,i.Lbi]},{provide:p,useClass:A,multi:!0,deps:[r.K0]},[],{provide:C,useClass:C,deps:[f,g,i.AFp]},{provide:i.FYo,useExisting:C},{provide:m,useExisting:g},{provide:g,useClass:g,deps:[r.K0]},{provide:i.dDg,useClass:i.dDg,deps:[i.R0b]},{provide:f,useClass:f,deps:[p,i.R0b]},{provide:r.JF,useClass:d,deps:[]},[]];let F=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:i.AFp,useValue:t.appId},{provide:u,useExisting:i.AFp},l]}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(e,12))},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:j,imports:[r.ez,i.hGG]}),e})();"undefined"!=typeof window&&window},4154:(e,t,n)=>{"use strict";n.d(t,{gz:()=>Ge,F0:()=>vn,Bz:()=>xn,lC:()=>mn});var r=n(8583),i=n(5040),s=(0,n(3864).d)(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}),o=n(8476),a=n(1964),c=n(5094),u=n(1598),l=n(1776),h=n(9044),d=n(482),p=n(6149),f=n(7331),v=n(6889),m=n(3856),g=n(424),y=n(5076);function b(e,t,n,r,i){return function(s,o){var a=n,c=t,u=0;s.subscribe(new y.Q(o,function(t){var n=u++;c=a?e(c,t,n):(a=!0,t),r&&o.next(c)},i&&function(){a&&o.next(c),o.complete()}))}}function S(e,t){return(0,g.e)(b(e,t,arguments.length>=2,!0))}function w(e){return(0,g.e)(function(t,n){var r,i=null,s=!1;i=t.subscribe(new y.Q(n,void 0,void 0,function(a){r=(0,o.Xf)(e(a,w(e)(t))),i?(i.unsubscribe(),i=null,r.subscribe(n)):s=!0})),s&&(i.unsubscribe(),i=null,r.subscribe(n))})}var _=n(7216),C=n(8853);function T(e,t){return(0,C.m)(t)?(0,_.z)(e,t,1):(0,_.z)(e,1)}var E=n(4689),x=n(9162);function P(e){return e<=0?function(){return p.E}:(0,g.e)(function(t,n){var r=[];t.subscribe(new y.Q(n,function(t){r.push(t),e<r.length&&r.shift()},function(){var e,t;try{for(var i=(0,x.XA)(r),s=i.next();!s.done;s=i.next())n.next(s.value)}catch(o){e={error:o}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}n.complete()},void 0,function(){r=null}))})}function k(e){return void 0===e&&(e=R),(0,g.e)(function(t,n){var r=!1;t.subscribe(new y.Q(n,function(e){r=!0,n.next(e)},function(){return r?n.complete():n.error(e())}))})}function R(){return new s}function O(e){return(0,g.e)(function(t,n){var r=!1;t.subscribe(new y.Q(n,function(e){r=!0,n.next(e)},function(){r||n.next(e),n.complete()}))})}var I=n(2738),A=n(4294);function N(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?(0,E.h)(function(t,n){return e(t,n,r)}):I.y,(0,A.q)(1),n?O(t):k(function(){return new s}))}}var D=n(5207),M=n(7540),L=n(9922),j=n(3681),F=n(23);class B{constructor(e,t){this.id=e,this.url=t}}class z extends B{constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class U extends B{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class H extends B{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class V extends B{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class q extends B{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $ extends B{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class G extends B{constructor(e,t,n,r,i){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class W extends B{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Z extends B{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class K{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Y{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Q{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class J{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class X{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ee{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class te{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ne="primary";class re{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ie(e){return new re(e)}function se(e){const t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function oe(e,t,n){const r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let s=0;s<r.length;s++){const t=r[s],n=e[s];if(t.startsWith(":"))i[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function ae(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!ce(e[i],t[i]))return!1;return!0}function ce(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((e,t)=>r[t]===e)}return e===t}function ue(e){return Array.prototype.concat.apply([],e)}function le(e){return e.length>0?e[e.length-1]:null}function he(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function de(e){return(0,i.CqO)(e)?e:(0,i.QGY)(e)?(0,o.Dp)(Promise.resolve(e)):(0,a.of)(e)}const pe={exact:function e(t,n,r){if(!_e(t.segments,n.segments))return!1;if(!ye(t.segments,n.segments,r))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!t.children[i])return!1;if(!e(t.children[i],n.children[i],r))return!1}return!0},subset:me},fe={exact:function(e,t){return ae(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>ce(e[n],t[n]))},ignored:()=>!0};function ve(e,t,n){return pe[n.paths](e.root,t.root,n.matrixParams)&&fe[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function me(e,t,n){return ge(e,t,t.segments,n)}function ge(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!!_e(i,n)&&!t.hasChildren()&&!!ye(i,n,r)}if(e.segments.length===n.length){if(!_e(e.segments,n))return!1;if(!ye(e.segments,n,r))return!1;for(const n in t.children){if(!e.children[n])return!1;if(!me(e.children[n],t.children[n],r))return!1}return!0}{const i=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!!_e(e.segments,i)&&!!ye(e.segments,i,r)&&!!e.children.primary&&ge(e.children.primary,t,s,r)}}function ye(e,t,n){return t.every((t,r)=>fe[n](e[r].parameters,t.parameters))}class be{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ie(this.queryParams)),this._queryParamMap}toString(){return Ee.serialize(this)}}class Se{constructor(e,t){this.segments=e,this.children=t,this.parent=null,he(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xe(this)}}class we{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ie(this.parameters)),this._parameterMap}toString(){return Ne(this)}}function _e(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}class Ce{}class Te{parse(e){const t=new Fe(e);return new be(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var t;return`/${Pe(e.root,!0)}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${Re(t)}=${Re(e)}`).join("&"):`${Re(t)}=${Re(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${t=e.fragment,encodeURI(t)}`:""}`}}const Ee=new Te;function xe(e){return e.segments.map(e=>Ne(e)).join("/")}function Pe(e,t){if(!e.hasChildren())return xe(e);if(t){const t=e.children.primary?Pe(e.children.primary,!1):"",n=[];return he(e.children,(e,t)=>{t!==ne&&n.push(`${t}:${Pe(e,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function(e,t){let n=[];return he(e.children,(e,r)=>{r===ne&&(n=n.concat(t(e,r)))}),he(e.children,(e,r)=>{r!==ne&&(n=n.concat(t(e,r)))}),n}(e,(t,n)=>n===ne?[Pe(e.children.primary,!1)]:[`${n}:${Pe(t,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${xe(e)}/${t[0]}`:`${xe(e)}/(${t.join("//")})`}}function ke(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Re(e){return ke(e).replace(/%3B/gi,";")}function Oe(e){return ke(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ie(e){return decodeURIComponent(e)}function Ae(e){return Ie(e.replace(/\+/g,"%20"))}function Ne(e){return`${Oe(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${Oe(e)}=${Oe(t[e])}`).join("")}`;var t}const De=/^[^\/()?;=#]+/;function Me(e){const t=e.match(De);return t?t[0]:""}const Le=/^[^=?&#]+/,je=/^[^?&#]+/;class Fe{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Se([],{}):new Se([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new Se(e,t)),n}parseSegment(){const e=Me(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new we(Ie(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Me(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=Me(this.remaining);e&&(n=e,this.capture(n))}e[Ie(t)]=Ie(n)}parseQueryParam(e){const t=function(e){const t=e.match(Le);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(je);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const r=Ae(t),i=Ae(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(t=[t],e[r]=t),t.push(i)}else e[r]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Me(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=ne);const s=this.parseChildren();t[i]=1===Object.keys(s).length?s.primary:new Se([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Be{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ze(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=ze(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ue(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return Ue(e,this._root).map(e=>e.value)}}function ze(e,t){if(e===t.value)return t;for(const n of t.children){const t=ze(e,n);if(t)return t}return null}function Ue(e,t){if(e===t.value)return[t];for(const n of t.children){const r=Ue(e,n);if(r.length)return r.unshift(t),r}return[]}class He{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ve(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class qe extends Be{constructor(e,t){super(e),this.snapshot=t,Ye(this,e)}toString(){return this.snapshot.toString()}}function $e(e,t){const n=function(e,t){const n=new Ze([],{},{},"",{},ne,t,null,e.root,-1,{});return new Ke("",new He(n,[]))}(e,t),r=new c.X([new we("",{})]),i=new c.X({}),s=new c.X({}),o=new c.X({}),a=new c.X(""),u=new Ge(r,i,o,a,s,ne,t,n.root);return u.snapshot=n.root,new qe(new He(u,[]),n)}class Ge{constructor(e,t,n,r,i,s,o,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,D.U)(e=>ie(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,D.U)(e=>ie(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function We(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&""===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Ze{constructor(e,t,n,r,i,s,o,a,c,u,l){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=c,this._lastPathIndex=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ie(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ie(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ke extends Be{constructor(e,t){super(t),this.url=e,Ye(this,t)}toString(){return Qe(this._root)}}function Ye(e,t){t.value._routerState=e,t.children.forEach(t=>Ye(e,t))}function Qe(e){const t=e.children.length>0?` { ${e.children.map(Qe).join(", ")} } `:"";return`${e.value}${t}`}function Je(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,ae(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),ae(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!ae(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),ae(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Xe(e,t){var n,r;return ae(e.params,t.params)&&_e(n=e.url,r=t.url)&&n.every((e,t)=>ae(e.parameters,r[t].parameters))&&!(!e.parent!=!t.parent)&&(!e.parent||Xe(e.parent,t.parent))}function et(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function(e,t,n){return t.children.map(t=>{for(const r of n.children)if(e.shouldReuseRoute(t.value,r.value.snapshot))return et(e,t,r);return et(e,t)})}(e,t,n);return new He(r,i)}{if(e.shouldAttach(t.value)){const n=e.retrieve(t.value);if(null!==n){const e=n.route;return tt(t,e),e}}const n=new Ge(new c.X((r=t.value).url),new c.X(r.params),new c.X(r.queryParams),new c.X(r.fragment),new c.X(r.data),r.outlet,r.component,r),i=t.children.map(t=>et(e,t));return new He(n,i)}var r}function tt(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(let n=0;n<e.children.length;++n)tt(e.children[n],t.children[n])}function nt(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function rt(e){return"object"==typeof e&&null!=e&&e.outlets}function it(e,t,n,r,i){let s={};return r&&he(r,(e,t)=>{s[t]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new be(n.root===e?t:st(n.root,e,t),s,i)}function st(e,t,n){const r={};return he(e.children,(e,i)=>{r[i]=e===t?n:st(e,t,n)}),new Se(e.segments,r)}class ot{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&nt(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(rt);if(r&&r!==le(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class at{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function ct(e,t,n){if(e||(e=new Se([],{})),0===e.segments.length&&e.hasChildren())return ut(e,t,n);const r=function(e,t,n){let r=0,i=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;const t=e.segments[i],o=n[r];if(rt(o))break;const a=`${o}`,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&c&&"object"==typeof c&&void 0===c.outlets){if(!pt(a,c,t))return s;r+=2}else{if(!pt(a,{},t))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new Se(e.segments.slice(0,r.pathIndex),{});return t.children.primary=new Se(e.segments.slice(r.pathIndex),e.children),ut(t,0,i)}return r.match&&0===i.length?new Se(e.segments,{}):r.match&&!e.hasChildren()?lt(e,t,n):r.match?ut(e,0,i):lt(e,t,n)}function ut(e,t,n){if(0===n.length)return new Se(e.segments,{});{const r=function(e){return rt(e[0])?e[0].outlets:{[ne]:e}}(n),i={};return he(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=ct(e.children[r],t,n))}),he(e.children,(e,t)=>{void 0===r[t]&&(i[t]=e)}),new Se(e.segments,i)}}function lt(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const s=n[i];if(rt(s)){const e=ht(s.outlets);return new Se(r,e)}if(0===i&&nt(n[0])){r.push(new we(e.segments[t].path,dt(n[0]))),i++;continue}const o=rt(s)?s.outlets.primary:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&nt(a)?(r.push(new we(o,dt(a))),i+=2):(r.push(new we(o,{})),i++)}return new Se(r,{})}function ht(e){const t={};return he(e,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=lt(new Se([],{}),0,e))}),t}function dt(e){const t={};return he(e,(e,n)=>t[n]=`${e}`),t}function pt(e,t,n){return e==n.path&&ae(t,n.parameters)}class ft{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Je(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=Ve(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),he(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(e,t,i.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,i=Ve(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const r=Ve(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new ee(e.value.snapshot))}),e.children.length&&this.forwardEvent(new J(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(Je(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,i.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),vt(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=i,t.outlet&&t.outlet.activateWith(r,i),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function vt(e){Je(e.value),e.children.forEach(vt)}class mt{constructor(e,t){this.routes=e,this.module=t}}function gt(e){return"function"==typeof e}function yt(e){return e instanceof be}const bt=Symbol("INITIAL_VALUE");function St(){return(0,M.w)(e=>(0,u.a)(e.map(e=>e.pipe((0,A.q)(1),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,m.yG)(e);return(0,g.e)(function(t,r){(n?(0,h.z)(e,t,n):(0,h.z)(e,t)).subscribe(r)})}(bt)))).pipe(S((e,t)=>{let n=!1;return t.reduce((e,r,i)=>{if(e!==bt)return e;if(r===bt&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||yt(r))return r}return e},e)},bt),(0,E.h)(e=>e!==bt),(0,D.U)(e=>yt(e)?e:!0===e),(0,A.q)(1)))}let wt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&i._UZ(0,"router-outlet")},directives:function(){return[mn]},encapsulation:2}),e})();function _t(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];Ct(r,Tt(t,r))}}function Ct(e,t){e.children&&_t(e.children,t)}function Tt(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function Et(e){const t=e.children&&e.children.map(Et),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==ne&&(n.component=wt),n}function xt(e){return e.outlet||ne}function Pt(e,t){const n=e.filter(e=>xt(e)===t);return n.push(...e.filter(e=>xt(e)!==t)),n}const kt={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Rt(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},kt):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(t.matcher||oe)(n,e,t);if(!i)return Object.assign({},kt);const s={};he(i.posParams,(e,t)=>{s[t]=e.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Ot(e,t,n,r,i="corrected"){if(n.length>0&&function(e,t,n){return n.some(n=>It(e,t,n)&&xt(n)!==ne)}(e,n,r)){const i=new Se(t,function(e,t,n,r){const i={};i.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&xt(s)!==ne){const n=new Se([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,i[xt(s)]=n}return i}(e,t,r,new Se(n,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>It(e,t,n))}(e,n,r)){const s=new Se(e.segments,function(e,t,n,r,i,s){const o={};for(const a of r)if(It(e,n,a)&&!i[xt(a)]){const n=new Se([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===s?e.segments.length:t.length,o[xt(a)]=n}return Object.assign(Object.assign({},i),o)}(e,t,n,r,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const s=new Se(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function It(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function At(e,t,n,r){return!!(xt(e)===r||r!==ne&&It(t,n,e))&&("**"===e.path||Rt(t,e,n).matched)}function Nt(e,t,n){return 0===t.length&&!e.children[n]}class Dt{constructor(e){this.segmentGroup=e||null}}class Mt{constructor(e){this.urlTree=e}}function Lt(e){return new l.y(t=>t.error(new Dt(e)))}function jt(e){return new l.y(t=>t.error(new Mt(e)))}function Ft(e){return new l.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class Bt{constructor(e,t,n,r,s){this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(i.h0i)}apply(){const e=Ot(this.urlTree.root,[],[],this.config).segmentGroup,t=new Se(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,ne).pipe((0,D.U)(e=>this.createUrlTree(zt(e),this.urlTree.queryParams,this.urlTree.fragment))).pipe(w(e=>{if(e instanceof Mt)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof Dt)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,ne).pipe((0,D.U)(t=>this.createUrlTree(zt(t),e.queryParams,e.fragment))).pipe(w(e=>{if(e instanceof Dt)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new Se([],{[ne]:e}):e;return new be(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe((0,D.U)(e=>new Se([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,o.Dp)(r).pipe(T(r=>{const i=n.children[r],s=Pt(t,r);return this.expandSegmentGroup(e,s,i,r).pipe((0,D.U)(e=>({segment:e,outlet:r})))}),S((e,t)=>(e[t.outlet]=t.segment,e),{}),function(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?(0,E.h)(function(t,n){return e(t,n,r)}):I.y,P(1),n?O(t):k(function(){return new s}))}}())}expandSegment(e,t,n,r,i,c){return(0,o.Dp)(n).pipe(T(s=>this.expandSegmentAgainstRoute(e,t,n,s,r,i,c).pipe(w(e=>{if(e instanceof Dt)return(0,a.of)(null);throw e}))),N(e=>!!e),w((e,n)=>{if(e instanceof s||"EmptyError"===e.name){if(Nt(t,r,i))return(0,a.of)(new Se([],{}));throw new Dt(t)}throw e}))}expandSegmentAgainstRoute(e,t,n,r,i,s,o){return At(r,t,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s):Lt(t):Lt(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?jt(i):this.lineralizeSegments(n,i).pipe((0,_.z)(n=>{const i=new Se(n,{});return this.expandSegment(e,i,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:c,positionalParamSegments:u}=Rt(t,r,i);if(!o)return Lt(t);const l=this.applyRedirectCommands(a,r.redirectTo,u);return r.redirectTo.startsWith("/")?jt(l):this.lineralizeSegments(r,l).pipe((0,_.z)(r=>this.expandSegment(e,t,n,r.concat(i.slice(c)),s,!1)))}matchSegmentAgainstRoute(e,t,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,a.of)(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe((0,D.U)(e=>(n._loadedConfig=e,new Se(r,{})))):(0,a.of)(new Se(r,{}));const{matched:s,consumedSegments:o,lastChild:c}=Rt(t,n,r);if(!s)return Lt(t);const u=r.slice(c);return this.getChildConfig(e,n,r).pipe((0,_.z)(e=>{const r=e.module,s=e.routes,{segmentGroup:c,slicedSegments:l}=Ot(t,o,u,s),h=new Se(c.segments,c.children);if(0===l.length&&h.hasChildren())return this.expandChildren(r,s,h).pipe((0,D.U)(e=>new Se(o,e)));if(0===s.length&&0===l.length)return(0,a.of)(new Se(o,{}));const d=xt(n)===i;return this.expandSegment(r,h,s,l,d?ne:i,!0).pipe((0,D.U)(e=>new Se(o.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?(0,a.of)(new mt(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,a.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe((0,_.z)(n=>n?this.configLoader.load(e.injector,t).pipe((0,D.U)(e=>(t._loadedConfig=e,e))):function(e){return new l.y(t=>t.error(se(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):(0,a.of)(new mt([],e))}runCanLoadGuards(e,t,n){const r=t.canLoad;if(!r||0===r.length)return(0,a.of)(!0);const i=r.map(r=>{const i=e.get(r);let s;if(function(e){return e&&gt(e.canLoad)}(i))s=i.canLoad(t,n);else{if(!gt(i))throw new Error("Invalid CanLoad guard");s=i(t,n)}return de(s)});return(0,a.of)(i).pipe(St(),(0,L.b)(e=>{if(!yt(e))return;const t=se(`Redirecting to "${this.urlSerializer.serialize(e)}"`);throw t.url=e,t}),(0,D.U)(e=>!0===e))}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,a.of)(n);if(r.numberOfChildren>1||!r.children.primary)return Ft(e.redirectTo);r=r.children.primary}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const i=this.createSegmentGroup(e,t.root,n,r);return new be(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return he(e,(e,r)=>{if("string"==typeof e&&e.startsWith(":")){const i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const i=this.createSegments(e,t.segments,n,r);let s={};return he(t.children,(t,i)=>{s[i]=this.createSegmentGroup(e,t,n,r)}),new Se(i,s)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function zt(e){const t={};for(const n of Object.keys(e.children)){const r=zt(e.children[n]);(r.segments.length>0||r.hasChildren())&&(t[n]=r)}return function(e){if(1===e.numberOfChildren&&e.children.primary){const t=e.children.primary;return new Se(e.segments.concat(t.segments),t.children)}return e}(new Se(e.segments,t))}class Ut{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ht{constructor(e,t){this.component=e,this.route=t}}function Vt(e,t,n){const r=e._root;return $t(r,t?t._root:null,n,[r.value])}function qt(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function $t(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ve(t);return e.children.forEach(e=>{!function(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!_e(e.url,t.url);case"pathParamsOrQueryParamsChange":return!_e(e.url,t.url)||!ae(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xe(e,t)||!ae(e.queryParams,t.queryParams);case"paramsChange":default:return!Xe(e,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ut(r)):(s.data=o.data,s._resolvedData=o._resolvedData),$t(e,t,s.component?a?a.children:null:n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ht(a.outlet.component,o))}else o&&Gt(t,a,i),i.canActivateChecks.push(new Ut(r)),$t(e,null,s.component?a?a.children:null:n,r,i)}(e,s[e.value.outlet],n,r.concat([e.value]),i),delete s[e.value.outlet]}),he(s,(e,t)=>Gt(e,n.getContext(t),i)),i}function Gt(e,t,n){const r=Ve(e),i=e.value;he(r,(e,r)=>{Gt(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new Ht(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class Wt{}function Zt(e){return new l.y(t=>t.error(e))}class Kt{constructor(e,t,n,r,i,s){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const e=Ot(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,ne);if(null===t)return null;const n=new Ze([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ne,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new He(n,t),i=new Ke(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(e){const t=e.value,n=We(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=[];for(const i of Object.keys(t.children)){const r=t.children[i],s=Pt(e,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=Qt(n);return r.sort((e,t)=>e.value.outlet===ne?-1:t.value.outlet===ne?1:e.value.outlet.localeCompare(t.value.outlet)),r}processSegment(e,t,n,r){for(const i of e){const e=this.processSegmentAgainstRoute(i,t,n,r);if(null!==e)return e}return Nt(t,n,r)?[]:null}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo||!At(e,t,n,r))return null;let i,s=[],o=[];if("**"===e.path){const r=n.length>0?le(n).parameters:{};i=new Ze(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,en(e),xt(e),e.component,e,Jt(t),Xt(t)+n.length,tn(e))}else{const r=Rt(t,e,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new Ze(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,en(e),xt(e),e.component,e,Jt(t),Xt(t)+s.length,tn(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:u}=Ot(t,s,o,a.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const e=this.processChildren(a,c);return null===e?null:[new He(i,e)]}if(0===a.length&&0===u.length)return[new He(i,[])];const l=xt(e)===r,h=this.processSegment(a,c,u,l?ne:r);return null===h?null:[new He(i,h)]}}function Yt(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function Qt(e){const t=[],n=new Set;for(const r of e){if(!Yt(r)){t.push(r);continue}const e=t.find(e=>r.value.routeConfig===e.value.routeConfig);void 0!==e?(e.children.push(...r.children),n.add(e)):t.push(r)}for(const r of n){const e=Qt(r.children);t.push(new He(r.value,e))}return t.filter(e=>!n.has(e))}function Jt(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Xt(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function en(e){return e.data||{}}function tn(e){return e.resolve||{}}function nn(e){return(0,M.w)(t=>{const n=e(t);return n?(0,o.Dp)(n).pipe((0,D.U)(()=>t)):(0,a.of)(t)})}class rn extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const sn=new i.OlP("ROUTES");class on{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const n=this.loadModuleFactory(t.loadChildren).pipe((0,D.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const r=n.create(e);return new mt(ue(r.injector.get(sn,void 0,i.XFs.Self|i.XFs.Optional)).map(Et),r)}),w(e=>{throw t._loader$=void 0,e}));return t._loader$=new f.c(n,()=>new v.x).pipe((0,j.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,o.Dp)(this.loader.load(e)):de(e()).pipe((0,_.z)(e=>e instanceof i.YKP?(0,a.of)(e):(0,o.Dp)(this.compiler.compileModuleAsync(e))))}}class an{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new cn,this.attachRef=null}}class cn{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new an,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class un{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function ln(e){throw e}function hn(e,t,n){return t.parse("/")}function dn(e,t){return(0,a.of)(null)}const pn={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fn={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let vn=(()=>{class e{constructor(e,t,n,r,s,o,a,u){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=r,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new v.x,this.errorHandler=ln,this.malformedUriErrorHandler=hn,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:dn,afterPreactivation:dn},this.urlHandlingStrategy=new un,this.routeReuseStrategy=new rn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(i.h0i),this.console=s.get(i.c2e);const l=s.get(i.R0b);this.isNgZoneEnabled=l instanceof i.R0b&&i.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new be(new Se([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new on(o,a,e=>this.triggerEvent(new K(e)),e=>this.triggerEvent(new Y(e))),this.routerState=$e(this.currentUrlTree,this.rootComponentType),this.transitions=new c.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const t=this.events;return e.pipe((0,E.h)(e=>0!==e.id),(0,D.U)(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),(0,M.w)(e=>{let n=!1,r=!1;return(0,a.of)(e).pipe((0,L.b)(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,M.w)(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return(0,a.of)(e).pipe((0,M.w)(e=>{const n=this.transitions.getValue();return t.next(new z(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?p.E:Promise.resolve(e)}),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,(0,M.w)(e=>function(e,t,n,r,i){return new Bt(e,t,n,r,i).apply()}(r,i,s,e.extractedUrl,o).pipe((0,D.U)(t=>Object.assign(Object.assign({},e),{urlAfterRedirects:t}))))),(0,L.b)(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,n,r,i){return(0,_.z)(s=>function(e,t,n,r,i="emptyOnly",s="legacy"){try{const o=new Kt(e,t,n,r,i,s).recognize();return null===o?Zt(new Wt):(0,a.of)(o)}catch(o){return Zt(o)}}(e,t,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe((0,D.U)(e=>Object.assign(Object.assign({},s),{targetSnapshot:e}))))}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,L.b)(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,e),this.browserUrlTree=e.urlAfterRedirects);const n=new q(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=e,c=new z(n,this.serializeUrl(r),i,s);t.next(c);const u=$e(r,this.rootComponentType).snapshot;return(0,a.of)(Object.assign(Object.assign({},e),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),p.E}),nn(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,L.b)(e=>{const t=new $(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(0,D.U)(e=>Object.assign(Object.assign({},e),{guards:Vt(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return(0,_.z)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:c}}=n;return 0===c.length&&0===s.length?(0,a.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return(0,o.Dp)(e).pipe((0,_.z)(e=>function(e,t,n,r,i){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,a.of)(!0);const o=s.map(s=>{const o=qt(s,t,i);let a;if(function(e){return e&&gt(e.canDeactivate)}(o))a=de(o.canDeactivate(e,t,n,r));else{if(!gt(o))throw new Error("Invalid CanDeactivate guard");a=de(o(e,t,n,r))}return a.pipe(N())});return(0,a.of)(o).pipe(St())}(e.component,e.route,n,t,r)),N(e=>!0!==e,!0))}(c,r,i,e).pipe((0,_.z)(n=>n&&"boolean"==typeof n?function(e,t,n,r){return(0,o.Dp)(t).pipe(T(t=>(0,h.z)(function(e,t){return null!==e&&t&&t(new Q(e)),(0,a.of)(!0)}(t.route.parent,r),function(e,t){return null!==e&&t&&t(new X(e)),(0,a.of)(!0)}(t.route,r),function(e,t,n){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>(0,d.P)(()=>{const i=t.guards.map(i=>{const s=qt(i,t.node,n);let o;if(function(e){return e&&gt(e.canActivateChild)}(s))o=de(s.canActivateChild(r,e));else{if(!gt(s))throw new Error("Invalid CanActivateChild guard");o=de(s(r,e))}return o.pipe(N())});return(0,a.of)(i).pipe(St())}));return(0,a.of)(i).pipe(St())}(e,t.path,n),function(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,a.of)(!0);const i=r.map(r=>(0,d.P)(()=>{const i=qt(r,t,n);let s;if(function(e){return e&&gt(e.canActivate)}(i))s=de(i.canActivate(t,e));else{if(!gt(i))throw new Error("Invalid CanActivate guard");s=de(i(t,e))}return s.pipe(N())}));return(0,a.of)(i).pipe(St())}(e,t.route,n))),N(e=>!0!==e,!0))}(r,s,e,t):(0,a.of)(n)),(0,D.U)(e=>Object.assign(Object.assign({},n),{guardsResult:e})))})}(this.ngModule.injector,e=>this.triggerEvent(e)),(0,L.b)(e=>{if(yt(e.guardsResult)){const t=se(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}const t=new G(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),(0,E.h)(e=>!!e.guardsResult||(this.restoreHistory(e),this.cancelNavigationTransition(e,""),!1)),nn(e=>{if(e.guards.canActivateChecks.length)return(0,a.of)(e).pipe((0,L.b)(e=>{const t=new W(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(0,M.w)(e=>{let t=!1;return(0,a.of)(e).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,_.z)(e=>{const{targetSnapshot:t,guards:{canActivateChecks:i}}=e;if(!i.length)return(0,a.of)(e);let s=0;return(0,o.Dp)(i).pipe(T(e=>function(e,t,n,r){return function(e,t,n,r){const i=Object.keys(e);if(0===i.length)return(0,a.of)({});const s={};return(0,o.Dp)(i).pipe((0,_.z)(i=>function(e,t,n,r){const i=qt(e,t,r);return de(i.resolve?i.resolve(t,n):i(t,n))}(e[i],t,n,r).pipe((0,L.b)(e=>{s[i]=e}))),P(1),(0,_.z)(()=>Object.keys(s).length===i.length?(0,a.of)(s):p.E))}(e._resolve,e,t,r).pipe((0,D.U)(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),We(e,n).resolve),null)))}(e.route,t,n,r)),(0,L.b)(()=>s++),P(1),(0,_.z)(t=>s===i.length?(0,a.of)(e):p.E))})),(0,L.b)({next:()=>t=!0,complete:()=>{t||(this.restoreHistory(e),this.cancelNavigationTransition(e,"At least one route resolver didn't emit any value."))}}));var n,r}),(0,L.b)(e=>{const t=new Z(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),nn(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,D.U)(e=>{const t=function(e,t,n){const r=et(e,t._root,n?n._root:void 0);return new qe(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),(0,L.b)(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,e),this.browserUrlTree=e.urlAfterRedirects)}),(s=this.rootContexts,c=this.routeReuseStrategy,u=e=>this.triggerEvent(e),(0,D.U)(e=>(new ft(c,e.targetRouterState,e.currentRouterState,u).activate(s),e))),(0,L.b)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){const t=`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(e),this.cancelNavigationTransition(e,t)):this.cancelNavigationTransition(e,t)}this.currentNavigation=null},(0,g.e)(function(e,t){try{e.subscribe(t)}finally{t.add(i)}})),w(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=yt(n.url);r||(this.navigated=!0,this.restoreHistory(e,!0));const i=new H(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(i),r?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(t,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.restoreHistory(e,!0);const r=new V(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch(s){e.reject(s)}}var i;return p.E}));var i,s,c,u}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const t=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,t)&&setTimeout(()=>{const{source:e,state:n,urlTree:r}=t,i={replaceUrl:!0};if(n){const e=Object.assign({},n);delete e.navigationId,delete e.\u0275routerPageId,0!==Object.keys(e).length&&(i.state=e)}this.scheduleNavigation(r,e,n,i)},0),this.lastLocationChangeInfo=t}))}extractLocationChangeInfoFromEvent(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,t){if(!e)return!0;const n=t.urlTree.toString()===e.urlTree.toString();return!(t.transitionId===e.transitionId&&n&&("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){_t(e),this.config=e.map(Et),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=t,a=n||this.routerState.root,c=o?this.currentUrlTree.fragment:i;let u=null;switch(s){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}return null!==u&&(u=this.removeEmptyProps(u)),function(e,t,n,r,i){if(0===n.length)return it(t.root,t.root,t,r,i);const s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new ot(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const t={};return he(r.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return"string"!=typeof r?[...e,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[...e,r]},[]);return new ot(n,t,r)}(n);if(s.toRoot())return it(t.root,new Se([],{}),t,r,i);const o=function(e,t,n){if(e.isAbsolute)return new at(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const e=n.snapshot._urlSegment;return new at(e,e===t.root,0)}const r=nt(e.commands[0])?0:1;return function(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new at(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(s,t,e),a=o.processChildren?ut(o.segmentGroup,o.index,s.commands):ct(o.segmentGroup,o.index,s.commands);return it(o.segmentGroup,a,t,r,i)}(a,this.currentUrlTree,e,u,null!=c?c:null)}navigateByUrl(e,t={skipLocationChange:!1}){const n=yt(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){let n;if(n=!0===t?Object.assign({},pn):!1===t?Object.assign({},fn):t,yt(e))return ve(this.currentUrlTree,e,n);const r=this.parseUrl(e);return ve(this.currentUrlTree,r,n)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new U(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,r,i){var s,o;if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),c="imperative"!==t&&"imperative"===(null==a?void 0:a.source),u=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===e.toString();if(c&&u)return Promise.resolve(!0);let l,h,d;i?(l=i.resolve,h=i.reject,d=i.promise):d=new Promise((e,t)=>{l=e,h=t});const p=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),f=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(s=this.browserPageId)&&void 0!==s?s:0:(null!==(o=this.browserPageId)&&void 0!==o?o:0)+1):f=0,this.setTransition({id:p,targetPageId:f,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:l,reject:h,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(e=>Promise.reject(e))}setBrowserUrl(e,t){const n=this.urlSerializer.serialize(e),r=Object.assign(Object.assign({},t.extras.state),this.generateNgRouterState(t.id,t.targetPageId));this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}restoreHistory(e,t=!1){var n,r;if("computed"===this.canceledNavigationResolution){const t=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)||0===t?this.currentUrlTree===(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)&&0===t&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(t)}else"replace"===this.canceledNavigationResolution&&(t&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,t){const n=new H(e.id,this.serializeUrl(e.extractedUrl),t);this.triggerEvent(n),e.resolve(!1)}generateNgRouterState(e,t){return"computed"===this.canceledNavigationResolution?{navigationId:e,"\u0275routerPageId":t}:{navigationId:e}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.DyG),i.LFG(Ce),i.LFG(cn),i.LFG(r.Ye),i.LFG(i.zs3),i.LFG(i.v3s),i.LFG(i.Sil),i.LFG(void 0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),mn=(()=>{class e{constructor(e,t,n,r,s){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.vpe,this.deactivateEvents=new i.vpe,this.name=r||ne,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new gn(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(cn),i.Y36(i.s_b),i.Y36(i._Vd),i.$8M("name"),i.Y36(i.sBO))},e.\u0275dir=i.lG2({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class gn{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===Ge?this.route:e===cn?this.childContexts:this.parent.get(e,t)}}class yn{}class bn{preload(e,t){return(0,a.of)(null)}}let Sn=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=new on(t,n,t=>e.triggerEvent(new K(t)),t=>e.triggerEvent(new Y(t)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,E.h)(e=>e instanceof U),T(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(i.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return(0,o.Dp)(n).pipe((0,F.J)(),(0,D.U)(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>(t._loadedConfig?(0,a.of)(t._loadedConfig):this.loader.load(e.injector,t)).pipe((0,_.z)(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(vn),i.LFG(i.v3s),i.LFG(i.Sil),i.LFG(i.zs3),i.LFG(yn))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),wn=(()=>{class e{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof z?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof U&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof te&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new te(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(vn),i.LFG(r.EM),i.LFG(void 0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const _n=new i.OlP("ROUTER_CONFIGURATION"),Cn=new i.OlP("ROUTER_FORROOT_GUARD"),Tn=[r.Ye,{provide:Ce,useClass:Te},{provide:vn,useFactory:function(e,t,n,r,i,s,o,a={},c,u){const l=new vn(null,e,t,n,r,i,s,ue(o));return c&&(l.urlHandlingStrategy=c),u&&(l.routeReuseStrategy=u),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(e=>{var t,n;null===(t=console.group)||void 0===t||t.call(console,`Router Event: ${e.constructor.name}`),console.log(e.toString()),console.log(e),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[Ce,cn,r.Ye,i.zs3,i.v3s,i.Sil,sn,_n,[class{},new i.FiY],[class{},new i.FiY]]},cn,{provide:Ge,useFactory:function(e){return e.routerState.root},deps:[vn]},{provide:i.v3s,useClass:i.EAV},Sn,bn,class{preload(e,t){return t().pipe(w(()=>(0,a.of)(null)))}},{provide:_n,useValue:{enableTracing:!1}}];function En(){return new i.PXZ("Router",vn)}let xn=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[Tn,On(t),{provide:Cn,useFactory:Rn,deps:[[vn,new i.FiY,new i.tp0]]},{provide:_n,useValue:n||{}},{provide:r.S$,useFactory:kn,deps:[r.lw,[new i.tBr(r.mr),new i.FiY],_n]},{provide:wn,useFactory:Pn,deps:[vn,r.EM,_n]},{provide:yn,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:bn},{provide:i.PXZ,multi:!0,useFactory:En},[In,{provide:i.ip1,multi:!0,useFactory:An,deps:[In]},{provide:Dn,useFactory:Nn,deps:[In]},{provide:i.tb,multi:!0,useExisting:Dn}]]}}static forChild(t){return{ngModule:e,providers:[On(t)]}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Cn,8),i.LFG(vn,8))},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({}),e})();function Pn(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new wn(e,t,n)}function kn(e,t,n={}){return n.useHash?new r.Do(e,t):new r.b0(e,t)}function Rn(e){return"guarded"}function On(e){return[{provide:i.deG,multi:!0,useValue:e},{provide:sn,multi:!0,useValue:e}]}let In=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new v.x}appInitializer(){return this.injector.get(r.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let e=null;const t=new Promise(t=>e=t),n=this.injector.get(vn),r=this.injector.get(_n);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),e(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,a.of)(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()):e(!0),t})}bootstrapListener(e){const t=this.injector.get(_n),n=this.injector.get(Sn),r=this.injector.get(wn),s=this.injector.get(vn),o=this.injector.get(i.z2F);e===o.components[0]&&("enabledNonBlocking"!==t.initialNavigation&&void 0!==t.initialNavigation||s.initialNavigation(),n.setUpPreloading(),r.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.zs3))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();function An(e){return e.appInitializer.bind(e)}function Nn(e){return e.bootstrapListener.bind(e)}const Dn=new i.OlP("Router Initializer")},4004:(e,t,n)=>{"use strict";n.d(t,{cf:()=>ge,AE:()=>Se,Gv:()=>_e,yh:()=>ve,yC:()=>ue,Me:()=>Q,WZ:()=>j,Ux:()=>te,M8:()=>Te,xi:()=>Ie,h3:()=>Pe,PS:()=>fe});var r=n(4689),i=n(2687),s=n(7783),o=n(5207),a=n(7540),c=n(4294),u=n(9162),l=n(6889),h=n(2248),d=function(e){function t(t,n,r){void 0===t&&(t=1/0),void 0===n&&(n=1/0),void 0===r&&(r=h.l);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=n,i._timestampProvider=r,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,n),i}return(0,u.ZT)(t,e),t.prototype.next=function(t){var n=this,r=n._buffer,i=n._infiniteTimeWindow,s=n._timestampProvider,o=n._windowTime;n.isStopped||(r.push(t),!i&&r.push(s.now()+o)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),n=this._infiniteTimeWindow,r=this._buffer.slice(),i=0;i<r.length&&!e.closed;i+=n?1:2)e.next(r[i]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,n=e._timestampProvider,r=e._buffer,i=e._infiniteTimeWindow,s=(i?1:2)*t;if(t<1/0&&s<r.length&&r.splice(0,r.length-s),!i){for(var o=n.now(),a=0,c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}},t}(l.x),p=n(1776),f=n(8853),v=n(1598),m=n(5094),g=n(1964),y=n(8476),b=n(4762),S=n(5040);const w={type:null,entityIds:null,skip:!1,payload:null};let _=!1;function C(e,t,n){E(e,t,n),_=!0}function E(e,t,n){!1===_&&(w.type=e,w.entityIds=t,w.payload=n)}function x(e,t){return e.hasOwnProperty(t)}function P(e){return Array.isArray(e)}function k(e){return e.hasOwnProperty("active")}function R(e){return P(e)}function O({active:e,ids:t,entities:n}){return R(e)?function(e,t){const n=e.filter(e=>t.indexOf(e)>-1);return n.length===e.length?e:n}(e,t):!1===x(n,e)?null:e}function I(e){return null==e}function A(e){return I(e)?[]:Array.isArray(e)?e:[e]}function N(e){return"function"==typeof e}function D(e){return!!P(e)&&0===e.length}function M(e,t){return t.some(t=>void 0===e.find(e=>e===t))}function L(e){const t=typeof e;return null!=e&&("object"==t||"function"==t)}function j(e){return(0,v.a)(e).pipe((0,s.e)(0))}let F={resettable:!1,ttl:null,producerFn:void 0};function B(){return F}function z(e){return!1===I(e)}const U=new l.x,H=new d(50,5e3),V=new l.x,q="undefined"!=typeof window,$=!q,G=()=>{try{return"undefined"!=typeof localStorage}catch(e){return!1}},W={},Z={};function K(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)}q&&(window.$$stores=W,window.$$queries=Z);let Y=[];function Q(e,t={}){if($)return;if(!window.__REDUX_DEVTOOLS_EXTENSION__)return;Y.length&&Y.forEach(e=>{e.unsubscribe?e.unsubscribe():e&&e()}),e&&e.run||((e=e||{}).run=e=>e(),t=e);const n=Object.assign({},{name:"Akita",shallow:!0,storesWhitelist:[]},t),r=n.storesWhitelist,i=window.__REDUX_DEVTOOLS_EXTENSION__.connect(n);let s={};const o=e=>!r.length||r.indexOf(e)>-1;Y.push(H.subscribe(e=>{!1!==o(e)&&(s=Object.assign(Object.assign({},s),{[e]:W[e]._value()}),i.send({type:`[${K(e)}] - @@INIT`},s))})),Y.push(U.subscribe(e=>{!1!==o(e)&&(delete s[e],i.send({type:`[${e}] - Delete Store`},s))})),Y.push(V.subscribe(({storeName:e,action:n})=>{if(!1===o(e))return;const{type:r,entityIds:a,skip:c}=n,u=(0,b._T)(n,["type","entityIds","skip"]).payload;if(c)return void function(e=!0){w.skip=e}(!1);const l=W[e];if(!l)return;if(!1===t.shallow&&s[e]&&JSON.stringify(l._value())===JSON.stringify(s[e]))return;s=Object.assign(Object.assign({},s),{[e]:l._value()});const h=K(e);let d=z(a)?`[${h}] - ${r} (ids: ${a})`:`[${h}] - ${r}`;if(t.logTrace&&(console.group(d),console.trace(),console.groupEnd()),t.sortAlphabetically){const e=Object.keys(s).sort().reduce((e,t)=>(e[t]=s[t],e),{});i.send(Object.assign({type:d},u),e)}else i.send(Object.assign({type:d},u),s)})),Y.push(i.subscribe(t=>{if("DISPATCH"===t.type){if("COMMIT"===t.payload.type)return void i.init(s);if(t.state){const n=JSON.parse(t.state);for(let t=0,r=Object.keys(n);t<r.length;t++){const i=r[t];W[i]&&e.run(()=>{W[i]._setState(()=>n[i],!1)})}}}}))}var J=(()=>(function(e){e.ASC="asc",e.DESC="desc"}(J||(J={})),J))(),X=(()=>(function(e){e.Set="Set",e.Add="Add",e.Update="Update",e.Remove="Remove"}(X||(X={})),X))();let ee=!0;function te(){ee=!1,q&&(delete window.$$stores,delete window.$$queries)}function ne(){return ee}function re(e){return void 0===e}function ie(e,t){let n={};for(const r of Object.keys(e))n[r]=t(e[r]);return n}function se(e){Object.freeze(e);const t="function"==typeof e,n=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(e).forEach(function(r){!n.call(e,r)||t&&("caller"===r||"callee"===r||"arguments"===r)||null===e[r]||"object"!=typeof e[r]&&"function"!=typeof e[r]||Object.isFrozen(e[r])||se(e[r])}),e}function oe(e){return null!=e&&"false"!=`${e}`}function ae(e){return oe(e)&&"Object"===e.constructor.name}Error;const ce="akitaConfig";function ue(e){return function(t){t[ce]={idKey:"id"};for(let n=0,r=Object.keys(e);n<r.length;n++){const i=r[n];"name"===i?t[ce].storeName=e[i]:t[ce][i]=e[i]}}}const le=new l.x,he=new m.X(!1),de={activeTransactions:0,batchTransaction:null};function pe(){return de.activeTransactions>0}function fe(){return function(e,t,n){const r=n.value;return n.value=function(...e){return function(e,t){pe()||(de.batchTransaction=new l.x),de.activeTransactions++,he.next(!0);try{return e.apply(t)}finally{C("@Transaction"),0==--de.activeTransactions&&(de.batchTransaction.next(!0),de.batchTransaction.complete(),he.next(!1),le.next(!0))}}(()=>r.apply(this,e),this)},n}}let ve=(()=>{class e{constructor(e,t={}){this.options=t,this.inTransaction=!1,this.cache={active:new m.X(!1),ttl:null},this.onInit(e)}setLoading(e=!1){e!==this._value().loading&&(ne()&&E("Set Loading"),this._setState(t=>Object.assign(Object.assign({},t),{loading:e})))}setHasCache(e,t={restartTTL:!1}){if(e!==this.cache.active.value&&this.cache.active.next(e),t.restartTTL){const e=this.getCacheTTL();e&&(null!==this.cache.ttl&&clearTimeout(this.cache.ttl),this.cache.ttl=setTimeout(()=>this.setHasCache(!1),e))}}getValue(){return this.storeValue}setError(e){e!==this._value().error&&(ne()&&E("Set Error"),this._setState(t=>Object.assign(Object.assign({},t),{error:e})))}_select(e){return this.store.asObservable().pipe((0,o.U)(t=>e(t.state)),(0,i.x)())}_value(){return this.storeValue}_cache(){return this.cache.active}get config(){return this.constructor[ce]||{}}get storeName(){return this.config.storeName||this.options.storeName||this.options.name}get deepFreeze(){return this.config.deepFreezeFn||this.options.deepFreezeFn||se}get cacheConfig(){return this.config.cache||this.options.cache}get _producerFn(){return this.config.producerFn||this.options.producerFn||F.producerFn}get resettable(){return z(this.config.resettable)?this.config.resettable:this.options.resettable}_setState(e,t=!0){if(N(e)){const t=e(this._value());this.storeValue=ee?this.deepFreeze(t):t}else this.storeValue=e;if(!this.store)return this.store=new m.X({state:this.storeValue}),void(ne()&&this.store.subscribe(({action:e})=>{e&&function(e,t){V.next({storeName:e,action:t})}(this.storeName,e)}));pe()?this.handleTransaction():this.dispatch(this.storeValue,t)}reset(){this.isResettable()?(ne()&&E("Reset"),this._setState(()=>Object.assign({},this._initialState)),this.setHasCache(!1)):ne()&&console.warn("You need to enable the reset functionality")}update(e){let t;ne()&&E("Update");const n=this._value();t=N(e)?N(this._producerFn)?this._producerFn(n,e):e(n):e;const r=this.akitaPreUpdate(n,Object.assign(Object.assign({},n),t)),i=ae(n)?r:new n.constructor(r);this._setState(i)}updateStoreConfig(e){this.options=Object.assign(Object.assign({},this.options),e)}akitaPreUpdate(e,t){return t}ngOnDestroy(){this.destroy()}destroy(){q&&window.hmrEnabled||this!==W[this.storeName]||(delete W[this.storeName],U.next(this.storeName),this.setHasCache(!1),this.cache.active.complete(),this.store.complete())}onInit(e){W[this.storeName]=this,this._setState(()=>e),H.next(this.storeName),this.isResettable()&&(this._initialState=e),ne()&&(this.storeName||console.error(`@StoreConfig({ name }) is missing in ${this.constructor.name}`))}dispatch(e,t=!0){let n;t&&(n=w,_=!1),this.store.next({state:e,action:n})}watchTransaction(){(de.batchTransaction?de.batchTransaction.asObservable():(0,g.of)(!0)).subscribe(()=>{this.inTransaction=!1,this.dispatch(this._value())})}isResettable(){return!1!==this.resettable&&(this.resettable||B().resettable)}handleTransaction(){this.inTransaction||(this.watchTransaction(),this.inTransaction=!0)}getCacheTTL(){return this.cacheConfig&&this.cacheConfig.ttl||B().ttl}}return e.\u0275fac=function(e){S.$Z()},e.\u0275dir=S.lG2({type:e}),e})();var me;let ge=(()=>{class e extends ve{constructor(e={},t={}){super(Object.assign(Object.assign({},{entities:{},ids:[],loading:!0,error:null}),e),t),this.options=t,this.entityActions=new l.x,this.entityIdChanges=new l.x}get selectEntityAction$(){return this.entityActions.asObservable()}get selectEntityIdChanges$(){return this.entityIdChanges.asObservable()}get idKey(){return this.config.idKey||this.options.idKey||"id"}set(t,n={}){if(I(t))return;ne()&&E("Set Entity");const r=this.akitaPreAddEntity===e.prototype.akitaPreAddEntity;this.setHasCache(!0,{restartTTL:!0}),this._setState(e=>{const i=function({state:e,entities:t,idKey:n,preAddEntity:r,isNativePreAdd:i}){let s,o;if(P(t)){const e=function(e,t,n){const r={entities:{},ids:[]};for(const i of e){const e=n(i);r.entities[e[t]]=e,r.ids.push(e[t])}return r}(t,n,r);s=e.entities,o=e.ids}else!function(e){return e.entities&&e.ids}(t)?(s=i?t:ie(t,r),o=Object.keys(s).map(e=>isNaN(e)?e:Number(e))):(s=i?t.entities:ie(t.entities,r),o=t.ids);const a=Object.assign(Object.assign({},e),{entities:s,ids:o,loading:!1});return k(e)&&(a.active=O(a)),a}({state:e,entities:t,idKey:this.idKey,preAddEntity:this.akitaPreAddEntity,isNativePreAdd:r});return!1===re(n.activeId)&&(i.active=n.activeId),i}),this.hasInitialUIState()&&this.handleUICreation(),this.entityActions.next({type:X.Set,ids:this.ids})}add(e,t={loading:!1}){const n=A(e);if(D(n))return;const r=function({state:e,entities:t,idKey:n,options:r={},preAddEntity:i}){let s={},o=[],a=!1;for(const c of t)if(!1===x(e.entities,c[n])){const e=i(c),t=e[n];s[t]=e,r.prepend?o.unshift(t):o.push(t),a=!0}return a?{newState:Object.assign(Object.assign({},e),{entities:Object.assign(Object.assign({},e.entities),s),ids:r.prepend?[...o,...e.ids]:[...e.ids,...o]}),newIds:o}:null}({state:this._value(),preAddEntity:this.akitaPreAddEntity,entities:n,idKey:this.idKey,options:t});r&&(ne()&&E("Add Entity"),r.newState.loading=t.loading,this._setState(()=>r.newState),this.hasInitialUIState()&&this.handleUICreation(!0),this.entityActions.next({type:X.Add,ids:r.newIds}))}update(e,t){if(re(t))return void super.update(e);let n,r=[];r=N(e)?this.ids.filter(t=>e(this.entities[t])):I(e)?this.ids:A(e),D(r)||(ne()&&E("Update Entity",r),this._setState(e=>function({state:e,ids:t,idKey:n,newStateOrFn:r,preUpdateEntity:i,producerFn:s,onEntityIdChanges:o}){const a={};let c,u=!1;for(const d of t){if(!1===x(e.entities,d))continue;const t=e.entities[d];let o;o=N(r)?N(s)?s(t,r):r(t):r;const l=o.hasOwnProperty(n)&&o[n]!==t[n];let h;c=d,l&&(u=!0,c=o[n]);const p=Object.assign(Object.assign({},t),o);h=ae(t)?p:ae(o)?new t.constructor(p):new o.constructor(p),a[c]=i(t,h)}let l=e.ids,h=e.entities;if(u){const[n]=t,r=n;h=(0,b._T)(e.entities,["symbol"==typeof r?r:r+""]),l=e.ids.map(e=>e===n?c:e),o(n,c)}return Object.assign(Object.assign({},e),{entities:Object.assign(Object.assign({},h),a),ids:l})}({idKey:this.idKey,ids:r,preUpdateEntity:this.akitaPreUpdateEntity,state:e,newStateOrFn:t,producerFn:this._producerFn,onEntityIdChanges:(e,t)=>{n={oldId:e,newId:t},this.entityIdChanges.next(Object.assign(Object.assign({},n),{pending:!0}))}})),n&&this.entityIdChanges.next(Object.assign(Object.assign({},n),{pending:!1})),this.entityActions.next({type:X.Update,ids:r}))}upsert(e,t,n,r={}){const i=A(e),s=e=>t=>x(this.entities,t)===e,o=N(n)?r.baseClass:n?n.baseClass:void 0,a=N(o),c=i.filter(s(!0)),u=i.filter(s(!1)).map(e=>{const r="function"==typeof t?t({}):t,i=N(n)?n(e,r):r,s=Object.assign(Object.assign({},i),{[this.idKey]:e});return a?new o(s):s});this.update(c,t),this.add(u),ne()&&C("Upsert Entity")}upsertMany(e,t={}){const n=[],r=[],i={};for(const s of e){const e=this.akitaPreCheckEntity(s),o=e[this.idKey];if(x(this.entities,o)){const n=this._value().entities[o],s=Object.assign(Object.assign({},this._value().entities[o]),e),a=t.baseClass?new t.baseClass(s):s,c=this.akitaPreUpdateEntity(n,a),u=c[this.idKey];i[u]=c,r.push(u)}else{const r=t.baseClass?new t.baseClass(e):e,s=this.akitaPreAddEntity(r),o=s[this.idKey];n.push(o),i[o]=s}}ne()&&C("Upsert Many"),this._setState(e=>Object.assign(Object.assign({},e),{ids:n.length?[...e.ids,...n]:e.ids,entities:Object.assign(Object.assign({},e.entities),i),loading:!!t.loading})),r.length&&this.entityActions.next({type:X.Update,ids:r}),n.length&&this.entityActions.next({type:X.Add,ids:n}),n.length&&this.hasUIStore()&&this.handleUICreation(!0)}replace(e,t){const n=A(e);if(D(n))return;const r={};for(const i of n)r[i]=Object.assign(Object.assign({},t),{[this.idKey]:i});ne()&&E("Replace Entity",e),this._setState(e=>Object.assign(Object.assign({},e),{entities:Object.assign(Object.assign({},e.entities),r)}))}move(e,t){const n=this.ids.slice();n.splice(t<0?n.length+t:t,0,n.splice(e,1)[0]),ne()&&E("Move Entity"),this._setState(e=>Object.assign(Object.assign({},e),{entities:Object.assign({},e.entities),ids:n}))}remove(e){if(D(this.ids))return;const t=z(e);let n=[];n=N(e)?this.ids.filter(t=>e(this.entities[t])):t?A(e):this.ids,D(n)||(ne()&&E("Remove Entity",n),this._setState(e=>function({state:e,ids:t}){if(I(t))return function(e){return Object.assign(Object.assign({},e),{entities:{},ids:[],active:R(e.active)?[]:null})}(e);const n=e.entities;let r={};for(const s of e.ids)!1===t.includes(s)&&(r[s]=n[s]);const i=Object.assign(Object.assign({},e),{entities:r,ids:e.ids.filter(e=>!1===t.includes(e))});return k(e)&&(i.active=O(i)),i}({state:e,ids:n})),t||this.setHasCache(!1),this.handleUIRemove(n),this.entityActions.next({type:X.Remove,ids:n}))}updateActive(e){const t=A(this.active);ne()&&E("Update Active",t),this.update(t,e)}setActive(e){const t=function(e,t,n){let r;if(P(e))r=e;else if(L(e)){if(I(n))return;e=Object.assign({wrap:!0},e);const i=t.indexOf(n);if(e.prev){const n=0===i;if(n&&!e.wrap)return;r=n?t[t.length-1]:t[i-1]}else if(e.next){const n=t.length===i+1;if(n&&!e.wrap)return;r=n?t[0]:t[i+1]}}else{if(e===n)return;r=e}return r}(e,this.ids,this.active);void 0!==t&&(ne()&&E("Set Active",t),this._setActive(t))}addActive(e){const t=A(e);D(t)||t.every(e=>this.active.indexOf(e)>-1)||(ne()&&E("Add Active",e),this._setState(e=>{const n=Array.from(new Set([...e.active,...t]));return Object.assign(Object.assign({},e),{active:n})}))}removeActive(e){const t=A(e);D(t)||t.some(e=>this.active.indexOf(e)>-1)&&(ne()&&E("Remove Active",e),this._setState(e=>Object.assign(Object.assign({},e),{active:Array.isArray(e.active)?e.active.filter(e=>-1===t.indexOf(e)):null})))}toggleActive(e){const t=A(e),n=e=>t=>this.active.includes(t)===e,r=t.filter(n(!0)),i=t.filter(n(!1));this.removeActive(r),this.addActive(i),ne()&&C("Toggle Active")}createUIStore(e={},t={}){return this.ui=new ye(e,Object.assign(Object.assign({},{name:`UI/${this.storeName}`,idKey:this.idKey}),t)),this.ui}destroy(){super.destroy(),this.ui instanceof e&&this.ui.destroy(),this.entityActions.complete()}akitaPreUpdateEntity(e,t){return t}akitaPreAddEntity(e){return e}akitaPreCheckEntity(e){return e}get ids(){return this._value().ids}get entities(){return this._value().entities}get active(){return this._value().active}_setActive(e){this._setState(t=>Object.assign(Object.assign({},t),{active:e}))}handleUICreation(e=!1){const t=this.ids,n=N(this.ui._akitaCreateEntityFn);let r;const i=e=>{const t=this.entities[e],r=n?this.ui._akitaCreateEntityFn(t):this.ui._akitaCreateEntityFn;return Object.assign({[this.idKey]:t[this.idKey]},r)};r=e?this.ids.filter(e=>re(this.ui.entities[e])).map(i):t.map(i),e?this.ui.add(r):this.ui.set(r)}hasInitialUIState(){return this.hasUIStore()&&!1===re(this.ui._akitaCreateEntityFn)}handleUIRemove(e){this.hasUIStore()&&this.ui.remove(e)}hasUIStore(){return this.ui instanceof ye}}return(0,b.gn)([fe(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[Object,Object,Object,Object]),(0,b.w6)("design:returntype",void 0)],e.prototype,"upsert",null),(0,b.gn)([fe(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["function"==typeof(me="undefined"!=typeof T&&T)?me:Object]),(0,b.w6)("design:returntype",void 0)],e.prototype,"toggleActive",null),e})();class ye extends ge{constructor(e={},t={}){super(e,t)}setInitialEntityState(e){this._akitaCreateEntityFn=e}}function be(e){return"string"==typeof e}class Se{constructor(e){this.store=e,this.__store__=e,ne()&&(Z[e.storeName]=this)}select(e){let t;if(N(e))t=e;else if(be(e))t=t=>t[e];else{if(Array.isArray(e))return this.store._select(e=>e).pipe((0,i.x)((n=e,function(e,t){const r=N(n[0]);return!1===n.some(n=>r?n(e)!==n(t):e[n]!==t[n])})),(0,o.U)(t=>N(e[0])?e.map(e=>e(t)):e.reduce((e,n)=>(e[n]=t[n],e),{})));t=e=>e}var n;return this.store._select(t)}selectLoading(){return this.select(e=>e.loading)}selectError(){return this.select(e=>e.error)}getValue(){return this.store._value()}selectHasCache(){return this.store._cache().asObservable()}getHasCache(){return this.store._cache().value}get config(){return this.constructor.akitaQueryConfig}}function we(e,t){return function(n){const r=n[e];if(!re(r))return t?be(t)?r[t]:t(r):r}}class _e extends Se{constructor(e,t={}){super(e),this.options=t,this.__store__=e}selectAll(e={asObject:!1}){return this.select(e=>e.entities).pipe((0,o.U)(()=>this.getAll(e)))}getAll(e={asObject:!1,filterBy:void 0,limitTo:void 0}){return e.asObject?function(e,t){const n={},{filterBy:r,limitTo:i}=t,{ids:s,entities:o}=e;if(!r&&!i)return o;const a=!1===I(i);if(r&&a){let e=0;for(let t=0,a=s.length;t<a&&e!==i;t++){const i=s[t],a=o[i];A(r).every(e=>e(a,t))&&(n[i]=a,e++)}}else{const e=Math.min(i||s.length,s.length);for(let t=0;t<e;t++){const e=s[t],i=o[e];r?A(r).every(e=>e(i,t))&&(n[e]=i):n[e]=i}}return n}(this.getValue(),e):(function(e,t){e.sortBy=e.sortBy||t&&t.sortBy,e.sortByOrder=e.sortByOrder||t&&t.sortByOrder}(e,this.config||this.options),function(e,t){let n=[];const{ids:r,entities:i}=e,{filterBy:s,limitTo:o,sortBy:a,sortByOrder:c}=t;for(let l=0;l<r.length;l++){const e=i[r[l]];s?A(s).every(t=>t(e,l))&&n.push(e):n.push(e)}if(a){let t=N(a)?a:function(e,t=J.ASC){return function(n,r){if(!n.hasOwnProperty(e)||!r.hasOwnProperty(e))return 0;const i="string"==typeof n[e]?n[e].toUpperCase():n[e],s="string"==typeof r[e]?r[e].toUpperCase():r[e];let o=0;return i>s?o=1:i<s&&(o=-1),t==J.DESC?-1*o:o}}(a,c);n=n.sort((n,r)=>t(n,r,e))}const u=Math.min(o||n.length,n.length);return u===n.length?n:n.slice(0,u)}(this.getValue(),e))}selectMany(e,t){return e&&e.length?this.select(e=>e.entities).pipe((0,o.U)(n=>{return r=e=>we(e,t)(n),e.reduce((e,t,n,i)=>{const s=r(t);return void 0!==s&&e.push(s),e},[]);var r}),(0,i.x)((e,t)=>e===t||!1!==P(e)&&!1!==P(t)&&(!(!D(e)||!D(t))||!M(t,e)&&!1===M(e,t)))):(0,g.of)([])}selectEntity(e,t){let n=e;return N(e)&&(n=function(e,t){for(const n of Object.keys(t))if(!0===e(t[n]))return n}(e,this.getValue().entities)),this.select(e=>e.entities).pipe((0,o.U)(we(n,t)),(0,i.x)())}getEntity(e){return this.getValue().entities[e]}selectActiveId(){return this.select(e=>e.active)}getActiveId(){return this.getValue().active}selectActive(e){return P(this.getActive())?this.selectActiveId().pipe((0,a.w)(t=>this.selectMany(t,e))):this.selectActiveId().pipe((0,a.w)(t=>this.selectEntity(t,e)))}getActive(){const e=this.getActiveId();return P(e)?e.map(e=>this.getValue().entities[e]):oe(e)?this.getEntity(e):void 0}selectCount(e){return this.select(e=>e.entities).pipe((0,o.U)(()=>this.getCount(e)))}getCount(e){return N(e)?this.getAll().filter(e).length:this.getValue().ids.length}selectLast(e){return this.selectAt(e=>e[e.length-1],e)}selectFirst(e){return this.selectAt(e=>e[0],e)}selectEntityAction(e){if(I(e))return this.store.selectEntityAction$;const t=P(e)?e=>e:({ids:e})=>e,n=A(e);return this.store.selectEntityAction$.pipe((0,r.h)(({type:e})=>n.includes(e)),(0,o.U)(e=>t(e)))}hasEntity(e){return I(e)?this.getValue().ids.length>0:N(e)?this.getAll().some(e):P(e)?e.every(e=>e in this.getValue().entities):e in this.getValue().entities}hasActive(e){const t=this.getValue().active,n=z(e);return Array.isArray(t)?n?t.includes(e):t.length>0:n?t===e:z(t)}createUIQuery(){this.ui=new Ce(this.__store__.ui)}selectAt(e,t){return this.select(e=>e.ids).pipe((0,o.U)(e),(0,i.x)(),(0,a.w)(e=>this.selectEntity(e,t)))}}class Ce extends _e{constructor(e){super(e)}}function Te(){return Math.random().toString(36).slice(2)}let Ee=!1;const xe=new d(1);function Pe(){return xe.asObservable()}function ke(e){Ee=e}function Re(){return Ee}function Oe(e){return(n=e)&&N(n.then)||(t=e)&&(t instanceof p.y||(0,f.m)(t.lift)&&(0,f.m)(t.subscribe))?(0,y.Dp)(e):(0,g.of)(e);var t,n}function Ie(e){const t={key:"AkitaStores",enableInNonBrowser:!1,storage:G()?localStorage:e.storage,deserialize:JSON.parse,serialize:JSON.stringify,include:[],select:[],persistOnDestroy:!1,preStorageUpdate:function(e,t){return t},preStoreUpdate:function(e,t){return t},skipStorageUpdate:Re,preStorageUpdateOperator:()=>e=>e},{storage:n,enableInNonBrowser:i,deserialize:s,serialize:a,include:c,select:u,key:l,preStorageUpdate:h,persistOnDestroy:d,preStorageUpdateOperator:p,preStoreUpdate:f,skipStorageUpdate:v}=Object.assign({},t,e);if($&&!i||!n)return;const m=c.length>0,g=u.length>0;let y,b;m&&(y=c.reduce((e,t)=>(N(t)?e.fns.push(t):e[t.split(".")[0]]=t,e),{fns:[]})),g&&(b=u.reduce((e,t)=>(e[t.storeName]=t,e),{}));let S={},w={},_=[];const C=[];function T(e){Oe(e).subscribe(()=>{const e=C.shift();e&&T(e)})}const x=G()&&n===localStorage||(()=>{try{return"undefined"!=typeof sessionStorage}catch(e){return!1}})()&&n===sessionStorage;return Oe(n.getItem(l)).subscribe(e=>{let t=L(e)?e:s(e||"{}");function i(e){t.$cache=Object.assign(Object.assign({},t.$cache||{}),e),t=Object.assign({},t,w),C.push(n.setItem(l,x?a(t):t)),T(C.shift())}function c(e,t){S[e]=W[e]._select(e=>{return n=e,1===(r=t).split(".").length?n:r.split(".").slice(1).join(".").split(".").reduce((e,t)=>e&&e[t],n);var n,r}).pipe((0,r.h)(function(e,t){return 1<=t}),(0,o.U)(t=>g&&b[e]?b[e](t):t),(0,r.h)(()=>!1===v()),p()).subscribe(t=>{w[e]=h(e,t),Promise.resolve().then(()=>i({[e]:W[e]._cache().getValue()}))})}function u(e,n,r){e in t&&(E("@PersistState"),n._setState(n=>function(e,t,n,r=!1){const i=t.split(".");if(1===i.length)return Object.assign(Object.assign({},e),n);e=Object.assign({},e);const s=i.length-2;return t.split(".").slice(1).reduce((e,t,i)=>i!==s?(e[t]=Object.assign({},e[t]),e&&e[t]):(e[t]=r||Array.isArray(e[t])||!L(e[t])?n:Object.assign(Object.assign({},e[t]),n),e&&e[t]),e),e}(n,r,f(e,t[e],n))),W[e].setHasCache(!!t.$cache&&t.$cache[e],{restartTTL:!0}))}_.push(U.subscribe(e=>{S[e]&&(!1===d&&i({[e]:!1}),S[e].unsubscribe(),delete S[e])})),_.push(H.subscribe(e=>{if("router"===e)return;const t=W[e];if(m){let n=y[e];if(!n){if(!y.fns.some(t=>t(e)))return;n=e}u(e,t,n),c(e,n)}else u(e,t,e),c(e,e)})),xe.next()}),{destroy(){_.forEach(e=>e.unsubscribe());for(let e=0,t=Object.keys(S);e<t.length;e++)S[t[e]].unsubscribe();S={}},clear(){n.clear()},clearStore(e){I(e)?Oe(n.setItem(l,"{}")).subscribe():Oe(n.getItem(l)).subscribe(t=>{const r=s(t||"{}");r[e]&&(delete r[e],Oe(n.setItem(l,a(r))).subscribe())})}}}new class{getStoresSnapshot(e=[]){let t={};const n=e.length>0?e:Object.keys(W);for(let r=0;r<n.length;r++){let e=n[r];"router"!==e&&(t[e]=W[e]._value())}return t}setStoresSnapshot(e,t){const n=Object.assign({skipStorageUpdate:!1,lazy:!1},t);n.skipStorageUpdate&&ke(!0);let i=e;be(e)&&(i=JSON.parse(i));const s=Object.keys(i).length;if(n.lazy)H.pipe((0,r.h)(e=>i.hasOwnProperty(e)),(0,c.q)(s)).subscribe(e=>W[e]._setState(()=>i[e]));else for(let r=0,o=Object.keys(i);r<o.length;r++){const e=o[r];W[e]&&W[e]._setState(()=>i[e])}n.skipStorageUpdate&&ke(!1)}}},9855:(e,t,n)=>{"use strict";n.d(t,{$o:()=>rt,GV:()=>st,lz:()=>at,F7:()=>ot});var r=n(5040),i=n(8583),s=n(9887),o=n(3516),a=n(2710),c=n(9429),u=n(9234),l=n(6453),h=n(894),d=n(5180);function p(e,t,n){void 0===n&&(n=!1);var r,i,p=(0,h.Z)(t),f=(0,s.Z)(e),v=(0,c.Re)(t),m={scrollLeft:0,scrollTop:0},g={x:0,y:0};return(v||!v&&!n)&&(("body"!==(0,u.Z)(t)||(0,d.Z)(p))&&(m=(r=t)!==(0,a.Z)(r)&&(0,c.Re)(r)?{scrollLeft:(i=r).scrollLeft,scrollTop:i.scrollTop}:(0,o.Z)(r)),(0,c.Re)(t)?((g=(0,s.Z)(t)).x+=t.clientLeft,g.y+=t.clientTop):p&&(g.x=(0,l.Z)(p))),{x:f.left+m.scrollLeft-g.x,y:f.top+m.scrollTop-g.y,width:f.width,height:f.height}}function f(e){var t=(0,s.Z)(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}var v=n(8246),m=n(4510),g=n(9953);function y(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}}),r.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){n.has(e.name)||i(e)}),r}var b={placement:"bottom",modifiers:[],strategy:"absolute"};function S(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function w(e){void 0===e&&(e={});var t=e.defaultModifiers,n=void 0===t?[]:t,r=e.defaultOptions,i=void 0===r?b:r;return function(e,t,r){void 0===r&&(r=i);var s,o,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},b,i),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},u=[],l=!1,h={state:a,setOptions:function(r){d(),a.options=Object.assign({},i,a.options,r),a.scrollParents={reference:(0,c.kK)(e)?(0,v.Z)(e):e.contextElement?(0,v.Z)(e.contextElement):[],popper:(0,v.Z)(t)};var s,o,l=function(e){var t=y(e);return g.xs.reduce(function(e,n){return e.concat(t.filter(function(e){return e.phase===n}))},[])}((s=[].concat(n,a.options.modifiers),o=s.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{}),Object.keys(o).map(function(e){return o[e]})));return a.orderedModifiers=l.filter(function(e){return e.enabled}),a.orderedModifiers.forEach(function(e){var t=e.options,n=e.effect;if("function"==typeof n){var r=n({state:a,name:e.name,instance:h,options:void 0===t?{}:t});u.push(r||function(){})}}),h.update()},forceUpdate:function(){if(!l){var e=a.elements,t=e.reference,n=e.popper;if(S(t,n)){a.rects={reference:p(t,(0,m.Z)(n),"fixed"===a.options.strategy),popper:f(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach(function(e){return a.modifiersData[e.name]=Object.assign({},e.data)});for(var r=0;r<a.orderedModifiers.length;r++)if(!0!==a.reset){var i=a.orderedModifiers[r],s=i.fn,o=i.options;"function"==typeof s&&(a=s({state:a,options:void 0===o?{}:o,name:i.name,instance:h})||a)}else a.reset=!1,r=-1}}},update:(s=function(){return new Promise(function(e){h.forceUpdate(),e(a)})},function(){return o||(o=new Promise(function(e){Promise.resolve().then(function(){o=void 0,e(s())})})),o}),destroy:function(){d(),l=!0}};if(!S(e,t))return h;function d(){u.forEach(function(e){return e()}),u=[]}return h.setOptions(r).then(function(e){!l&&r.onFirstUpdate&&r.onFirstUpdate(e)}),h}}var _={passive:!0};const C={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,s=void 0===i||i,o=r.resize,c=void 0===o||o,u=(0,a.Z)(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&l.forEach(function(e){e.addEventListener("scroll",n.update,_)}),c&&u.addEventListener("resize",n.update,_),function(){s&&l.forEach(function(e){e.removeEventListener("scroll",n.update,_)}),c&&u.removeEventListener("resize",n.update,_)}},data:{}};var T=n(7442);const E={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state;t.modifiersData[e.name]=(0,T.Z)({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}};var x=n(1053),P=n(3736),k=n(4755),R={top:"auto",right:"auto",bottom:"auto",left:"auto"};function O(e){var t,n=e.popper,r=e.popperRect,i=e.placement,s=e.offsets,o=e.position,c=e.gpuAcceleration,u=e.adaptive,l=e.roundOffsets,d=!0===l?function(e){var t=e.y,n=window.devicePixelRatio||1;return{x:(0,k.NM)((0,k.NM)(e.x*n)/n)||0,y:(0,k.NM)((0,k.NM)(t*n)/n)||0}}(s):"function"==typeof l?l(s):s,p=d.x,f=void 0===p?0:p,v=d.y,y=void 0===v?0:v,b=s.hasOwnProperty("x"),S=s.hasOwnProperty("y"),w=g.t$,_=g.we,C=window;if(u){var T=(0,m.Z)(n),E="clientHeight",P="clientWidth";T===(0,a.Z)(n)&&(T=(0,h.Z)(n),"static"!==(0,x.Z)(T).position&&(E="scrollHeight",P="scrollWidth")),T=T,i===g.we&&(_=g.I,y-=T[E]-r.height,y*=c?1:-1),i===g.t$&&(w=g.F2,f-=T[P]-r.width,f*=c?1:-1)}var O,I=Object.assign({position:o},u&&R);return Object.assign({},I,c?((O={})[_]=S?"0":"",O[w]=b?"0":"",O.transform=(C.devicePixelRatio||1)<2?"translate("+f+"px, "+y+"px)":"translate3d("+f+"px, "+y+"px, 0)",O):((t={})[_]=S?y+"px":"",t[w]=b?f+"px":"",t.transform="",t))}const I={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,s=n.adaptive,o=void 0===s||s,a=n.roundOffsets,c=void 0===a||a,u={placement:(0,P.Z)(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,O(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,O(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},A={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];(0,c.Re)(i)&&(0,u.Z)(i)&&(Object.assign(i.style,n),Object.keys(r).forEach(function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(e){var r=t.elements[e],i=t.attributes[e]||{},s=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce(function(e,t){return e[t]="",e},{});(0,c.Re)(r)&&(0,u.Z)(r)&&(Object.assign(r.style,s),Object.keys(i).forEach(function(e){r.removeAttribute(e)}))})}},requires:["computeStyles"]},N={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.name,r=e.options.offset,i=void 0===r?[0,0]:r,s=g.Ct.reduce(function(e,n){return e[n]=function(e,t,n){var r=(0,P.Z)(e),i=[g.t$,g.we].indexOf(r)>=0?-1:1,s="function"==typeof n?n(Object.assign({},t,{placement:e})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[g.t$,g.F2].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}(n,t.rects,i),e},{}),o=s[t.placement],a=o.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=o.x,t.modifiersData.popperOffsets.y+=a),t.modifiersData[n]=s}};var D={left:"right",right:"left",bottom:"top",top:"bottom"};function M(e){return e.replace(/left|right|bottom|top/g,function(e){return D[e]})}var L={start:"end",end:"start"};function j(e){return e.replace(/start|end/g,function(e){return L[e]})}var F=n(8542),B=n(6462);const z={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,s=void 0===i||i,o=n.altAxis,a=void 0===o||o,c=n.fallbackPlacements,u=n.padding,l=n.boundary,h=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,f=void 0===p||p,v=n.allowedAutoPlacements,m=t.options.placement,y=(0,P.Z)(m),b=c||(y!==m&&f?function(e){if((0,P.Z)(e)===g.d7)return[];var t=M(e);return[j(e),t,j(t)]}(m):[M(m)]),S=[m].concat(b).reduce(function(e,n){return e.concat((0,P.Z)(n)===g.d7?function(e,t){void 0===t&&(t={});var n=t.boundary,r=t.rootBoundary,i=t.padding,s=t.flipVariations,o=t.allowedAutoPlacements,a=void 0===o?g.Ct:o,c=(0,B.Z)(t.placement),u=c?s?g.bw:g.bw.filter(function(e){return(0,B.Z)(e)===c}):g.mv,l=u.filter(function(e){return a.indexOf(e)>=0});0===l.length&&(l=u);var h=l.reduce(function(t,s){return t[s]=(0,F.Z)(e,{placement:s,boundary:n,rootBoundary:r,padding:i})[(0,P.Z)(s)],t},{});return Object.keys(h).sort(function(e,t){return h[e]-h[t]})}(t,{placement:n,boundary:l,rootBoundary:h,padding:u,flipVariations:f,allowedAutoPlacements:v}):n)},[]),w=t.rects.reference,_=t.rects.popper,C=new Map,T=!0,E=S[0],x=0;x<S.length;x++){var k=S[x],R=(0,P.Z)(k),O=(0,B.Z)(k)===g.BL,I=[g.we,g.I].indexOf(R)>=0,A=I?"width":"height",N=(0,F.Z)(t,{placement:k,boundary:l,rootBoundary:h,altBoundary:d,padding:u}),D=I?O?g.F2:g.t$:O?g.I:g.we;w[A]>_[A]&&(D=M(D));var L=M(D),z=[];if(s&&z.push(N[R]<=0),a&&z.push(N[D]<=0,N[L]<=0),z.every(function(e){return e})){E=k,T=!1;break}C.set(k,z)}if(T)for(var U=function(e){var t=S.find(function(t){var n=C.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return E=t,"break"},H=f?3:1;H>0&&"break"!==U(H);H--);t.placement!==E&&(t.modifiersData[r]._skip=!0,t.placement=E,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};var U=n(467);function H(e,t,n){return(0,k.Fp)(e,(0,k.VV)(t,n))}var V=n(7835);const q={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,s=void 0===i||i,o=n.altAxis,a=void 0!==o&&o,c=n.tether,u=void 0===c||c,l=n.tetherOffset,h=void 0===l?0:l,d=(0,F.Z)(t,{boundary:n.boundary,rootBoundary:n.rootBoundary,padding:n.padding,altBoundary:n.altBoundary}),p=(0,P.Z)(t.placement),v=(0,B.Z)(t.placement),y=!v,b=(0,U.Z)(p),S="x"===b?"y":"x",w=t.modifiersData.popperOffsets,_=t.rects.reference,C=t.rects.popper,T="function"==typeof h?h(Object.assign({},t.rects,{placement:t.placement})):h,E={x:0,y:0};if(w){if(s||a){var x="y"===b?g.we:g.t$,R="y"===b?g.I:g.F2,O="y"===b?"height":"width",I=w[b],A=w[b]+d[x],N=w[b]-d[R],D=u?-C[O]/2:0,M=v===g.BL?_[O]:C[O],L=v===g.BL?-C[O]:-_[O],j=t.elements.arrow,z=u&&j?f(j):{width:0,height:0},q=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:(0,V.Z)(),$=q[x],G=q[R],W=H(0,_[O],z[O]),Z=y?_[O]/2-D-W-$-T:M-W-$-T,K=y?-_[O]/2+D+W+G+T:L+W+G+T,Y=t.elements.arrow&&(0,m.Z)(t.elements.arrow),Q=t.modifiersData.offset?t.modifiersData.offset[t.placement][b]:0,J=w[b]+Z-Q-(Y?"y"===b?Y.clientTop||0:Y.clientLeft||0:0),X=w[b]+K-Q;if(s){var ee=H(u?(0,k.VV)(A,J):A,I,u?(0,k.Fp)(N,X):N);w[b]=ee,E[b]=ee-I}if(a){var te=w[S],ne=te+d["x"===b?g.we:g.t$],re=te-d["x"===b?g.I:g.F2],ie=H(u?(0,k.VV)(ne,J):ne,te,u?(0,k.Fp)(re,X):re);w[S]=ie,E[S]=ie-te}}t.modifiersData[r]=E}},requiresIfExists:["offset"]};var $=n(2280),G=n(6809),W=n(6184);function Z(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function K(e){return[g.we,g.F2,g.I,g.t$].some(function(t){return e[t]>=0})}var Y=w({defaultModifiers:[C,E,I,A,N,z,q,{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=(0,P.Z)(n.placement),c=(0,U.Z)(a),u=[g.t$,g.F2].indexOf(a)>=0?"height":"width";if(s&&o){var l=function(e,t){return e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e,(0,G.Z)("number"!=typeof e?e:(0,W.Z)(e,g.mv))}(i.padding,n),h=f(s),d="y"===c?g.we:g.t$,p="y"===c?g.I:g.F2,v=n.rects.reference[u]+n.rects.reference[c]-o[c]-n.rects.popper[u],y=o[c]-n.rects.reference[c],b=(0,m.Z)(s),S=b?"y"===c?b.clientHeight||0:b.clientWidth||0:0,w=S/2-h[u]/2+(v/2-y/2),_=H(l[d],w,S-h[u]-l[p]);n.modifiersData[r]=((t={})[c]=_,t.centerOffset=_-w,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&(0,$.Z)(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,s=t.modifiersData.preventOverflow,o=(0,F.Z)(t,{elementContext:"reference"}),a=(0,F.Z)(t,{altBoundary:!0}),c=Z(o,r),u=Z(a,i,s),l=K(c),h=K(u);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:l,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":h})}}]}),Q="tippy-content",J="tippy-arrow",X="tippy-svg-arrow",ee={passive:!0,capture:!0};function te(e,t,n){if(Array.isArray(e)){var r=e[t];return null==r?Array.isArray(n)?n[t]:n:r}return e}function ne(e,t){var n={}.toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function re(e,t){return"function"==typeof e?e.apply(void 0,t):e}function ie(e,t){return 0===t?e:function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)};var n}function se(e){return[].concat(e)}function oe(e,t){-1===e.indexOf(t)&&e.push(t)}function ae(e){return[].slice.call(e)}function ce(){return document.createElement("div")}function ue(e){return["Element","Fragment"].some(function(t){return ne(e,t)})}function le(e,t){e.forEach(function(e){e&&(e.style.transitionDuration=t+"ms")})}function he(e,t){e.forEach(function(e){e&&e.setAttribute("data-state",t)})}function de(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(t){e[r](t,n)})}var pe={isTouch:!1},fe=0;function ve(){pe.isTouch||(pe.isTouch=!0,window.performance&&document.addEventListener("mousemove",me))}function me(){var e=performance.now();e-fe<20&&(pe.isTouch=!1,document.removeEventListener("mousemove",me)),fe=e}function ge(){var e,t=document.activeElement;(e=t)&&e._tippy&&e._tippy.reference===e&&t.blur&&!t._tippy.state.isVisible&&t.blur()}var ye="undefined"!=typeof window&&"undefined"!=typeof document?navigator.userAgent:"",be=/MSIE |Trident\//.test(ye),Se=Object.assign({appendTo:function(){return document.body},aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),we=Object.keys(Se);function _e(e){var t=(e.plugins||[]).reduce(function(t,n){var r=n.name;return r&&(t[r]=void 0!==e[r]?e[r]:n.defaultValue),t},{});return Object.assign({},e,{},t)}function Ce(e,t){var n=Object.assign({},t,{content:re(t.content,[e])},t.ignoreAttributes?{}:function(e,t){return(t?Object.keys(_e(Object.assign({},Se,{plugins:t}))):we).reduce(function(t,n){var r=(e.getAttribute("data-tippy-"+n)||"").trim();if(!r)return t;if("content"===n)t[n]=r;else try{t[n]=JSON.parse(r)}catch(i){t[n]=r}return t},{})}(e,t.plugins));return n.aria=Object.assign({},Se.aria,{},n.aria),n.aria={expanded:"auto"===n.aria.expanded?t.interactive:n.aria.expanded,content:"auto"===n.aria.content?t.interactive?null:"describedby":n.aria.content},n}function Te(e,t){e.innerHTML=t}function Ee(e){var t=ce();return!0===e?t.className=J:(t.className=X,ue(e)?t.appendChild(e):Te(t,e)),t}function xe(e,t){ue(t.content)?(Te(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?Te(e,t.content):e.textContent=t.content)}function Pe(e){var t=e.firstElementChild,n=ae(t.children);return{box:t,content:n.find(function(e){return e.classList.contains(Q)}),arrow:n.find(function(e){return e.classList.contains(J)||e.classList.contains(X)}),backdrop:n.find(function(e){return e.classList.contains("tippy-backdrop")})}}function ke(e){var t=ce(),n=ce();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=ce();function i(n,r){var i=Pe(t),s=i.box,o=i.content,a=i.arrow;r.theme?s.setAttribute("data-theme",r.theme):s.removeAttribute("data-theme"),"string"==typeof r.animation?s.setAttribute("data-animation",r.animation):s.removeAttribute("data-animation"),r.inertia?s.setAttribute("data-inertia",""):s.removeAttribute("data-inertia"),s.style.maxWidth="number"==typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?s.setAttribute("role",r.role):s.removeAttribute("role"),n.content===r.content&&n.allowHTML===r.allowHTML||xe(o,e.props),r.arrow?a?n.arrow!==r.arrow&&(s.removeChild(a),s.appendChild(Ee(r.arrow))):s.appendChild(Ee(r.arrow)):a&&s.removeChild(a)}return r.className=Q,r.setAttribute("data-state","hidden"),xe(r,e.props),t.appendChild(n),n.appendChild(r),i(e.props,e.props),{popper:t,onUpdate:i}}ke.$$tippy=!0;var Re=1,Oe=[],Ie=[];function Ae(e,t){void 0===t&&(t={});var n=Se.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",ve,ee),window.addEventListener("blur",ge);var r,i=Object.assign({},t,{plugins:n}),s=(r=e,ue(r)?[r]:function(e){return ne(e,"NodeList")}(r)?ae(r):Array.isArray(r)?r:ae(document.querySelectorAll(r))).reduce(function(e,t){var n=t&&function(e,t){var n,r,i,s,o,a,c,u,l,h=Ce(e,Object.assign({},Se,{},_e((n=t,Object.keys(n).reduce(function(e,t){return void 0!==n[t]&&(e[t]=n[t]),e},{}))))),d=!1,p=!1,f=!1,v=!1,m=[],g=ie(Z,h.interactiveDebounce),y=Re++,b=(l=h.plugins).filter(function(e,t){return l.indexOf(e)===t}),S={id:y,reference:e,popper:ce(),popperInstance:null,props:h,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:b,clearDelayTimeouts:function(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(s)},setProps:function(t){if(!S.state.isDestroyed){D("onBeforeUpdate",[S,t]),G();var n=S.props,r=Ce(e,Object.assign({},S.props,{},t,{ignoreAttributes:!0}));S.props=r,$(),n.interactiveDebounce!==r.interactiveDebounce&&(j(),g=ie(Z,r.interactiveDebounce)),n.triggerTarget&&!r.triggerTarget?se(n.triggerTarget).forEach(function(e){e.removeAttribute("aria-expanded")}):r.triggerTarget&&e.removeAttribute("aria-expanded"),L(),N(),C&&C(n,r),S.popperInstance&&(X(),fe().forEach(function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)})),D("onAfterUpdate",[S,t])}},setContent:function(e){S.setProps({content:e})},show:function(){var e=S.state.isVisible,t=S.state.isDestroyed,n=!S.state.isEnabled,r=pe.isTouch&&!S.props.touch,i=te(S.props.duration,0,Se.duration);if(!(e||t||n||r||R().hasAttribute("disabled")||(D("onShow",[S],!1),!1===S.props.onShow(S)))){if(S.state.isVisible=!0,k()&&(_.style.visibility="visible"),N(),U(),S.state.isMounted||(_.style.transition="none"),k()){var s=I();le([s.box,s.content],0)}var o,a,u;c=function(){var e;if(S.state.isVisible&&!v){if(v=!0,_.style.transition=S.props.moveTransition,k()&&S.props.animation){var t=I(),n=t.box,r=t.content;le([n,r],i),he([n,r],"visible")}M(),L(),oe(Ie,S),null==(e=S.popperInstance)||e.forceUpdate(),S.state.isMounted=!0,D("onMount",[S]),S.props.animation&&k()&&function(e,t){V(e,function(){S.state.isShown=!0,D("onShown",[S])})}(i)}},a=S.props.appendTo,u=R(),(o=S.props.interactive&&a===Se.appendTo||"parent"===a?u.parentNode:re(a,[u])).contains(_)||o.appendChild(_),X()}},hide:function(){var e=!S.state.isVisible,t=S.state.isDestroyed,n=!S.state.isEnabled,r=te(S.props.duration,1,Se.duration);if(!(e||t||n)&&(D("onHide",[S],!1),!1!==S.props.onHide(S))){if(S.state.isVisible=!1,S.state.isShown=!1,v=!1,d=!1,k()&&(_.style.visibility="hidden"),j(),H(),N(),k()){var i=I(),s=i.box,o=i.content;S.props.animation&&(le([s,o],r),he([s,o],"hidden"))}M(),L(),S.props.animation?k()&&function(e,t){V(e,function(){!S.state.isVisible&&_.parentNode&&_.parentNode.contains(_)&&t()})}(r,S.unmount):S.unmount()}},hideWithInteractivity:function(e){O().addEventListener("mousemove",g),oe(Oe,g),g(e)},enable:function(){S.state.isEnabled=!0},disable:function(){S.hide(),S.state.isEnabled=!1},unmount:function(){S.state.isVisible&&S.hide(),S.state.isMounted&&(ue(),fe().forEach(function(e){e._tippy.unmount()}),_.parentNode&&_.parentNode.removeChild(_),Ie=Ie.filter(function(e){return e!==S}),S.state.isMounted=!1,D("onHidden",[S]))},destroy:function(){S.state.isDestroyed||(S.clearDelayTimeouts(),S.unmount(),G(),delete e._tippy,S.state.isDestroyed=!0,D("onDestroy",[S]))}};if(!h.render)return S;var w=h.render(S),_=w.popper,C=w.onUpdate;_.setAttribute("data-tippy-root",""),_.id="tippy-"+S.id,S.popper=_,e._tippy=S,_._tippy=S;var T=b.map(function(e){return e.fn(S)}),E=e.hasAttribute("aria-expanded");return $(),L(),N(),D("onCreate",[S]),h.showOnCreate&&ve(),_.addEventListener("mouseenter",function(){S.props.interactive&&S.state.isVisible&&S.clearDelayTimeouts()}),_.addEventListener("mouseleave",function(e){S.props.interactive&&S.props.trigger.indexOf("mouseenter")>=0&&(O().addEventListener("mousemove",g),g(e))}),S;function x(){var e=S.props.touch;return Array.isArray(e)?e:[e,0]}function P(){return"hold"===x()[0]}function k(){var e;return!!(null==(e=S.props.render)?void 0:e.$$tippy)}function R(){return u||e}function O(){var e,t,n=R().parentNode;return n&&(null==(t=se(n)[0])||null==(e=t.ownerDocument)?void 0:e.body)?t.ownerDocument:document}function I(){return Pe(_)}function A(e){return S.state.isMounted&&!S.state.isVisible||pe.isTouch||o&&"focus"===o.type?0:te(S.props.delay,e?0:1,Se.delay)}function N(){_.style.pointerEvents=S.props.interactive&&S.state.isVisible?"":"none",_.style.zIndex=""+S.props.zIndex}function D(e,t,n){var r;void 0===n&&(n=!0),T.forEach(function(n){n[e]&&n[e].apply(void 0,t)}),n&&(r=S.props)[e].apply(r,t)}function M(){var t=S.props.aria;if(t.content){var n="aria-"+t.content,r=_.id;se(S.props.triggerTarget||e).forEach(function(e){var t=e.getAttribute(n);if(S.state.isVisible)e.setAttribute(n,t?t+" "+r:r);else{var i=t&&t.replace(r,"").trim();i?e.setAttribute(n,i):e.removeAttribute(n)}})}}function L(){!E&&S.props.aria.expanded&&se(S.props.triggerTarget||e).forEach(function(e){S.props.interactive?e.setAttribute("aria-expanded",S.state.isVisible&&e===R()?"true":"false"):e.removeAttribute("aria-expanded")})}function j(){O().removeEventListener("mousemove",g),Oe=Oe.filter(function(e){return e!==g})}function F(e){if(!(pe.isTouch&&(f||"mousedown"===e.type)||S.props.interactive&&_.contains(e.target))){if(R().contains(e.target)){if(pe.isTouch)return;if(S.state.isVisible&&S.props.trigger.indexOf("click")>=0)return}else D("onClickOutside",[S,e]);!0===S.props.hideOnClick&&(S.clearDelayTimeouts(),S.hide(),p=!0,setTimeout(function(){p=!1}),S.state.isMounted||H())}}function B(){f=!0}function z(){f=!1}function U(){var e=O();e.addEventListener("mousedown",F,!0),e.addEventListener("touchend",F,ee),e.addEventListener("touchstart",z,ee),e.addEventListener("touchmove",B,ee)}function H(){var e=O();e.removeEventListener("mousedown",F,!0),e.removeEventListener("touchend",F,ee),e.removeEventListener("touchstart",z,ee),e.removeEventListener("touchmove",B,ee)}function V(e,t){var n=I().box;function r(e){e.target===n&&(de(n,"remove",r),t())}if(0===e)return t();de(n,"remove",a),de(n,"add",r),a=r}function q(t,n,r){void 0===r&&(r=!1),se(S.props.triggerTarget||e).forEach(function(e){e.addEventListener(t,n,r),m.push({node:e,eventType:t,handler:n,options:r})})}function $(){var e;P()&&(q("touchstart",W,{passive:!0}),q("touchend",K,{passive:!0})),(e=S.props.trigger,e.split(/\s+/).filter(Boolean)).forEach(function(e){if("manual"!==e)switch(q(e,W),e){case"mouseenter":q("mouseleave",K);break;case"focus":q(be?"focusout":"blur",Q);break;case"focusin":q("focusout",Q)}})}function G(){m.forEach(function(e){e.node.removeEventListener(e.eventType,e.handler,e.options)}),m=[]}function W(e){var t,n=!1;if(S.state.isEnabled&&!J(e)&&!p){var r="focus"===(null==(t=o)?void 0:t.type);o=e,u=e.currentTarget,L(),!S.state.isVisible&&ne(e,"MouseEvent")&&Oe.forEach(function(t){return t(e)}),"click"===e.type&&(S.props.trigger.indexOf("mouseenter")<0||d)&&!1!==S.props.hideOnClick&&S.state.isVisible?n=!0:ve(e),"click"===e.type&&(d=!n),n&&!r&&me(e)}}function Z(e){var t=e.target,n=R().contains(t)||_.contains(t);"mousemove"===e.type&&n||function(e,t){var n=t.clientX,r=t.clientY;return e.every(function(e){var t=e.popperRect,i=e.popperState,s=e.props.interactiveBorder,o=i.placement.split("-")[0],a=i.modifiersData.offset;return!a||t.top-r+("bottom"===o?a.top.y:0)>s||r-t.bottom-("top"===o?a.bottom.y:0)>s||t.left-n+("right"===o?a.left.x:0)>s||n-t.right-("left"===o?a.right.x:0)>s})}(fe().concat(_).map(function(e){var t,n=null==(t=e._tippy.popperInstance)?void 0:t.state;return n?{popperRect:e.getBoundingClientRect(),popperState:n,props:h}:null}).filter(Boolean),e)&&(j(),me(e))}function K(e){J(e)||S.props.trigger.indexOf("click")>=0&&d||(S.props.interactive?S.hideWithInteractivity(e):me(e))}function Q(e){S.props.trigger.indexOf("focusin")<0&&e.target!==R()||S.props.interactive&&e.relatedTarget&&_.contains(e.relatedTarget)||me(e)}function J(e){return!!pe.isTouch&&P()!==e.type.indexOf("touch")>=0}function X(){ue();var t=S.props,n=t.popperOptions,r=t.placement,i=t.offset,s=t.getReferenceClientRect,o=t.moveTransition,a=k()?Pe(_).arrow:null,u=s?{getBoundingClientRect:s,contextElement:s.contextElement||R()}:e,l=[{name:"offset",options:{offset:i}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!o}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(k()){var n=I().box;["placement","reference-hidden","escaped"].forEach(function(e){"placement"===e?n.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?n.setAttribute("data-"+e,""):n.removeAttribute("data-"+e)}),t.attributes.popper={}}}}];k()&&a&&l.push({name:"arrow",options:{element:a,padding:3}}),l.push.apply(l,(null==n?void 0:n.modifiers)||[]),S.popperInstance=Y(u,_,Object.assign({},n,{placement:r,onFirstUpdate:c,modifiers:l}))}function ue(){S.popperInstance&&(S.popperInstance.destroy(),S.popperInstance=null)}function fe(){return ae(_.querySelectorAll("[data-tippy-root]"))}function ve(e){S.clearDelayTimeouts(),e&&D("onTrigger",[S,e]),U();var t=A(!0),n=x(),i=n[1];pe.isTouch&&"hold"===n[0]&&i&&(t=i),t?r=setTimeout(function(){S.show()},t):S.show()}function me(e){if(S.clearDelayTimeouts(),D("onUntrigger",[S,e]),S.state.isVisible){if(!(S.props.trigger.indexOf("mouseenter")>=0&&S.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0&&d)){var t=A(!1);t?i=setTimeout(function(){S.state.isVisible&&S.hide()},t):s=requestAnimationFrame(function(){S.hide()})}}else H()}}(t,i);return n&&e.push(n),e},[]);return ue(e)?s[0]:s}Ae.defaultProps=Se,Ae.setDefaultProps=function(e){Object.keys(e).forEach(function(t){Se[t]=e[t]})},Ae.currentInput=pe,Object.assign({},A,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}}),Ae.setDefaultProps({render:ke});const Ne=Ae;var De=n(1776),Me=n(6889),Le=n(6937),je=n(3763),Fe=n(424),Be=n(5076),ze=n(8476),Ue=n(6186);function He(e){return(0,Fe.e)(function(t,n){(0,ze.Xf)(e).subscribe(new Be.Q(n,function(){return n.complete()},Ue.Z)),!n.closed&&t.subscribe(n)})}var Ve=n(7783),qe=n(5207),$e=n(7540),Ge=n(4689),We=n(1400);const Ze=new r.OlP("Tippy config",{providedIn:"root",factory:()=>({})}),Ke=new r.OlP("TIPPY_REF");function Ye(e){return e instanceof r.SBq?e.nativeElement:e}let Qe=!1,Je=!1;function Xe(e,t={root:null,threshold:.3}){const n=Ye(e);return new De.y(e=>{if(!Qe)return e.next(),void e.complete();const r=new IntersectionObserver(t=>{t[t.length-1].isIntersecting&&(e.next(),e.complete())},t);return r.observe(n),()=>r.disconnect()})}function et(e){const t=Ye(e);return tt(t).pipe((0,Ve.e)(150),(0,qe.U)(()=>function(e){const t=e.offsetWidth;return t>e.parentElement.offsetWidth||t<e.scrollWidth}(t)))}function tt(e){return function(e){return new De.y(t=>{if(!Je)return t.next(),void t.complete();const n=new ResizeObserver(()=>t.next(!0));return n.observe(e),()=>n.disconnect()})}(e)}function nt(e){const t={},n=["variations","useHostWidth","defaultVariation","beforeRender","lazy","variation","isEnabled","className","onlyTextOverflow","data","content","hideOnEscape","customHost"];return Object.keys(e).forEach(r=>{n.includes(r)||(t[r]=e[r])}),t}"undefined"!=typeof window&&(Qe="IntersectionObserver"in window,Je="ResizeObserver"in window);let rt=(()=>{class e{constructor(e,t,n,i,s,o,a){this.platformId=e,this.globalConfig=t,this.injector=n,this.viewService=i,this.vcr=s,this.zone=o,this.hostRef=a,this.onlyTextOverflow=!1,this.useHostWidth=!1,this.hideOnEscape=!1,this.visible=new r.vpe,this.isVisible=!1,this.destroyed=new Me.x,this.enabled=!0,this.variationDefined=!1}ngOnChanges(e){if((0,i.PM)(this.platformId))return;let t,n=Object.keys(e).reduce((t,n)=>("isVisible"===n||(t[n]=e[n].currentValue),t),{});it("variation",e)?(t=e.variation.currentValue,this.variationDefined=!0):this.variationDefined||(t=this.globalConfig.defaultVariation,this.variationDefined=!0),t&&(n=Object.assign(Object.assign({},this.globalConfig.variations[t]),n)),it("isEnabled",e)&&(this.enabled=e.isEnabled.currentValue,this.setStatus()),it("isVisible",e)&&(this.isVisible?this.show():this.hide()),this.setProps(n)}ngOnInit(){this.useHostWidth&&(this.props.maxWidth=this.hostWidth)}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{this.lazy?this.onlyTextOverflow?Xe(this.host).pipe((0,$e.w)(()=>et(this.host)),He(this.destroyed)).subscribe(e=>{this.checkOverflow(e)}):Xe(this.host).pipe(He(this.destroyed)).subscribe(()=>{this.createInstance()}):this.onlyTextOverflow?et(this.host).pipe(He(this.destroyed)).subscribe(e=>{this.checkOverflow(e)}):this.createInstance()})}ngOnDestroy(){var e;this.destroyed.next(),null===(e=this.instance)||void 0===e||e.destroy(),this.destroyView()}destroyView(){var e;null===(e=this.viewRef)||void 0===e||e.destroy(),this.viewRef=null}show(){var e;null===(e=this.instance)||void 0===e||e.show()}hide(){var e;null===(e=this.instance)||void 0===e||e.hide()}enable(){var e;null===(e=this.instance)||void 0===e||e.enable()}disable(){var e;null===(e=this.instance)||void 0===e||e.disable()}setProps(e){var t;this.props=e,null===(t=this.instance)||void 0===t||t.setProps(nt(e))}setStatus(){var e,t;this.enabled?null===(e=this.instance)||void 0===e||e.enable():null===(t=this.instance)||void 0===t||t.disable()}get host(){return this.customHost||this.hostRef.nativeElement}get hostWidth(){return`${this.host.getBoundingClientRect().width}px`}createInstance(){null!=this.content&&this.zone.runOutsideAngular(()=>{this.instance=Ne(this.host,Object.assign(Object.assign(Object.assign({allowHTML:!0,appendTo:document.body},nt(this.globalConfig)),nt(this.props)),{onMount:e=>{var t,n;this.isVisible=!0,this.visible.next(!0),this.useHostWidth&&this.listenToHostResize(),null===(n=(t=this.globalConfig).onMount)||void 0===n||n.call(t,e)},onCreate:e=>{var t,n,r;if(this.className)for(const i of("string"==typeof(r=this.className)?r.split(" "):r).map(e=>null==e?void 0:e.trim()).filter(Boolean))e.popper.classList.add(i);null===(n=(t=this.globalConfig).onCreate)||void 0===n||n.call(t,e),!0===this.isVisible&&e.show()},onShow:e=>{var t,n;if(this.zone.run(()=>{const t=this.resolveContent();(0,We.HD)(t)&&e.setProps({allowHTML:!1}),e.setContent(this.resolveContent()),this.hideOnEscape&&this.handleEscapeButton()}),this.useHostWidth){const t=this.hostWidth;e.popper.style.width=t,e.popper.style.maxWidth=t,e.popper.firstElementChild.style.maxWidth=t}null===(n=(t=this.globalConfig).onShow)||void 0===n||n.call(t,e)},onHidden:e=>{var t,n;this.destroyView(),this.isVisible=!1,this.visible.next(!1),null===(n=(t=this.globalConfig).onHidden)||void 0===n||n.call(t,e)}})),this.setStatus(),this.setProps(this.props),"contextMenu"===this.variation&&this.handleContextMenu()})}resolveContent(){this.viewOptions$||(0,We.HD)(this.content)||((0,We.pE)(this.content)?this.viewOptions$={injector:r.zs3.create({providers:[{provide:Ke,useValue:this.instance}],parent:this.injector})}:(0,We.de)(this.content)&&(this.viewOptions$={context:{$implicit:this.hide.bind(this),data:this.data}})),this.viewRef=this.viewService.createView(this.content,Object.assign({vcr:this.vcr},this.viewOptions$));let e=this.viewRef.getElement();return(0,We.HD)(e)&&this.globalConfig.beforeRender&&(e=this.globalConfig.beforeRender(e)),e}handleContextMenu(){(0,Le.R)(this.host,"contextmenu").pipe(He(this.destroyed)).subscribe(e=>{e.preventDefault(),this.instance.setProps({getReferenceClientRect:()=>({width:0,height:0,top:e.clientY,bottom:e.clientY,left:e.clientX,right:e.clientX})}),this.instance.show()})}handleEscapeButton(){this.pressButton$(document.body,"Escape").pipe(He((0,je.T)(this.destroyed,this.visible.pipe((0,Ge.h)(e=>!e))))).subscribe(()=>this.hide())}pressButton$(e,t){return(0,Le.R)(e,"keydown").pipe((0,Ge.h)(({code:e})=>t===e))}checkOverflow(e){var t;e?this.instance?this.instance.enable():this.createInstance():null===(t=this.instance)||void 0===t||t.disable()}listenToHostResize(){tt(this.host).pipe(He((0,je.T)(this.destroyed,this.visible))).subscribe(()=>{this.instance.popper.style.width=this.hostWidth})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.Lbi),r.Y36(Ze),r.Y36(r.zs3),r.Y36(We.s1),r.Y36(r.s_b),r.Y36(r.R0b),r.Y36(r.SBq))},e.\u0275dir=r.lG2({type:e,selectors:[["","tippy",""]],inputs:{onlyTextOverflow:"onlyTextOverflow",useHostWidth:"useHostWidth",hideOnEscape:"hideOnEscape",isVisible:"isVisible",appendTo:"appendTo",delay:"delay",duration:"duration",hideOnClick:"hideOnClick",interactive:"interactive",interactiveBorder:"interactiveBorder",maxWidth:"maxWidth",offset:"offset",placement:"placement",popperOptions:"popperOptions",showOnCreate:"showOnCreate",trigger:"trigger",triggerTarget:"triggerTarget",zIndex:"zIndex",lazy:"lazy",variation:"variation",isEnabled:"isEnabled",className:"className",data:"data",content:["tippy","content"],customHost:["tippyHost","customHost"]},outputs:{visible:"visible"},exportAs:["tippy"],features:[r.TTD]}),e})();function it(e,t){return e in t}let st=(()=>{class e{static forRoot(t={}){return{ngModule:e,providers:[{provide:Ze,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();const ot={theme:null,arrow:!1,animation:"scale",trigger:"mouseenter",offset:[0,5]},at={theme:"light",arrow:!0,offset:[0,10],animation:null,trigger:"click",interactive:!0}},9338:(e,t,n)=>{"use strict";n.d(t,{kR:()=>G,jE:()=>F});var r=n(4762),i=n(8583),s=n(5040),o=n(1400),a=n(4689),c=n(9922),u=n(1776),l=n(8476),h=Array.isArray;function d(e){return 1===e.length&&h(e[0])?e[0]:e}var p=n(5076);function f(e){return function(t){for(var n=[],r=function(r){n.push((0,l.Xf)(e[r]).subscribe(new p.Q(t,function(e){if(n){for(var i=0;i<n.length;i++)i!==r&&n[i].unsubscribe();n=null}t.next(e)})))},i=0;n&&!t.closed&&i<e.length;i++)r(i)}}var v=n(6889);const m=["hotToastBarBase"];function g(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"hot-toast-animated-icon",10),s._uU(2),s.qZA(),s.BQk()),2&e){const e=s.oxw(2);s.xp6(1),s.Q6J("iconTheme",e.toast.iconTheme),s.xp6(1),s.Oqu(e.toast.icon)}}function y(e,t){if(1&e&&(s.TgZ(0,"div"),s.GkF(1,11),s.qZA()),2&e){const e=s.oxw(2);s.xp6(1),s.Q6J("dynamicView",e.toast.icon)}}function b(e,t){if(1&e&&(s.ynx(0),s.YNc(1,g,3,2,"ng-container",4),s.YNc(2,y,2,1,"ng-template",null,9,s.W1O),s.BQk()),2&e){const e=s.MAs(3),t=s.oxw();s.xp6(1),s.Q6J("ngIf",t.isIconString)("ngIfElse",e)}}function S(e,t){if(1&e&&s._UZ(0,"hot-toast-indicator",12),2&e){const e=s.oxw();s.Q6J("theme",e.toast.iconTheme)("type",e.toast.type)}}function w(e,t){1&e&&s.GkF(0)}function _(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"button",13),s.NdJ("click",function(){return s.CHM(e),s.oxw().close()}),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("ngStyle",e.toast.closeStyle)}}function C(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"hot-toast",3),s.NdJ("height",function(t){const n=s.CHM(e).$implicit;return s.oxw().updateHeight(t,n)})("beforeClosed",function(){const t=s.CHM(e).$implicit;return s.oxw().beforeClosed(t)})("afterClosed",function(t){return s.CHM(e),s.oxw().afterClosed(t)}),s.qZA()}if(2&e){const e=t.$implicit,n=t.index,r=s.oxw();s.Q6J("toast",e)("offset",r.calculateOffset(e.id,e.position))("toastRef",r.toastRefs[n])}}const T=["*"],E=function(e,t){return{"border-color":e,"border-right-color":t}};function x(e,t){if(1&e&&(s.TgZ(0,"div"),s._UZ(1,"hot-toast-error",2),s.qZA()),2&e){const e=s.oxw(3);s.xp6(1),s.Q6J("theme",e.theme)}}function P(e,t){if(1&e&&(s.TgZ(0,"div"),s._UZ(1,"hot-toast-checkmark",2),s.qZA()),2&e){const e=s.oxw(3);s.xp6(1),s.Q6J("theme",e.theme)}}function k(e,t){if(1&e&&(s.TgZ(0,"div"),s._UZ(1,"hot-toast-warning",2),s.qZA()),2&e){const e=s.oxw(3);s.xp6(1),s.Q6J("theme",e.theme)}}function R(e,t){if(1&e&&(s.TgZ(0,"div"),s._UZ(1,"hot-toast-info",2),s.qZA()),2&e){const e=s.oxw(3);s.xp6(1),s.Q6J("theme",e.theme)}}function O(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"div",3),s.TgZ(2,"div",4),s.YNc(3,x,2,1,"div",5),s.YNc(4,P,2,1,"div",5),s.YNc(5,k,2,1,"div",5),s.YNc(6,R,2,1,"div",5),s.qZA(),s.qZA(),s.BQk()),2&e){const e=s.oxw(2);s.xp6(2),s.Q6J("ngSwitch",e.type),s.xp6(1),s.Q6J("ngSwitchCase","error"),s.xp6(1),s.Q6J("ngSwitchCase","success"),s.xp6(1),s.Q6J("ngSwitchCase","warning"),s.xp6(1),s.Q6J("ngSwitchCase","info")}}function I(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"div",1),s._UZ(2,"hot-toast-loader",2),s.YNc(3,O,7,5,"ng-container",0),s.qZA(),s.BQk()),2&e){const e=s.oxw();s.xp6(2),s.Q6J("theme",e.theme),s.xp6(1),s.Q6J("ngIf","loading"!==e.type)}}const A={blank:4e3,error:4e3,success:4e3,loading:3e4,warning:4e3,info:4e3};class N{constructor(e){this.toast=e,this._onClosed=new v.x}set dispose(e){this._dispose=e}getToast(){return this.toast}appendTo(e){const{dispose:t,updateMessage:n,updateToast:r,afterClosed:i}=e.addToast(this);return this.dispose=t,this.updateMessage=n,this.updateToast=r,this.afterClosed=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===(e=d(e)).length?(0,l.Xf)(e[0]):new u.y(f(e))}(this._onClosed.asObservable(),i),this}close(e={dismissedByAction:!1}){this._dispose(),this._onClosed.next({dismissedByAction:e.dismissedByAction,id:this.toast.id}),this._onClosed.complete()}get data(){return this.toast.data}}let D=(()=>{class e{constructor(e){this.injector=e,this.offset=0,this.height=new s.vpe,this.beforeClosed=new s.vpe,this.afterClosed=new s.vpe,this.isManualClose=!1}ngOnInit(){(0,o.de)(this.toast.message)&&(this.context={$implicit:this.toastRef}),(0,o.pE)(this.toast.message)&&(this.toastComponentInjector=s.zs3.create({providers:[{provide:N,useValue:this.toastRef}],parent:this.toast.injector||this.injector}))}ngAfterViewInit(){const e=this.toastBarBase.nativeElement;setTimeout(()=>{this.height.emit(e.offsetHeight)}),e.addEventListener("animationstart",e=>{this.isExitAnimation(e)&&this.beforeClosed.emit()}),e.addEventListener("animationend",e=>{this.isExitAnimation(e)&&this.afterClosed.emit({dismissedByAction:this.isManualClose,id:this.toast.id})})}get containerPositionStyle(){const e=this.toast.position.includes("top"),t=e?{top:0}:{bottom:0},n=this.toast.position.includes("left")?{left:0}:this.toast.position.includes("right")?{right:0}:{left:0,right:0,justifyContent:"center"};return Object.assign(Object.assign({transform:`translateY(${this.offset*(e?1:-1)}px)`},t),n)}get toastBarBaseStyles(){const e=this.toast.position.includes("top"),t=`hotToastEnterAnimation${e?"Negative":"Positive"} 350ms cubic-bezier(0.21, 1.02, 0.73, 1) forwards`,n=this.toast.autoClose?`${t}, hotToastExitAnimation${e?"Negative":"Positive"} 800ms forwards cubic-bezier(0.06, 0.71, 0.55, 1) ${this.toast.duration}ms`:t;return Object.assign(Object.assign({},this.toast.style),{animation:n})}get isIconString(){return"string"==typeof this.toast.icon}close(){this.isManualClose=!0;const e=`hotToastExitAnimation${this.toast.position.includes("top")?"Negative":"Positive"} 800ms forwards cubic-bezier(0.06, 0.71, 0.55, 1)`;this.toastBarBase.nativeElement.style.animation=e}ngOnDestroy(){this.close()}isExitAnimation(e){return e.animationName.includes("hotToastExitAnimation")}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(s.zs3))},e.\u0275cmp=s.Xpm({type:e,selectors:[["hot-toast"]],viewQuery:function(e,t){if(1&e&&s.Gf(m,5),2&e){let e;s.iGM(e=s.CRH())&&(t.toastBarBase=e.first)}},inputs:{offset:"offset",toast:"toast",defaultConfig:"defaultConfig",toastRef:"toastRef"},outputs:{height:"height",beforeClosed:"beforeClosed",afterClosed:"afterClosed"},decls:11,vars:14,consts:[[1,"hot-toast-bar-base-container",3,"ngStyle","ngClass"],[1,"hot-toast-bar-base",3,"ngStyle","ngClass"],["hotToastBarBase",""],["aria-hidden","true",1,"hot-toast-icon"],[4,"ngIf","ngIfElse"],["indicator",""],[1,"hot-toast-message"],[4,"dynamicView","dynamicViewContext","dynamicViewInjector"],["type","button","class","hot-toast-close-btn","aria-label","Close",3,"ngStyle","click",4,"ngIf"],["iconTemplateOrComponent",""],[3,"iconTheme"],[3,"dynamicView"],[3,"theme","type"],["type","button","aria-label","Close",1,"hot-toast-close-btn",3,"ngStyle","click"]],template:function(e,t){if(1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1,2),s.TgZ(3,"div",3),s.YNc(4,b,4,2,"ng-container",4),s.YNc(5,S,1,2,"ng-template",null,5,s.W1O),s.qZA(),s.TgZ(7,"div",6),s.TgZ(8,"div"),s.YNc(9,w,1,0,"ng-container",7),s.qZA(),s.qZA(),s.YNc(10,_,1,1,"button",8),s.qZA(),s.qZA()),2&e){const e=s.MAs(6);s.Q6J("ngStyle",t.containerPositionStyle)("ngClass","hot-toast-theme-"+t.toast.theme),s.xp6(1),s.Udp("--hot-toast-animation-state",t.isManualClose?"running":"paused"),s.Q6J("ngStyle",t.toastBarBaseStyles)("ngClass",t.toast.className),s.uIk("aria-live",t.toast.ariaLive)("role",t.toast.role),s.xp6(3),s.Q6J("ngIf",void 0!==t.toast.icon)("ngIfElse",e),s.xp6(5),s.Q6J("dynamicView",t.toast.message)("dynamicViewContext",t.context)("dynamicViewInjector",t.toastComponentInjector),s.xp6(1),s.Q6J("ngIf",t.toast.dismissible)}},directives:function(){return[i.PC,i.mk,i.O5,o.FZ,B,V]},styles:[".hot-toast-bar-base[_ngcontent-%COMP%]{align-items:var(--hot-toast-align-items,center);background-color:var(--hot-toast-bg,#fff);border-radius:var(--hot-toast-border-radius,4px);box-shadow:var(--hot-toast-shadow,0 3px 10px rgba(0,0,0,.1),0 3px 3px rgba(0,0,0,.05));color:var(--hot-toast-color,#363636);display:var(--hot-toast-display,flex);line-height:var(--hot-toast-line,1.3);margin:var(--hot-toast-margin,16px);max-width:var(--hot-toast-max-width,350px);padding:var(--hot-toast-padding,8px 10px);pointer-events:var(--hot-toast-pointer-events,auto);width:var(--hot-toast-width,-webkit-fit-content);width:var(--hot-toast-width,-moz-fit-content);width:var(--hot-toast-width,fit-content);will-change:var(--hot-toast-will-change,transform)}.hot-toast-bar-base[_ngcontent-%COMP%]:focus, .hot-toast-bar-base[_ngcontent-%COMP%]:hover{animation-play-state:var(--hot-toast-animation-state,paused)!important}@media (prefers-reduced-motion:reduce){.hot-toast-bar-base[_ngcontent-%COMP%]{animation-duration:var(--hot-toast-reduced-motion-animation-duration,10ms)!important}}.hot-toast-message[_ngcontent-%COMP%]{color:var(--hot-toast-message-color,inherit);display:var(--hot-toast-message-display,flex);flex:var(--hot-toast-message-flex,1);justify-content:var(--hot-toast-message-justify-content,center);margin:var(--hot-toast-message-margin,4px 10px)}.hot-toast-bar-base-container[_ngcontent-%COMP%]{display:var(--hot-toast-container-display,flex);pointer-events:var(--hot-toast-container-pointer-events,none);position:var(--hot-toast-container-position,absolute);transition:var(--hot-toast-container-transition,transform .23s cubic-bezier(.21,1.02,.73,1))}@media (prefers-reduced-motion:reduce){.hot-toast-bar-base-container[_ngcontent-%COMP%]{transition-duration:var(--hot-toast-container-reduced-motion-transition-duration,10ms)!important}}.hot-toast-bar-base-container.hot-toast-theme-snackbar[_ngcontent-%COMP%]   .hot-toast-bar-base[_ngcontent-%COMP%]{background:var(--hot-toast-snackbar-bg,#323232);box-shadow:var(--hot-toast-snackbar-shadow,0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12));color:var(--hot-toast-snackbar-color,#fff)}.hot-toast-bar-base-container.hot-toast-theme-snackbar[_ngcontent-%COMP%]   .hot-toast-close-btn[_ngcontent-%COMP%]{filter:var(--hot-toast-snackbar-close-btn-filter,invert(1) grayscale(100%) brightness(200%))}@keyframes hotToastEnterAnimationNegative{0%{opacity:.5;transform:translate3d(0,-80px,0) scale(.6)}to{opacity:1;transform:translateZ(0) scale(1)}}@keyframes hotToastEnterAnimationPositive{0%{opacity:.5;transform:translate3d(0,80px,0) scale(.6)}to{opacity:1;transform:translateZ(0) scale(1)}}@keyframes hotToastExitAnimationPositive{0%{opacity:1;transform:translateZ(-1px) scale(1)}to{opacity:0;transform:translate3d(0,130px,-1px) scale(.5)}}@keyframes hotToastExitAnimationNegative{0%{opacity:1;transform:translateZ(-1px) scale(1)}to{opacity:0;transform:translate3d(0,-130px,-1px) scale(.5)}}.hot-toast-close-btn[_ngcontent-%COMP%]{align-self:var(--hot-toast-close-btn-align-self,flex-start);background-color:var(--hot-toast-close-btn-background-color,transparent);background-image:var(--hot-toast-close-btn-background-image,url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23000'%3e%3cpath d='M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z'/%3e%3c/svg%3e\"));background-position:var(--hot-toast-close-btn-background-position,center);background-repeat:var(--hot-toast-close-btn-background-repeat,no-repeat);background-size:var(--hot-toast-close-btn-background-size,.75em);border:var(--hot-toast-close-btn-border,0);border-radius:var(--hot-toast-close-btn-border-radius,.25rem);box-sizing:var(--hot-toast-close-btn-box-sizing,content-box);display:var(--hot-toast-close-btn-display,flex);height:var(--hot-toast-close-btn-height,.8em);margin-top:var(--hot-toast-close-btn-margin-top,.25em);opacity:var(--hot-toast-close-btn-opacity,.5);padding:var(--hot-toast-close-btn-padding,.25em);width:var(--hot-toast-close-btn-width,.8em)}.hot-toast-close-btn[_ngcontent-%COMP%]:focus{box-shadow:var(--hot-toast-close-btn-box-shadow,0 0 0 .125rem rgba(13,110,253,.25));outline:var(--hot-toast-close-btn-outline,none)}.hot-toast-close-btn[_ngcontent-%COMP%]:focus, .hot-toast-close-btn[_ngcontent-%COMP%]:hover{opacity:var(--hot-toast-close-btn-opacity,.75)}.hot-toast-icon[_ngcontent-%COMP%]{align-self:var(--hot-toast-icon-align-self,flex-start);padding-top:var(--hot-toast-icon-padding-top,.25em)}"],changeDetection:0}),e})(),M=(()=>{class e{constructor(e){this.cdr=e,this.toasts=[],this.toastRefs=[],this._onClosed=new v.x,this.onClosed$=this._onClosed.asObservable()}trackById(e,t){return t.id}calculateOffset(e,t){const n=this.toasts.filter(e=>e.visible&&e.position===t),r=n.findIndex(t=>t.id===e);return-1!==r?n.slice(...this.defaultConfig.reverseOrder?[r+1]:[0,r]).reduce((e,t)=>e+(t.height||0)+8,0):0}updateHeight(e,t){t.height=e,this.cdr.detectChanges()}addToast(e){this.toastRefs.push(e);const t=e.getToast();return this.toasts.push(e.getToast()),this.cdr.detectChanges(),{dispose:()=>{this.closeToast(t.id)},updateMessage:e=>{t.message=e,this.cdr.detectChanges()},updateToast:e=>{this.updateToasts(t,e),this.cdr.detectChanges()},afterClosed:this.getAfterClosed(t)}}closeToast(e){if(e){const t=this.hotToastComponentList.find(t=>t.toast.id===e);t&&t.close()}else this.hotToastComponentList.forEach(e=>e.close())}beforeClosed(e){e.visible=!1}afterClosed(e){this.toasts.findIndex(t=>t.id===e.id)>-1&&(this._onClosed.next(e),this.toasts=this.toasts.filter(t=>t.id!==e.id),this.toastRefs=this.toastRefs.filter(t=>t.getToast().id!==e.id),this.cdr.detectChanges())}hasToast(e){return this.toasts.findIndex(t=>t.id===e)>-1}getAfterClosed(e){return this.onClosed$.pipe((0,a.h)(t=>t.id===e.id))}updateToasts(e,t){this.toasts=this.toasts.map(n=>Object.assign(Object.assign({},n),n.id===e.id&&Object.assign(Object.assign({},e),t)))}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO))},e.\u0275cmp=s.Xpm({type:e,selectors:[["hot-toast-container"]],viewQuery:function(e,t){if(1&e&&s.Gf(D,5),2&e){let e;s.iGM(e=s.CRH())&&(t.hotToastComponentList=e)}},inputs:{defaultConfig:"defaultConfig"},decls:3,vars:2,consts:[[2,"position","fixed","z-index","9999","top","0","right","0","bottom","0","left","0","pointer-events","none"],[2,"position","relative","height","100%"],[3,"toast","offset","toastRef","height","beforeClosed","afterClosed",4,"ngFor","ngForOf","ngForTrackBy"],[3,"toast","offset","toastRef","height","beforeClosed","afterClosed"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.YNc(2,C,1,3,"hot-toast",2),s.qZA(),s.qZA()),2&e&&(s.xp6(2),s.Q6J("ngForOf",t.toasts)("ngForTrackBy",t.trackById))},directives:[i.sg,D],encapsulation:2,changeDetection:0}),e})();class L{constructor(){this.reverseOrder=!1,this.ariaLive="polite",this.role="status",this.position="top-center",this.autoClose=!0,this.theme="toast",this.success={content:""},this.error={content:""},this.loading={content:""},this.blank={content:""},this.warning={content:""}}}class j{constructor(){this.storage="local",this.key="ngneat/hototast-${id}",this.count=1,this.enabled=!1}}let F=(()=>{class e{constructor(e,t,n){this._viewService=e,this.platformId=t,this._isInitialized=!1,this._defaultConfig=new L,this._defaultPersistConfig=new j,n&&(this._defaultConfig=Object.assign(Object.assign({},this._defaultConfig),n))}get defaultConfig(){return this._defaultConfig}set defaultConfig(e){this._defaultConfig=Object.assign(Object.assign({},this._defaultConfig),e),this._componentRef&&this._componentRef.setInput("defaultConfig",this._defaultConfig)}show(e,t){return this.createToast(e||this._defaultConfig.blank.content,"blank",Object.assign(Object.assign({},this._defaultConfig),t))}error(e,t){var n;return this.createToast(e||this._defaultConfig.error.content,"error",Object.assign(Object.assign(Object.assign({},this._defaultConfig),null===(n=this._defaultConfig)||void 0===n?void 0:n.error),t))}success(e,t){var n;return this.createToast(e||this._defaultConfig.success.content,"success",Object.assign(Object.assign(Object.assign({},this._defaultConfig),null===(n=this._defaultConfig)||void 0===n?void 0:n.success),t))}loading(e,t){var n;return this.createToast(e||this._defaultConfig.loading.content,"loading",Object.assign(Object.assign(Object.assign({},this._defaultConfig),null===(n=this._defaultConfig)||void 0===n?void 0:n.loading),t))}warning(e,t){var n;return this.createToast(e||this._defaultConfig.warning.content,"warning",Object.assign(Object.assign(Object.assign({},this._defaultConfig),null===(n=this._defaultConfig)||void 0===n?void 0:n.warning),t))}info(e,t){var n;return this.createToast(e||this._defaultConfig.warning.content,"info",Object.assign(Object.assign(Object.assign({},this._defaultConfig),null===(n=this._defaultConfig)||void 0===n?void 0:n.warning),t))}observe(e){return t=>{var n,r;let i,s=0;const o=e.loading||(null===(n=this._defaultConfig.loading)||void 0===n?void 0:n.content),a=e.error||(null===(r=this._defaultConfig.error)||void 0===r?void 0:r.content);return o&&(i=this.createLoadingToast(o),s=Date.now()),t.pipe((0,c.b)(Object.assign({next:t=>{i=this.createOrUpdateToast(e,t,i,"success",0===s?s:Date.now()-s)}},a&&{error:t=>{i=this.createOrUpdateToast(e,t,i,"error",0===s?s:Date.now()-s)}})))}}close(e){this._componentRef&&this._componentRef.ref.instance.closeToast(e)}init(){(0,i.PM)(this.platformId)||(this._componentRef=this._viewService.createComponent(M).setInput("defaultConfig",this._defaultConfig).appendTo(document.body))}createOrUpdateToast(e,t,n,r,i){let s=null,o={};var a,c;if(({content:s,options:o}=this.getContentAndOptions(r,e[r]||(this._defaultConfig[r]?this._defaultConfig[r].content:""))),c=t,s=(e=>"function"==typeof e)(a=s)?a(c):a,n){n.updateMessage(s);const e=Object.assign(Object.assign({type:r,duration:i+A[r]},o),o.duration&&{duration:i+o.duration});n.updateToast(e)}else this.createToast(s,r,o);return n}createToast(e,t,n,r){var i,s,o,a,c,u;this._isInitialized||(this._isInitialized=!0,this.init());const l=Date.now(),h=null!==(i=null==n?void 0:n.id)&&void 0!==i?i:l.toString();if(!this.isDuplicate(h)&&(!(null===(s=n.persist)||void 0===s?void 0:s.enabled)||(null===(o=n.persist)||void 0===o?void 0:o.enabled)&&this.handleStorageValue(h,n))){const i=Object.assign({ariaLive:null!==(a=null==n?void 0:n.ariaLive)&&void 0!==a?a:"polite",createdAt:l,duration:null!==(c=null==n?void 0:n.duration)&&void 0!==c?c:A[t],id:h,message:e,role:null!==(u=null==n?void 0:n.role)&&void 0!==u?u:"status",type:t,visible:!0,observableMessages:null!=r?r:void 0},n);return new N(i).appendTo(this._componentRef.ref.instance)}}isDuplicate(e){return this._componentRef.ref.instance.hasToast(e)}handleStorageValue(e,t){let n=1;const r=Object.assign(Object.assign({},this._defaultPersistConfig),t.persist),i="local"===r.storage?localStorage:sessionStorage,s=r.key.replace(/\${id}/g,e);let o=i.getItem(s);return o?(o=parseInt(o,10),n=o>0?o-1:o):n=r.count,i.setItem(s,n.toString()),n}getContentAndOptions(e,t){var n;let i,s=Object.assign(Object.assign({},this._defaultConfig),this._defaultConfig[e]);if("string"==typeof t||(0,o.de)(t)||(0,o.pE)(t))i=t;else{let e;n=t,({content:i}=n),e=(0,r._T)(n,["content"]),s=Object.assign(Object.assign({},s),e)}return{content:i,options:s}}createLoadingToast(e){let t=null,n={};return({content:t,options:n}=this.getContentAndOptions("loading",e)),this.loading(t,n)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(o.s1),s.LFG(s.Lbi),s.LFG(L,8))},e.\u0275prov=(0,s.Yz7)({factory:function(){return new e((0,s.LFG)(o.s1),(0,s.LFG)(s.Lbi),(0,s.LFG)(L,8))},token:e,providedIn:"root"}),e})(),B=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["hot-toast-animated-icon"]],inputs:{iconTheme:"iconTheme"},ngContentSelectors:T,decls:2,vars:2,consts:[[1,"hot-toast-animated-icon"]],template:function(e,t){1&e&&(s.F$t(),s.TgZ(0,"div",0),s.Hsn(1),s.qZA()),2&e&&s.Udp("color",null==t.iconTheme?null:t.iconTheme.primary)},styles:["@keyframes hotToastEnter{0%{transform:scale(0)}to{transform:scale(1)}}.hot-toast-animated-icon[_ngcontent-%COMP%]{animation:var(--hot-toast-animated-icon-animation,hotToastEnter .3s ease-in-out forwards);position:var(--hot-toast-animated-icon-position,relative);transform:var(--hot-toast-animated-icon-transform,scale(0))}@media (prefers-reduced-motion:reduce){.hot-toast-animated-icon[_ngcontent-%COMP%]{animation-duration:var(--hot-toast-animated-icon-reduced-motion-animation-duration,none);opacity:var(--hot-toast-animated-icon-reduced-motion-opacity,1);transform:var(--hot-toast-animated-icon-reduced-motion-transform,scale(1))}}"],changeDetection:0}),e})(),z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["hot-toast-checkmark"]],inputs:{theme:"theme"},decls:1,vars:4,consts:[[1,"hot-toast-checkmark-icon"]],template:function(e,t){1&e&&s._UZ(0,"div",0),2&e&&s.Udp("--check-primary",(null==t.theme?null:t.theme.primary)||"#61d345")("--check-secondary",(null==t.theme?null:t.theme.secondary)||"#fff")},styles:['@keyframes hotToastCircleAnimation{0%{opacity:0;transform:scale(0) rotate(45deg)}to{opacity:1;transform:scale(1) rotate(45deg)}}@keyframes hotToastCheckmarkAnimation{0%{height:0;opacity:0;width:0}40%{height:0;opacity:1;width:6px}to{height:10px;opacity:1}}.hot-toast-checkmark-icon[_ngcontent-%COMP%]{animation:var(--hot-toast-checkmark-icon-animation,hotToastCircleAnimation .3s cubic-bezier(.175,.885,.32,1.275) forwards);animation-delay:var(--hot-toast-checkmark-icon-animation-delay,.1s);background-color:var(--hot-toast-checkmark-icon-background-color,var(--check-primary,#61d345));border-radius:var(--hot-toast-checkmark-icon-border-radius,10px);height:var(--hot-toast-checkmark-icon-height,20px);opacity:var(--hot-toast-checkmark-icon-opacity,0);position:var(--hot-toast-checkmark-icon-position,relative);transform:var(--hot-toast-checkmark-icon-transform,rotate(45deg));width:var(--hot-toast-checkmark-icon-width,20px)}@media (prefers-reduced-motion:reduce){.hot-toast-checkmark-icon[_ngcontent-%COMP%]{animation-duration:var(--hot-toast-checkmark-icon-reduced-motion-animation-duration,0ms)}}.hot-toast-checkmark-icon[_ngcontent-%COMP%]:after{animation:var(--hot-toast-checkmark-icon-after-animation,hotToastCheckmarkAnimation .2s ease-out forwards);animation-delay:var(--hot-toast-checkmark-icon-after-animation-delay,.2s);border-bottom:var(--hot-toast-checkmark-icon-after-border-bottom,2px solid);border-color:var(--hot-toast-checkmark-icon-after-border-color,var(--check-secondary,#fff));border-right:var(--hot-toast-checkmark-icon-after-border-right,2px solid);bottom:var(--hot-toast-checkmark-icon-after-bottom,6px);box-sizing:var(--hot-toast-checkmark-icon-after-box-sizing,border-box);content:var(--hot-toast-checkmark-icon-after-content,"");height:var(--hot-toast-checkmark-icon-after-height,10px);left:var(--hot-toast-checkmark-icon-after-left,6px);opacity:var(--hot-toast-checkmark-icon-after-opacity,0);position:var(--hot-toast-checkmark-icon-after-position,absolute);width:var(--hot-toast-checkmark-icon-after-width,6px)}@media (prefers-reduced-motion:reduce){.hot-toast-checkmark-icon[_ngcontent-%COMP%]:after{animation-duration:var(--hot-toast-checkmark-icon-after-reduced-motion-animation-duration,0ms)}}'],changeDetection:0}),e})(),U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["hot-toast-error"]],inputs:{theme:"theme"},decls:1,vars:4,consts:[[1,"hot-toast-error-icon"]],template:function(e,t){1&e&&s._UZ(0,"div",0),2&e&&s.Udp("--error-primary",(null==t.theme?null:t.theme.primary)||"#ff4b4b")("--error-secondary",(null==t.theme?null:t.theme.secondary)||"#fff")},styles:['@keyframes hotToastErrorCircleAnimation{0%{opacity:0;transform:scale(0) rotate(45deg)}to{opacity:1;transform:scale(1) rotate(45deg)}}@keyframes hotToastFirstLineAnimation{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes hotToastSecondLineAnimation{0%{opacity:0;transform:scale(0) rotate(90deg)}to{opacity:1;transform:scale(1) rotate(90deg)}}.hot-toast-error-icon[_ngcontent-%COMP%]{animation:var(--hot-toast-error-icon-animation,hotToastErrorCircleAnimation .3s cubic-bezier(.175,.885,.32,1.275) forwards);animation-delay:var(--hot-toast-error-icon-animation-delay,.1s);background:var(--hot-toast-error-icon-background,var(--error-primary,#ff4b4b));border-radius:var(--hot-toast-error-icon-border-radius,10px);height:var(--hot-toast-error-icon-height,20px);opacity:var(--hot-toast-error-icon-opacity,0);position:var(--hot-toast-error-icon-position,relative);transform:var(--hot-toast-error-icon-transform,rotate(45deg));width:var(--hot-toast-error-icon-width,20px)}@media (prefers-reduced-motion:reduce){.hot-toast-error-icon[_ngcontent-%COMP%]{animation-duration:var(--hot-toast-error-icon-reduced-motion-animation-duration,0ms)}}.hot-toast-error-icon[_ngcontent-%COMP%]:after, .hot-toast-error-icon[_ngcontent-%COMP%]:before{animation:var(--hot-toast-error-icon-after-before-animation,hotToastFirstLineAnimation .15s ease-out forwards);animation-delay:var(--hot-toast-error-icon-after-before-animation-delay,.15s);background:var(--hot-toast-error-icon-after-before-background,var(--error-secondary,#fff));border-radius:var(--hot-toast-error-icon-after-before-border-radius,3px);bottom:var(--hot-toast-error-icon-after-before-bottom,9px);content:var(--hot-toast-error-icon-after-before-content,"");height:var(--hot-toast-error-icon-after-before-height,2px);left:var(--hot-toast-error-icon-after-before-left,4px);opacity:var(--hot-toast-error-icon-after-before-opacity,0);position:var(--hot-toast-error-icon-after-before-position,absolute);width:var(--hot-toast-error-icon-after-before-width,12px)}@media (prefers-reduced-motion:reduce){.hot-toast-error-icon[_ngcontent-%COMP%]:after, .hot-toast-error-icon[_ngcontent-%COMP%]:before{animation-duration:var(--hot-toast-error-icon-after-before-reduced-motion-animation-duration,0ms)}}.hot-toast-error-icon[_ngcontent-%COMP%]:before{animation:var(--hot-toast-error-icon-before-animation,hotToastSecondLineAnimation .15s ease-out forwards);animation-delay:var(--hot-toast-error-icon-before-animation-delay,.18s);transform:var(--hot-toast-error-icon-before-transform,rotate(90deg))}@media (prefers-reduced-motion:reduce){.hot-toast-error-icon[_ngcontent-%COMP%]:before{animation-duration:var(--hot-toast-error-icon-before-reduced-motion-animation-duration,0ms)}}'],changeDetection:0}),e})(),H=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["hot-toast-loader"]],inputs:{theme:"theme"},decls:1,vars:4,consts:[[1,"hot-toast-loader-icon",3,"ngStyle"]],template:function(e,t){1&e&&s._UZ(0,"div",0),2&e&&s.Q6J("ngStyle",s.WLB(1,E,(null==t.theme?null:t.theme.primary)||"#e0e0e0",(null==t.theme?null:t.theme.secondary)||"#616161"))},directives:[i.PC],styles:["@keyframes hotToastRotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.hot-toast-loader-icon[_ngcontent-%COMP%]{animation:var(--hot-toast-loader-icon-animation,hotToastRotate 1s linear infinite);border:var(--hot-toast-loader-icon-border,2px solid);border-color:var(--hot-toast-loader-icon-border-color,#e0e0e0) var(--hot-toast-loader-icon-border-right-color,#616161) var(--hot-toast-loader-icon-border-color,#e0e0e0) var(--hot-toast-loader-icon-border-color,#e0e0e0);border-radius:var(--hot-toast-loader-icon-border-radius,100%);border-right-color:var(--hot-toast-loader-icon-border-color,#e0e0e0);box-sizing:var(--hot-toast-loader-icon-box-sizing,border-box);height:var(--hot-toast-loader-icon-height,18px);padding-top:var(--hot-toast-loader-icon-padding-top,2px);width:var(--hot-toast-loader-icon-width,18px)}@media (prefers-reduced-motion:reduce){.hot-toast-loader-icon[_ngcontent-%COMP%]{animation-duration:var(--hot-toast-loader-icon-reduced-motion-animation-duration,5s)}}"],changeDetection:0}),e})(),V=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["hot-toast-indicator"]],inputs:{theme:"theme",type:"type"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"hot-toast-indicator-wrapper"],[3,"theme"],[1,"hot-toast-status-wrapper"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(e,t){1&e&&s.YNc(0,I,4,2,"ng-container",0),2&e&&s.Q6J("ngIf","blank"!==t.type)},directives:function(){return[i.O5,H,i.RF,i.n9,U,z,q,$]},styles:[".hot-toast-indicator-wrapper[_ngcontent-%COMP%]{align-items:var(--hot-toast-indicator-wrapper-align-items,center);display:var(--hot-toast-indicator-wrapper-display,flex);justify-content:var(--hot-toast-indicator-wrapper-justify-content,center);min-height:var(--hot-toast-indicator-wrapper-min-height,20px);min-width:var(--hot-toast-indicator-wrapper-min-width,20px);position:var(--hot-toast-indicator-wrapper-position,relative)}.hot-toast-status-wrapper[_ngcontent-%COMP%]{position:var(--hot-toast-status-wrapper-position,absolute)}"],changeDetection:0}),e})(),q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["hot-toast-warning"]],inputs:{theme:"theme"},decls:1,vars:4,consts:[[1,"hot-toast-warning-icon"]],template:function(e,t){1&e&&s._UZ(0,"div",0),2&e&&s.Udp("--warn-primary",(null==t.theme?null:t.theme.primary)||"#FFAB00")("--warn-secondary",(null==t.theme?null:t.theme.secondary)||"#fff")},styles:['@keyframes animate-warn-background{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes animate-warn-line{0%{height:0;opacity:0}40%{height:4.8px;opacity:1}to{height:8px;opacity:1}}.hot-toast-warning-icon[_ngcontent-%COMP%]{animation:var(--hot-toast-warning-icon-animation,animate-warn-background .3s cubic-bezier(.175,.885,.32,1.275) forwards);animation-delay:var(--hot-toast-warning-icon-animation-delay,.1s);background-color:var(--hot-toast-warning-icon-background-color,var(--warn-primary,#ffab00));border-radius:var(--hot-toast-warning-icon-border-radius,50%);display:var(--hot-toast-warning-icon-display,block);height:var(--hot-toast-warning-icon-height,20px);opacity:var(--hot-toast-warning-icon-opacity,0);position:var(--hot-toast-warning-icon-position,relative);transform:var(--hot-toast-warning-icon-transform,scale(0));width:var(--hot-toast-warning-icon-width,20px)}.hot-toast-warning-icon[_ngcontent-%COMP%]:after, .hot-toast-warning-icon[_ngcontent-%COMP%]:before{background-color:var(--hot-toast-warning-icon-after-before-background-color,var(--warn-secondary,#fff));border-radius:var(--hot-toast-warning-icon-after-before-border-radius,3px);box-sizing:var(--hot-toast-warning-icon-after-before-box-sizing,border-box);content:var(--hot-toast-warning-icon-after-before-content,"");display:var(--hot-toast-warning-icon-after-before-display,block);left:var(--hot-toast-warning-icon-after-before-left,8.5px);position:var(--hot-toast-warning-icon-after-before-position,absolute);width:var(--hot-toast-warning-icon-after-before-width,2.5px)}.hot-toast-warning-icon[_ngcontent-%COMP%]:after{animation:var(--hot-toast-warning-icon-after-animation,animate-warn-line .2s ease-out forwards);animation-delay:var(--hot-toast-warning-icon-after-animation-delay,.2s);height:var(--hot-toast-warning-icon-after-height,0);opacity:var(--hot-toast-warning-icon-after-opacity,0);top:var(--hot-toast-warning-icon-after-top,4px)}.hot-toast-warning-icon[_ngcontent-%COMP%]:before{bottom:var(--hot-toast-warning-icon-before-bottom,4px);height:var(--hot-toast-warning-icon-before-height,2px)}'],changeDetection:0}),e})(),$=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["hot-toast-info"]],inputs:{theme:"theme"},decls:1,vars:4,consts:[[1,"hot-toast-info-icon"]],template:function(e,t){1&e&&s._UZ(0,"div",0),2&e&&s.Udp("--warn-primary",(null==t.theme?null:t.theme.primary)||"#0d6efd")("--warn-secondary",(null==t.theme?null:t.theme.secondary)||"#fff")},styles:['@keyframes animate-info-background{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes animate-info-line{0%{height:0;opacity:0}40%{height:4.8px;opacity:1}to{height:8px;opacity:1}}.hot-toast-info-icon[_ngcontent-%COMP%]{animation:var(--hot-toast-info-icon-animation,animate-info-background .3s cubic-bezier(.175,.885,.32,1.275) forwards);animation-delay:var(--hot-toast-info-icon-animation-delay,.1s);background-color:var(--hot-toast-info-icon-background-color,var(--info-primary,#0d6efd));border-radius:var(--hot-toast-info-icon-border-radius,50%);display:var(--hot-toast-info-icon-display,block);height:var(--hot-toast-info-icon-height,20px);opacity:var(--hot-toast-info-icon-opacity,0);position:var(--hot-toast-info-icon-position,relative);transform:var(--hot-toast-info-icon-transform,scale(0));width:var(--hot-toast-info-icon-width,20px)}.hot-toast-info-icon[_ngcontent-%COMP%]:after, .hot-toast-info-icon[_ngcontent-%COMP%]:before{background-color:var(--hot-toast-info-icon-after-before-background-color,var(--info-secondary,#fff));border-radius:var(--hot-toast-info-icon-after-before-border-radius,3px);box-sizing:var(--hot-toast-info-icon-after-before-box-sizing,border-box);content:var(--hot-toast-info-icon-after-before-content,"");display:var(--hot-toast-info-icon-after-before-display,block);left:var(--hot-toast-info-icon-after-before-left,8.5px);position:var(--hot-toast-info-icon-after-before-position,absolute);width:var(--hot-toast-info-icon-after-before-width,2.5px)}.hot-toast-info-icon[_ngcontent-%COMP%]:after{animation:var(--hot-toast-info-icon-after-animation,animate-info-line .2s ease-out forwards);animation-delay:var(--hot-toast-info-icon-after-animation-delay,.2s);height:var(--hot-toast-info-icon-after-height,0);opacity:var(--hot-toast-info-icon-after-opacity,0);top:var(--hot-toast-info-icon-after-bottom,8px)}.hot-toast-info-icon[_ngcontent-%COMP%]:before{height:var(--hot-toast-info-icon-before-height,2px);top:var(--hot-toast-info-icon-before-top,4px)}'],changeDetection:0}),e})(),G=(()=>{class e{static forRoot(t){return{ngModule:e,providers:[{provide:L,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[i.ez,o.Nl]]}),e})()},1400:(e,t,n)=>{"use strict";n.d(t,{FZ:()=>d,Nl:()=>p,s1:()=>l,pE:()=>s,HD:()=>o,de:()=>i});var r=n(5040);function i(e){return e instanceof r.Rgc}function s(e){return"function"==typeof e}function o(e){return"string"==typeof e}n(5094),n(4689),n(5207);class a{constructor(e){this.args=e,this.wrapper=null,this.args.vcr?(this.viewRef=this.args.vcr.createEmbeddedView(this.args.tpl,this.args.context||{}),this.viewRef.detectChanges()):(this.viewRef=this.args.tpl.createEmbeddedView(this.args.context||{}),this.viewRef.detectChanges(),this.args.appRef.attachView(this.viewRef))}detectChanges(){this.viewRef.detectChanges()}getElement(){const e=this.viewRef.rootNodes;return 1===e.length&&e[0]===Node.ELEMENT_NODE?this.element=e[0]:(this.element=document.createElement("div"),this.element.append(...e)),this.element}destroy(){var e;1!==this.viewRef.rootNodes[0]&&(null===(e=this.element)||void 0===e||e.parentNode.removeChild(this.element),this.element=null),this.args.vcr||this.args.appRef.detachView(this.viewRef),this.viewRef.destroy(),this.viewRef=null}}class c{constructor(e){this.value=e}getElement(){return this.value}detectChanges(){}destroy(){}}class u{constructor(e){this.args=e;const t=this.args.resolver.resolveComponentFactory(this.args.component);this.args.vcr?this.compRef=this.args.vcr.createComponent(t,this.args.vcr.length,e.injector||this.args.vcr.injector):(this.compRef=t.create(this.args.injector),this.args.appRef.attachView(this.compRef.hostView))}get ref(){return this.compRef}setInput(e,t){return this.compRef.instance[e]=t,this}setInputs(e){return Object.keys(e).forEach(t=>{this.compRef.instance[t]=e[t]}),this}detectChanges(){return this.compRef.hostView.detectChanges(),this}appendTo(e){return e.appendChild(this.getElement()),this}removeFrom(e){return e.removeChild(this.getElement()),this}getRawContent(){return this.getElement().outerHTML}getElement(){return this.compRef.location.nativeElement}destroy(){this.compRef.destroy(),!this.args.vcr&&this.args.appRef.detachView(this.compRef.hostView),this.compRef=null}}let l=(()=>{class e{constructor(e,t,n){this.resolver=e,this.injector=t,this.appRef=n}createComponent(e,t={}){return new u({component:e,vcr:t.vcr,injector:t.injector||this.injector,appRef:this.appRef,resolver:this.resolver})}createTemplate(e,t={}){return new a({vcr:t.vcr,appRef:this.appRef,tpl:e,context:t.context})}createView(e,t={}){if(i(e))return this.createTemplate(e,t);if(s(e))return this.createComponent(e,t);if(o(e))return new c(e);throw"Type of content is not supported"}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r._Vd),r.LFG(r.zs3),r.LFG(r.z2F))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(r._Vd),r.LFG(r.gxx),r.LFG(r.z2F))},token:e,providedIn:"root"}),e})(),h=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["dynamic-view"]],inputs:{content:"content"},decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(e,t){1&e&&r._UZ(0,"div",0),2&e&&r.Q6J("innerHTML",t.content,r.oJD)},encapsulation:2}),e})(),d=(()=>{class e{constructor(e,t,n){this.defaultTpl=e,this.vcr=t,this.viewService=n}set view(e){this._view=e,this.resolveContentType()}get view(){return this._view}ngOnInit(){this.resolveContentType()}resolveContentType(){var e;null===(e=this.viewRef)||void 0===e||e.destroy(),o(this.view)?(this.viewRef=this.viewService.createComponent(h,{vcr:this.vcr,injector:this.injector}),this.viewRef.setInput("content",this.view).detectChanges()):this.viewRef=this.viewService.createView(this.view||this.defaultTpl,{vcr:this.vcr,injector:this.injector,context:this.context})}ngOnDestroy(){var e;null===(e=this.viewRef)||void 0===e||e.destroy()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.Rgc),r.Y36(r.s_b),r.Y36(l))},e.\u0275dir=r.lG2({type:e,selectors:[["","dynamicView",""]],inputs:{view:["dynamicView","view"],injector:["dynamicViewInjector","injector"],context:["dynamicViewContext","context"]}}),e})(),p=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})()},2280:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(9429);function i(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&(0,r.Zq)(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}},9887:(e,t,n)=>{"use strict";function r(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}n.d(t,{Z:()=>r})},1053:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(2710);function i(e){return(0,r.Z)(e).getComputedStyle(e)}},894:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(9429);function i(e){return(((0,r.kK)(e)?e.ownerDocument:e.document)||window.document).documentElement}},9234:(e,t,n)=>{"use strict";function r(e){return e?(e.nodeName||"").toLowerCase():null}n.d(t,{Z:()=>r})},4510:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(2710),i=n(9234),s=n(1053),o=n(9429);function a(e){return["table","td","th"].indexOf((0,i.Z)(e))>=0}var c=n(1169);function u(e){return(0,o.Re)(e)&&"fixed"!==(0,s.Z)(e).position?e.offsetParent:null}function l(e){for(var t=(0,r.Z)(e),n=u(e);n&&a(n)&&"static"===(0,s.Z)(n).position;)n=u(n);return n&&("html"===(0,i.Z)(n)||"body"===(0,i.Z)(n)&&"static"===(0,s.Z)(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&(0,o.Re)(e)&&"fixed"===(0,s.Z)(e).position)return null;for(var n=(0,c.Z)(e);(0,o.Re)(n)&&["html","body"].indexOf((0,i.Z)(n))<0;){var r=(0,s.Z)(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}},1169:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(9234),i=n(894),s=n(9429);function o(e){return"html"===(0,r.Z)(e)?e:e.assignedSlot||e.parentNode||((0,s.Zq)(e)?e.host:null)||(0,i.Z)(e)}},2710:(e,t,n)=>{"use strict";function r(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}n.d(t,{Z:()=>r})},3516:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(2710);function i(e){var t=(0,r.Z)(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}},6453:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(9887),i=n(894),s=n(3516);function o(e){return(0,r.Z)((0,i.Z)(e)).left+(0,s.Z)(e).scrollLeft}},9429:(e,t,n)=>{"use strict";n.d(t,{kK:()=>i,Re:()=>s,Zq:()=>o});var r=n(2710);function i(e){return e instanceof(0,r.Z)(e).Element||e instanceof Element}function s(e){return e instanceof(0,r.Z)(e).HTMLElement||e instanceof HTMLElement}function o(e){return"undefined"!=typeof ShadowRoot&&(e instanceof(0,r.Z)(e).ShadowRoot||e instanceof ShadowRoot)}},5180:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(1053);function i(e){var t=(0,r.Z)(e);return/auto|scroll|overlay|hidden/.test(t.overflow+t.overflowY+t.overflowX)}},8246:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(1169),i=n(5180),s=n(9234),o=n(9429);function a(e){return["html","body","#document"].indexOf((0,s.Z)(e))>=0?e.ownerDocument.body:(0,o.Re)(e)&&(0,i.Z)(e)?e:a((0,r.Z)(e))}var c=n(2710);function u(e,t){var n;void 0===t&&(t=[]);var s=a(e),o=s===(null==(n=e.ownerDocument)?void 0:n.body),l=(0,c.Z)(s),h=o?[l].concat(l.visualViewport||[],(0,i.Z)(s)?s:[]):s,d=t.concat(h);return o?d:d.concat(u((0,r.Z)(h)))}},9953:(e,t,n)=>{"use strict";n.d(t,{we:()=>r,I:()=>i,F2:()=>s,t$:()=>o,d7:()=>a,mv:()=>c,BL:()=>u,ut:()=>l,zV:()=>h,Pj:()=>d,k5:()=>p,YP:()=>f,bw:()=>v,Ct:()=>m,xs:()=>g});var r="top",i="bottom",s="right",o="left",a="auto",c=[r,i,s,o],u="start",l="end",h="clippingParents",d="viewport",p="popper",f="reference",v=c.reduce(function(e,t){return e.concat([t+"-"+u,t+"-"+l])},[]),m=[].concat(c,[a]).reduce(function(e,t){return e.concat([t,t+"-"+u,t+"-"+l])},[]),g=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"]},7442:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(3736),i=n(6462),s=n(467),o=n(9953);function a(e){var t,n=e.reference,a=e.element,c=e.placement,u=c?(0,r.Z)(c):null,l=c?(0,i.Z)(c):null,h=n.x+n.width/2-a.width/2,d=n.y+n.height/2-a.height/2;switch(u){case o.we:t={x:h,y:n.y-a.height};break;case o.I:t={x:h,y:n.y+n.height};break;case o.F2:t={x:n.x+n.width,y:d};break;case o.t$:t={x:n.x-a.width,y:d};break;default:t={x:n.x,y:n.y}}var p=u?(0,s.Z)(u):null;if(null!=p){var f="y"===p?"height":"width";switch(l){case o.BL:t[p]=t[p]-(n[f]/2-a[f]/2);break;case o.ut:t[p]=t[p]+(n[f]/2-a[f]/2)}}return t}},8542:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var r=n(9887),i=n(9953),s=n(2710),o=n(894),a=n(6453),c=n(1053),u=n(3516),l=n(4755),h=n(8246),d=n(4510),p=n(9429),f=n(1169),v=n(2280),m=n(9234);function g(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function y(e,t){return t===i.Pj?g(function(e){var t=(0,s.Z)(e),n=(0,o.Z)(e),r=t.visualViewport,i=n.clientWidth,c=n.clientHeight,u=0,l=0;return r&&(i=r.width,c=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(u=r.offsetLeft,l=r.offsetTop)),{width:i,height:c,x:u+(0,a.Z)(e),y:l}}(e)):(0,p.Re)(t)?function(e){var t=(0,r.Z)(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):g(function(e){var t,n=(0,o.Z)(e),r=(0,u.Z)(e),i=null==(t=e.ownerDocument)?void 0:t.body,s=(0,l.Fp)(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),h=(0,l.Fp)(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),d=-r.scrollLeft+(0,a.Z)(e),p=-r.scrollTop;return"rtl"===(0,c.Z)(i||n).direction&&(d+=(0,l.Fp)(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:h,x:d,y:p}}((0,o.Z)(e)))}var b=n(7442),S=n(6809),w=n(6184);function _(e,t){void 0===t&&(t={});var n=t.placement,s=void 0===n?e.placement:n,a=t.boundary,u=void 0===a?i.zV:a,_=t.rootBoundary,C=void 0===_?i.Pj:_,T=t.elementContext,E=void 0===T?i.k5:T,x=t.altBoundary,P=void 0!==x&&x,k=t.padding,R=void 0===k?0:k,O=(0,S.Z)("number"!=typeof R?R:(0,w.Z)(R,i.mv)),I=e.elements.reference,A=e.rects.popper,N=e.elements[P?E===i.k5?i.YP:i.k5:E],D=function(e,t,n){var r="clippingParents"===t?function(e){var t=(0,h.Z)((0,f.Z)(e)),n=["absolute","fixed"].indexOf((0,c.Z)(e).position)>=0&&(0,p.Re)(e)?(0,d.Z)(e):e;return(0,p.kK)(n)?t.filter(function(e){return(0,p.kK)(e)&&(0,v.Z)(e,n)&&"body"!==(0,m.Z)(e)}):[]}(e):[].concat(t),i=[].concat(r,[n]),s=i.reduce(function(t,n){var r=y(e,n);return t.top=(0,l.Fp)(r.top,t.top),t.right=(0,l.VV)(r.right,t.right),t.bottom=(0,l.VV)(r.bottom,t.bottom),t.left=(0,l.Fp)(r.left,t.left),t},y(e,i[0]));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}((0,p.kK)(N)?N:N.contextElement||(0,o.Z)(e.elements.popper),u,C),M=(0,r.Z)(I),L=(0,b.Z)({reference:M,element:A,strategy:"absolute",placement:s}),j=g(Object.assign({},A,L)),F=E===i.k5?j:M,B={top:D.top-F.top+O.top,bottom:F.bottom-D.bottom+O.bottom,left:D.left-F.left+O.left,right:F.right-D.right+O.right},z=e.modifiersData.offset;if(E===i.k5&&z){var U=z[s];Object.keys(B).forEach(function(e){var t=[i.F2,i.I].indexOf(e)>=0?1:-1,n=[i.we,i.I].indexOf(e)>=0?"y":"x";B[e]+=U[n]*t})}return B}},6184:(e,t,n)=>{"use strict";function r(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}n.d(t,{Z:()=>r})},3736:(e,t,n)=>{"use strict";function r(e){return e.split("-")[0]}n.d(t,{Z:()=>r})},7835:(e,t,n)=>{"use strict";function r(){return{top:0,right:0,bottom:0,left:0}}n.d(t,{Z:()=>r})},467:(e,t,n)=>{"use strict";function r(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}n.d(t,{Z:()=>r})},6462:(e,t,n)=>{"use strict";function r(e){return e.split("-")[1]}n.d(t,{Z:()=>r})},4755:(e,t,n)=>{"use strict";n.d(t,{Fp:()=>r,VV:()=>i,NM:()=>s});var r=Math.max,i=Math.min,s=Math.round},6809:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7835);function i(e){return Object.assign({},(0,r.Z)(),e)}},1311:(e,t,n)=>{"use strict";const r=n(3928);class i extends Error{constructor(e,...t){let n;super(...t),Error.captureStackTrace&&Error.captureStackTrace(this,i),this.name="StatusError",this.message=e.statusMessage,this.statusCode=e.status,this.res=e,this.json=e.json.bind(e),this.text=e.text.bind(e),this.arrayBuffer=e.arrayBuffer.bind(e),Object.defineProperty(this,"responseBody",{get:()=>(n||(n=this.arrayBuffer()),n)}),this.headers={};for(const[r,i]of e.headers.entries())this.headers[r.toLowerCase()]=i}}e.exports=r((e,t,n,r,s)=>async(o,a,c={})=>{o=s+(o||"");let u=new URL(o);if(r||(r={}),u.username&&(r.Authorization="Basic "+btoa(u.username+":"+u.password),u=new URL(u.protocol+"//"+u.host+u.pathname+u.search)),"https:"!==u.protocol&&"http:"!==u.protocol)throw new Error(`Unknown protocol, ${u.protocol}`);if(a)if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||"string"==typeof a);else{if("object"!=typeof a)throw new Error("Unknown body type.");a=JSON.stringify(a),r["Content-Type"]="application/json"}c=new Headers({...r||{},...c});const l=await fetch(u,{method:t,headers:c,body:a});if(l.statusCode=l.status,!e.has(l.status))throw new i(l);return"json"===n?l.json():"buffer"===n?l.arrayBuffer():"string"===n?l.text():l})},3928:e=>{"use strict";const t=new Set(["json","buffer","string"]);e.exports=e=>(...n)=>{const r=new Set;let i,s,o,a="";return n.forEach(e=>{if("string"==typeof e)if(e.toUpperCase()===e){if(i)throw new Error(`Can't set method to ${e}, already set to ${i}.`);i=e}else if(e.startsWith("http:")||e.startsWith("https:"))a=e;else{if(!t.has(e))throw new Error(`Unknown encoding, ${e}`);s=e}else if("number"==typeof e)r.add(e);else{if("object"!=typeof e)throw new Error("Unknown type: "+typeof e);if(Array.isArray(e)||e instanceof Set)e.forEach(e=>r.add(e));else{if(o)throw new Error("Cannot set headers twice.");o=e}}}),i||(i="GET"),0===r.size&&r.add(200),e(r,i,s,o,a)}},5050:(e,t,n)=>{"use strict";n.d(t,{I$:()=>s});const r=(()=>{if("undefined"==typeof self)return!1;if("top"in self&&self!==top)try{top}catch{return!1}else{if("chooseFileSystemEntries"in self)return"chooseFileSystemEntries";if("showOpenFilePicker"in self)return"showOpenFilePicker"}return!1})(),i=r?"chooseFileSystemEntries"===r?n.e(715).then(n.bind(n,4715)):n.e(840).then(n.bind(n,9840)):n.e(547).then(n.bind(n,5547));async function s(...e){return(await i).default(...e)}r?"chooseFileSystemEntries"===r?n.e(123).then(n.bind(n,4123)):n.e(45).then(n.bind(n,5045)):n.e(947).then(n.bind(n,6947)),r?"chooseFileSystemEntries"===r?n.e(597).then(n.bind(n,7597)):n.e(888).then(n.bind(n,8888)):n.e(3).then(n.bind(n,9003))},9225:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)},n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?a(Array.isArray(e)?[]:{},e,t):e}function i(e,t,n){return e.concat(t).map(function(e){return r(e,n)})}function s(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return e.propertyIsEnumerable(t)}):[]}(e))}function o(e,t){try{return t in e}catch(n){return!1}}function a(e,n,c){(c=c||{}).arrayMerge=c.arrayMerge||i,c.isMergeableObject=c.isMergeableObject||t,c.cloneUnlessOtherwiseSpecified=r;var u=Array.isArray(n);return u===Array.isArray(e)?u?c.arrayMerge(e,n,c):function(e,t,n){var i={};return n.isMergeableObject(e)&&s(e).forEach(function(t){i[t]=r(e[t],n)}),s(t).forEach(function(s){(function(e,t){return o(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,s)||(i[s]=o(e,s)&&n.isMergeableObject(t[s])?function(e,t){if(!t.customMerge)return a;var n=t.customMerge(e);return"function"==typeof n?n:a}(s,n)(e[s],t[s],n):r(t[s],n))}),i}(e,n,c):r(n,c)}a.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,n){return a(e,n,t)},{})},e.exports=a},1100:(e,t,n)=>{"use strict";function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(e){return"'"+e+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function i(e){return!!e&&!!e[V]}function s(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&Function.toString.call(n)===q}(e)||Array.isArray(e)||!!e[H]||!!e.constructor[H]||l(e)||h(e))}function o(e,t,n){void 0===n&&(n=!1),0===a(e)?(n?Object.keys:$)(e).forEach(function(r){n&&"symbol"==typeof r||t(r,e[r],e)}):e.forEach(function(n,r){return t(r,n,e)})}function a(e){var t=e[V];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:l(e)?2:h(e)?3:0}function c(e,t){return 2===a(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function u(e,t,n){var r=a(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function l(e){return F&&e instanceof Map}function h(e){return B&&e instanceof Set}function d(e){return e.o||e.t}function p(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=G(e);delete t[V];for(var n=$(t),r=0;r<n.length;r++){var i=n[r],s=t[i];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function f(e,t){return void 0===t&&(t=!1),m(e)||i(e)||!s(e)||(a(e)>1&&(e.set=e.add=e.clear=e.delete=v),Object.freeze(e),t&&o(e,function(e,t){return f(t,!0)},!0)),e}function v(){r(2)}function m(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function g(e){var t=W[e];return t||r(18,e),t}function y(){return L}function b(e,t){t&&(g("Patches"),e.u=[],e.s=[],e.v=t)}function S(e){w(e),e.p.forEach(C),e.p=null}function w(e){e===L&&(L=e.l)}function _(e){return L={p:[],l:L,h:e,m:!0,_:0}}function C(e){var t=e[V];0===t.i||1===t.i?t.j():t.g=!0}function T(e,t){t._=t.p.length;var n=t.p[0],i=void 0!==e&&e!==n;return t.h.O||g("ES5").S(t,e,i),i?(n[V].P&&(S(t),r(4)),s(e)&&(e=E(t,e),t.l||P(t,e)),t.u&&g("Patches").M(n[V],e,t.u,t.s)):e=E(t,n,[]),S(t),t.u&&t.v(t.u,t.s),e!==U?e:void 0}function E(e,t,n){if(m(t))return t;var r=t[V];if(!r)return o(t,function(i,s){return x(e,r,t,i,s,n)},!0),t;if(r.A!==e)return t;if(!r.P)return P(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=p(r.k):r.o;o(3===r.i?new Set(i):i,function(t,s){return x(e,r,i,t,s,n)}),P(e,i,!1),n&&e.u&&g("Patches").R(r,n,e.u,e.s)}return r.o}function x(e,t,n,r,o,a){if(i(o)){var l=E(e,o,a&&t&&3!==t.i&&!c(t.D,r)?a.concat(r):void 0);if(u(n,r,l),!i(l))return;e.m=!1}if(s(o)&&!m(o)){if(!e.h.F&&e._<1)return;E(e,o),t&&t.A.l||P(e,o)}}function P(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&f(t,n)}function k(e,t){var n=e[V];return(n?d(n):e)[t]}function R(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function O(e){e.P||(e.P=!0,e.l&&O(e.l))}function I(e){e.o||(e.o=p(e.t))}function A(e,t,n){var r=l(t)?g("MapSet").N(t,n):h(t)?g("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:y(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,s=Z;n&&(i=[r],s=K);var o=Proxy.revocable(i,s),a=o.revoke,c=o.proxy;return r.k=c,r.j=a,c}(t,n):g("ES5").J(t,n);return(n?n.A:y()).p.push(r),r}function N(e){return i(e)||r(22,e),function e(t){if(!s(t))return t;var n,r=t[V],i=a(t);if(r){if(!r.P&&(r.i<4||!g("ES5").K(r)))return r.t;r.I=!0,n=D(t,i),r.I=!1}else n=D(t,i);return o(n,function(t,i){r&&function(e,t){return 2===a(e)?e.get(t):e[t]}(r.t,t)===i||u(n,t,e(i))}),3===i?new Set(n):n}(e)}function D(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return p(e)}n.d(t,{ZP:()=>J});var M,L,j="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),F="undefined"!=typeof Map,B="undefined"!=typeof Set,z="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,U=j?Symbol.for("immer-nothing"):((M={})["immer-nothing"]=!0,M),H=j?Symbol.for("immer-draftable"):"__$immer_draftable",V=j?Symbol.for("immer-state"):"__$immer_state",q=("undefined"!=typeof Symbol&&Symbol,""+Object.prototype.constructor),$="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,G=Object.getOwnPropertyDescriptors||function(e){var t={};return $(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},W={},Z={get:function(e,t){if(t===V)return e;var n=d(e);if(!c(n,t))return function(e,t,n){var r,i=R(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!s(r)?r:r===k(e.t,t)?(I(e),e.o[t]=A(e.A.h,r,e)):r},has:function(e,t){return t in d(e)},ownKeys:function(e){return Reflect.ownKeys(d(e))},set:function(e,t,n){var r=R(d(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=k(d(e),t),s=null==i?void 0:i[V];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,i)&&(void 0!==n||c(e.t,t)))return!0;I(e),O(e)}return e.o[t]===n&&"number"!=typeof n||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==k(e.t,t)||t in e.t?(e.D[t]=!1,I(e),O(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=d(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){r(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){r(12)}},K={};o(Z,function(e,t){K[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),K.deleteProperty=function(e,t){return Z.deleteProperty.call(this,e[0],t)},K.set=function(e,t,n){return Z.set.call(this,e[0],t,n,e[0])};var Y=new(function(){function e(e){var t=this;this.O=z,this.F=!0,this.produce=function(e,n,i){if("function"==typeof e&&"function"!=typeof n){var o=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=o);for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return a.produce(e,function(e){var r;return(r=n).call.apply(r,[t,e].concat(i))})}}var c;if("function"!=typeof n&&r(6),void 0!==i&&"function"!=typeof i&&r(7),s(e)){var u=_(t),l=A(t,e,void 0),h=!0;try{c=n(l),h=!1}finally{h?S(u):w(u)}return"undefined"!=typeof Promise&&c instanceof Promise?c.then(function(e){return b(u,i),T(e,u)},function(e){throw S(u),e}):(b(u,i),T(c,u))}if(!e||"object"!=typeof e){if((c=n(e))===U)return;return void 0===c&&(c=e),t.F&&f(c,!0),c}r(21,e)},this.produceWithPatches=function(e,n){return"function"==typeof e?function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return t.produceWithPatches(n,function(t){return e.apply(void 0,[t].concat(i))})}:[t.produce(e,n,function(e,t){r=e,i=t}),r,i];var r,i},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){s(e)||r(8),i(e)&&(e=N(e));var t=_(this),n=A(this,e,void 0);return n[V].C=!0,w(t),n},t.finishDraft=function(e,t){var n=(e&&e[V]).A;return b(n,t),T(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!z&&r(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}var s=g("Patches").$;return i(e)?s(e,t):this.produce(e,function(e){return s(e,t.slice(n+1))})},e}()),Q=Y.produce;Y.produceWithPatches.bind(Y),Y.setAutoFreeze.bind(Y),Y.setUseProxies.bind(Y),Y.applyPatches.bind(Y),Y.createDraft.bind(Y),Y.finishDraft.bind(Y);const J=Q},1908:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(1886).Z.Symbol},4265:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},2733:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(1908),i=Object.prototype,s=i.hasOwnProperty,o=i.toString,a=r.Z?r.Z.toStringTag:void 0,c=Object.prototype.toString,u=r.Z?r.Z.toStringTag:void 0;const l=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":u&&u in Object(e)?function(e){var t=s.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(c){}var i=o.call(e);return r&&(t?e[a]=n:delete e[a]),i}(e):function(e){return c.call(e)}(e)}},8492:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r="object"==typeof global&&global&&global.Object===Object&&global},6641:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=/^(?:0|[1-9]\d*)$/;const i=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t}},1886:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8492),i="object"==typeof self&&self&&self.Object===Object&&self;const s=r.Z||i||Function("return this")()},8901:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(2733),i=n(6165);const s=function(e){return(0,i.Z)(e)&&"[object Arguments]"==(0,r.Z)(e)};var o=Object.prototype,a=o.hasOwnProperty,c=o.propertyIsEnumerable;const u=s(function(){return arguments}())?s:function(e){return(0,i.Z)(e)&&a.call(e,"callee")&&!c.call(e,"callee")}},4663:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=Array.isArray},4969:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(6872),i=n(6997);const s=function(e){return null!=e&&(0,i.Z)(e.length)&&!(0,r.Z)(e)}},6565:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(1886),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=i&&"object"==typeof module&&module&&!module.nodeType&&module,o=s&&s.exports===i?r.Z.Buffer:void 0;const a=(o?o.isBuffer:void 0)||function(){return!1}},6872:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(2733),i=n(692);const s=function(e){if(!(0,i.Z)(e))return!1;var t=(0,r.Z)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},6997:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},692:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},6165:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return null!=e&&"object"==typeof e}},6643:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(2733),i=n(6997),s=n(6165),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1;var a=n(8492),c="object"==typeof exports&&exports&&!exports.nodeType&&exports,u=c&&"object"==typeof module&&module&&!module.nodeType&&module,l=u&&u.exports===c&&a.Z.process,h=function(){try{return u&&u.require&&u.require("util").types||l&&l.binding&&l.binding("util")}catch(e){}}(),d=h&&h.isTypedArray;const p=d?(f=d,function(e){return f(e)}):function(e){return(0,s.Z)(e)&&(0,i.Z)(e.length)&&!!o[(0,r.Z)(e)]};var f},6781:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(8901),i=n(4663),s=n(6565),o=n(6641),a=n(6643),c=Object.prototype.hasOwnProperty;var u=Object.prototype;const l=(h=Object.keys,d=Object,function(e){return h(d(e))});var h,d,p=Object.prototype.hasOwnProperty;var f=n(4969);const v=function(e){return(0,f.Z)(e)?function(e,t){var n=(0,i.Z)(e),u=!n&&(0,r.Z)(e),l=!n&&!u&&(0,s.Z)(e),h=!n&&!u&&!l&&(0,a.Z)(e),d=n||u||l||h,p=d?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],f=p.length;for(var v in e)!t&&!c.call(e,v)||d&&("length"==v||l&&("offset"==v||"parent"==v)||h&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||(0,o.Z)(v,f))||p.push(v);return p}(e):function(e){if((t=e)!==("function"==typeof(n=t&&t.constructor)&&n.prototype||u))return l(e);var t,n,r=[];for(var i in Object(e))p.call(e,i)&&"constructor"!=i&&r.push(i);return r}(e)}},8351:(e,t,n)=>{"use strict";n.d(t,{i:()=>i});var r=n(9484);class i{constructor(e,t,n,r){this.privProxyHostName=e,this.privProxyPort=t,this.privProxyUserName=n,this.privProxyPassword=r}static fromParameters(e){return new i(e.getProperty(r.o.SpeechServiceConnection_ProxyHostName),parseInt(e.getProperty(r.o.SpeechServiceConnection_ProxyPort),10),e.getProperty(r.o.SpeechServiceConnection_ProxyUserName),e.getProperty(r.o.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(e){return this.fromParameters(e.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}}},7957:(e,t,n)=>{"use strict";n.d(t,{i:()=>Z});var r=n(9877),i=n(1070),s=n(1137),o=n.n(s),a=n(3383),c=n(7895),u=n(7550),l=n(4361),h=n(7817),d=n(6910),p=n(6578);class f{constructor(e,t){this.privStatusCode=e,this.privReason=t}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}var v=n(1698),m=n(7266),g=n(4089),y=n(173),b=n(3339),S=n(1340);class w extends S.A{constructor(e,t,n){super(e,t),this.privSignature=n}}class _ extends w{constructor(e){super("OCSPMemoryCacheHitEvent",S.t.Debug,e)}}class C extends w{constructor(e){super("OCSPCacheMissEvent",S.t.Debug,e)}}class T extends w{constructor(e){super("OCSPDiskCacheHitEvent",S.t.Debug,e)}}class E extends w{constructor(e){super("OCSPCacheUpdateNeededEvent",S.t.Debug,e)}}class x extends w{constructor(e){super("OCSPMemoryCacheStoreEvent",S.t.Debug,e)}}class P extends w{constructor(e){super("OCSPDiskCacheStoreEvent",S.t.Debug,e)}}class k extends w{constructor(e){super("OCSPCacheUpdateCompleteEvent",S.t.Debug,e)}}class R extends w{constructor(){super("OCSPStapleReceivedEvent",S.t.Debug,"")}}class O extends w{constructor(e,t){super("OCSPCacheEntryExpiredEvent",S.t.Debug,e),this.privExpireTime=t}}class I extends w{constructor(e,t,n){super("OCSPCacheEntryNeedsRefreshEvent",S.t.Debug,e),this.privExpireTime=n,this.privStartTime=t}}class A extends w{constructor(e,t,n){super("OCSPCacheHitEvent",S.t.Debug,e),this.privExpireTime=n,this.privExpireTimeString=new Date(n).toLocaleDateString(),this.privStartTime=t,this.privStartTimeString=new Date(t).toLocaleTimeString()}}class N extends w{constructor(e,t){super("OCSPVerificationFailedEvent",S.t.Debug,e),this.privError=t}}class D extends w{constructor(e,t){super("OCSPCacheFetchErrorEvent",S.t.Debug,e),this.privError=t}}class M extends w{constructor(e){super("OCSPResponseRetrievedEvent",S.t.Debug,e)}}class L extends w{constructor(e,t){super("OCSPCacheUpdateErrorEvent",S.t.Debug,e),this.privError=t}}var j=n(3108),F=n.n(j),B=n(8275),z=n.n(B),U=n(2505),H=n.n(U),V=n(146),q=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})};let $=(()=>{class e{constructor(t){t&&(this.privProxyInfo=t),e.privDiskCache||(e.privDiskCache=new(z())("microsoft-cognitiveservices-speech-sdk-cache",{supportBuffer:!0,location:"undefined"!=typeof process&&process.env.SPEECH_OCSP_CACHE_ROOT?process.env.SPEECH_OCSP_CACHE_ROOT:void 0}))}static forceReinitDiskCache(){e.privDiskCache=void 0,e.privMemCache={}}GetAgent(e){const t=new(F().Agent)(this.CreateConnection);return void 0!==this.privProxyInfo&&void 0!==this.privProxyInfo.HostName&&this.privProxyInfo.Port>0&&(t.privProxyInfo=this.privProxyInfo),t}static GetProxyAgent(e){const t={host:e.HostName,port:e.Port};return t.headers=e.UserName?{"Proxy-Authentication":"Basic "+new Buffer(`${e.UserName}:${void 0===e.Password?"":e.Password}`).toString("base64")}:{},t.headers.requestOCSP="true",new(H())(t)}static OCSPCheck(t,n){return q(this,void 0,void 0,function*(){let r,i,s=!1;const o=yield t;o.cork();const a=o;return new Promise((t,c)=>{o.on("OCSPResponse",e=>{e&&(this.onEvent(new R),i=e)}),o.on("error",e=>{s||(s=!0,o.destroy(),c(e))}),a.on("secure",()=>q(this,void 0,void 0,function*(){const u=a.getPeerCertificate(!0);try{const a=yield this.GetIssuer(u);r=b.request.generate(u.raw,a.raw);const c=r.id.toString("hex");if(!i){const t=yield e.GetResponseFromCache(c,r,n);i=t}yield this.VerifyOCSPResponse(i,r,n),o.uncork(),s=!0,t(o)}catch(l){o.destroy(),s=!0,c(l)}}))})})}static GetIssuer(e){return e.issuerCertificate?Promise.resolve(e.issuerCertificate):new Promise((t,n)=>{new b.Agent({}).fetchIssuer(e,null,(e,r)=>{e?n(e):t(r)})})}static GetResponseFromCache(t,n,r){return q(this,void 0,void 0,function*(){let i=e.privMemCache[t];if(i&&this.onEvent(new _(t)),!i)try{const n=yield e.privDiskCache.get(t);n.isCached&&(e.onEvent(new T(t)),e.StoreMemoryCacheEntry(t,n.value),i=n.value)}catch(s){i=null}if(!i)return i;try{const e=b.utils.parseResponse(i).value.tbsResponseData;if(e.responses.length<1)return void this.onEvent(new D(t,"Not enough data in cached response"));const s=e.responses[0].thisUpdate,o=e.responses[0].nextUpdate;if(o<Date.now()+this.testTimeOffset-6e4)this.onEvent(new O(t,o)),i=null;else{const e=Math.min(864e5,(o-s)/2);o-(Date.now()+this.testTimeOffset)<e?(this.onEvent(new I(t,s,o)),this.UpdateCache(n,r).catch(e=>{this.onEvent(new L(t,e.toString()))})):this.onEvent(new A(t,s,o))}}catch(s){this.onEvent(new D(t,s)),i=null}return i||this.onEvent(new C(t)),i})}static VerifyOCSPResponse(t,n,r){return q(this,void 0,void 0,function*(){let i=t;return i||(i=yield e.GetOCSPResponse(n,r)),new Promise((s,o)=>{b.verify({request:n,response:i},a=>{a?(e.onEvent(new N(n.id.toString("hex"),a)),t?this.VerifyOCSPResponse(null,n,r).then(()=>{s()},e=>{o(e)}):o(a)):(t||e.StoreCacheEntry(n.id.toString("hex"),i),s())})})})}static UpdateCache(e,t){return q(this,void 0,void 0,function*(){const n=e.id.toString("hex");this.onEvent(new E(n));const r=yield this.GetOCSPResponse(e,t);this.StoreCacheEntry(n,r),this.onEvent(new k(e.id.toString("hex")))})}static StoreCacheEntry(e,t){this.StoreMemoryCacheEntry(e,t),this.StoreDiskCacheEntry(e,t)}static StoreMemoryCacheEntry(e,t){this.privMemCache[e]=t,this.onEvent(new x(e))}static StoreDiskCacheEntry(e,t){this.privDiskCache.set(e,t).then(()=>{this.onEvent(new P(e))})}static GetOCSPResponse(t,n){let r={};if(n){const t=e.GetProxyAgent(n);r.agent=t}return new Promise((e,n)=>{b.utils.getAuthorityInfo(t.cert,"1.3.6.1.5.5.7.48.1",(i,s)=>{if(i)return void n(i);const o=new URL(s);r=Object.assign(Object.assign({},r),{host:o.host,protocol:o.protocol,port:o.port,path:o.pathname,hostname:o.host}),b.utils.getResponse(r,t.data,(r,i)=>{r?n(r):(this.onEvent(new M(t.certID.toString("hex"))),e(i))})})})}static onEvent(e){d.z.instance.onEvent(e)}CreateConnection(t,n){const r="undefined"!=typeof process&&"0"!==process.env.NODE_TLS_REJECT_UNAUTHORIZED&&"0"!==process.env.SPEECH_CONDUCT_OCSP_CHECK&&n.secureEndpoint;let i;if(n=Object.assign(Object.assign({},n),{requestOCSP:!e.forceDisableOCSPStapling,servername:n.host}),this.privProxyInfo){const r=e.GetProxyAgent(this.privProxyInfo);i=new Promise((e,i)=>{r.callback(t,n,(t,n)=>{t?i(t):e(n)})})}else i=Promise.resolve(n.secureEndpoint?y.connect(n):V.connect(n));return r?e.OCSPCheck(i,this.privProxyInfo):i}}return e.testTimeOffset=0,e.forceDisableOCSPStapling=!1,e.privMemCache={},e})();var G=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})};let W=(()=>{class e{constructor(e,t,n,i,s,o){if(!e)throw new r.Do("uri");if(!n)throw new r.Do("messageFormatter");this.proxyInfo=i,this.privConnectionEvents=new c.n,this.privConnectionId=t,this.privMessageFormatter=n,this.privConnectionState=u.e.None,this.privUri=e,this.privHeaders=s,this.privEnableCompression=o,this.privHeaders[a.S.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===u.e.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new l.BH,this.privCertificateValidatedDeferral=new l.BH,this.privConnectionState=u.e.Connecting;try{if("undefined"==typeof WebSocket||e.forceNpmWebSocket){const e={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve();const t=new $(this.proxyInfo);e.agent=t.GetAgent();let n=new URL(this.privUri).protocol;"wss:"===(null==n?void 0:n.toLocaleLowerCase())?n="https:":"ws:"===(null==n?void 0:n.toLocaleLowerCase())&&(n="http:"),e.agent.protocol=n,this.privWebsocketClient=new(o())(this.privUri,e)}else this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new h.c,this.privDisconnectDeferral=new l.BH,this.privSendMessageQueue=new h.c,this.processSendQueue().catch(e=>{d.z.instance.onEvent(new p.u(e))})}catch(t){return this.privConnectionEstablishDeferral.resolve(new f(500,t)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new v.YF(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=u.e.Connected,this.onEvent(new v.Zk(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new f(200,""))},e=>{this.privConnectionEstablishDeferral.reject(e)})},this.privWebsocketClient.onerror=e=>{this.onEvent(new v.K4(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===u.e.Connecting?(this.privConnectionState=u.e.Disconnected,this.privConnectionEstablishDeferral.resolve(new f(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=u.e.Disconnected,this.privWebsocketClient=null,this.onEvent(new v.PE(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch(e=>{d.z.instance.onEvent(new p.u(e))})},this.privWebsocketClient.onmessage=e=>{const t=(new Date).toISOString();if(this.privConnectionState===u.e.Connected){const n=new l.BH;if(this.privReceivingMessageQueue.enqueueFromPromise(n.promise),e.data instanceof ArrayBuffer){const r=new m.S(g.C.Binary,e.data);this.privMessageFormatter.toConnectionMessage(r).then(e=>{this.onEvent(new v.Qz(this.privConnectionId,t,e)),n.resolve(e)},e=>{n.reject(`Invalid binary message format. Error: ${e}`)})}else{const r=new m.S(g.C.Text,e.data);this.privMessageFormatter.toConnectionMessage(r).then(e=>{this.onEvent(new v.Qz(this.privConnectionId,t,e)),n.resolve(e)},e=>{n.reject(`Invalid text message format. Error: ${e}`)})}}},this.privConnectionEstablishDeferral.promise}send(e){if(this.privConnectionState!==u.e.Connected)return Promise.reject(`Cannot send on connection that is in ${u.e[this.privConnectionState]} state`);const t=new l.BH,n=new l.BH;return this.privSendMessageQueue.enqueueFromPromise(n.promise),this.privMessageFormatter.fromConnectionMessage(e).then(r=>{n.resolve({Message:e,RawWebsocketMessage:r,sendStatusDeferral:t})},e=>{n.reject(`Error formatting the message. ${e}`)}),t.promise}read(){return this.privConnectionState!==u.e.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(e){return this.privWebsocketClient?(this.privConnectionState!==u.e.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client"),this.privDisconnectDeferral.promise):Promise.resolve()}get events(){return this.privConnectionEvents}sendRawMessage(e){try{return e?(this.onEvent(new v.w2(this.privConnectionId,(new Date).toISOString(),e.Message)),this.isWebsocketOpen?(this.privWebsocketClient.send(e.RawWebsocketMessage.payload),Promise.resolve()):Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+(new Error).stack)):Promise.resolve()}catch(t){return Promise.reject(`websocket send error: ${t}`)}}onClose(e,t){return G(this,void 0,void 0,function*(){const n=`Connection closed. ${e}: ${t}`;this.privConnectionState=u.e.Disconnected,this.privDisconnectDeferral.resolve(),yield this.privReceivingMessageQueue.drainAndDispose(()=>{},n),yield this.privSendMessageQueue.drainAndDispose(e=>{e.sendStatusDeferral.reject(n)},n)})}processSendQueue(){return G(this,void 0,void 0,function*(){for(;;){const t=this.privSendMessageQueue.dequeue(),n=yield t;if(!n)return;try{yield this.sendRawMessage(n),n.sendStatusDeferral.resolve()}catch(e){n.sendStatusDeferral.reject(e)}}})}onEvent(e){this.privConnectionEvents.onEvent(e),d.z.instance.onEvent(e)}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}return e.forceNpmWebSocket=!1,e})();class Z{constructor(e,t,n,s,o,a=!1,c){if(this.privIsDisposed=!1,!e)throw new r.Do("uri");if(!s)throw new r.Do("messageFormatter");this.privMessageFormatter=s;let u="",l=0;if(t)for(const r in t)r&&(u+=0===l&&-1===e.indexOf("?")?"?":"&",u+=`${r}=${encodeURIComponent(t[r])}`,l++);if(n)for(const r in n)r&&(u+=0===l&&-1===e.indexOf("?")?"?":"&",u+=`${r}=${encodeURIComponent(n[r])}`,l++);this.privUri=e+u,this.privId=c||(0,i.Q)(),this.privConnectionMessageAdapter=new W(this.privUri,this.id,this.privMessageFormatter,o,n,a)}dispose(){return e=this,void 0,n=function*(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&(yield this.privConnectionMessageAdapter.close())},new((t=void 0)||(t=Promise))(function(r,i){function s(e){try{a(n.next(e))}catch(t){i(t)}}function o(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(s,o)}a((n=n.apply(e,[])).next())});var e,t,n}isDisposed(){return this.privIsDisposed}get id(){return this.privId}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(e){return this.privConnectionMessageAdapter.send(e)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}}},1625:(e,t,n)=>{"use strict";n.d(t,{H:()=>r});class r{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}}},3423:(e,t,n)=>{"use strict";n.d(t,{U:()=>o});var r=n(9877),i=n(3383),s=n(9169);class o{constructor(e){if(!e)throw new r.Do("subscriptionKey");this.privAuthInfo=new s.G(i.S.AuthKey,e)}fetch(e){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(e){return Promise.resolve(this.privAuthInfo)}}},9370:(e,t,n)=>{"use strict";n.d(t,{w:()=>o});var r=n(9877),i=n(9169),s=n(3383);let o=(()=>{class e{constructor(e,t){if(!e)throw new r.Do("fetchCallback");if(!t)throw new r.Do("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=t}fetch(t){return this.privFetchCallback(t).then(t=>new i.G(s.S.Authorization,void 0===t?void 0:e.privTokenPrefix+t))}fetchOnExpiry(t){return this.privFetchOnExpiryCallback(t).then(t=>new i.G(s.S.Authorization,void 0===t?void 0:e.privTokenPrefix+t))}}return e.privTokenPrefix="bearer ",e})()},6355:(e,t,n)=>{"use strict";n.d(t,{_:()=>o});var r=n(8230),i=n(9484),s=n(4700);class o{static getHostSuffix(e){if(e){if(e.toLowerCase().startsWith("china"))return".azure.cn";if(e.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(e,t,n){new Map([[i.o.Speech_SegmentationSilenceTimeoutMs,s.o.SegmentationSilenceTimeoutMs],[i.o.SpeechServiceConnection_EnableAudioLogging,s.o.EnableAudioLogging],[i.o.SpeechServiceConnection_EndSilenceTimeoutMs,s.o.EndSilenceTimeoutMs],[i.o.SpeechServiceConnection_InitialSilenceTimeoutMs,s.o.InitialSilenceTimeoutMs],[i.o.SpeechServiceResponse_PostProcessingOption,s.o.Postprocessing],[i.o.SpeechServiceResponse_ProfanityOption,s.o.Profanity],[i.o.SpeechServiceResponse_RequestWordLevelTimestamps,s.o.EnableWordLevelTimestamps],[i.o.SpeechServiceResponse_StablePartialResultThreshold,s.o.StableIntermediateThreshold]]).forEach((r,i)=>{this.setUrlParameter(i,r,e,t,n)});const o=JSON.parse(e.parameters.getProperty(r.XP,"{}"));Object.keys(o).forEach(e=>{t[e]=o[e]})}setUrlParameter(e,t,n,r,i){const s=n.parameters.getProperty(e,void 0);!s||i&&-1!==i.search(t)||(r[t]=s.toLocaleLowerCase())}}},8230:(e,t,n)=>{"use strict";n.d(t,{xv:()=>r,oo:()=>i,XP:()=>s,CI:()=>o,y0:()=>a});const r="OutputFormat",i="CancellationErrorCode",s="ServiceProperties",o="ForceDictation",a="OpenRange"},3383:(e,t,n)=>{"use strict";n.d(t,{S:()=>r});let r=(()=>{class e{}return e.AuthKey="Ocp-Apim-Subscription-Key",e.Authorization="Authorization",e.ConnectionId="X-ConnectionId",e.ContentType="Content-Type",e.CustomCommandsAppId="X-CommandsAppId",e.Path="Path",e.RequestId="X-RequestId",e.RequestStreamId="X-StreamId",e.RequestTimestamp="X-Timestamp",e})()},9169:(e,t,n)=>{"use strict";n.d(t,{G:()=>r});class r{constructor(e,t){this.privHeaderName=e,this.privToken=t}get headerName(){return this.privHeaderName}get token(){return this.privToken}}},4700:(e,t,n)=>{"use strict";n.d(t,{o:()=>r});let r=(()=>{class e{}return e.BotId="botid",e.CustomSpeechDeploymentId="cid",e.CustomVoiceDeploymentId="deploymentId",e.EnableAudioLogging="storeAudio",e.EnableLanguageId="lidEnabled",e.EnableWordLevelTimestamps="wordLevelTimestamps",e.EndSilenceTimeoutMs="endSilenceTimeoutMs",e.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs",e.Format="format",e.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",e.Language="language",e.Profanity="profanity",e.RequestBotStatusMessages="enableBotMessageStatus",e.StableIntermediateThreshold="stableIntermediateThreshold",e.StableTranslation="stableTranslation",e.TestHooks="testhooks",e.Postprocessing="postprocessing",e})()},2292:(e,t,n)=>{"use strict";n.d(t,{jf:()=>i,Xj:()=>s,pu:()=>o,_y:()=>a,OS:()=>u,wF:()=>l,dt:()=>h});var r=n(9484),i=(()=>(function(e){e[e.Interactive=0]="Interactive",e[e.Conversation=1]="Conversation",e[e.Dictation=2]="Dictation"}(i||(i={})),i))();class s{constructor(e,t){this.privSpeechServiceConfig=e||new o(new a(null)),this.privParameters=t,this.privMaxRetryCount=parseInt(t.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdPriority=t.getProperty(r.o.SpeechServiceConnection_ContinuousLanguageIdPriority,void 0),this.privLanguageIdMode="Latency"===this.privLanguageIdPriority?"DetectContinuous":"DetectAtAudioStart","DetectAtAudioStart"===this.privLanguageIdMode&&(this.privLanguageIdPriority=t.getProperty(r.o.SpeechServiceConnection_AtStartLanguageIdPriority,void 0))}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(e){this.privRecognitionMode=e,this.privRecognitionActivityTimeout=e===i.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=i[e]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==i.Interactive}get languageIdPriority(){return this.privLanguageIdPriority?`Prioritize${this.privLanguageIdPriority}`:""}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(r.o.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(r.o.SpeechServiceConnection_RecognitionEndpointVersion,void 0)}get sourceLanguageModels(){const e=[];let t=!1;if(void 0!==this.autoDetectSourceLanguages)for(const n of this.autoDetectSourceLanguages.split(",")){const i=n+r.o.SpeechServiceConnection_EndpointId.toString(),s=this.parameters.getProperty(i,void 0);void 0!==s?(e.push({language:n,endpoint:s}),t=!0):e.push({language:n,endpoint:""})}return t?e:void 0}get maxRetryCount(){return this.privMaxRetryCount}}class o{constructor(e){this.context=e}serialize(){return JSON.stringify(this,(e,t)=>{if(t&&"object"==typeof t){const e={};for(const n in t)Object.hasOwnProperty.call(t,n)&&(e[n&&n.charAt(0).toLowerCase()+n.substring(1)]=t[n]);return e}return t})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(e){this.recognition=e.toLowerCase()}}class a{constructor(e){this.system=new c,this.os=e}}class c{constructor(){this.name="SpeechSDK",this.version="1.24.1",this.build="JavaScript",this.lang="JavaScript"}}class u{constructor(e,t,n){this.platform=e,this.name=t,this.version=n}}var l=(()=>(function(e){e.Bluetooth="Bluetooth",e.Wired="Wired",e.WiFi="WiFi",e.Cellular="Cellular",e.InBuilt="InBuilt",e.Unknown="Unknown"}(l||(l={})),l))(),h=(()=>(function(e){e.Phone="Phone",e.Speaker="Speaker",e.Car="Car",e.Headset="Headset",e.Thermostat="Thermostat",e.Microphones="Microphones",e.Deskphone="Deskphone",e.RemoteControl="RemoteControl",e.Unknown="Unknown",e.File="File",e.Stream="Stream"}(h||(h={})),h))()},1768:(e,t,n)=>{"use strict";n.d(t,{r:()=>o});var r=n(4089),i=n(9877),s=n(3383);class o extends r.H{constructor(e,t,n,r,o,a,c,u){if(!t)throw new i.Do("path");if(!n)throw new i.Do("requestId");const l={};if(l[s.S.Path]=t,l[s.S.RequestId]=n,l[s.S.RequestTimestamp]=(new Date).toISOString(),r&&(l[s.S.ContentType]=r),a&&(l[s.S.RequestStreamId]=a),c)for(const i in c)i&&(l[i]=c[i]);u?super(e,o,l,u):super(e,o,l),this.privPath=t,this.privRequestId=n,this.privContentType=r,this.privStreamId=a,this.privAdditionalHeaders=c}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(e){let t=null,n=null,r=null,i=null;const a={};if(e.headers)for(const o in e.headers)o&&(o.toLowerCase()===s.S.Path.toLowerCase()?t=e.headers[o]:o.toLowerCase()===s.S.RequestId.toLowerCase()?n=e.headers[o]:o.toLowerCase()===s.S.ContentType.toLowerCase()?r=e.headers[o]:o.toLowerCase()===s.S.RequestStreamId.toLowerCase()?i=e.headers[o]:a[o]=e.headers[o]);return new o(e.messageType,t,n,r,e.body,i,a,e.id)}}},1883:(e,t,n)=>{"use strict";n.d(t,{E:()=>j});var r=n(9877),i=n(7895),s=n(4089),o=n(1698),a=n(7550),c=n(1070);class u{constructor(e){this.privResult=e}get result(){return this.privResult}}var l=n(4909);class h extends l.A{constructor(e,t,n,r,i,s){super(e,t,r,i),this.privAudioData=n,this.privAudioDuration=s}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}}class d{constructor(e,t,n,r,i,s){this.privAudioOffset=e,this.privDuration=t,this.privText=n,this.privWordLength=r,this.privTextOffset=i,this.privBoundaryType=s}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}}class p{constructor(e,t){this.privAudioOffset=e,this.privText=t}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}class f{constructor(e,t,n){this.privAudioOffset=e,this.privVisemeId=t,this.privAnimation=n}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}var v=n(8422),m=n(3512),g=n(741),y=n(5517),b=n(9484),S=n(4361),w=n(6910),_=n(2916),C=(()=>(function(e){e.WordBoundary="WordBoundary",e.Bookmark="Bookmark",e.Viseme="Viseme",e.SentenceBoundary="SentenceBoundary",e.SessionEnd="SessionEnd"}(C||(C={})),C))();class T{constructor(e){this.privSynthesisAudioMetadata=JSON.parse(e)}static fromJSON(e){return new T(e)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}var E=n(1340);class x extends E.A{constructor(e,t,n=E.t.Info){super(e,n),this.privRequestId=t}get requestId(){return this.privRequestId}}class P extends x{constructor(e,t,n){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=t,this.privTurnAudioDestinationId=n}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}class k extends x{constructor(e,t){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}}class R extends x{constructor(e,t){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}}var O=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})};class I{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=(0,c.Q)(),this.privTurnDeferral=new S.BH,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(e){this.privStreamId=e}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(e){this.privAudioOutputFormat=e}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}getAllReceivedAudio(){return O(this,void 0,void 0,function*(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(yield this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null})}getAllReceivedAudioWithHeader(){return O(this,void 0,void 0,function*(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const e=yield this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=j.addHeader(e,this.audioOutputFormat),this.privReceivedAudioWithHeader}return this.getAllReceivedAudio()})}startNewSynthesis(e,t,n,r){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=e,this.privRawText=t,this.privIsSSML=n,this.privAudioOutputStream=new _.NO,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",void 0!==r&&(this.privTurnAudioDestination=r,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new P(this.requestId,void 0,void 0===r?void 0:r.id()))}onPreConnectionStart(e){this.privAuthFetchEventId=e,this.onEvent(new k(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){if(200===e)return this.onEvent(new R(this.requestId,this.privAuthFetchEventId)),void(this.privBytesReceived=0);403===e&&this.onComplete()}onServiceResponseMessage(e){const t=JSON.parse(e);this.streamId=t.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new S.BH}onAudioChunkReceived(e){this.isSynthesizing&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength,void 0!==this.privTurnAudioDestination&&this.privTurnAudioDestination.write(e))}onTextBoundaryEvent(e){this.updateTextOffset(e.Data.text.Text,e.Type)}onVisemeMetadataReceived(e){void 0!==e.Data.AnimationChunk&&(this.privPartialVisemeAnimation+=e.Data.AnimationChunk)}onSessionEnd(e){this.privAudioDuration=e.Data.Offset}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const e=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",e}onEvent(e){w.z.instance.onEvent(e)}static isXmlTag(e){return e.length>=2&&"<"===e[0]&&">"===e[e.length-1]}updateTextOffset(e,t){t===C.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(e,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!I.isXmlTag(e)&&this.updateTextOffset(e,t))):(this.privSentenceOffset=this.privRawText.indexOf(e,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!I.isXmlTag(e)&&this.updateTextOffset(e,t)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,void 0!==this.privTurnAudioDestination&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}readAllAudioFromStream(){return O(this,void 0,void 0,function*(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{yield this.privAudioOutputStream.read(this.privReceivedAudio)}catch(e){this.privReceivedAudio=new ArrayBuffer(0)}}})}withinXmlTag(e){return this.privRawText.indexOf("<",e+1)>this.privRawText.indexOf(">",e+1)}}class A{constructor(e){this.privContext={},this.privSpeechSynthesizer=e}setSection(e,t){this.privContext[e]=t}set audioOutputFormat(e){this.privAudioOutputFormat=e}toJSON(){const e=this.buildSynthesisContext();return this.setSection("synthesis",e),JSON.stringify(this.privContext)}buildSynthesisContext(){return{audio:{metadataOptions:{bookmarkEnabled:!!this.privSpeechSynthesizer.bookmarkReached,punctuationBoundaryEnabled:this.privSpeechSynthesizer.properties.getProperty(b.o.SpeechServiceResponse_RequestPunctuationBoundary,!!this.privSpeechSynthesizer.wordBoundary),sentenceBoundaryEnabled:this.privSpeechSynthesizer.properties.getProperty(b.o.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!this.privSpeechSynthesizer.visemeReceived,wordBoundaryEnabled:this.privSpeechSynthesizer.properties.getProperty(b.o.SpeechServiceResponse_RequestWordBoundary,!!this.privSpeechSynthesizer.wordBoundary)},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:this.privSpeechSynthesizer.autoDetectSourceLanguage}}}}var N=n(8230),D=n(1625),M=n(1768),L=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})};let j=(()=>{class e{constructor(e,t,n,s,o){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!e)throw new r.Do("authentication");if(!t)throw new r.Do("connectionFactory");if(!n)throw new r.Do("synthesizerConfig");this.privAuthentication=e,this.privConnectionFactory=t,this.privSynthesizerConfig=n,this.privIsDisposed=!1,this.privSpeechSynthesizer=s,this.privSessionAudioDestination=o,this.privSynthesisTurn=new I,this.privConnectionEvents=new i.n,this.privServiceEvents=new i.n,this.privSynthesisContext=new A(this.privSpeechSynthesizer),this.privAgentConfig=new D.H,this.connectionEvents.attach(e=>{if("ConnectionClosedEvent"===e.name){const t=e;1e3!==t.statusCode&&this.cancelSynthesisLocal(v._.Error,1007===t.statusCode?m.E.BadRequestParameters:m.E.ConnectionFailure,`${t.reason} websocket error code: ${t.statusCode}`)}})}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(e){this.privAudioOutputFormat=e,this.privSynthesisTurn.audioOutputFormat=e,void 0!==this.privSessionAudioDestination&&(this.privSessionAudioDestination.format=e),void 0!==this.synthesisContext&&(this.synthesisContext.audioOutputFormat=e)}static addHeader(e,t){if(!t.hasHeader)return e;t.updateHeader(e.byteLength);const n=new Uint8Array(e.byteLength+t.header.byteLength);return n.set(new Uint8Array(t.header),0),n.set(new Uint8Array(e),t.header.byteLength),n.buffer}isDisposed(){return this.privIsDisposed}dispose(e){return L(this,void 0,void 0,function*(){if(this.privIsDisposed=!0,void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.close(),void 0!==this.privConnectionConfigurationPromise){const t=yield this.privConnectionConfigurationPromise;yield t.dispose(e)}})}connect(){return L(this,void 0,void 0,function*(){yield this.connectImpl()})}sendNetworkMessage(e,t){return L(this,void 0,void 0,function*(){const n="string"==typeof t?s.C.Text:s.C.Binary,r="string"==typeof t?"application/json":"";return(yield this.fetchConnection()).send(new M.r(n,e,this.privSynthesisTurn.requestId,r,t))})}Speak(e,t,n,r,i,s){return L(this,void 0,void 0,function*(){let o;if(o=t?e:this.privSpeechSynthesizer.buildSsml(e),void 0!==this.speakOverride)return this.speakOverride(o,n,r,i);this.privSuccessCallback=r,this.privErrorCallback=i,this.privSynthesisTurn.startNewSynthesis(n,e,t,s);try{yield this.connectImpl();const e=yield this.fetchConnection();yield this.sendSynthesisContext(e),yield this.sendSsmlMessage(e,o,n);const t=new u(new h(n,g.s.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,t),this.receiveMessage()}catch(a){return this.cancelSynthesisLocal(v._.Error,m.E.ConnectionFailure,a),Promise.reject(a)}})}cancelSynthesis(e,t,n,r){const i=new y.O;i.setProperty(N.oo,m.E[n]);const s=new h(e,g.s.Canceled,void 0,r,i);if(this.privSpeechSynthesizer.SynthesisCanceled){const e=new u(s);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,e)}catch(o){}}if(this.privSuccessCallback)try{this.privSuccessCallback(s)}catch(a){}}cancelSynthesisLocal(e,t,n){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,e,t,n))}processTypeSpecificMessages(e){return!0}receiveMessage(){return L(this,void 0,void 0,function*(){try{const r=yield this.fetchConnection(),i=yield r.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!i)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const s=M.r.fromConnectionMessage(i);if(s.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(s.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse();break;case"response":this.privSynthesisTurn.onServiceResponseMessage(s.textBody);break;case"audio":if(this.privSynthesisTurn.streamId.toLowerCase()===s.streamId.toLowerCase()&&s.binaryBody){if(this.privSynthesisTurn.onAudioChunkReceived(s.binaryBody),this.privSpeechSynthesizer.synthesizing)try{const t=e.addHeader(s.binaryBody,this.privSynthesisTurn.audioOutputFormat),n=new u(new h(this.privSynthesisTurn.requestId,g.s.SynthesizingAudio,t));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,n)}catch(t){}void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.write(s.binaryBody)}break;case"audio.metadata":const r=T.fromJSON(s.textBody).Metadata;for(const e of r)switch(e.Type){case C.WordBoundary:case C.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(e);const n=new d(e.Data.Offset,e.Data.Duration,e.Data.text.Text,e.Data.text.Length,e.Type===C.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,e.Data.text.BoundaryType);if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,n)}catch(t){}break;case C.Bookmark:const r=new p(e.Data.Offset,e.Data.Bookmark);if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,r)}catch(t){}break;case C.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(e),e.Data.IsLastAnimation){const n=new f(e.Data.Offset,e.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,n)}catch(t){}}break;case C.SessionEnd:this.privSynthesisTurn.onSessionEnd(e)}break;case"turn.end":let i;this.privSynthesisTurn.onServiceTurnEndResponse();try{const e=yield this.privSynthesisTurn.getAllReceivedAudioWithHeader();i=new h(this.privSynthesisTurn.requestId,g.s.SynthesizingAudioCompleted,e,void 0,void 0,this.privSynthesisTurn.audioDuration),this.privSuccessCallback&&this.privSuccessCallback(i)}catch(t){this.privErrorCallback&&this.privErrorCallback(t)}if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new u(i))}catch(n){}break;default:this.processTypeSpecificMessages(s)||this.privServiceEvents&&this.serviceEvents.onEvent(new o.e2(s.path.toLowerCase(),s.textBody))}return this.receiveMessage()}catch(n){}})}sendSynthesisContext(e){const t=this.synthesisContext.toJSON();if(t)return e.send(new M.r(s.C.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",t))}connectImpl(e=!1){if(null!=this.privConnectionPromise)return this.privConnectionPromise.then(e=>e.state()===a.e.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=(0,c.Q)(),this.privConnectionId=(0,c.Q)(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const t=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=t.then(t=>L(this,void 0,void 0,function*(){this.privSynthesisTurn.onAuthCompleted(!1);const n=this.privConnectionFactory.create(this.privSynthesizerConfig,t,this.privConnectionId);n.events.attach(e=>{this.connectionEvents.onEvent(e)});const r=yield n.open();return 200===r.statusCode?(this.privSynthesisTurn.onConnectionEstablishCompleted(r.statusCode),Promise.resolve(n)):403!==r.statusCode||e?(this.privSynthesisTurn.onConnectionEstablishCompleted(r.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${r.statusCode}, ${this.privSynthesizerConfig.parameters.getProperty(b.o.SpeechServiceConnection_Endpoint)} Reason: ${r.reason}`)):this.connectImpl(!0)}),e=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(e)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(e,t){if(t)return e.send(new M.r(s.C.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",t))}sendSsmlMessage(e,t,n){return e.send(new M.r(s.C.Text,"ssml",n,"application/ssml+xml",t))}fetchConnection(){return L(this,void 0,void 0,function*(){return void 0!==this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then(e=>e.state()===a.e.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)})}configureConnection(){return L(this,void 0,void 0,function*(){const e=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(yield this.sendSpeechServiceConfig(e,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),e)})}}return e.telemetryDataEnabled=!0,e})()},6160:(e,t,n)=>{"use strict";n.d(t,{D:()=>o});var r=n(4361),i=n(4089),s=n(7266);class o{toConnectionMessage(e){const t=new r.BH;try{if(e.messageType===i.C.Text){const n=e.textContent;let r={},s=null;if(n){const e=n.split("\r\n\r\n");e&&e.length>0&&(r=this.parseHeaders(e[0]),e.length>1&&(s=e[1]))}t.resolve(new i.H(e.messageType,s,r,e.id))}else if(e.messageType===i.C.Binary){const n=e.binaryContent;let r={},s=null;if(!n||n.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const o=new DataView(n),a=o.getInt16(0);if(n.byteLength<a+2)throw new Error("Invalid binary message format. Header content missing.");let c="";for(let e=0;e<a;e++)c+=String.fromCharCode(o.getInt8(e+2));r=this.parseHeaders(c),n.byteLength>a+2&&(s=n.slice(2+a)),t.resolve(new i.H(e.messageType,s,r,e.id))}}catch(n){t.reject(`Error formatting the message. Error: ${n}`)}return t.promise}fromConnectionMessage(e){const t=new r.BH;try{if(e.messageType===i.C.Text){const n=`${this.makeHeaders(e)}\r\n${e.textBody?e.textBody:""}`;t.resolve(new s.S(i.C.Text,n,e.id))}else if(e.messageType===i.C.Binary){const n=this.makeHeaders(e),r=e.binaryBody,o=this.stringToArrayBuffer(n),a=new Int8Array(o),c=a.byteLength,u=new Int8Array(2+c+(r?r.byteLength:0));if(u[0]=c>>8&255,u[1]=255&c,u.set(a,2),r){const e=new Int8Array(r);u.set(e,2+c)}t.resolve(new s.S(i.C.Binary,u.buffer,e.id))}}catch(n){t.reject(`Error formatting the message. ${n}`)}return t.promise}makeHeaders(e){let t="";if(e.headers)for(const n in e.headers)n&&(t+=`${n}: ${e.headers[n]}\r\n`);return t}parseHeaders(e){const t={};if(e){const n=e.match(/[^\r\n]+/g);if(t)for(const e of n)if(e){const n=e.indexOf(":"),r=n>0?e.substr(0,n).trim().toLowerCase():e,i=n>0&&e.length>n+1?e.substr(n+1).trim():"";t[r]=i}}return t}stringToArrayBuffer(e){const t=new ArrayBuffer(e.length),n=new DataView(t);for(let r=0;r<e.length;r++)n.setUint8(r,e.charCodeAt(r));return t}}},2480:(e,t,n)=>{"use strict";n.d(t,{QZ:()=>s,Jl:()=>o,ls:()=>a,n0:()=>c,i5:()=>l,sQ:()=>h,He:()=>d,hA:()=>p});var r=n(1340);class i extends r.A{constructor(e,t,n=r.t.Info){super(e,n),this.privAudioSourceId=t}get audioSourceId(){return this.privAudioSourceId}}class s extends i{constructor(e){super("AudioSourceInitializingEvent",e)}}class o extends i{constructor(e){super("AudioSourceReadyEvent",e)}}class a extends i{constructor(e){super("AudioSourceOffEvent",e)}}class c extends i{constructor(e,t){super("AudioSourceErrorEvent",e,r.t.Error),this.privError=t}get error(){return this.privError}}class u extends i{constructor(e,t,n){super(e,t),this.privAudioNodeId=n}get audioNodeId(){return this.privAudioNodeId}}class l extends u{constructor(e,t){super("AudioStreamNodeAttachingEvent",e,t)}}class h extends u{constructor(e,t){super("AudioStreamNodeAttachedEvent",e,t)}}class d extends u{constructor(e,t){super("AudioStreamNodeDetachedEvent",e,t)}}class p extends u{constructor(e,t,n){super("AudioStreamNodeErrorEvent",e,t),this.privError=n}get error(){return this.privError}}},6578:(e,t,n)=>{"use strict";n.d(t,{u:()=>i});var r=n(1340);class i extends r.A{constructor(e){super("BackgroundEvent",r.t.Error),this.privError=e}get error(){return this.privError}}},1698:(e,t,n)=>{"use strict";n.d(t,{e2:()=>i,YF:()=>o,Zk:()=>a,PE:()=>c,K4:()=>u,xz:()=>l,Qz:()=>h,w2:()=>d});var r=n(1340);class i extends r.A{constructor(e,t,n=r.t.Info){super(e,n),this.privJsonResult=t}get jsonString(){return this.privJsonResult}}class s extends r.A{constructor(e,t,n=r.t.Info){super(e,n),this.privConnectionId=t}get connectionId(){return this.privConnectionId}}class o extends s{constructor(e,t,n){super("ConnectionStartEvent",e),this.privUri=t,this.privHeaders=n}get uri(){return this.privUri}get headers(){return this.privHeaders}}class a extends s{constructor(e){super("ConnectionEstablishedEvent",e)}}class c extends s{constructor(e,t,n){super("ConnectionClosedEvent",e,r.t.Debug),this.privReason=n,this.privStatusCode=t}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}class u extends s{constructor(e,t,n){super("ConnectionErrorEvent",e,r.t.Debug),this.privMessage=t,this.privType=n}get message(){return this.privMessage}get type(){return this.privType}}class l extends s{constructor(e,t,n){super("ConnectionEstablishErrorEvent",e,r.t.Error),this.privStatusCode=t,this.privReason=n}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}class h extends s{constructor(e,t,n){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=t,this.privMessage=n}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}class d extends s{constructor(e,t,n){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=t,this.privMessage=n}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}},4089:(e,t,n)=>{"use strict";n.d(t,{C:()=>s,H:()=>o});var r=n(9877),i=n(1070),s=(()=>(function(e){e[e.Text=0]="Text",e[e.Binary=1]="Binary"}(s||(s={})),s))();class o{constructor(e,t,n,o){if(this.privBody=null,e===s.Text&&t&&"string"!=typeof t)throw new r.$2("Payload must be a string");if(e===s.Binary&&t&&!(t instanceof ArrayBuffer))throw new r.$2("Payload must be ArrayBuffer");switch(this.privMessageType=e,this.privBody=t,this.privHeaders=n||{},this.privId=o||(0,i.Q)(),this.messageType){case s.Binary:this.privSize=null!==this.binaryBody?this.binaryBody.byteLength:0;break;case s.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===s.Binary)throw new r.$2("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===s.Text)throw new r.$2("Not supported for text message");return this.privBody}get id(){return this.privId}}},9877:(e,t,n)=>{"use strict";n.d(t,{Do:()=>r,$2:()=>i,IV:()=>s});class r extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}}class i extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}}class s extends Error{constructor(e,t){super(t),this.name=e+"ObjectDisposed",this.message=t}}},7895:(e,t,n)=>{"use strict";n.d(t,{n:()=>s});var r=n(9877),i=n(1070);class s{constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=e}onEvent(e){if(this.isDisposed())throw new r.IV("EventSource");if(this.metadata)for(const t in this.metadata)t&&e.metadata&&(e.metadata[t]||(e.metadata[t]=this.metadata[t]));for(const t in this.privEventListeners)t&&this.privEventListeners[t]&&this.privEventListeners[t](e)}attach(e){const t=(0,i.Q)();return this.privEventListeners[t]=e,{detach:()=>(delete this.privEventListeners[t],Promise.resolve())}}attachListener(e){return this.attach(t=>e.onEvent(t))}attachConsoleListener(e){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(t=>e.onEvent(t)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}}},6910:(e,t,n)=>{"use strict";n.d(t,{z:()=>s});var r=n(9877),i=n(7895);class s{static setEventSource(e){if(!e)throw new r.Do("eventSource");s.privInstance=e}static get instance(){return s.privInstance}}s.privInstance=new i.n},1070:(e,t,n)=>{"use strict";n.d(t,{Q:()=>i});var r=n(6118);const i=()=>(0,r.Z)().replace(new RegExp("-","g"),"").toUpperCase()},7550:(e,t,n)=>{"use strict";n.d(t,{e:()=>r});var r=(()=>(function(e){e[e.None=0]="None",e[e.Connected=1]="Connected",e[e.Connecting=2]="Connecting",e[e.Disconnected=3]="Disconnected"}(r||(r={})),r))()},1340:(e,t,n)=>{"use strict";n.d(t,{t:()=>i,A:()=>s});var r=n(1070),i=(()=>(function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.None=4]="None"}(i||(i={})),i))();class s{constructor(e,t){this.privName=e,this.privEventId=(0,r.Q)(),this.privEventTime=(new Date).toISOString(),this.privEventType=t,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}},4361:(e,t,n)=>{"use strict";n.d(t,{BH:()=>r,Kb:()=>i});class r{constructor(){this.resolve=e=>(this.privResolve(e),this),this.reject=e=>(this.privReject(e),this),this.privPromise=new Promise((e,t)=>{this.privResolve=e,this.privReject=t})}get promise(){return this.privPromise}}function i(e,t,n){e.then(e=>{try{t&&t(e)}catch(r){if(n)try{r instanceof Error?n(r.name+": "+r.message):n(r)}catch(r){}}},e=>{if(n)try{e instanceof Error?n(e.name+": "+e.message):n(e)}catch(e){}})}},7817:(e,t,n)=>{"use strict";n.d(t,{c:()=>c});var r=n(9877);class i{constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],e)for(const t of e)this.privList.push(t)}get(e){return this.throwIfDisposed(),this.privList[e]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(e){this.throwIfDisposed(),this.insertAt(this.privList.length,e)}insertAt(e,t){this.throwIfDisposed(),0===e?this.privList.unshift(t):e===this.privList.length?this.privList.push(t):this.privList.splice(e,0,t),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(e){return this.throwIfDisposed(),this.remove(e,1)[0]}remove(e,t){this.throwIfDisposed();const n=this.privList.splice(e,t);return this.triggerSubscriptions(this.privRemoveSubscriptions),n}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[t]=e,{detach:()=>(delete this.privAddSubscriptions[t],Promise.resolve())}}onRemoved(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[t]=e,{detach:()=>(delete this.privRemoveSubscriptions[t],Promise.resolve())}}onDisposed(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[t]=e,{detach:()=>(delete this.privDisposedSubscriptions[t],Promise.resolve())}}join(e){return this.throwIfDisposed(),this.privList.join(e)}toArray(){const e=Array();return this.privList.forEach(t=>{e.push(t)}),e}any(e){return this.throwIfDisposed(),e?this.where(e).length()>0:this.length()>0}all(e){return this.throwIfDisposed(),this.where(e).length()===this.length()}forEach(e){this.throwIfDisposed();for(let t=0;t<this.length();t++)e(this.privList[t],t)}select(e){this.throwIfDisposed();const t=[];for(let n=0;n<this.privList.length;n++)t.push(e(this.privList[n],n));return new i(t)}where(e){this.throwIfDisposed();const t=new i;for(let n=0;n<this.privList.length;n++)e(this.privList[n],n)&&t.add(this.privList[n]);return t}orderBy(e){this.throwIfDisposed();const t=this.toArray().sort(e);return new i(t)}orderByDesc(e){return this.throwIfDisposed(),this.orderBy((t,n)=>e(n,t))}clone(){return this.throwIfDisposed(),new i(this.toArray())}concat(e){return this.throwIfDisposed(),new i(this.privList.concat(e.toArray()))}concatArray(e){return this.throwIfDisposed(),new i(this.privList.concat(e))}isDisposed(){return null==this.privList}dispose(e){this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new r.IV("List",this.privDisposeReason)}triggerSubscriptions(e){if(e)for(const t in e)t&&e[t]()}}var s=n(4361),o=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})},a=(()=>(function(e){e[e.Dequeue=0]="Dequeue",e[e.Peek=1]="Peek"}(a||(a={})),a))();class c{constructor(e){this.privPromiseStore=new i,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=e||new i,this.privDetachables=[],this.privSubscribers=new i,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(e){this.throwIfDispose(),this.enqueueFromPromise(new Promise(t=>t(e)))}enqueueFromPromise(e){this.throwIfDispose(),e.then(e=>{this.privList.add(e)},()=>{})}dequeue(){this.throwIfDispose();const e=new s.BH;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:a.Dequeue}),this.drain()),e.promise}peek(){this.throwIfDispose();const e=new s.BH;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:a.Peek}),this.drain()),e.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return null==this.privSubscribers}drainAndDispose(e,t){return o(this,void 0,void 0,function*(){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=t,this.privIsDisposing=!0;const n=this.privSubscribers;if(n){for(;n.length()>0;)n.removeFirst().deferral.resolve(void 0);this.privSubscribers===n&&(this.privSubscribers=n)}for(const e of this.privDetachables)yield e.detach();if(this.privPromiseStore.length()>0&&e){const t=[];return this.privPromiseStore.toArray().forEach(e=>{t.push(e)}),Promise.all(t).finally(()=>{this.privSubscribers=null,this.privList.forEach(t=>{e(t)}),this.privList=null}).then()}this.privSubscribers=null,this.privList=null}})}dispose(e){return o(this,void 0,void 0,function*(){yield this.drainAndDispose(null,e)})}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const e=this.privSubscribers,t=this.privList;if(e&&t){for(;t.length()>0&&e.length()>0&&!this.privIsDisposing;){const n=e.removeFirst();if(n.type===a.Peek)n.deferral.resolve(t.first());else{const e=t.removeFirst();n.deferral.resolve(e)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===t&&(this.privList=t)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed()){if(this.privDisposeReason)throw new r.$2(this.privDisposeReason);throw new r.IV("Queue")}if(this.privIsDisposing)throw new r.$2("Queue disposing")}}},7266:(e,t,n)=>{"use strict";n.d(t,{S:()=>o});var r=n(4089),i=n(9877),s=n(1070);class o{constructor(e,t,n){if(this.privPayload=null,!t)throw new i.Do("payload");if(e===r.C.Binary&&"ArrayBuffer"!==t.__proto__.constructor.name)throw new i.$2("Payload must be ArrayBuffer");if(e===r.C.Text&&"string"!=typeof t)throw new i.$2("Payload must be a string");this.privMessageType=e,this.privPayload=t,this.privId=n||(0,s.Q)()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===r.C.Binary)throw new i.$2("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===r.C.Text)throw new i.$2("Not supported for text message");return this.privPayload}get id(){return this.privId}}},126:(e,t,n)=>{"use strict";n.d(t,{F:()=>o});var r=n(9877),i=n(1070),s=n(7817);class o{constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=e||(0,i.Q)(),this.privReaderQueue=new s.c}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch(t){}}read(){if(this.privIsReadEnded)throw new r.$2("Stream read has already finished");return this.privReaderQueue.dequeue().then(e=>{return t=this,void 0,r=function*(){return(void 0===e||e.isEnd)&&(yield this.privReaderQueue.dispose("End of stream reached")),e},new((n=void 0)||(n=Promise))(function(e,i){function s(e){try{a(r.next(e))}catch(t){i(t)}}function o(e){try{a(r.throw(e))}catch(t){i(t)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(s,o)}a((r=r.apply(t,[])).next())});var t,n,r})}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new s.c)}throwIfClosed(){if(this.privIsWriteEnded)throw new r.$2("Stream closed")}}},1660:(e,t,n)=>{"use strict";n.d(t,{rU:()=>N});class r{constructor(e,t){this.privActualSampleRate=e,this.privDesiredSampleRate=t}encode(e){const t=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!t)return null;const n=new ArrayBuffer(2*t.length),r=new DataView(n);return this.floatTo16BitPCM(r,0,t),n}setString(e,t,n){for(let r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))}floatTo16BitPCM(e,t,n){for(let r=0;r<n.length;r++,t+=2){const i=Math.max(-1,Math.min(1,n[r]));e.setInt16(t,i<0?32768*i:32767*i,!0)}}downSampleAudioFrame(e,t,n){if(!e)return null;if(n===t||n>t)return e;const r=t/n,i=Math.round(e.length/r),s=new Float32Array(i);let o=0,a=0;for(;a<i;){const t=Math.round((a+1)*r);let n=0,i=0;for(;o<t&&o<e.length;)n+=e[o++],i++;s[a++]=n/i}return s}}class i{constructor(e){this.privStopInputOnRelease=e}record(e,t,n){const i=new r(e.sampleRate,16e3),s=e.createMediaStreamSource(t),o=()=>{const r=(()=>{let t=0;try{return e.createScriptProcessor(t,1,1)}catch(n){t=2048;let r=e.sampleRate;for(;t<16384&&r>=32e3;)t<<=1,r>>=1;return e.createScriptProcessor(t,1,1)}})();r.onaudioprocess=e=>{const t=e.inputBuffer.getChannelData(0);if(n&&!n.isClosed){const e=i.encode(t);e&&n.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}},s.connect(r),r.connect(e.destination),this.privMediaResources={scriptProcessorNode:r,source:s,stream:t}};if(e.audioWorklet){if(!this.privSpeechProcessorScript){const e=new Blob(["class SP extends AudioWorkletProcessor {\n                    constructor(options) {\n                      super(options);\n                    }\n                    process(inputs, outputs) {\n                      const input = inputs[0];\n                      const output = [];\n                      for (let channel = 0; channel < input.length; channel += 1) {\n                        output[channel] = input[channel];\n                      }\n                      this.port.postMessage(output[0]);\n                      return true;\n                    }\n                  }\n                  registerProcessor('speech-processor', SP);"],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(e)}e.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const r=new AudioWorkletNode(e,"speech-processor");r.port.onmessage=e=>{if(n&&!n.isClosed){const t=i.encode(e.data);t&&n.writeStreamChunk({buffer:t,isEnd:!1,timeReceived:Date.now()})}},s.connect(r),r.connect(e.destination),this.privMediaResources={scriptProcessorNode:r,source:s,stream:t}}).catch(()=>{o()})}else try{o()}catch(a){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${a}`)}}releaseMediaResources(e){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(e=>e.stop()),this.privMediaResources.source=null))}setWorkletUrl(e){this.privSpeechProcessorScript=e}}var s=n(2292),o=n(1070),a=n(7895),c=n(4361),u=n(2480),l=n(126);class h extends l.F{constructor(e,t){super(t),this.privTargetChunkSize=e,this.privNextBufferReadyBytes=0}writeStreamChunk(e){if(e.isEnd||0===this.privNextBufferReadyBytes&&e.buffer.byteLength===this.privTargetChunkSize)return void super.writeStreamChunk(e);let t=0;for(;t<e.buffer.byteLength;){void 0===this.privNextBufferToWrite&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=e.timeReceived);const n=Math.min(e.buffer.byteLength-t,this.privTargetChunkSize-this.privNextBufferReadyBytes),r=new Uint8Array(this.privNextBufferToWrite),i=new Uint8Array(e.buffer.slice(t,n+t));r.set(i,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=n,t+=n,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){0===this.privNextBufferReadyBytes||this.isClosed||super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}}var d=n(6910),p=n(5978),f=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})};class v{constructor(e,t,n,r){this.privRecorder=e,this.deviceId=t,this.privStreams={},this.privOutputChunkSize=v.AUDIOFORMAT.avgBytesPerSec/10,this.privId=n||(0,o.Q)(),this.privEvents=new a.n,this.privMediaStream=r||null,this.privIsClosing=!1}get format(){return Promise.resolve(v.AUDIOFORMAT)}get blob(){return Promise.reject("Not implemented for Mic input")}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new c.BH;try{this.createAudioContext()}catch(n){return n instanceof Error?this.privInitializeDeferral.reject(n.name+": "+n.message):this.privInitializeDeferral.reject(n),this.privInitializeDeferral.promise}const e=window.navigator;let t=e.getUserMedia||e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia;if(e.mediaDevices&&(t=(t,n,r)=>{e.mediaDevices.getUserMedia(t).then(n).catch(r)}),t){const e=()=>{this.onEvent(new u.QZ(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new u.Jl(this.privId)),this.privInitializeDeferral.resolve()):t({audio:!this.deviceId||{deviceId:this.deviceId},video:!1},e=>{this.privMediaStream=e,this.onEvent(new u.Jl(this.privId)),this.privInitializeDeferral.resolve()},e=>{const t=`Error occurred during microphone initialization: ${e}`;this.privInitializeDeferral.reject(t),this.onEvent(new u.n0(this.privId,t))})};"suspended"===this.privContext.state?this.privContext.resume().then(e).catch(e=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${e}`)}):e()}else{const e="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(e),this.onEvent(new u.n0(e,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(e){return this.onEvent(new u.i5(this.privId,e)),this.listen(e).then(t=>(this.onEvent(new u.sQ(this.privId,e)),{detach:()=>f(this,void 0,void 0,function*(){return t.readEnded(),delete this.privStreams[e],this.onEvent(new u.He(this.privId,e)),this.turnOff()}),id:()=>e,read:()=>t.read()}))}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new u.He(this.privId,e)))}turnOff(){return f(this,void 0,void 0,function*(){for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&t.close()}this.onEvent(new u.ls(this.privId)),this.privInitializeDeferral&&(yield this.privInitializeDeferral,this.privInitializeDeferral=null),yield this.destroyAudioContext()})}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(e=>({bitspersample:v.AUDIOFORMAT.bitsPerSample,channelcount:v.AUDIOFORMAT.channels,connectivity:s.wF.Unknown,manufacturer:"Speech SDK",model:e,samplerate:v.AUDIOFORMAT.samplesPerSec,type:s.dt.Microphones}))}setProperty(e,t){if("MICROPHONE-WorkletSourceUrl"!==e)throw new Error("Property '"+e+"' is not supported on Microphone.");this.privRecorder.setWorkletUrl(t)}getMicrophoneLabel(){const e="microphone";if(void 0!==this.privMicrophoneLabel)return Promise.resolve(this.privMicrophoneLabel);if(void 0===this.privMediaStream||!this.privMediaStream.active)return Promise.resolve(e);this.privMicrophoneLabel=e;const t=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(void 0===t)return Promise.resolve(this.privMicrophoneLabel);const n=new c.BH;return navigator.mediaDevices.enumerateDevices().then(e=>{for(const n of e)if(n.deviceId===t){this.privMicrophoneLabel=n.label;break}n.resolve(this.privMicrophoneLabel)},()=>n.resolve(this.privMicrophoneLabel)),n.promise}listen(e){return f(this,void 0,void 0,function*(){yield this.turnOn();const t=new h(this.privOutputChunkSize,e);this.privStreams[e]=t;try{this.privRecorder.record(this.privContext,this.privMediaStream,t)}catch(n){throw this.onEvent(new u.hA(this.privId,e,n)),n}return t})}onEvent(e){this.privEvents.onEvent(e),d.z.instance.onEvent(e)}createAudioContext(){this.privContext||(this.privContext=p.Bm.getAudioContext(v.AUDIOFORMAT.samplesPerSec))}destroyAudioContext(){return f(this,void 0,void 0,function*(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let e=!1;"close"in this.privContext&&(e=!0),e?this.privIsClosing||(this.privIsClosing=!0,yield this.privContext.close(),this.privContext=null,this.privIsClosing=!1):null!==this.privContext&&"running"===this.privContext.state&&(yield this.privContext.suspend())})}}v.AUDIOFORMAT=p.HT.getDefaultInputFormat();var m=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})};class g{constructor(e,t,n){this.privStreams={},this.privHeaderEnd=44,this.privId=n||(0,o.Q)(),this.privEvents=new a.n,this.privSource=e,this.privFilename="undefined"!=typeof window&&"undefined"!=typeof Blob&&this.privSource instanceof Blob?e.name:t||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}get blob(){return Promise.resolve(this.privSource)}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const e=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new u.n0(e,"")),Promise.reject(e)}this.onEvent(new u.QZ(this.privId)),this.onEvent(new u.Jl(this.privId))}id(){return this.privId}attach(e){return m(this,void 0,void 0,function*(){this.onEvent(new u.i5(this.privId,e));const t=yield this.upload(e);return this.onEvent(new u.sQ(this.privId,e)),Promise.resolve({detach:()=>m(this,void 0,void 0,function*(){t.readEnded(),delete this.privStreams[e],this.onEvent(new u.He(this.privId,e)),yield this.turnOff()}),id:()=>e,read:()=>t.read()})})}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new u.He(this.privId,e)))}turnOff(){for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&!t.isClosed&&t.close()}return this.onEvent(new u.ls(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(e=>Promise.resolve({bitspersample:e.bitsPerSample,channelcount:e.channels,connectivity:s.wF.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:e.samplesPerSec,type:s.dt.File}))}readHeader(){const e=this.privSource.slice(0,512),t=new c.BH,n=e=>{const n=new DataView(e),r=e=>String.fromCharCode(n.getUint8(e),n.getUint8(e+1),n.getUint8(e+2),n.getUint8(e+3));if("RIFF"!==r(0))return void t.reject("Invalid WAV header in file, RIFF was not found");if("WAVE"!==r(8)||"fmt "!==r(12))return void t.reject("Invalid WAV header in file, WAVEfmt was not found");const i=n.getInt32(16,!0),s=n.getUint16(22,!0),o=n.getUint32(24,!0),a=n.getUint16(34,!0);let c=36+Math.max(i-16,0);for(;"data"!==r(c);c+=2)if(c>504)return void t.reject("Invalid WAV header in file, data block was not found");this.privHeaderEnd=c+8,t.resolve(p.HT.getWaveFormatPCM(o,a,s))};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&e instanceof Blob){const t=new FileReader;t.onload=e=>{n(e.target.result)},t.readAsArrayBuffer(e)}else n(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength));return t.promise}upload(e){return m(this,void 0,void 0,function*(){const t=t=>{const n=`Error occurred while processing '${this.privFilename}'. ${t}`;throw this.onEvent(new u.hA(this.privId,e,n)),new Error(n)};try{yield this.turnOn();const n=yield this.privAudioFormatPromise,r=new h(n.avgBytesPerSec/10,e);this.privStreams[e]=r;const i=this.privSource.slice(this.privHeaderEnd),s=e=>{r.isClosed||(r.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),r.close())};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&i instanceof Blob){const e=new FileReader;e.onerror=e=>t(e.toString()),e.onload=e=>{s(e.target.result)},e.readAsArrayBuffer(i)}else s(i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength));return r}catch(n){t(n)}})}onEvent(e){this.privEvents.onEvent(e),d.z.instance.onEvent(e)}}var y=n(3699),b=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})};class S{constructor(){}static createPushStream(e){return w.create(e)}static createPullStream(e,t){return C.create(e,t)}}class w extends S{static create(e){return new _(e)}}class _ extends w{constructor(e){super(),this.privFormat=void 0===e?p.Bm.getDefaultInputFormat():e,this.privEvents=new a.n,this.privId=(0,o.Q)(),this.privStream=new h(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(e){this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}get blob(){return this.attach("id").then(e=>{const t=[];let n=Buffer.from("");const r=()=>e.read().then(e=>!e||e.isEnd?"undefined"!=typeof XMLHttpRequest&&"undefined"!=typeof Blob?Promise.resolve(new Blob(t)):Promise.resolve(Buffer.from(n)):("undefined"!=typeof Blob?t.push(e.buffer):n=Buffer.concat([n,this.toBuffer(e.buffer)]),r()));return r()})}turnOn(){this.onEvent(new u.QZ(this.privId)),this.onEvent(new u.Jl(this.privId))}attach(e){return b(this,void 0,void 0,function*(){this.onEvent(new u.i5(this.privId,e)),yield this.turnOn();const t=this.privStream;return this.onEvent(new u.sQ(this.privId,e)),{detach:()=>b(this,void 0,void 0,function*(){return this.onEvent(new u.He(this.privId,e)),this.turnOff()}),id:()=>e,read:()=>t.read()}})}detach(e){this.onEvent(new u.He(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:s.wF.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:s.dt.Stream})}onEvent(e){this.privEvents.onEvent(e),d.z.instance.onEvent(e)}toBuffer(e){const t=Buffer.alloc(e.byteLength),n=new Uint8Array(e);for(let r=0;r<t.length;++r)t[r]=n[r];return t}}class C extends S{constructor(){super()}static create(e,t){return new T(e,t)}}class T extends C{constructor(e,t){super(),this.privFormat=void 0===t?p.HT.getDefaultInputFormat():t,this.privEvents=new a.n,this.privId=(0,o.Q)(),this.privCallback=e,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}get blob(){return Promise.reject("Not implemented")}turnOn(){this.onEvent(new u.QZ(this.privId)),this.onEvent(new u.Jl(this.privId))}attach(e){return b(this,void 0,void 0,function*(){return this.onEvent(new u.i5(this.privId,e)),yield this.turnOn(),this.onEvent(new u.sQ(this.privId,e)),{detach:()=>(this.privCallback.close(),this.onEvent(new u.He(this.privId,e)),this.turnOff()),id:()=>e,read:()=>{let e,t=0;for(;t<this.privBufferSize;){const n=new ArrayBuffer(this.privBufferSize-t),r=this.privCallback.read(n);if(void 0===e?e=n:new Int8Array(e).set(new Int8Array(n),t),0===r)break;t+=r}return Promise.resolve({buffer:e.slice(0,t),isEnd:this.privIsClosed||0===t,timeReceived:Date.now()})}}})}detach(e){this.onEvent(new u.He(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:s.wF.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:s.dt.Stream})}onEvent(e){this.privEvents.onEvent(e),d.z.instance.onEvent(e)}}var E=n(1883),x=n(6578),P=n(2916),k=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})};const R={[p.WY.PCM]:"audio/wav",[p.WY.MuLaw]:"audio/x-wav",[p.WY.MP3]:"audio/mpeg",[p.WY.OGG_OPUS]:"audio/ogg",[p.WY.WEBM_OPUS]:"audio/webm; codecs=opus",[p.WY.ALaw]:"audio/x-wav",[p.WY.FLAC]:"audio/flac"};class O{constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||(0,o.Q)(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(e,t,n){void 0!==this.privAudioBuffer?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then(()=>{t&&t()},e=>{n&&n(e)})):void 0!==this.privAudioOutputStream&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,t){if(this.privIsClosed=!0,void 0!==this.privSourceBuffer)this.handleSourceBufferUpdateEnd().then(()=>{e&&e()},e=>{t&&t(e)});else if(void 0!==this.privAudioOutputStream&&"undefined"!=typeof window)if(this.privFormat.formatTag!==p.WY.PCM&&this.privFormat.formatTag!==p.WY.MuLaw&&this.privFormat.formatTag!==p.WY.ALaw||!1!==this.privFormat.hasHeader){let n=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(n).then(()=>{n=E.E.addHeader(n,this.privFormat);const r=new Blob([n],{type:R[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(r),this.notifyPlayback().then(()=>{e&&e()},e=>{t&&t(e)})},e=>{t&&t(e)})}else console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else this.onAudioEnd&&this.onAudioEnd(this)}set format(e){if("undefined"!=typeof AudioContext||"undefined"!=typeof window&&void 0!==window.webkitAudioContext){this.privFormat=e;const t=R[this.privFormat.formatTag];void 0===t?console.warn(`Unknown mimeType for format ${p.WY[this.privFormat.formatTag]}; playback is not supported.`):"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported(t)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=1800,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(t),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(e=>{d.z.instance.onEvent(new x.u(e))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(e=>{d.z.instance.onEvent(new x.u(e))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(e=>{d.z.instance.onEvent(new x.u(e))})):(console.warn(`Format ${p.WY[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new P.NO,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var e,t;return null!==(t=null===(e=this.privAudio)||void 0===e?void 0:e.volume)&&void 0!==t?t:-1}set volume(e){this.privAudio&&(this.privAudio.volume=e)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return void 0!==this.privAudio?this.privAudio.currentTime:-1}pause(){this.privIsPaused||void 0===this.privAudio||(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,t){this.privIsPaused&&void 0!==this.privAudio&&(this.privAudio.play().then(()=>{e&&e()},e=>{t&&t(e)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}updateSourceBuffer(){return k(this,void 0,void 0,function*(){if(void 0!==this.privAudioBuffer&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const t=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(t)}catch(e){return this.privAudioBuffer.unshift(t),void console.log("buffer filled, pausing addition of binaries until space is made")}yield this.notifyPlayback()}else this.canEndStream()&&(yield this.handleSourceBufferUpdateEnd())})}handleSourceBufferUpdateEnd(){return k(this,void 0,void 0,function*(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),yield this.notifyPlayback())})}notifyPlayback(){return k(this,void 0,void 0,function*(){this.privPlaybackStarted||void 0===this.privAudio||(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||(yield this.privAudio.play()))})}canEndStream(){return this.isClosed&&void 0!==this.privSourceBuffer&&0===this.privAudioBuffer.length&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&"open"===this.privMediaSource.readyState}sourceBufferAvailable(){return void 0!==this.privSourceBuffer&&!this.privSourceBuffer.updating}}var I=n(576),A=n(3689);class N{static fromDefaultMicrophoneInput(){const e=new i(!0);return new D(new v(e))}static fromMicrophoneInput(e){const t=new i(!0);return new D(new v(t,e))}static fromWavFileInput(e,t="unnamedBuffer.wav"){return new D(new g(e,t))}static fromStreamInput(e){if(e instanceof class{})return new D(new T(e));if(e instanceof S)return new D(e);if("undefined"!=typeof MediaStream&&e instanceof MediaStream){const t=new i(!1);return new D(new v(t,null,null,e))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new M(new O)}static fromSpeakerOutput(e){if(void 0===e)return N.fromDefaultSpeakerOutput();if(e instanceof O)return new M(e);throw new Error("Not Supported Type")}static fromAudioFileOutput(e){return new M(new A.O(e))}static fromStreamOutput(e){if(e instanceof I.y)return new M(new P.KS(e));if(e instanceof P.XO)return new M(e);if(e instanceof P.Ao)return new M(e);throw new Error("Not Supported Type")}}class D extends N{constructor(e){super(),this.privSource=e}get format(){return this.privSource.format}close(e,t){this.privSource.turnOff().then(()=>{e&&e()},e=>{t&&t(e)})}id(){return this.privSource.id()}get blob(){return this.privSource.blob}turnOn(){return this.privSource.turnOn()}attach(e){return this.privSource.attach(e)}detach(e){return this.privSource.detach(e)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(e,t){if(y.a.throwIfNull(t,"value"),void 0===this.privSource.setProperty)throw new Error("This AudioConfig instance does not support setting properties.");this.privSource.setProperty(e,t)}getProperty(e,t){if(void 0!==this.privSource.getProperty)return this.privSource.getProperty(e,t);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}class M extends N{constructor(e){super(),this.privDestination=e}set format(e){this.privDestination.format=e}write(e){this.privDestination.write(e)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}},3689:(e,t,n)=>{"use strict";n.d(t,{O:()=>s});var r=n(592),i=n(3699);class s{constructor(e){i.a.throwIfNullOrUndefined(r.openSync,"\nFile System access not available, please use Push or PullAudioOutputStream"),this.privFd=r.openSync(e,"w")}set format(e){i.a.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let t=0;this.privAudioFormat.hasHeader&&(t=this.privAudioFormat.header.byteLength),void 0!==this.privFd&&(this.privWriteStream=r.createWriteStream("",{fd:this.privFd,start:t,autoClose:!1}))}write(e){i.a.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),void 0!==this.privWriteStream&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){void 0!==this.privFd&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),r.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),r.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}}},9390:(e,t,n)=>{"use strict";n.d(t,{d:()=>s});var r=n(9816),i=n(5978);class s extends i.Bm{constructor(e,t,n,r,i,s,o,a,c){super(n,s,t,e),this.formatTag=e,this.avgBytesPerSec=r,this.blockAlign=i,this.priAudioFormatString=o,this.priRequestAudioFormatString=a,this.priHasHeader=c}static fromSpeechSynthesisOutputFormat(e){return void 0===e?s.getDefaultOutputFormat():s.fromSpeechSynthesisOutputFormatString(s.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new s(i.WY.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new s(i.WY.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new s(i.WY.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new s(i.WY.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new s(i.WY.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new s(i.WY.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new s(i.WY.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new s(i.WY.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new s(i.WY.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new s(i.WY.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new s(i.WY.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new s(i.WY.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new s(i.WY.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new s(i.WY.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new s(i.WY.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new s(i.WY.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new s(i.WY.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new s(i.WY.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new s(i.WY.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new s(i.WY.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new s(i.WY.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new s(i.WY.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new s(i.WY.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new s(i.WY.WEBM_OPUS,1,16e3,4e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new s(i.WY.WEBM_OPUS,1,24e3,6e3,2,16,e,e,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new s(i.WY.WEBM_OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new s(i.WY.OPUS,1,16e3,4e3,2,16,e,e,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new s(i.WY.OPUS,1,24e3,6e3,2,16,e,e,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new s(i.WY.OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-24khz-16bit-mono-flac":return new s(i.WY.FLAC,1,24e3,24e3,2,16,e,e,!1);case"audio-48khz-16bit-mono-flac":return new s(i.WY.FLAC,1,48e3,3e4,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new s(i.WY.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new s(i.WY.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new s(i.WY.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new s(i.WY.PCM,1,22050,44100,2,16,e,e,!1);case"riff-22050hz-16bit-mono-pcm":return new s(i.WY.PCM,1,22050,44100,2,16,e,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new s(i.WY.PCM,1,44100,88200,2,16,e,e,!1);case"riff-44100hz-16bit-mono-pcm":return new s(i.WY.PCM,1,44100,88200,2,16,e,"raw-44100hz-16bit-mono-pcm",!0);case"riff-16khz-16bit-mono-pcm":default:return new s(i.WY.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return s.fromSpeechSynthesisOutputFormatString("undefined"!=typeof window?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){if(this.priHasHeader){const t=new DataView(this.privHeader);t.setUint32(4,e+this.privHeader.byteLength-8,!0),t.setUint32(40,e,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}}s.SpeechSynthesisOutputFormatToString={[r.Y.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[r.Y.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[r.Y.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[r.Y.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[r.Y.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[r.Y.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[r.Y.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[r.Y.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[r.Y.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[r.Y.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[r.Y.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[r.Y.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[r.Y.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[r.Y.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[r.Y.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[r.Y.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[r.Y.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[r.Y.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[r.Y.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[r.Y.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[r.Y.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[r.Y.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[r.Y.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[r.Y.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[r.Y.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[r.Y.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[r.Y.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[r.Y.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[r.Y.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[r.Y.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[r.Y.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[r.Y.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[r.Y.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[r.Y.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[r.Y.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[r.Y.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[r.Y.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm"}},2916:(e,t,n)=>{"use strict";n.d(t,{Ao:()=>c,NO:()=>u,XO:()=>l,KS:()=>h});var r=n(1070),i=n(126),s=n(3699),o=n(9390);class a{constructor(){}static createPullStream(){return c.create()}}class c extends a{static create(){return new u}}class u extends c{constructor(){super(),this.privId=(0,r.Q)(),this.privStream=new i.F}set format(e){null==e&&(this.privFormat=o.d.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}read(e){return t=this,void 0,r=function*(){const t=new Int8Array(e);let n=0;if(void 0!==this.privLastChunkView){if(this.privLastChunkView.length>e.byteLength)return t.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);t.set(this.privLastChunkView),n=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;n<e.byteLength&&!this.privStream.isReadEnded;){const r=yield this.privStream.read();if(void 0===r||r.isEnd)this.privStream.readEnded();else{let i;r.buffer.byteLength>e.byteLength-n?(i=r.buffer.slice(0,e.byteLength-n),this.privLastChunkView=new Int8Array(r.buffer.slice(e.byteLength-n))):i=r.buffer,t.set(new Int8Array(i),n),n+=i.byteLength}}return n},new((n=void 0)||(n=Promise))(function(e,i){function s(e){try{a(r.next(e))}catch(t){i(t)}}function o(e){try{a(r.throw(e))}catch(t){i(t)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(s,o)}a((r=r.apply(t,[])).next())});var t,n,r}write(e){s.a.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}class l extends a{constructor(){super()}static create(e){return new h(e)}}class h extends l{constructor(e){super(),this.privId=(0,r.Q)(),this.privCallback=e}set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}},5978:(e,t,n)=>{"use strict";n.d(t,{WY:()=>r,HT:()=>i,Bm:()=>s});var r=(()=>(function(e){e[e.PCM=1]="PCM",e[e.MuLaw=2]="MuLaw",e[e.Siren=3]="Siren",e[e.MP3=4]="MP3",e[e.SILKSkype=5]="SILKSkype",e[e.OGG_OPUS=6]="OGG_OPUS",e[e.WEBM_OPUS=7]="WEBM_OPUS",e[e.ALaw=8]="ALaw",e[e.FLAC=9]="FLAC",e[e.OPUS=10]="OPUS"}(r||(r={})),r))();class i{static getDefaultInputFormat(){return s.getDefaultInputFormat()}static getWaveFormat(e,t,n,r){return new s(e,t,n,r)}static getWaveFormatPCM(e,t,n){return new s(e,t,n)}}class s extends i{constructor(e=16e3,t=16,n=1,i=r.PCM){super();let s=!0;switch(i){case r.PCM:this.formatTag=1;break;case r.ALaw:this.formatTag=6;break;case r.MuLaw:this.formatTag=7;break;default:s=!1}if(this.bitsPerSample=t,this.samplesPerSec=e,this.channels=n,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),s){this.privHeader=new ArrayBuffer(44);const e=new DataView(this.privHeader);this.setString(e,0,"RIFF"),e.setUint32(4,0,!0),this.setString(e,8,"WAVEfmt "),e.setUint32(16,16,!0),e.setUint16(20,this.formatTag,!0),e.setUint16(22,this.channels,!0),e.setUint32(24,this.samplesPerSec,!0),e.setUint32(28,this.avgBytesPerSec,!0),e.setUint16(32,this.channels*(this.bitsPerSample/8),!0),e.setUint16(34,this.bitsPerSample,!0),this.setString(e,36,"data"),e.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new s}static getAudioContext(e){const t=window.AudioContext||window.webkitAudioContext||!1;if(t)return void 0!==e&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new t({sampleRate:e}):new t;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(e,t,n){for(let r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))}}},576:(e,t,n)=>{"use strict";n.d(t,{y:()=>r});class r{}},3512:(e,t,n)=>{"use strict";n.d(t,{E:()=>r});var r=(()=>(function(e){e[e.NoError=0]="NoError",e[e.AuthenticationFailure=1]="AuthenticationFailure",e[e.BadRequestParameters=2]="BadRequestParameters",e[e.TooManyRequests=3]="TooManyRequests",e[e.ConnectionFailure=4]="ConnectionFailure",e[e.ServiceTimeout=5]="ServiceTimeout",e[e.ServiceError=6]="ServiceError",e[e.RuntimeError=7]="RuntimeError",e[e.Forbidden=8]="Forbidden"}(r||(r={})),r))()},8422:(e,t,n)=>{"use strict";n.d(t,{_:()=>r});var r=(()=>(function(e){e[e.Error=0]="Error",e[e.EndOfStream=1]="EndOfStream"}(r||(r={})),r))()},3699:(e,t,n)=>{"use strict";n.d(t,{a:()=>r});class r{static throwIfNullOrUndefined(e,t){if(null==e)throw new Error("throwIfNullOrUndefined:"+t)}static throwIfNull(e,t){if(null===e)throw new Error("throwIfNull:"+t)}static throwIfNullOrWhitespace(e,t){if(r.throwIfNullOrUndefined(e,t),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+t)}static throwIfDisposed(e){if(e)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,t){if(r.throwIfNullOrUndefined(e,t),0===e.length)throw new Error("throwIfArrayEmptyOrWhitespace:"+t);for(const n of e)r.throwIfNullOrWhitespace(n,t)}static throwIfFileDoesNotExist(e,t){r.throwIfNullOrWhitespace(e,t)}static throwIfNotUndefined(e,t){if(void 0!==e)throw new Error("throwIfNotUndefined:"+t)}}},2373:(e,t,n)=>{"use strict";n.d(t,{W:()=>r});var r=(()=>(function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(r||(r={})),r))()},5517:(e,t,n)=>{"use strict";n.d(t,{O:()=>i});var r=n(9484);class i{constructor(){this.privKeys=[],this.privValues=[]}getProperty(e,t){let n;n="string"==typeof e?e:r.o[e];for(let r=0;r<this.privKeys.length;r++)if(this.privKeys[r]===n)return this.privValues[r];if(void 0!==t)return String(t)}setProperty(e,t){let n;n="string"==typeof e?e:r.o[e];for(let r=0;r<this.privKeys.length;r++)if(this.privKeys[r]===n)return void(this.privValues[r]=t);this.privKeys.push(n),this.privValues.push(t)}clone(){const e=new i;for(let t=0;t<this.privKeys.length;t++)e.privKeys.push(this.privKeys[t]),e.privValues.push(this.privValues[t]);return e}mergeTo(e){this.privKeys.forEach(t=>{if(void 0===e.getProperty(t,void 0)){const n=this.getProperty(t);e.setProperty(t,n)}})}get keys(){return this.privKeys}}},9484:(e,t,n)=>{"use strict";n.d(t,{o:()=>r});var r=(()=>(function(e){e[e.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",e[e.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",e[e.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",e[e.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",e[e.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",e[e.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",e[e.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",e[e.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",e[e.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",e[e.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",e[e.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",e[e.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",e[e.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",e[e.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",e[e.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",e[e.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",e[e.Speech_SessionId=16]="Speech_SessionId",e[e.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",e[e.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",e[e.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",e[e.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",e[e.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",e[e.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",e[e.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",e[e.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",e[e.CancellationDetails_Reason=25]="CancellationDetails_Reason",e[e.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",e[e.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",e[e.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",e[e.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",e[e.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",e[e.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",e[e.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",e[e.SpeechServiceConnection_EnableAudioLogging=33]="SpeechServiceConnection_EnableAudioLogging",e[e.SpeechServiceConnection_AtStartLanguageIdPriority=34]="SpeechServiceConnection_AtStartLanguageIdPriority",e[e.SpeechServiceConnection_ContinuousLanguageIdPriority=35]="SpeechServiceConnection_ContinuousLanguageIdPriority",e[e.SpeechServiceConnection_RecognitionEndpointVersion=36]="SpeechServiceConnection_RecognitionEndpointVersion",e[e.SpeechServiceResponse_ProfanityOption=37]="SpeechServiceResponse_ProfanityOption",e[e.SpeechServiceResponse_PostProcessingOption=38]="SpeechServiceResponse_PostProcessingOption",e[e.SpeechServiceResponse_RequestWordLevelTimestamps=39]="SpeechServiceResponse_RequestWordLevelTimestamps",e[e.SpeechServiceResponse_StablePartialResultThreshold=40]="SpeechServiceResponse_StablePartialResultThreshold",e[e.SpeechServiceResponse_OutputFormatOption=41]="SpeechServiceResponse_OutputFormatOption",e[e.SpeechServiceResponse_TranslationRequestStablePartialResult=42]="SpeechServiceResponse_TranslationRequestStablePartialResult",e[e.SpeechServiceResponse_RequestWordBoundary=43]="SpeechServiceResponse_RequestWordBoundary",e[e.SpeechServiceResponse_RequestPunctuationBoundary=44]="SpeechServiceResponse_RequestPunctuationBoundary",e[e.SpeechServiceResponse_RequestSentenceBoundary=45]="SpeechServiceResponse_RequestSentenceBoundary",e[e.Conversation_ApplicationId=46]="Conversation_ApplicationId",e[e.Conversation_DialogType=47]="Conversation_DialogType",e[e.Conversation_Initial_Silence_Timeout=48]="Conversation_Initial_Silence_Timeout",e[e.Conversation_From_Id=49]="Conversation_From_Id",e[e.Conversation_Conversation_Id=50]="Conversation_Conversation_Id",e[e.Conversation_Custom_Voice_Deployment_Ids=51]="Conversation_Custom_Voice_Deployment_Ids",e[e.Conversation_Speech_Activity_Template=52]="Conversation_Speech_Activity_Template",e[e.Conversation_Request_Bot_Status_Messages=53]="Conversation_Request_Bot_Status_Messages",e[e.Conversation_Agent_Connection_Id=54]="Conversation_Agent_Connection_Id",e[e.SpeechServiceConnection_Host=55]="SpeechServiceConnection_Host",e[e.ConversationTranslator_Host=56]="ConversationTranslator_Host",e[e.ConversationTranslator_Name=57]="ConversationTranslator_Name",e[e.ConversationTranslator_CorrelationId=58]="ConversationTranslator_CorrelationId",e[e.ConversationTranslator_Token=59]="ConversationTranslator_Token",e[e.PronunciationAssessment_ReferenceText=60]="PronunciationAssessment_ReferenceText",e[e.PronunciationAssessment_GradingSystem=61]="PronunciationAssessment_GradingSystem",e[e.PronunciationAssessment_Granularity=62]="PronunciationAssessment_Granularity",e[e.PronunciationAssessment_EnableMiscue=63]="PronunciationAssessment_EnableMiscue",e[e.PronunciationAssessment_Json=64]="PronunciationAssessment_Json",e[e.PronunciationAssessment_Params=65]="PronunciationAssessment_Params",e[e.SpeakerRecognition_Api_Version=66]="SpeakerRecognition_Api_Version"}(r||(r={})),r))()},741:(e,t,n)=>{"use strict";n.d(t,{s:()=>r});var r=(()=>(function(e){e[e.NoMatch=0]="NoMatch",e[e.Canceled=1]="Canceled",e[e.RecognizingSpeech=2]="RecognizingSpeech",e[e.RecognizedSpeech=3]="RecognizedSpeech",e[e.RecognizedKeyword=4]="RecognizedKeyword",e[e.RecognizingIntent=5]="RecognizingIntent",e[e.RecognizedIntent=6]="RecognizedIntent",e[e.TranslatingSpeech=7]="TranslatingSpeech",e[e.TranslatedSpeech=8]="TranslatedSpeech",e[e.SynthesizingAudio=9]="SynthesizingAudio",e[e.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",e[e.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",e[e.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",e[e.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",e[e.RecognizedSpeakers=14]="RecognizedSpeakers",e[e.RecognizedSpeaker=15]="RecognizedSpeaker",e[e.ResetVoiceProfile=16]="ResetVoiceProfile",e[e.DeletedVoiceProfile=17]="DeletedVoiceProfile",e[e.VoicesListRetrieved=18]="VoicesListRetrieved"}(r||(r={})),r))()},3662:(e,t,n)=>{"use strict";n.d(t,{c:()=>l});var r=n(8230),i=n(3699),s=(()=>(function(e){e[e.Masked=0]="Masked",e[e.Removed=1]="Removed",e[e.Raw=2]="Raw"}(s||(s={})),s))(),o=n(9484),a=n(5517),c=n(2373),u=n(9816);class l{constructor(){}static fromSubscription(e,t){i.a.throwIfNullOrWhitespace(e,"subscriptionKey"),i.a.throwIfNullOrWhitespace(t,"region");const n=new h;return n.setProperty(o.o.SpeechServiceConnection_Region,t),n.setProperty(o.o.SpeechServiceConnection_IntentRegion,t),n.setProperty(o.o.SpeechServiceConnection_Key,e),n}static fromEndpoint(e,t){i.a.throwIfNull(e,"endpoint");const n=new h;return n.setProperty(o.o.SpeechServiceConnection_Endpoint,e.href),void 0!==t&&n.setProperty(o.o.SpeechServiceConnection_Key,t),n}static fromHost(e,t){i.a.throwIfNull(e,"hostName");const n=new h;return n.setProperty(o.o.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&n.setProperty(o.o.SpeechServiceConnection_Key,t),n}static fromAuthorizationToken(e,t){i.a.throwIfNull(e,"authorizationToken"),i.a.throwIfNullOrWhitespace(t,"region");const n=new h;return n.setProperty(o.o.SpeechServiceConnection_Region,t),n.setProperty(o.o.SpeechServiceConnection_IntentRegion,t),n.authorizationToken=e,n}close(){}}class h extends l{constructor(){super(),this.privProperties=new a.O,this.speechRecognitionLanguage="en-US",this.outputFormat=c.W.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(o.o.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(o.o.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(o.o.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(o.o.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.privProperties.setProperty(o.o.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return this.privProperties.getProperty(o.o.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(e){this.privProperties.setProperty(o.o.SpeechServiceConnection_RecoLanguage,e)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(o.o.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(e){this.privProperties.setProperty(o.o.SpeechServiceConnection_AutoDetectSourceLanguages,e)}get outputFormat(){return c.W[this.privProperties.getProperty(r.xv,void 0)]}set outputFormat(e){this.privProperties.setProperty(r.xv,c.W[e])}get endpointId(){return this.privProperties.getProperty(o.o.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privProperties.setProperty(o.o.SpeechServiceConnection_EndpointId,e)}setProperty(e,t){i.a.throwIfNull(t,"value"),this.privProperties.setProperty(e,t)}getProperty(e,t){return this.privProperties.getProperty(e,t)}setProxy(e,t,n,r){this.setProperty(o.o[o.o.SpeechServiceConnection_ProxyHostName],e),this.setProperty(o.o[o.o.SpeechServiceConnection_ProxyPort],t),this.setProperty(o.o[o.o.SpeechServiceConnection_ProxyUserName],n),this.setProperty(o.o[o.o.SpeechServiceConnection_ProxyPassword],r)}setServiceProperty(e,t){const n=JSON.parse(this.privProperties.getProperty(r.XP,"{}"));n[e]=t,this.privProperties.setProperty(r.XP,JSON.stringify(n))}setProfanity(e){this.privProperties.setProperty(o.o.SpeechServiceResponse_ProfanityOption,s[e])}enableAudioLogging(){this.privProperties.setProperty(o.o.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(o.o.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(r.CI,"true")}clone(){const e=new h;return e.privProperties=this.privProperties.clone(),e}get speechSynthesisLanguage(){return this.privProperties.getProperty(o.o.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privProperties.setProperty(o.o.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(o.o.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privProperties.setProperty(o.o.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return u.Y[this.privProperties.getProperty(o.o.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privProperties.setProperty(o.o.SpeechServiceConnection_SynthOutputFormat,u.Y[e])}}},9816:(e,t,n)=>{"use strict";n.d(t,{Y:()=>r});var r=(()=>(function(e){e[e.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",e[e.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",e[e.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",e[e.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",e[e.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",e[e.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",e[e.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",e[e.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",e[e.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",e[e.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",e[e.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",e[e.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",e[e.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",e[e.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",e[e.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",e[e.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",e[e.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",e[e.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",e[e.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",e[e.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",e[e.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",e[e.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",e[e.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",e[e.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",e[e.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",e[e.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",e[e.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",e[e.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",e[e.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",e[e.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",e[e.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",e[e.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",e[e.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",e[e.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",e[e.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",e[e.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",e[e.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm"}(r||(r={})),r))()},4909:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});class r{constructor(e,t,n,r){this.privResultId=e,this.privReason=t,this.privErrorDetails=n,this.privProperties=r}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}},805:(e,t,n)=>{parcelRequire=function(t,r,i,s){var o,a="function"==typeof parcelRequire&&parcelRequire;function c(e,i){if(!r[e]){if(!t[e]){var s="function"==typeof parcelRequire&&parcelRequire;if(!i&&s)return s(e,!0);if(a)return a(e,!0);if("string"==typeof e)return n(5784)(e);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}l.resolve=function(n){return t[e][1][n]||n},l.cache={};var u=r[e]=new c.Module(e);t[e][0].call(u.exports,l,u,u.exports,this)}return r[e].exports;function l(e){return c(l.resolve(e))}}c.isParcelRequire=!0,c.Module=function(e){this.id=e,this.bundle=c,this.exports={}},c.modules=t,c.cache=r,c.parent=a,c.register=function(e,n){t[e]=[function(e,t){t.exports=n},{}]};for(var u=0;u<i.length;u++)try{c(i[u])}catch(t){o||(o=t)}if(i.length){var l=c(i[i.length-1]);e.exports=l}if(parcelRequire=c,o)throw o;return c}({EgBh:[function(e,t,n){var r={};r.useBlobBuilder=function(){try{return new Blob([]),!1}catch(r){return!0}}(),r.useArrayBufferView=!r.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(r){return!0}}(),t.exports.binaryFeatures=r;var i=t.exports.BlobBuilder;function s(){this._pieces=[],this._parts=[]}"undefined"!=typeof window&&(i=t.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),s.prototype.append=function(e){"number"==typeof e?this._pieces.push(e):(this.flush(),this._parts.push(e))},s.prototype.flush=function(){if(this._pieces.length>0){var e=new Uint8Array(this._pieces);r.useArrayBufferView||(e=e.buffer),this._parts.push(e),this._pieces=[]}},s.prototype.getBuffer=function(){if(this.flush(),r.useBlobBuilder){for(var e=new i,t=0,n=this._parts.length;t<n;t++)e.append(this._parts[t]);return e.getBlob()}return new Blob(this._parts)},t.exports.BufferBuilder=s},{}],kdPp:[function(e,t,n){var r=e("./bufferbuilder").BufferBuilder,i=e("./bufferbuilder").binaryFeatures;function s(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function o(){this.bufferBuilder=new r}function a(e){var t=e.charCodeAt(0);return t<=2047?"00":t<=65535?"000":t<=2097151?"0000":t<=67108863?"00000":"000000"}t.exports={unpack:function(e){return new s(e).unpack()},pack:function(e){var t=new o;return t.pack(e),t.getBuffer()}},s.prototype.unpack=function(){var e,t=this.unpack_uint8();if(t<128)return t;if((224^t)<32)return(224^t)-32;if((e=160^t)<=15)return this.unpack_raw(e);if((e=176^t)<=15)return this.unpack_string(e);if((e=144^t)<=15)return this.unpack_array(e);if((e=128^t)<=15)return this.unpack_map(e);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:case 213:case 214:case 215:return;case 216:return e=this.unpack_uint16(),this.unpack_string(e);case 217:return e=this.unpack_uint32(),this.unpack_string(e);case 218:return e=this.unpack_uint16(),this.unpack_raw(e);case 219:return e=this.unpack_uint32(),this.unpack_raw(e);case 220:return e=this.unpack_uint16(),this.unpack_array(e);case 221:return e=this.unpack_uint32(),this.unpack_array(e);case 222:return e=this.unpack_uint16(),this.unpack_map(e);case 223:return e=this.unpack_uint32(),this.unpack_map(e)}},s.prototype.unpack_uint8=function(){var e=255&this.dataView[this.index];return this.index++,e},s.prototype.unpack_uint16=function(){var e=this.read(2),t=256*(255&e[0])+(255&e[1]);return this.index+=2,t},s.prototype.unpack_uint32=function(){var e=this.read(4),t=256*(256*(256*e[0]+e[1])+e[2])+e[3];return this.index+=4,t},s.prototype.unpack_uint64=function(){var e=this.read(8),t=256*(256*(256*(256*(256*(256*(256*e[0]+e[1])+e[2])+e[3])+e[4])+e[5])+e[6])+e[7];return this.index+=8,t},s.prototype.unpack_int8=function(){var e=this.unpack_uint8();return e<128?e:e-256},s.prototype.unpack_int16=function(){var e=this.unpack_uint16();return e<32768?e:e-65536},s.prototype.unpack_int32=function(){var e=this.unpack_uint32();return e<Math.pow(2,31)?e:e-Math.pow(2,32)},s.prototype.unpack_int64=function(){var e=this.unpack_uint64();return e<Math.pow(2,63)?e:e-Math.pow(2,64)},s.prototype.unpack_raw=function(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+e+" "+this.length);var t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t},s.prototype.unpack_string=function(e){for(var t,n,r=this.read(e),i=0,s="";i<e;)(t=r[i])<128?(s+=String.fromCharCode(t),i++):(192^t)<32?(n=(192^t)<<6|63&r[i+1],s+=String.fromCharCode(n),i+=2):(n=(15&t)<<12|(63&r[i+1])<<6|63&r[i+2],s+=String.fromCharCode(n),i+=3);return this.index+=e,s},s.prototype.unpack_array=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=this.unpack();return t},s.prototype.unpack_map=function(e){for(var t={},n=0;n<e;n++){var r=this.unpack(),i=this.unpack();t[r]=i}return t},s.prototype.unpack_float=function(){var e=this.unpack_uint32();return(0==e>>31?1:-1)*(8388607&e|8388608)*Math.pow(2,(e>>23&255)-127-23)},s.prototype.unpack_double=function(){var e=this.unpack_uint32(),t=this.unpack_uint32(),n=(e>>20&2047)-1023;return(0==e>>31?1:-1)*((1048575&e|1048576)*Math.pow(2,n-20)+t*Math.pow(2,n-52))},s.prototype.read=function(e){var t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")},o.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},o.prototype.pack=function(e){var t=typeof e;if("string"===t)this.pack_string(e);else if("number"===t)Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if("boolean"===t)!0===e?this.bufferBuilder.append(195):!1===e&&this.bufferBuilder.append(194);else if("undefined"===t)this.bufferBuilder.append(192);else{if("object"!==t)throw new Error('Type "'+t+'" not yet supported');if(null===e)this.bufferBuilder.append(192);else{var n=e.constructor;if(n==Array)this.pack_array(e);else if(n==Blob||n==File||e instanceof Blob||e instanceof File)this.pack_bin(e);else if(n==ArrayBuffer)this.pack_bin(i.useArrayBufferView?new Uint8Array(e):e);else if("BYTES_PER_ELEMENT"in e)this.pack_bin(i.useArrayBufferView?new Uint8Array(e.buffer):e.buffer);else if(n==Object||n.toString().startsWith("class"))this.pack_object(e);else if(n==Date)this.pack_string(e.toString());else{if("function"!=typeof e.toBinaryPack)throw new Error('Type "'+n.toString()+'" not yet supported');this.bufferBuilder.append(e.toBinaryPack())}}}this.bufferBuilder.flush()},o.prototype.pack_bin=function(e){var t=e.length||e.byteLength||e.size;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this.bufferBuilder.append(218),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(t)}this.bufferBuilder.append(e)},o.prototype.pack_string=function(e){var t=function(e){return e.length>600?new Blob([e]).size:e.replace(/[^\u0000-\u007F]/g,a).length}(e);if(t<=15)this.pack_uint8(176+t);else if(t<=65535)this.bufferBuilder.append(216),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(t)}this.bufferBuilder.append(e)},o.prototype.pack_array=function(e){var t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this.bufferBuilder.append(220),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(t)}for(var n=0;n<t;n++)this.pack(e[n])},o.prototype.pack_integer=function(e){if(e>=-32&&e<=127)this.bufferBuilder.append(255&e);else if(e>=0&&e<=255)this.bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this.bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this.bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this.bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this.bufferBuilder.append(210),this.pack_int32(e);else if(e>=-0x8000000000000000&&e<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(e);else{if(!(e>=0&&e<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(e)}},o.prototype.pack_double=function(e){var t=0;e<0&&(t=1,e=-e);var n=Math.floor(Math.log(e)/Math.LN2),r=e/Math.pow(2,n)-1,i=Math.floor(r*Math.pow(2,52)),s=Math.pow(2,32),o=t<<31|n+1023<<20|i/s&1048575,a=i%s;this.bufferBuilder.append(203),this.pack_int32(o),this.pack_int32(a)},o.prototype.pack_object=function(e){var t=Object.keys(e).length;if(t<=15)this.pack_uint8(128+t);else if(t<=65535)this.bufferBuilder.append(222),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(t)}for(var n in e)e.hasOwnProperty(n)&&(this.pack(n),this.pack(e[n]))},o.prototype.pack_uint8=function(e){this.bufferBuilder.append(e)},o.prototype.pack_uint16=function(e){this.bufferBuilder.append(e>>8),this.bufferBuilder.append(255&e)},o.prototype.pack_uint32=function(e){var t=4294967295&e;this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)},o.prototype.pack_uint64=function(e){var t=e/Math.pow(2,32),n=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&n)>>>24),this.bufferBuilder.append((16711680&n)>>>16),this.bufferBuilder.append((65280&n)>>>8),this.bufferBuilder.append(255&n)},o.prototype.pack_int8=function(e){this.bufferBuilder.append(255&e)},o.prototype.pack_int16=function(e){this.bufferBuilder.append((65280&e)>>8),this.bufferBuilder.append(255&e)},o.prototype.pack_int32=function(e){this.bufferBuilder.append(e>>>24&255),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)},o.prototype.pack_int64=function(e){var t=Math.floor(e/Math.pow(2,32)),n=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&n)>>>24),this.bufferBuilder.append((16711680&n)>>>16),this.bufferBuilder.append((65280&n)>>>8),this.bufferBuilder.append(255&n)}},{"./bufferbuilder":"EgBh"}],iSxC:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.extractVersion=o,n.wrapPeerConnectionEvent=function(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var s=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,s),i.apply(this,[e,s])};var s=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(n))return s.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,s.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}},n.disableLog=function(e){return"boolean"!=typeof e?new Error("Argument type: "+r(e)+". Please use a boolean."):(i=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},n.disableWarnings=function(e){return"boolean"!=typeof e?new Error("Argument type: "+r(e)+". Please use a boolean."):(s=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},n.log=function(){if("object"===("undefined"==typeof window?"undefined":r(window))){if(i)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},n.deprecated=function(e,t){s&&console.warn(e+" is deprecated, please use "+t+" instead.")},n.detectBrowser=function(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=o(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=o(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=o(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=o(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t},n.compactObject=function e(t){return a(t)?Object.keys(t).reduce(function(n,r){var i=a(t[r]),s=i?e(t[r]):t[r],o=i&&!Object.keys(s).length;return void 0===s||o?n:Object.assign(n,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},r,s))},{}):t},n.walkStats=c,n.filterStats=function(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var s=[];return e.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&s.push(e)}),s.forEach(function(t){e.forEach(function(n){n.type===r&&n.trackId===t.id&&c(e,n,i)})}),i};var i=!0,s=!0;function o(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function a(e){return"[object Object]"===Object.prototype.toString.call(e)}function c(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach(function(r){r.endsWith("Id")?c(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(function(t){c(e,e.get(t),n)})}))}},{}],s6SN:[function(e,t,n){"use strict";function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetUserMedia=function(e,t){var n=e&&e.navigator;if(n.mediaDevices){var r=function(e){if("object"!==i(e)||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"===i(e[n])?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var s=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[s("min",n)]=r.ideal,t.optional.push(o),(o={})[s("max",n)]=r.ideal,t.optional.push(o)):(o[s("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[s("",n)]=r.exact):["min","max"].forEach(function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[s(e,n)]=r[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},o=function(e,o){if(t.version>=61)return o(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===i(e.audio)){var a=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};a((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),a(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"===i(e.video)){var c=e.video.facingMode;c=c&&("object"===i(c)?c:{ideal:c});var u,l=t.version<66;if(c&&("user"===c.exact||"environment"===c.exact||"user"===c.ideal||"environment"===c.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||l)&&(delete e.video.facingMode,"environment"===c.exact||"environment"===c.ideal?u=["back","rear"]:"user"!==c.exact&&"user"!==c.ideal||(u=["front"]),u))return n.mediaDevices.enumerateDevices().then(function(t){var n=(t=t.filter(function(e){return"videoinput"===e.kind})).find(function(e){return u.some(function(t){return e.label.toLowerCase().includes(t)})});return!n&&t.length&&u.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=c.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=r(e.video),s("chrome: "+JSON.stringify(e)),o(e)});e.video=r(e.video)}return s("chrome: "+JSON.stringify(e)),o(e)},a=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=(function(e,t,r){o(e,function(e){n.webkitGetUserMedia(e,t,function(e){r&&r(a(e))})})}).bind(n),n.mediaDevices.getUserMedia){var c=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return o(e,function(e){return c(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return t},function(e){return Promise.reject(a(e))})})}}}};var s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,t&&t.set(e,n),n}(e("../utils.js")).log},{"../utils.js":"iSxC"}],VHa8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then(function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:n.video&&n.video.frameRate||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}},{}],uI5X:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimMediaStream=function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},n.shimOnTrack=function(e){if("object"!==c(e)||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype)r.wrapPeerConnectionEvent(e,"track",function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e});else{Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find(function(e){return e.track&&e.track.id===r.track.id}):{track:r.track};var s=new Event("track");s.track=r.track,s.receiver=i,s.transceiver={receiver:i},s.streams=[t.stream],n.dispatchEvent(s)}),t.stream.getTracks().forEach(function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find(function(e){return e.track&&e.track.id===r.id}):{track:r};var s=new Event("track");s.track=r,s.receiver=i,s.transceiver={receiver:i},s.streams=[t.stream],n.dispatchEvent(s)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}},n.shimGetSendersWithDtmf=function(e){if("object"===c(e)&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===t.kind?e.createDTMFSender(t):null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach(function(e){n._senders.push(t(n,e))})};var s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],s.apply(this,[e]),e.getTracks().forEach(function(e){var n=t._senders.find(function(t){return t.track===e});n&&t._senders.splice(t._senders.indexOf(n),1)})}}else if("object"===c(e)&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var o=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=o.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}},n.shimGetStats=function(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,[n,r,i]=arguments;if(arguments.length>0&&"function"==typeof n)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof n))return t.apply(this,[]);var s=function(e){var t={};return e.result().forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t},o=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};return arguments.length>=2?t.apply(this,[function(e){r(o(s(e)))},n]):new Promise(function(n,r){t.apply(e,[function(e){n(o(s(e)))},r])}).then(r,i)}}},n.shimSenderReceiverGetStats=function(e){if("object"===c(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach(function(t){return t._pc=e}),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return r.filterStats(t,e.track,!0)})}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var i=e.RTCPeerConnection.prototype.getReceivers;i&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=i.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t}),r.wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return r.filterStats(t,e.track,!1)})}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var s=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,n,r,i=arguments[0];return this.getSenders().forEach(function(e){e.track===i&&(t?r=!0:t=e)}),this.getReceivers().forEach(function(e){return e.track===i&&(n?r=!0:n=e),e.track===i}),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return s.apply(this,arguments)}}}},n.shimAddTrackRemoveTrackWithNative=u,n.shimAddTrackRemoveTrack=function(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return u(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map(function(t){return e._reverseStreams[t.id]})};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(function(e){if(n.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}r.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var s=this._streams[n.id];if(s)s.addTrack(t),Promise.resolve().then(function(){r.dispatchEvent(new Event("negotiationneeded"))});else{var o=new e.MediaStream([t]);this._streams[n.id]=o,this._reverseStreams[o.id]=n,this.addStream(o)}return this.getSenders().find(function(e){return e.track===t})},["createOffer","createAnswer"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t],r=a({},t,function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[function(n){var r=c(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then(function(t){return c(e,t)})});e.RTCPeerConnection.prototype[t]=r[t]});var s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=(e=this,n=(t=arguments[0]).sdp,Object.keys(e._reverseStreams||[]).forEach(function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:n})),s.apply(this,arguments)):s.apply(this,arguments);var e,t,n};var o=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=o.get.apply(this);return""===e.type?e:c(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach(function(r){n._streams[r].getTracks().find(function(t){return e.track===t})&&(t=n._streams[r])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function c(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var r=e._reverseStreams[t];n=n.replace(new RegExp(e._streams[r.id].id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:n})}},n.shimPeerConnection=function(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t],r=a({},t,function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)});e.RTCPeerConnection.prototype[t]=r[t]})},n.fixNegotiationNeeded=function(e,t){r.wrapPeerConnectionEvent(e,"negotiationneeded",function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e})},Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}}),Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return s.shimGetDisplayMedia}});var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../utils.js")),i=e("./getusermedia"),s=e("./getdisplaymedia");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(t){return e._shimmedLocalStreams[t][0]})};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(e){if(t.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")});var r=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter(function(e){return-1===r.indexOf(e)});this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]}),i.apply(this,arguments)}}},{"../utils.js":"iSxC","./getusermedia":"s6SN","./getdisplaymedia":"VHa8"}],NZ1C:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.filterIceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&r.deprecated("RTCIceServer.url","RTCIceServer.urls");var i="string"==typeof t;return i&&(t=[t]),t=t.filter(function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n}),delete e.url,e.urls=i?t[0]:t,!!t.length}})};var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var o=r?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,t&&t.set(e,n),n}(e("../utils"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}},{"../utils":"iSxC"}],YHvh:[function(e,t,n){"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},r.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},r.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach(function(t){r.push(e.parameters[t]?t+"="+e.parameters[t]:t)}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(function(e){return parseInt(e,10)})}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},r.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var n=r.matchPrefix(e+t,"a=ice-ufrag:")[0],i=r.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&i?{usernameFragment:n.substr(12),password:i.substr(10)}:null},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e)[0].split(" "),i=3;i<n.length;i++){var s=n[i],o=r.matchPrefix(e,"a=rtpmap:"+s+" ")[0];if(o){var a=r.parseRtpMap(o),c=r.matchPrefix(e,"a=fmtp:"+s+" ");switch(a.parameters=c.length?r.parseFmtp(c[0]):{},a.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+s+" ").map(r.parseRtcpFb),t.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(a.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(r.parseExtmap(e))}),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)});var i=0;return t.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime)}),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach(function(e){n+=r.writeExtmap(e)}),n},r.parseRtpEncodingParameters=function(e){var t,n=[],i=r.parseRtpParameters(e),s=-1!==i.fecMechanisms.indexOf("RED"),o=-1!==i.fecMechanisms.indexOf("ULPFEC"),a=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),c=a.length>0&&a[0].ssrc,u=r.matchPrefix(e,"a=ssrc-group:FID").map(function(e){return e.substr(17).split(" ").map(function(e){return parseInt(e,10)})});u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),i.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(r.rtx={ssrc:t}),n.push(r),s&&((r=JSON.parse(JSON.stringify(r))).fec={ssrc:c,mechanism:o?"red+ulpfec":"red"},n.push(r))}}),0===n.length&&c&&n.push({ssrc:c});var l=r.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,n.forEach(function(e){e.maxBitrate=l})),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var s=r.matchPrefix(e,"a=rtcp-mux");return t.mux=s.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var i=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return i.length>0?{stream:(t=i[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t,n=r.parseMLine(e),i=r.matchPrefix(e,"a=max-message-size:");i.length>0&&(t=parseInt(i[0].substr(19),10)),isNaN(t)&&(t=65536);var s=r.matchPrefix(e,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substr(12),10),protocol:n.fmt,maxMessageSize:t};if(r.matchPrefix(e,"a=sctpmap:").length>0){var o=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(o[0],10),protocol:o[1],maxMessageSize:t}}},r.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var i=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,i){var s=r.writeRtpDescription(e.kind,t);if(s+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),s+="a=mid:"+e.mid+"\r\n",s+=e.direction?"a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var o="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";s+="a="+o,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+o,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+o,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),s},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},"object"==typeof t&&(t.exports=r)},{}],NJ2u:[function(e,t,n){"use strict";var r=e("sdp");function i(e,t,n,i,s){var o=r.writeRtpDescription(e.kind,t);if(o+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":s||"active"),o+="a=mid:"+e.mid+"\r\n",o+=e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var c="msid:"+(i?i.id:"-")+" "+a+"\r\n";o+="a="+c,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),o}function s(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},i=function(e,t,n,i){var s=r(e.parameters.apt,n),o=r(t.parameters.apt,i);return s&&o&&s.name.toLowerCase()===o.name.toLowerCase()};return e.codecs.forEach(function(r){for(var s=0;s<t.codecs.length;s++){var o=t.codecs[s];if(r.name.toLowerCase()===o.name.toLowerCase()&&r.clockRate===o.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&o.parameters.apt&&!i(r,o,e.codecs,t.codecs))continue;(o=JSON.parse(JSON.stringify(o))).numChannels=Math.min(r.numChannels,o.numChannels),n.codecs.push(o),o.rtcpFeedback=o.rtcpFeedback.filter(function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}}),n}function o(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function a(e,t){var n=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return n||e.addRemoteCandidate(t),!n}function c(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}t.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,n,r,i){var s=new Event("track");s.track=n,s.receiver=r,s.transceiver={receiver:r},s.streams=i,e.setTimeout(function(){t._dispatchEvent("track",s)})}var l=function(n){var i=this,s=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){i[e]=s[e].bind(s)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof r;return i&&(r=[r]),r=r.filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)}),delete e.url,e.urls=i?r[0]:r,!!r.length}})}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var o=n.iceCandidatePoolSize;o>0;o--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(l.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(l.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),l.prototype.onicecandidate=null,l.prototype.onaddstream=null,l.prototype.ontrack=null,l.prototype.onremovestream=null,l.prototype.onsignalingstatechange=null,l.prototype.oniceconnectionstatechange=null,l.prototype.onconnectionstatechange=null,l.prototype.onicegatheringstatechange=null,l.prototype.onnegotiationneeded=null,l.prototype.ondatachannel=null,l.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},l.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},l.prototype.getConfiguration=function(){return this._config},l.prototype.getLocalStreams=function(){return this.localStreams},l.prototype.getRemoteStreams=function(){return this.remoteStreams},l.prototype._createTransceiver=function(e,t){var n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var r=this._createIceAndDtlsTransports();n.iceTransport=r.iceTransport,n.dtlsTransport=r.dtlsTransport}return t||this.transceivers.push(n),n},l.prototype.addTrack=function(t,n){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find(function(e){return e.track===t}))throw c("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(r=this.transceivers[i]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},l.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach(function(t){n.addTrack(t,e)});else{var r=e.clone();e.getTracks().forEach(function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",function(e){n.enabled=e.enabled})}),r.getTracks().forEach(function(e){n.addTrack(e,r)})}},l.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find(function(e){return e.rtpSender===t});if(!n)throw c("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},l.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var n=t.getSenders().find(function(t){return t.track===e});n&&t.removeTrack(n)})},l.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},l.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},l.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;i.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},l.prototype._gather=function(t,n){var i=this,s=this.transceivers[n].iceGatherer;if(!s.onlocalcandidate){var o=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,s.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),s.onlocalcandidate=function(e){if(!(i.usingBundle&&n>0)){var o=new Event("icecandidate");o.candidate={sdpMid:t,sdpMLineIndex:n};var a=e.candidate,c=!a||0===Object.keys(a).length;if(c)"new"!==s.state&&"gathering"!==s.state||(s.state="completed");else{"new"===s.state&&(s.state="gathering"),a.component=1,a.ufrag=s.getLocalParameters().usernameFragment;var u=r.writeCandidate(a);o.candidate=Object.assign(o.candidate,r.parseCandidate(u)),o.candidate.candidate=u,o.candidate.toJSON=function(){return{candidate:o.candidate.candidate,sdpMid:o.candidate.sdpMid,sdpMLineIndex:o.candidate.sdpMLineIndex,usernameFragment:o.candidate.usernameFragment}}}var l=r.getMediaSections(i._localDescription.sdp);l[o.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+o.candidate.candidate+"\r\n",i._localDescription.sdp=r.getDescription(i._localDescription.sdp)+l.join("");var h=i.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),c||i._dispatchEvent("icecandidate",o),h&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange())}},e.setTimeout(function(){o.forEach(function(e){s.onlocalcandidate(e)})},0)}},l.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},l.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},l.prototype._transceive=function(e,n,i){var o=s(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(o.encodings=e.sendEncodingParameters,o.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(o.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(o)),i&&e.rtpReceiver&&o.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),o.encodings=e.recvEncodingParameters.length?e.recvEncodingParameters:[{}],o.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(o.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(o.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(o))},l.prototype.setLocalDescription=function(e){var t,n,i=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!o("setLocalDescription",e.type,i.signalingState)||i._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+i.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach(function(e,t){var n=r.parseRtpParameters(e);i.transceivers[t].localCapabilities=n}),i.transceivers.forEach(function(e,t){i._gather(e.mid,t)});else if("answer"===e.type){t=r.splitSections(i._remoteDescription.sdp),n=t.shift();var a=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach(function(e,t){var o=i.transceivers[t],c=o.iceGatherer,u=o.iceTransport,l=o.dtlsTransport,h=o.localCapabilities,d=o.remoteCapabilities;if(!(r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length||o.rejected)){var p=r.getIceParameters(e,n),f=r.getDtlsParameters(e,n);a&&(f.role="server"),i.usingBundle&&0!==t||(i._gather(o.mid,t),"new"===u.state&&u.start(c,p,a?"controlling":"controlled"),"new"===l.state&&l.start(f));var v=s(h,d);i._transceive(o,v.codecs.length>0,!1)}})}return i._localDescription={type:e.type,sdp:e.sdp},i._updateSignalingState("offer"===e.type?"have-local-offer":"stable"),Promise.resolve()},l.prototype.setRemoteDescription=function(i){var l=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(c("TypeError",'Unsupported type "'+i.type+'"'));if(!o("setRemoteDescription",i.type,l.signalingState)||l._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+i.type+" in state "+l.signalingState));var h={};l.remoteStreams.forEach(function(e){h[e.id]=e});var d=[],p=r.splitSections(i.sdp),f=p.shift(),v=r.matchPrefix(f,"a=ice-lite").length>0,m=r.matchPrefix(f,"a=group:BUNDLE ").length>0;l.usingBundle=m;var g=r.matchPrefix(f,"a=ice-options:")[0];return l.canTrickleIceCandidates=!!g&&g.substr(14).split(" ").indexOf("trickle")>=0,p.forEach(function(o,c){var u=r.splitLines(o),p=r.getKind(o),g=r.isRejected(o)&&0===r.matchPrefix(o,"a=bundle-only").length,y=u[0].substr(2).split(" ")[2],b=r.getDirection(o,f),S=r.parseMsid(o),w=r.getMid(o)||r.generateIdentifier();if(g||"application"===p&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))l.transceivers[c]={mid:w,kind:p,protocol:y,rejected:!0};else{var _,C,T,E,x,P,k,R,O;!g&&l.transceivers[c]&&l.transceivers[c].rejected&&(l.transceivers[c]=l._createTransceiver(p,!0));var I,A,N=r.parseRtpParameters(o);g||(I=r.getIceParameters(o,f),(A=r.getDtlsParameters(o,f)).role="client"),k=r.parseRtpEncodingParameters(o);var D=r.parseRtcpParameters(o),M=r.matchPrefix(o,"a=end-of-candidates",f).length>0,L=r.matchPrefix(o,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return 1===e.component});if(("offer"===i.type||"answer"===i.type)&&!g&&m&&c>0&&l.transceivers[c]&&(l._disposeIceAndDtlsTransports(c),l.transceivers[c].iceGatherer=l.transceivers[0].iceGatherer,l.transceivers[c].iceTransport=l.transceivers[0].iceTransport,l.transceivers[c].dtlsTransport=l.transceivers[0].dtlsTransport,l.transceivers[c].rtpSender&&l.transceivers[c].rtpSender.setTransport(l.transceivers[0].dtlsTransport),l.transceivers[c].rtpReceiver&&l.transceivers[c].rtpReceiver.setTransport(l.transceivers[0].dtlsTransport)),"offer"!==i.type||g)"answer"!==i.type||g||(C=(_=l.transceivers[c]).iceGatherer,T=_.iceTransport,E=_.dtlsTransport,x=_.rtpReceiver,P=_.sendEncodingParameters,R=_.localCapabilities,l.transceivers[c].recvEncodingParameters=k,l.transceivers[c].remoteCapabilities=N,l.transceivers[c].rtcpParameters=D,L.length&&"new"===T.state&&(!v&&!M||m&&0!==c?L.forEach(function(e){a(_.iceTransport,e)}):T.setRemoteCandidates(L)),m&&0!==c||("new"===T.state&&T.start(C,I,"controlling"),"new"===E.state&&E.start(A)),!s(_.localCapabilities,_.remoteCapabilities).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&_.sendEncodingParameters[0].rtx&&delete _.sendEncodingParameters[0].rtx,l._transceive(_,"sendrecv"===b||"recvonly"===b,"sendrecv"===b||"sendonly"===b),!x||"sendrecv"!==b&&"sendonly"!==b?delete _.rtpReceiver:(O=x.track,S?(h[S.stream]||(h[S.stream]=new e.MediaStream),n(O,h[S.stream]),d.push([O,x,h[S.stream]])):(h.default||(h.default=new e.MediaStream),n(O,h.default),d.push([O,x,h.default]))));else{(_=l.transceivers[c]||l._createTransceiver(p)).mid=w,_.iceGatherer||(_.iceGatherer=l._createIceGatherer(c,m)),L.length&&"new"===_.iceTransport.state&&(!M||m&&0!==c?L.forEach(function(e){a(_.iceTransport,e)}):_.iceTransport.setRemoteCandidates(L)),R=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(R.codecs=R.codecs.filter(function(e){return"rtx"!==e.name})),P=_.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var j,F=!1;"sendrecv"===b||"sendonly"===b?(F=!_.rtpReceiver,x=_.rtpReceiver||new e.RTCRtpReceiver(_.dtlsTransport,p),F&&(O=x.track,S&&"-"===S.stream||(S?(h[S.stream]||(h[S.stream]=new e.MediaStream,Object.defineProperty(h[S.stream],"id",{get:function(){return S.stream}})),Object.defineProperty(O,"id",{get:function(){return S.track}}),j=h[S.stream]):(h.default||(h.default=new e.MediaStream),j=h.default)),j&&(n(O,j),_.associatedRemoteMediaStreams.push(j)),d.push([O,x,j]))):_.rtpReceiver&&_.rtpReceiver.track&&(_.associatedRemoteMediaStreams.forEach(function(t){var n,r,i=t.getTracks().find(function(e){return e.id===_.rtpReceiver.track.id});i&&((r=t).removeTrack(n=i),r.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:n})))}),_.associatedRemoteMediaStreams=[]),_.localCapabilities=R,_.remoteCapabilities=N,_.rtpReceiver=x,_.rtcpParameters=D,_.sendEncodingParameters=P,_.recvEncodingParameters=k,l._transceive(l.transceivers[c],!1,F)}}}),void 0===l._dtlsRole&&(l._dtlsRole="offer"===i.type?"active":"passive"),l._remoteDescription={type:i.type,sdp:i.sdp},l._updateSignalingState("offer"===i.type?"have-remote-offer":"stable"),Object.keys(h).forEach(function(t){var n=h[t];if(n.getTracks().length){if(-1===l.remoteStreams.indexOf(n)){l.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout(function(){l._dispatchEvent("addstream",r)})}d.forEach(function(e){n.id===e[2].id&&u(l,e[0],e[1],[n])})}}),d.forEach(function(e){e[2]||u(l,e[0],e[1],[])}),e.setTimeout(function(){l&&l.transceivers&&l.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},l.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},l.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},l.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout(function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}},0))},l.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++}),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},l.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},l.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var s=n.transceivers.filter(function(e){return"audio"===e.kind}).length,o=n.transceivers.filter(function(e){return"video"===e.kind}).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==a.offerToReceiveAudio&&(s=!0===a.offerToReceiveAudio?1:!1===a.offerToReceiveAudio?0:a.offerToReceiveAudio),void 0!==a.offerToReceiveVideo&&(o=!0===a.offerToReceiveVideo?1:!1===a.offerToReceiveVideo?0:a.offerToReceiveVideo)}for(n.transceivers.forEach(function(e){"audio"===e.kind?--s<0&&(e.wantReceive=!1):"video"===e.kind&&--o<0&&(e.wantReceive=!1)});s>0||o>0;)s>0&&(n._createTransceiver("audio"),s--),o>0&&(n._createTransceiver("video"),o--);var u=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach(function(i,s){var o=i.track,a=i.kind,c=i.mid||r.generateIdentifier();i.mid=c,i.iceGatherer||(i.iceGatherer=n._createIceGatherer(s,n.usingBundle));var u=e.RTCRtpSender.getCapabilities(a);t<15019&&(u.codecs=u.codecs.filter(function(e){return"rtx"!==e.name})),u.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)})}),u.headerExtensions.forEach(function(e){(i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[]).forEach(function(t){e.uri===t.uri&&(e.id=t.id)})});var l=i.sendEncodingParameters||[{ssrc:1001*(2*s+1)}];o&&t>=15019&&"video"===a&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,a)),i.localCapabilities=u,i.sendEncodingParameters=l}),"max-compat"!==n._config.bundlePolicy&&(u+="a=group:BUNDLE "+n.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",n.transceivers.forEach(function(e,t){u+=i(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,u+="a="+r.writeCandidate(e)+"\r\n"}),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))});var l=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(l)},l.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var o=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(o+="a=group:BUNDLE "+n.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),o+="a=ice-options:trickle\r\n";var a=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach(function(e,r){if(!(r+1>a)){if(e.rejected)return"application"===e.kind?o+="DTLS/SCTP"===e.protocol?"m=application 0 DTLS/SCTP 5000\r\n":"m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?o+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(o+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(o+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;e.stream&&("audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var u=s(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,o+=i(e,u,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(o+="a=rtcp-rsize\r\n")}});var u=new e.RTCSessionDescription({type:"answer",sdp:o});return Promise.resolve(u)},l.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(i,s){if(!n._remoteDescription)return s(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var o=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<n.transceivers.length;u++)if(n.transceivers[u].mid===e.sdpMid){o=u;break}var l=n.transceivers[o];if(!l)return s(c("OperationError","Can not add ICE candidate"));if(l.rejected)return i();var h=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===h.protocol&&(0===h.port||9===h.port))return i();if(h.component&&1!==h.component)return i();if((0===o||o>0&&l.iceTransport!==n.transceivers[0].iceTransport)&&!a(l.iceTransport,h))return s(c("OperationError","Can not add ICE candidate"));var d=e.candidate.trim();0===d.indexOf("a=")&&(d=d.substr(2)),(t=r.getMediaSections(n._remoteDescription.sdp))[o]+="a="+(h.type?d:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var p=0;p<n.transceivers.length&&(n.transceivers[p].rejected||(n.transceivers[p].iceTransport.addRemoteCandidate({}),(t=r.getMediaSections(n._remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));p++);i()})},l.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach(function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)}),!n)throw c("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(t){e[t]&&r.push(e[t].getStats())})}),Promise.all(r).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then(function(e){var t=new Map;return Object.keys(e).forEach(function(n){e[n].type=function(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}(e[n]),t.set(n,e[n])}),t})}}});var h=["createOffer","createAnswer"];return h.forEach(function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){"function"==typeof e[0]&&e[0].apply(null,[t])},function(t){"function"==typeof e[1]&&e[1].apply(null,[t])}):t.apply(this,arguments)}}),(h=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)},function(t){"function"==typeof e[2]&&e[2].apply(null,[t])}):t.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),l}},{sdp:"YHvh"}],YdKx:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetUserMedia=function(e){var t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch(function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))})}}},{}],P3bV:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}},{}],XRic:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimPeerConnection=function(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var o=(0,s.default)(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(0,i.filterIceServers)(e.iceServers,t.version),r.log("ICE servers after filtering:",e.iceServers)),new o(e)},e.RTCPeerConnection.prototype=o.prototype},n.shimReplaceTrack=function(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)},Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return o.shimGetUserMedia}}),Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return a.shimGetDisplayMedia}});var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../utils")),i=e("./filtericeservers"),s=function(e){return e&&e.__esModule?e:{default:e}}(e("rtcpeerconnection-shim")),o=e("./getusermedia"),a=e("./getdisplaymedia");function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}},{"../utils":"iSxC","./filtericeservers":"NZ1C","rtcpeerconnection-shim":"NJ2u","./getusermedia":"YdKx","./getdisplaymedia":"P3bV"}],GzSv:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetUserMedia=function(e,t){var n=e&&e.navigator,i=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,i){r.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,i)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var o=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===s(e)&&"object"===s(e.audio)&&(e=JSON.parse(JSON.stringify(e)),o(e.audio,"autoGainControl","mozAutoGainControl"),o(e.audio,"noiseSuppression","mozNoiseSuppression")),a(e)},i&&i.prototype.getSettings){var c=i.prototype.getSettings;i.prototype.getSettings=function(){var e=c.apply(this,arguments);return o(e,"mozAutoGainControl","autoGainControl"),o(e,"mozNoiseSuppression","noiseSuppression"),e}}if(i&&i.prototype.applyConstraints){var u=i.prototype.applyConstraints;i.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===s(e)&&(e=JSON.parse(JSON.stringify(e)),o(e,"autoGainControl","mozAutoGainControl"),o(e,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[e])}}}};var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var o=r?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,t&&t.set(e,n),n}(e("../utils"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},{"../utils":"iSxC"}],UuGU:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}},{}],Fzdr:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimOnTrack=function(e){"object"===a(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},n.shimPeerConnection=function(e,t){if("object"===a(e)&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t],r=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)});e.RTCPeerConnection.prototype[t]=r[t]});var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var[e,i,s]=arguments;return r.apply(this,[e||null]).then(function(e){if(t.version<53&&!i)try{e.forEach(function(e){e.type=n[e.type]||e.type})}catch(r){if("TypeError"!==r.name)throw r;e.forEach(function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))})}return e}).then(i,s)}}},n.shimSenderGetStats=function(e){if("object"===a(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach(function(t){return t._pc=e}),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},n.shimReceiverGetStats=function(e){if("object"===a(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach(function(t){return t._pc=e}),n}),r.wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},n.shimRemoveStream=function(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;r.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)})})},n.shimRTCDataChannel=function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)},n.shimAddTransceiver=function(e){if("object"===a(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach(function(e){if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});var r=t.apply(this,arguments);if(n){var{sender:i}=r,s=i.getParameters();"encodings"in s&&(1!==s.encodings.length||0!==Object.keys(s.encodings[0]).length)||(s.encodings=e.sendEncodings,i.sendEncodings=e.sendEncodings,this.setParametersPromises.push(i.setParameters(s).then(function(){delete i.sendEncodings}).catch(function(){delete i.sendEncodings})))}return r})}},n.shimGetParameters=function(e){if("object"===a(e)&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}},n.shimCreateOffer=function(e){if("object"===a(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(n,e)}).finally(function(){n.setParametersPromises=[]}):t.apply(this,arguments)}}},n.shimCreateAnswer=function(e){if("object"===a(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(n,e)}).finally(function(){n.setParametersPromises=[]}):t.apply(this,arguments)}}},Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}}),Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return s.shimGetDisplayMedia}});var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../utils")),i=e("./getusermedia"),s=e("./getdisplaymedia");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},{"../utils":"iSxC","./getusermedia":"GzSv","./getdisplaymedia":"UuGU"}],t1lL:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimLocalStreamsAPI=function(e){if("object"===s(e)&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(function(r){return t.call(n,r,e)}),e.getVideoTracks().forEach(function(r){return t.call(n,r,e)})},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i&&i.forEach(function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach(function(e){r.includes(e.track)&&t.removeTrack(e)})}})}},n.shimRemoteStreamsAPI=function(e){if("object"===s(e)&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}})})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}})}),t.apply(e,arguments)}}},n.shimCallbacksAPI=function(e){if("object"===s(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};var c=function(e,t,n){var r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=c,t.setRemoteDescription=c=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=c=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r}}},n.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(o(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}).bind(t))},n.shimConstraints=o,n.shimRTCIceServerUrls=function(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var i=[],s=0;s<e.iceServers.length;s++){var o=e.iceServers[s];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(r.deprecated("RTCIceServer.url","RTCIceServer.urls"),(o=JSON.parse(JSON.stringify(o))).urls=o.url,delete o.url,i.push(o)):i.push(e.iceServers[s])}e.iceServers=i}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}},n.shimTrackEventTransceiver=function(e){"object"===s(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},n.shimCreateOfferLegacy=function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find(function(e){return"audio"===e.receiver.track.kind});!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find(function(e){return"video"===e.receiver.track.kind});!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}},n.shimAudioContext=function(e){"object"!==s(e)||e.AudioContext||(e.AudioContext=e.webkitAudioContext)};var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var o=r?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,t&&t.set(e,n),n}(e("../utils"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return e&&void 0!==e.video?Object.assign({},e,{video:r.compactObject(e.video)}):e}},{"../utils":"iSxC"}],GOQK:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimRTCIceCandidate=function(e){if(e.RTCIceCandidate&&(!e.RTCIceCandidate||!("foundation"in e.RTCIceCandidate.prototype))){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===o(e)&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),i=r.default.parseCandidate(e.candidate),s=Object.assign(n,i);return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,i.wrapPeerConnectionEvent(e,"icecandidate",function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t})}},n.shimMaxMessageSize=function(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){var{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;var t=r.default.splitSections(e.sdp);return t.shift(),t.some(function(e){var t=r.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})}(arguments[0])){var i,s=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n}(arguments[0]),o=(u=s,l=65536,"firefox"===t.browser&&(l=t.version<57?-1===u?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),l),a=function(e,n){var i=65536;"firefox"===t.browser&&57===t.version&&(i=65535);var s=r.default.matchPrefix(e.sdp,"a=max-message-size:");return s.length>0?i=parseInt(s[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(i=2147483637),i}(arguments[0],s);i=0===o&&0===a?Number.POSITIVE_INFINITY:0===o||0===a?Math.max(o,a):Math.min(o,a);var c={};Object.defineProperty(c,"maxMessageSize",{get:function(){return i}}),this._sctp=c}var u,l;return n.apply(this,arguments)}}},n.shimSendThrowTypeError=function(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},i.wrapPeerConnectionEvent(e,"datachannel",function(e){return n(e.channel,e.target),e})}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}},n.shimConnectionState=function(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}},n.removeExtmapAllowMixed=function(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var r=t.sdp.split("\n").filter(function(e){return"a=extmap-allow-mixed"!==e.trim()}).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return n.apply(this,arguments)}}},n.shimAddIceCandidateNullOrEmpty=function(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}};var r=function(e){return e&&e.__esModule?e:{default:e}}(e("sdp")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("./utils"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},{sdp:"YHvh","./utils":"iSxC"}],KtlG:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.adapterFactory=function(){var{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},n=r.log,u=r.detectBrowser(e),l={browserDetails:u,commonShim:c,extractVersion:r.extractVersion,disableLog:r.disableLog,disableWarnings:r.disableWarnings};switch(u.browser){case"chrome":if(!i||!i.shimPeerConnection||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),l;if(null===u.version)return n("Chrome shim can not determine version, not shimming."),l;n("adapter.js shimming chrome."),l.browserShim=i,c.shimAddIceCandidateNullOrEmpty(e,u),i.shimGetUserMedia(e,u),i.shimMediaStream(e,u),i.shimPeerConnection(e,u),i.shimOnTrack(e,u),i.shimAddTrackRemoveTrack(e,u),i.shimGetSendersWithDtmf(e,u),i.shimGetStats(e,u),i.shimSenderReceiverGetStats(e,u),i.fixNegotiationNeeded(e,u),c.shimRTCIceCandidate(e,u),c.shimConnectionState(e,u),c.shimMaxMessageSize(e,u),c.shimSendThrowTypeError(e,u),c.removeExtmapAllowMixed(e,u);break;case"firefox":if(!o||!o.shimPeerConnection||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),l;n("adapter.js shimming firefox."),l.browserShim=o,c.shimAddIceCandidateNullOrEmpty(e,u),o.shimGetUserMedia(e,u),o.shimPeerConnection(e,u),o.shimOnTrack(e,u),o.shimRemoveStream(e,u),o.shimSenderGetStats(e,u),o.shimReceiverGetStats(e,u),o.shimRTCDataChannel(e,u),o.shimAddTransceiver(e,u),o.shimGetParameters(e,u),o.shimCreateOffer(e,u),o.shimCreateAnswer(e,u),c.shimRTCIceCandidate(e,u),c.shimConnectionState(e,u),c.shimMaxMessageSize(e,u),c.shimSendThrowTypeError(e,u);break;case"edge":if(!s||!s.shimPeerConnection||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),l;n("adapter.js shimming edge."),l.browserShim=s,s.shimGetUserMedia(e,u),s.shimGetDisplayMedia(e,u),s.shimPeerConnection(e,u),s.shimReplaceTrack(e,u),c.shimMaxMessageSize(e,u),c.shimSendThrowTypeError(e,u);break;case"safari":if(!a||!t.shimSafari)return n("Safari shim is not included in this adapter release."),l;n("adapter.js shimming safari."),l.browserShim=a,c.shimAddIceCandidateNullOrEmpty(e,u),a.shimRTCIceServerUrls(e,u),a.shimCreateOfferLegacy(e,u),a.shimCallbacksAPI(e,u),a.shimLocalStreamsAPI(e,u),a.shimRemoteStreamsAPI(e,u),a.shimTrackEventTransceiver(e,u),a.shimGetUserMedia(e,u),a.shimAudioContext(e,u),c.shimRTCIceCandidate(e,u),c.shimMaxMessageSize(e,u),c.shimSendThrowTypeError(e,u),c.removeExtmapAllowMixed(e,u);break;default:n("Unsupported browser!")}return l};var r=l(e("./utils")),i=l(e("./chrome/chrome_shim")),s=l(e("./edge/edge_shim")),o=l(e("./firefox/firefox_shim")),a=l(e("./safari/safari_shim")),c=l(e("./common_shim"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}},{"./utils":"iSxC","./chrome/chrome_shim":"uI5X","./edge/edge_shim":"XRic","./firefox/firefox_shim":"Fzdr","./safari/safari_shim":"t1lL","./common_shim":"GOQK"}],tI1X:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(0,e("./adapter_factory.js").adapterFactory)({window:"undefined"==typeof window?void 0:window});n.default=r},{"./adapter_factory.js":"KtlG"}],sXtV:[function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.webRTCAdapter=void 0;var i=r(e("webrtc-adapter"));n.webRTCAdapter=i.default},{"webrtc-adapter":"tI1X"}],I31f:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Supports=void 0;var r=e("./adapter");n.Supports=new(function(){function e(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return e.prototype.isWebRTCSupported=function(){return"undefined"!=typeof RTCPeerConnection},e.prototype.isBrowserSupported=function(){var e=this.getBrowser(),t=this.getVersion();return!!this.supportedBrowsers.includes(e)&&("chrome"===e?t>=this.minChromeVersion:"firefox"===e?t>=this.minFirefoxVersion:"safari"===e&&!this.isIOS&&t>=this.minSafariVersion)},e.prototype.getBrowser=function(){return r.webRTCAdapter.browserDetails.browser},e.prototype.getVersion=function(){return r.webRTCAdapter.browserDetails.version||0},e.prototype.isUnifiedPlanSupported=function(){var e,t=this.getBrowser(),n=r.webRTCAdapter.browserDetails.version||0;if("chrome"===t&&n<72)return!1;if("firefox"===t&&n>=59)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var i=!1;try{(e=new RTCPeerConnection).addTransceiver("audio"),i=!0}catch(s){}finally{e&&e.close()}return i},e.prototype.toString=function(){return"Supports: \n    browser:"+this.getBrowser()+" \n    version:"+this.getVersion()+" \n    isIOS:"+this.isIOS+" \n    isWebRTCSupported:"+this.isWebRTCSupported()+" \n    isBrowserSupported:"+this.isBrowserSupported()+" \n    isUnifiedPlanSupported:"+this.isUnifiedPlanSupported()},e}())},{"./adapter":"sXtV"}],BHXf:[function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.util=void 0;var o=s(e("peerjs-js-binarypack")),a=e("./supports"),c={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:0.peerjs.com:3478",username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};n.util=new(function(){function e(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=c,this.browser=a.Supports.getBrowser(),this.browserVersion=a.Supports.getVersion(),this.supports=function(){var e,t={browser:a.Supports.isBrowserSupported(),webRTC:a.Supports.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;try{e=new RTCPeerConnection(c),t.audioVideo=!0;var n=void 0;try{n=e.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!n.ordered;try{n.binaryType="blob",t.binaryBlob=!a.Supports.isIOS}catch(o){}}catch(o){}finally{n&&n.close()}}catch(o){}finally{e&&e.close()}return t}(),this.pack=o.pack,this.unpack=o.unpack,this._dataCount=1}return e.prototype.noop=function(){},e.prototype.validateId=function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e)},e.prototype.chunk=function(e){for(var t=[],r=e.size,i=Math.ceil(r/n.util.chunkedMTU),s=0,o=0;o<r;){var a=Math.min(r,o+n.util.chunkedMTU),c=e.slice(o,a);t.push({__peerData:this._dataCount,n:s,data:c,total:i}),o=a,s++}return this._dataCount++,t},e.prototype.blobToArrayBuffer=function(e,t){var n=new FileReader;return n.onload=function(e){e.target&&t(e.target.result)},n.readAsArrayBuffer(e),n},e.prototype.binaryStringToArrayBuffer=function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=255&e.charCodeAt(n);return t.buffer},e.prototype.randomToken=function(){return Math.random().toString(36).substr(2)},e.prototype.isSecure=function(){return"https:"===location.protocol},e}())},{"peerjs-js-binarypack":"kdPp","./supports":"I31f"}],JJlS:[function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function s(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,n,r,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new o(n,r||e,s),c=i?i+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new s:delete e._events[t]}function u(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),u.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},u.prototype.listeners=function(e){var t=this._events[i?i+e:e];if(!t)return[];if(t.fn)return[t.fn];for(var n=0,r=t.length,s=new Array(r);n<r;n++)s[n]=t[n].fn;return s},u.prototype.listenerCount=function(e){var t=this._events[i?i+e:e];return t?t.fn?1:t.length:0},u.prototype.emit=function(e,t,n,r,s,o){var a=i?i+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,s),!0;case 6:return l.fn.call(l.context,t,n,r,s,o),!0}for(u=1,c=new Array(h-1);u<h;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var d,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),h){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,r);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];l[u].fn.apply(l[u].context,c)}}return!0},u.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},u.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},u.prototype.removeListener=function(e,t,n,r){var s=i?i+e:e;if(!this._events[s])return this;if(!t)return c(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||r&&!o.once||n&&o.context!==n||c(this,s);else{for(var a=0,u=[],l=o.length;a<l;a++)(o[a].fn!==t||r&&!o[a].once||n&&o[a].context!==n)&&u.push(o[a]);u.length?this._events[s]=1===u.length?u[0]:u:c(this,s)}return this},u.prototype.removeAllListeners=function(e){var t;return e?this._events[t=i?i+e:e]&&c(this,t):(this._events=new s,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,void 0!==t&&(t.exports=u)},{}],WOs9:[function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o},i=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(n,"__esModule",{value:!0}),n.LogLevel=void 0;var s,o="PeerJS: ";!function(e){e[e.Disabled=0]="Disabled",e[e.Errors=1]="Errors",e[e.Warnings=2]="Warnings",e[e.All=3]="All"}(s=n.LogLevel||(n.LogLevel={}));var a=function(){function e(){this._logLevel=s.Disabled}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel>=s.All&&this._print.apply(this,i([s.All],r(e)))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel>=s.Warnings&&this._print.apply(this,i([s.Warnings],r(e)))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel>=s.Errors&&this._print.apply(this,i([s.Errors],r(e)))},e.prototype.setLogFunction=function(e){this._print=e},e.prototype._print=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a=i([o],r(t));for(var c in a)a[c]instanceof Error&&(a[c]="("+a[c].name+") "+a[c].message);e>=s.All?console.log.apply(console,i([],r(a))):e>=s.Warnings?console.warn.apply(console,i(["WARNING"],r(a))):e>=s.Errors&&console.error.apply(console,i(["ERROR"],r(a)))},e}();n.default=new a},{}],ZRYf:[function(e,t,n){"use strict";var r;Object.defineProperty(n,"__esModule",{value:!0}),n.ServerMessageType=n.SocketEventType=n.SerializationType=n.PeerErrorType=n.PeerEventType=n.ConnectionType=n.ConnectionEventType=void 0,(r=n.ConnectionEventType||(n.ConnectionEventType={})).Open="open",r.Stream="stream",r.Data="data",r.Close="close",r.Error="error",r.IceStateChanged="iceStateChanged",function(e){e.Data="data",e.Media="media"}(n.ConnectionType||(n.ConnectionType={})),function(e){e.Open="open",e.Close="close",e.Connection="connection",e.Call="call",e.Disconnected="disconnected",e.Error="error"}(n.PeerEventType||(n.PeerEventType={})),function(e){e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc"}(n.PeerErrorType||(n.PeerErrorType={})),function(e){e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json"}(n.SerializationType||(n.SerializationType={})),function(e){e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close"}(n.SocketEventType||(n.SocketEventType={})),function(e){e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE"}(n.ServerMessageType||(n.ServerMessageType={}))},{}],wJlv:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(l){i={error:l}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o},s=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.Socket=void 0;var c=e("eventemitter3"),u=a(e("./logger")),l=e("./enums"),h=function(e){function t(t,n,r,i,s,o){void 0===o&&(o=5e3);var a=e.call(this)||this;return a.pingInterval=o,a._disconnected=!0,a._messagesQueue=[],a._baseUrl=(t?"wss://":"ws://")+n+":"+r+i+"peerjs?key="+s,a}return r(t,e),t.prototype.start=function(e,t){var n=this;this._id=e,!this._socket&&this._disconnected&&(this._socket=new WebSocket(this._baseUrl+"&id="+e+"&token="+t),this._disconnected=!1,this._socket.onmessage=function(e){var t;try{t=JSON.parse(e.data),u.default.log("Server message received:",t)}catch(o){return void u.default.log("Invalid server message",e.data)}n.emit(l.SocketEventType.Message,t)},this._socket.onclose=function(e){n._disconnected||(u.default.log("Socket closed.",e),n._cleanup(),n._disconnected=!0,n.emit(l.SocketEventType.Disconnected))},this._socket.onopen=function(){n._disconnected||(n._sendQueuedMessages(),u.default.log("Socket open"),n._scheduleHeartbeat())})},t.prototype._scheduleHeartbeat=function(){var e=this;this._wsPingTimer=setTimeout(function(){e._sendHeartbeat()},this.pingInterval)},t.prototype._sendHeartbeat=function(){if(this._wsOpen()){var e=JSON.stringify({type:l.ServerMessageType.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}else u.default.log("Cannot send heartbeat, because socket closed")},t.prototype._wsOpen=function(){return!!this._socket&&1===this._socket.readyState},t.prototype._sendQueuedMessages=function(){var e,t,n=s([],i(this._messagesQueue));this._messagesQueue=[];try{for(var r=o(n),a=r.next();!a.done;a=r.next())this.send(a.value)}catch(c){e={error:c}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t.prototype.send=function(e){if(!this._disconnected)if(this._id)if(e.type){if(this._wsOpen()){var t=JSON.stringify(e);this._socket.send(t)}}else this.emit(l.SocketEventType.Error,"Invalid message");else this._messagesQueue.push(e)},t.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},t.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},t}(c.EventEmitter);n.Socket=h},{eventemitter3:"JJlS","./logger":"WOs9","./enums":"ZRYf"}],HCdX:[function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.Negotiator=void 0;var a=e("./util"),c=o(e("./logger")),u=e("./enums"),l=function(){function e(e){this.connection=e}return e.prototype.startConnection=function(e){var t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===u.ConnectionType.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){if(this.connection.type===u.ConnectionType.Data){var n=this.connection,r=t.createDataChannel(n.label,{ordered:!!e.reliable});n.initialize(r)}this._makeOffer()}else this.handleSDP("OFFER",e.sdp)},e.prototype._startPeerConnection=function(){c.default.log("Creating RTCPeerConnection.");var e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e},e.prototype._setupListeners=function(e){var t=this,n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,s=this.connection.provider;c.default.log("Listening for ICE candidates."),e.onicecandidate=function(e){e.candidate&&e.candidate.candidate&&(c.default.log("Received ICE candidates for "+n+":",e.candidate),s.socket.send({type:u.ServerMessageType.Candidate,payload:{candidate:e.candidate,type:i,connectionId:r},dst:n}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"failed":c.default.log("iceConnectionState is failed, closing connections to "+n),t.connection.emit(u.ConnectionEventType.Error,new Error("Negotiation of connection to "+n+" failed.")),t.connection.close();break;case"closed":c.default.log("iceConnectionState is closed, closing connections to "+n),t.connection.emit(u.ConnectionEventType.Error,new Error("Connection to "+n+" closed.")),t.connection.close();break;case"disconnected":c.default.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":e.onicecandidate=a.util.noop}t.connection.emit(u.ConnectionEventType.IceStateChanged,e.iceConnectionState)},c.default.log("Listening for data channel"),e.ondatachannel=function(e){c.default.log("Received data channel");var t=e.channel;s.getConnection(n,r).initialize(t)},c.default.log("Listening for remote stream"),e.ontrack=function(e){c.default.log("Received remote stream");var i=e.streams[0],o=s.getConnection(n,r);o.type===u.ConnectionType.Media&&t._addStreamToMediaConnection(i,o)}},e.prototype.cleanup=function(){c.default.log("Cleaning up PeerConnection to "+this.connection.peer);var e=this.connection.peerConnection;if(e){this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=function(){};var t=!1;if(this.connection.type===u.ConnectionType.Data){var n=this.connection.dataChannel;n&&(t=!!n.readyState&&"closed"!==n.readyState)}("closed"!==e.signalingState||t)&&e.close()}},e.prototype._makeOffer=function(){return i(this,void 0,Promise,function(){var e,t,n,i,o,l,h;return s(this,function(s){switch(s.label){case 0:e=this.connection.peerConnection,t=this.connection.provider,s.label=1;case 1:return s.trys.push([1,7,,8]),[4,e.createOffer(this.connection.options.constraints)];case 2:n=s.sent(),c.default.log("Created offer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp),s.label=3;case 3:return s.trys.push([3,5,,6]),[4,e.setLocalDescription(n)];case 4:return s.sent(),c.default.log("Set localDescription:",n,"for:"+this.connection.peer),i={sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:a.util.browser},this.connection.type===u.ConnectionType.Data&&(o=this.connection,i=r(r({},i),{label:o.label,reliable:o.reliable,serialization:o.serialization})),t.socket.send({type:u.ServerMessageType.Offer,payload:i,dst:this.connection.peer}),[3,6];case 5:return"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=(l=s.sent())&&(t.emitError(u.PeerErrorType.WebRTC,l),c.default.log("Failed to setLocalDescription, ",l)),[3,6];case 6:return[3,8];case 7:return h=s.sent(),t.emitError(u.PeerErrorType.WebRTC,h),c.default.log("Failed to createOffer, ",h),[3,8];case 8:return[2]}})})},e.prototype._makeAnswer=function(){return i(this,void 0,Promise,function(){var e,t,n,r,i;return s(this,function(s){switch(s.label){case 0:e=this.connection.peerConnection,t=this.connection.provider,s.label=1;case 1:return s.trys.push([1,7,,8]),[4,e.createAnswer()];case 2:n=s.sent(),c.default.log("Created answer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp),s.label=3;case 3:return s.trys.push([3,5,,6]),[4,e.setLocalDescription(n)];case 4:return s.sent(),c.default.log("Set localDescription:",n,"for:"+this.connection.peer),t.socket.send({type:u.ServerMessageType.Answer,payload:{sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,browser:a.util.browser},dst:this.connection.peer}),[3,6];case 5:return r=s.sent(),t.emitError(u.PeerErrorType.WebRTC,r),c.default.log("Failed to setLocalDescription, ",r),[3,6];case 6:return[3,8];case 7:return i=s.sent(),t.emitError(u.PeerErrorType.WebRTC,i),c.default.log("Failed to create answer, ",i),[3,8];case 8:return[2]}})})},e.prototype.handleSDP=function(e,t){return i(this,void 0,Promise,function(){var n,r,i,o;return s(this,function(s){switch(s.label){case 0:t=new RTCSessionDescription(t),n=this.connection.peerConnection,r=this.connection.provider,c.default.log("Setting remote description",t),i=this,s.label=1;case 1:return s.trys.push([1,5,,6]),[4,n.setRemoteDescription(t)];case 2:return s.sent(),c.default.log("Set remoteDescription:"+e+" for:"+this.connection.peer),"OFFER"!==e?[3,4]:[4,i._makeAnswer()];case 3:s.sent(),s.label=4;case 4:return[3,6];case 5:return o=s.sent(),r.emitError(u.PeerErrorType.WebRTC,o),c.default.log("Failed to setRemoteDescription, ",o),[3,6];case 6:return[2]}})})},e.prototype.handleCandidate=function(e){return i(this,void 0,Promise,function(){var t,n,r,i,o,a;return s(this,function(s){switch(s.label){case 0:c.default.log("handleCandidate:",e),t=e.candidate,n=e.sdpMLineIndex,r=e.sdpMid,i=this.connection.peerConnection,o=this.connection.provider,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,i.addIceCandidate(new RTCIceCandidate({sdpMid:r,sdpMLineIndex:n,candidate:t}))];case 2:return s.sent(),c.default.log("Added ICE candidate for:"+this.connection.peer),[3,4];case 3:return a=s.sent(),o.emitError(u.PeerErrorType.WebRTC,a),c.default.log("Failed to handleCandidate, ",a),[3,4];case 4:return[2]}})})},e.prototype._addTracksToConnection=function(e,t){if(c.default.log("add tracks from stream "+e.id+" to peer connection"),!t.addTrack)return c.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(function(n){t.addTrack(n,e)})},e.prototype._addStreamToMediaConnection=function(e,t){c.default.log("add stream "+e.id+" to media connection "+t.connectionId),t.addStream(e)},e}();n.Negotiator=l},{"./util":"BHXf","./logger":"WOs9","./enums":"ZRYf"}],tQFK:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0}),n.BaseConnection=void 0;var i=function(e){function t(t,n,r){var i=e.call(this)||this;return i.peer=t,i.provider=n,i.options=r,i._open=!1,i.metadata=r.metadata,i}return r(t,e),Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),t}(e("eventemitter3").EventEmitter);n.BaseConnection=i},{eventemitter3:"JJlS"}],dbHP:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.MediaConnection=void 0;var a=e("./util"),c=o(e("./logger")),u=e("./negotiator"),l=e("./enums"),h=function(e){function t(n,r,i){var s=e.call(this,n,r,i)||this;return s._localStream=s.options._stream,s.connectionId=s.options.connectionId||t.ID_PREFIX+a.util.randomToken(),s._negotiator=new u.Negotiator(s),s._localStream&&s._negotiator.startConnection({_stream:s._localStream,originator:!0}),s}return r(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return l.ConnectionType.Media},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),t.prototype.addStream=function(t){c.default.log("Receiving stream",t),this._remoteStream=t,e.prototype.emit.call(this,l.ConnectionEventType.Stream,t)},t.prototype.handleMessage=function(e){var t=e.type,n=e.payload;switch(e.type){case l.ServerMessageType.Answer:this._negotiator.handleSDP(t,n.sdp),this._open=!0;break;case l.ServerMessageType.Candidate:this._negotiator.handleCandidate(n.candidate);break;default:c.default.warn("Unrecognized message type:"+t+" from peer:"+this.peer)}},t.prototype.answer=function(e,t){var n,r;if(void 0===t&&(t={}),this._localStream)c.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");else{this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection(i(i({},this.options._payload),{_stream:e}));var o=this.provider._getMessages(this.connectionId);try{for(var a=s(o),u=a.next();!u.done;u=a.next())this.handleMessage(u.value)}catch(l){n={error:l}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}this._open=!0}},t.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,e.prototype.emit.call(this,l.ConnectionEventType.Close))},t.ID_PREFIX="mc_",t}(e("./baseconnection").BaseConnection);n.MediaConnection=h},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK"}],GGp6:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.EncodingQueue=void 0;var s=e("eventemitter3"),o=i(e("./logger")),a=function(e){function t(){var t=e.call(this)||this;return t.fileReader=new FileReader,t._queue=[],t._processing=!1,t.fileReader.onload=function(e){t._processing=!1,e.target&&t.emit("done",e.target.result),t.doNextTask()},t.fileReader.onerror=function(e){o.default.error("EncodingQueue error:",e),t._processing=!1,t.destroy(),t.emit("error",e)},t}return r(t,e),Object.defineProperty(t.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),t.prototype.enque=function(e){this.queue.push(e),this.processing||this.doNextTask()},t.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},t.prototype.doNextTask=function(){0!==this.size&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},t}(s.EventEmitter);n.EncodingQueue=a},{eventemitter3:"JJlS","./logger":"WOs9"}],GBTQ:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.DataConnection=void 0;var o=e("./util"),a=s(e("./logger")),c=e("./negotiator"),u=e("./enums"),l=e("./baseconnection"),h=e("./encodingQueue"),d=function(e){function t(n,r,i){var s=e.call(this,n,r,i)||this;return s.stringify=JSON.stringify,s.parse=JSON.parse,s._buffer=[],s._bufferSize=0,s._buffering=!1,s._chunkedData={},s._encodingQueue=new h.EncodingQueue,s.connectionId=s.options.connectionId||t.ID_PREFIX+o.util.randomToken(),s.label=s.options.label||s.connectionId,s.serialization=s.options.serialization||u.SerializationType.Binary,s.reliable=!!s.options.reliable,s._encodingQueue.on("done",function(e){s._bufferedSend(e)}),s._encodingQueue.on("error",function(){a.default.error("DC#"+s.connectionId+": Error occured in encoding from blob to arraybuffer, close DC"),s.close()}),s._negotiator=new c.Negotiator(s),s._negotiator.startConnection(s.options._payload||{originator:!0}),s}return r(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return u.ConnectionType.Data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){this._dc=e,this._configureDataChannel()},t.prototype._configureDataChannel=function(){var e=this;o.util.supports.binaryBlob&&!o.util.supports.reliable||(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){a.default.log("DC#"+e.connectionId+" dc connection success"),e._open=!0,e.emit(u.ConnectionEventType.Open)},this.dataChannel.onmessage=function(t){a.default.log("DC#"+e.connectionId+" dc onmessage:",t.data),e._handleDataMessage(t)},this.dataChannel.onclose=function(){a.default.log("DC#"+e.connectionId+" dc closed for:",e.peer),e.close()}},t.prototype._handleDataMessage=function(t){var n=this,r=t.data,i=r.constructor,s=r;if(this.serialization===u.SerializationType.Binary||this.serialization===u.SerializationType.BinaryUTF8){if(i===Blob)return void o.util.blobToArrayBuffer(r,function(e){var t=o.util.unpack(e);n.emit(u.ConnectionEventType.Data,t)});if(i===ArrayBuffer)s=o.util.unpack(r);else if(i===String){var a=o.util.binaryStringToArrayBuffer(r);s=o.util.unpack(a)}}else this.serialization===u.SerializationType.JSON&&(s=this.parse(r));s.__peerData?this._handleChunk(s):e.prototype.emit.call(this,u.ConnectionEventType.Data,s)},t.prototype._handleChunk=function(e){var t=e.__peerData,n=this._chunkedData[t]||{data:[],count:0,total:e.total};if(n.data[e.n]=e.data,n.count++,this._chunkedData[t]=n,n.total===n.count){delete this._chunkedData[t];var r=new Blob(n.data);this._handleDataMessage({data:r})}},t.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,e.prototype.emit.call(this,u.ConnectionEventType.Close))},t.prototype.send=function(t,n){if(this.open)if(this.serialization===u.SerializationType.JSON)this._bufferedSend(this.stringify(t));else if(this.serialization===u.SerializationType.Binary||this.serialization===u.SerializationType.BinaryUTF8){var r=o.util.pack(t);if(!n&&r.size>o.util.chunkedMTU)return void this._sendChunks(r);o.util.supports.binaryBlob?this._bufferedSend(r):this._encodingQueue.enque(r)}else this._bufferedSend(t);else e.prototype.emit.call(this,u.ConnectionEventType.Error,new Error("Connection is not open. You should listen for the `open` event before sending messages."))},t.prototype._bufferedSend=function(e){!this._buffering&&this._trySend(e)||(this._buffer.push(e),this._bufferSize=this._buffer.length)},t.prototype._trySend=function(n){var r=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>t.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){r._buffering=!1,r._tryBuffer()},50),!1;try{this.dataChannel.send(n)}catch(e){return a.default.error("DC#:"+this.connectionId+" Error when sending:",e),this._buffering=!0,this.close(),!1}return!0},t.prototype._tryBuffer=function(){this.open&&0!==this._buffer.length&&this._trySend(this._buffer[0])&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())},t.prototype._sendChunks=function(e){var t,n,r=o.util.chunk(e);a.default.log("DC#"+this.connectionId+" Try to send "+r.length+" chunks...");try{for(var s=i(r),c=s.next();!c.done;c=s.next())this.send(c.value,!0)}catch(u){t={error:u}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}},t.prototype.handleMessage=function(e){var t=e.payload;switch(e.type){case u.ServerMessageType.Answer:this._negotiator.handleSDP(e.type,t.sdp);break;case u.ServerMessageType.Candidate:this._negotiator.handleCandidate(t.candidate);break;default:a.default.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}},t.ID_PREFIX="dc_",t.MAX_BUFFERED_AMOUNT=8388608,t}(l.BaseConnection);n.DataConnection=d},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK","./encodingQueue":"GGp6"}],in7L:[function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.API=void 0;var o=e("./util"),a=s(e("./logger")),c=function(){function e(e){this._options=e}return e.prototype._buildUrl=function(e){return(this._options.secure?"https://":"http://")+this._options.host+":"+this._options.port+this._options.path+this._options.key+"/"+e+"?ts="+(new Date).getTime()+Math.random()},e.prototype.retrieveId=function(){return r(this,void 0,Promise,function(){var e,t,n,r;return i(this,function(i){switch(i.label){case 0:e=this._buildUrl("id"),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,fetch(e)];case 2:if(200!==(t=i.sent()).status)throw new Error("Error. Status:"+t.status);return[2,t.text()];case 3:throw n=i.sent(),a.default.error("Error retrieving ID",n),r="","/"===this._options.path&&this._options.host!==o.util.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r);case 4:return[2]}})})},e.prototype.listAllPeers=function(){return r(this,void 0,Promise,function(){var e,t,n;return i(this,function(r){switch(r.label){case 0:e=this._buildUrl("peers"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,fetch(e)];case 2:if(200!==(t=r.sent()).status){if(401===t.status)throw new Error("It doesn't look like you have permission to list peers IDs. "+(this._options.host===o.util.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature."));throw new Error("Error. Status:"+t.status)}return[2,t.json()];case 3:throw n=r.sent(),a.default.error("Error retrieving list peers",n),new Error("Could not get list peers from the server."+n);case 4:return[2]}})})},e}();n.API=c},{"./util":"BHXf","./logger":"WOs9"}],Hxpd:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(l){i={error:l}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.Peer=void 0;var c=e("eventemitter3"),u=e("./util"),l=a(e("./logger")),h=e("./socket"),d=e("./mediaconnection"),p=e("./dataconnection"),f=e("./enums"),v=e("./api"),m=function(e){function t(n,r){var s,o=e.call(this)||this;return o._id=null,o._lastServerId=null,o._destroyed=!1,o._disconnected=!1,o._open=!1,o._connections=new Map,o._lostMessages=new Map,n&&n.constructor==Object?r=n:n&&(s=n.toString()),r=i({debug:0,host:u.util.CLOUD_HOST,port:u.util.CLOUD_PORT,path:"/",key:t.DEFAULT_KEY,token:u.util.randomToken(),config:u.util.defaultConfig},r),o._options=r,"/"===o._options.host&&(o._options.host=window.location.hostname),o._options.path&&("/"!==o._options.path[0]&&(o._options.path="/"+o._options.path),"/"!==o._options.path[o._options.path.length-1]&&(o._options.path+="/")),void 0===o._options.secure&&o._options.host!==u.util.CLOUD_HOST?o._options.secure=u.util.isSecure():o._options.host==u.util.CLOUD_HOST&&(o._options.secure=!0),o._options.logFunction&&l.default.setLogFunction(o._options.logFunction),l.default.logLevel=o._options.debug||0,o._api=new v.API(r),o._socket=o._createServerConnection(),u.util.supports.audioVideo||u.util.supports.data?s&&!u.util.validateId(s)?(o._delayedAbort(f.PeerErrorType.InvalidID,'ID "'+s+'" is invalid'),o):(s?o._initialize(s):o._api.retrieveId().then(function(e){return o._initialize(e)}).catch(function(e){return o._abort(f.PeerErrorType.ServerError,e)}),o):(o._delayedAbort(f.PeerErrorType.BrowserIncompatible,"The current browser does not support WebRTC"),o)}return r(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connections",{get:function(){var e,t,n=Object.create(null);try{for(var r=s(this._connections),i=r.next();!i.done;i=r.next()){var a=o(i.value,2);n[a[0]]=a[1]}}catch(p){e={error:p}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),t.prototype._createServerConnection=function(){var e=this,t=new h.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(f.SocketEventType.Message,function(t){e._handleMessage(t)}),t.on(f.SocketEventType.Error,function(t){e._abort(f.PeerErrorType.SocketError,t)}),t.on(f.SocketEventType.Disconnected,function(){e.disconnected||(e.emitError(f.PeerErrorType.Network,"Lost connection to server."),e.disconnect())}),t.on(f.SocketEventType.Close,function(){e.disconnected||e._abort(f.PeerErrorType.SocketClosed,"Underlying socket is already closed.")}),t},t.prototype._initialize=function(e){this._id=e,this.socket.start(e,this._options.token)},t.prototype._handleMessage=function(e){var t,n,r=e.type,i=e.payload,o=e.src;switch(r){case f.ServerMessageType.Open:this._lastServerId=this.id,this._open=!0,this.emit(f.PeerEventType.Open,this.id);break;case f.ServerMessageType.Error:this._abort(f.PeerErrorType.ServerError,i.msg);break;case f.ServerMessageType.IdTaken:this._abort(f.PeerErrorType.UnavailableID,'ID "'+this.id+'" is taken');break;case f.ServerMessageType.InvalidKey:this._abort(f.PeerErrorType.InvalidKey,'API KEY "'+this._options.key+'" is invalid');break;case f.ServerMessageType.Leave:l.default.log("Received leave message from "+o),this._cleanupPeer(o),this._connections.delete(o);break;case f.ServerMessageType.Expire:this.emitError(f.PeerErrorType.PeerUnavailable,"Could not connect to peer "+o);break;case f.ServerMessageType.Offer:var a=i.connectionId;if((v=this.getConnection(o,a))&&(v.close(),l.default.warn("Offer received for existing Connection ID:"+a)),i.type===f.ConnectionType.Media)v=new d.MediaConnection(o,this,{connectionId:a,_payload:i,metadata:i.metadata}),this._addConnection(o,v),this.emit(f.PeerEventType.Call,v);else{if(i.type!==f.ConnectionType.Data)return void l.default.warn("Received malformed connection type:"+i.type);v=new p.DataConnection(o,this,{connectionId:a,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable}),this._addConnection(o,v),this.emit(f.PeerEventType.Connection,v)}var c=this._getMessages(a);try{for(var u=s(c),h=u.next();!h.done;h=u.next())v.handleMessage(h.value)}catch(m){t={error:m}}finally{try{h&&!h.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}break;default:if(!i)return void l.default.warn("You received a malformed message from "+o+" of type "+r);var v;(v=this.getConnection(o,a=i.connectionId))&&v.peerConnection?v.handleMessage(e):a?this._storeMessage(a,e):l.default.warn("You received an unrecognized message:",e)}},t.prototype._storeMessage=function(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)},t.prototype._getMessages=function(e){var t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]},t.prototype.connect=function(e,t){if(void 0===t&&(t={}),this.disconnected)return l.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(f.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");var n=new p.DataConnection(e,this,t);return this._addConnection(e,n),n},t.prototype.call=function(e,t,n){if(void 0===n&&(n={}),this.disconnected)return l.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(f.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(t){n._stream=t;var r=new d.MediaConnection(e,this,n);return this._addConnection(e,r),r}l.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.")},t.prototype._addConnection=function(e,t){l.default.log("add connection "+t.type+":"+t.connectionId+" to peerId:"+e),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)},t.prototype._removeConnection=function(e){var t=this._connections.get(e.peer);if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}this._lostMessages.delete(e.connectionId)},t.prototype.getConnection=function(e,t){var n,r,i=this._connections.get(e);if(!i)return null;try{for(var o=s(i),a=o.next();!a.done;a=o.next()){var c=a.value;if(c.connectionId===t)return c}}catch(d){n={error:d}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return null},t.prototype._delayedAbort=function(e,t){var n=this;setTimeout(function(){n._abort(e,t)},0)},t.prototype._abort=function(e,t){l.default.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()},t.prototype.emitError=function(e,t){var n;l.default.error("Error:",t),(n="string"==typeof t?new Error(t):t).type=e,this.emit(f.PeerEventType.Error,n)},t.prototype.destroy=function(){this.destroyed||(l.default.log("Destroy peer with ID:"+this.id),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit(f.PeerEventType.Close))},t.prototype._cleanup=function(){var e,t;try{for(var n=s(this._connections.keys()),r=n.next();!r.done;r=n.next()){var i=r.value;this._cleanupPeer(i),this._connections.delete(i)}}catch(u){e={error:u}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.socket.removeAllListeners()},t.prototype._cleanupPeer=function(e){var t,n,r=this._connections.get(e);if(r)try{for(var i=s(r),o=i.next();!o.done;o=i.next())o.value.close()}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},t.prototype.disconnect=function(){if(!this.disconnected){var e=this.id;l.default.log("Disconnect peer with ID:"+e),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit(f.PeerEventType.Disconnected,e)}},t.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)l.default.log("Attempting reconnection to server with ID "+this._lastServerId),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer "+this.id+" cannot reconnect because it is not disconnected from the server!");l.default.error("In a hurry? We're still trying to make the initial connection!")}},t.prototype.listAllPeers=function(e){var t=this;void 0===e&&(e=function(e){}),this._api.listAllPeers().then(function(t){return e(t)}).catch(function(e){return t._abort(f.PeerErrorType.ServerError,e)})},t.DEFAULT_KEY="peerjs",t}(c.EventEmitter);n.Peer=m},{eventemitter3:"JJlS","./util":"BHXf","./logger":"WOs9","./socket":"wJlv","./mediaconnection":"dbHP","./dataconnection":"GBTQ","./enums":"ZRYf","./api":"in7L"}],iTK6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.peerjs=void 0;var r=e("./util"),i=e("./peer");n.peerjs={Peer:i.Peer,util:r.util},n.default=i.Peer,window.peerjs=n.peerjs,window.Peer=i.Peer},{"./util":"BHXf","./peer":"Hxpd"}]},{},["iTK6"])},5094:(e,t,n)=>{"use strict";n.d(t,{X:()=>i});var r=n(9162),i=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return(0,r.ZT)(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e._value;if(e.hasError)throw e.thrownError;return this._throwIfClosed(),t},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(n(6889).x)},1776:(e,t,n)=>{"use strict";n.d(t,{y:()=>l});var r=n(2049),i=n(8839),s=n(8794),o=n(2738);function a(e){return 0===e.length?o.y:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}}var c=n(6806),u=n(8853),l=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var s,o=(s=e)&&s instanceof r.Lv||function(e){return e&&(0,u.m)(e.next)&&(0,u.m)(e.error)&&(0,u.m)(e.complete)}(s)&&(0,i.Nn)(s)?e:new r.Hp(e,t,n);if(c.v.useDeprecatedSynchronousErrorHandling)this._deprecatedSyncErrorSubscribe(o);else{var a=this.operator,l=this.source;o.add(a?a.call(o,l):l?this._subscribe(o):this._trySubscribe(o))}return o},e.prototype._deprecatedSyncErrorSubscribe=function(e){var t=e;t._syncErrorHack_isSubscribing=!0;var n=this.operator;if(n)e.add(n.call(e,this.source));else try{e.add(this._subscribe(e))}catch(i){t.__syncError=i}for(var r=t;r;){if("__syncError"in r)try{throw r.__syncError}finally{e.unsubscribe()}r=r.destination}t._syncErrorHack_isSubscribing=!1},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=h(t))(function(t,r){var i;i=n.subscribe(function(t){try{e(t)}catch(n){r(n),null==i||i.unsubscribe()}},r,t)})},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[s.L]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?a(e)(this):this},e.prototype.toPromise=function(e){var t=this;return new(e=h(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function h(e){var t;return null!==(t=null!=e?e:c.v.Promise)&&void 0!==t?t:Promise}},6889:(e,t,n)=>{"use strict";n.d(t,{x:()=>c});var r=n(9162),i=n(1776),s=n(8839),o=(0,n(3864).d)(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),a=n(5850),c=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return(0,r.ZT)(t,e),t.prototype.lift=function(e){var t=new u(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new o},t.prototype.next=function(e){var t,n;if(this._throwIfClosed(),!this.isStopped){var i=this.observers.slice();try{for(var s=(0,r.XA)(i),o=s.next();!o.done;o=s.next())o.value.next(e)}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}}},t.prototype.error=function(e){if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;for(var t=this.observers;t.length;)t.shift().error(e)}},t.prototype.complete=function(){if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;for(var e=this.observers;e.length;)e.shift().complete()}},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=t.observers;return t.hasError||t.isStopped?s.Lc:(n.push(e),new s.w0(function(){return(0,a.P)(n,e)}))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.isStopped;t.hasError?e.error(t.thrownError):n&&e.complete()},t.prototype.asObservable=function(){var e=new i.y;return e.source=this,e},t.create=function(e,t){return new u(e,t)},t}(i.y),u=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return(0,r.ZT)(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:s.Lc},t}(c)},2049:(e,t,n)=>{"use strict";n.d(t,{Hp:()=>p,Lv:()=>d});var r=n(9162),i=n(8853),s=n(8839),o=n(6806),a=n(8550),c=n(6186),u=l("C",void 0,void 0);function l(e,t,n){return{kind:e,value:t,error:n}}var h=n(9385),d=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,(0,s.Nn)(t)&&t.add(n)):n.destination=g,n}return(0,r.ZT)(t,e),t.create=function(e,t,n){return new p(e,t,n)},t.prototype.next=function(e){this.isStopped?m(function(e){return l("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?m(l("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?m(u,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(s.w0),p=function(e){function t(t,n,r){var s,a=e.call(this)||this;if((0,i.m)(t))s=t;else if(t){var u;s=t.next,n=t.error,r=t.complete,a&&o.v.useDeprecatedNextContext?(u=Object.create(t)).unsubscribe=function(){return a.unsubscribe()}:u=t,s=null==s?void 0:s.bind(u),n=null==n?void 0:n.bind(u),r=null==r?void 0:r.bind(u)}return a.destination={next:s?f(s,a):c.Z,error:f(null!=n?n:v,a),complete:r?f(r,a):c.Z},a}return(0,r.ZT)(t,e),t}(d);function f(e,t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{e.apply(void 0,(0,r.ev)([],(0,r.CR)(n)))}catch(s){if(o.v.useDeprecatedSynchronousErrorHandling){if(!t._syncErrorHack_isSubscribing)throw s;t.__syncError=s}else(0,a.h)(s)}}}function v(e){throw e}function m(e,t){var n=o.v.onStoppedNotification;n&&h.z.setTimeout(function(){return n(e,t)})}var g={closed:!0,next:c.Z,error:v,complete:c.Z}},8839:(e,t,n)=>{"use strict";n.d(t,{Lc:()=>c,w0:()=>a,Nn:()=>u});var r=n(9162),i=n(8853),s=(0,n(3864).d)(function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}),o=n(5850),a=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._teardowns=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,o,a;if(!this.closed){this.closed=!0;var c=this._parentage;if(c)if(this._parentage=null,Array.isArray(c))try{for(var u=(0,r.XA)(c),h=u.next();!h.done;h=u.next())h.value.remove(this)}catch(g){e={error:g}}finally{try{h&&!h.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}else c.remove(this);var d=this.initialTeardown;if((0,i.m)(d))try{d()}catch(y){a=y instanceof s?y.errors:[y]}var p=this._teardowns;if(p){this._teardowns=null;try{for(var f=(0,r.XA)(p),v=f.next();!v.done;v=f.next()){var m=v.value;try{l(m)}catch(b){a=null!=a?a:[],b instanceof s?a=(0,r.ev)((0,r.ev)([],(0,r.CR)(a)),(0,r.CR)(b.errors)):a.push(b)}}}catch(S){n={error:S}}finally{try{v&&!v.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}}if(a)throw new s(a)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)l(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(n=this._teardowns)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&(0,o.P)(t,e)},e.prototype.remove=function(t){var n=this._teardowns;n&&(0,o.P)(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),c=a.EMPTY;function u(e){return e instanceof a||e&&"closed"in e&&(0,i.m)(e.remove)&&(0,i.m)(e.add)&&(0,i.m)(e.unsubscribe)}function l(e){(0,i.m)(e)?e():e.unsubscribe()}},6806:(e,t,n)=>{"use strict";n.d(t,{v:()=>r});var r={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7331:(e,t,n)=>{"use strict";n.d(t,{c:()=>u});var r=n(9162),i=n(1776),s=n(8839),o=n(3681),a=n(5076),c=n(424),u=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._subject=null,r._refCount=0,r._connection=null,(0,c.A)(t)&&(r.lift=t.lift),r}return(0,r.ZT)(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype._teardown=function(){this._refCount=0;var e=this._connection;this._subject=this._connection=null,null==e||e.unsubscribe()},t.prototype.connect=function(){var e=this,t=this._connection;if(!t){t=this._connection=new s.w0;var n=this.getSubject();t.add(this.source.subscribe(new a.Q(n,void 0,function(){e._teardown(),n.complete()},function(t){e._teardown(),n.error(t)},function(){return e._teardown()}))),t.closed&&(this._connection=null,t=s.w0.EMPTY)}return t},t.prototype.refCount=function(){return(0,o.x)()(this)},t}(i.y)},1598:(e,t,n)=>{"use strict";n.d(t,{a:()=>h});var r=n(1776),i=n(1260),s=n(8476),o=n(2738),a=n(9607),c=n(3856),u=n(5526),l=n(5076);function h(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,c.yG)(e),l=(0,c.jO)(e),h=(0,i.D)(e),p=h.args,f=h.keys;if(0===p.length)return(0,s.Dp)([],n);var v=new r.y(d(p,n,f?function(e){return(0,u.n)(f,e)}:o.y));return l?v.pipe((0,a.Z)(l)):v}function d(e,t,n){return void 0===n&&(n=o.y),function(r){p(t,function(){for(var i=e.length,o=new Array(i),a=i,c=i,u=function(i){p(t,function(){var u=(0,s.Dp)(e[i],t),h=!1;u.subscribe(new l.Q(r,function(e){o[i]=e,h||(h=!0,c--),c||r.next(n(o.slice()))},function(){--a||r.complete()}))},r)},h=0;h<i;h++)u(h)},r)}}function p(e,t,n){e?n.add(e.schedule(t)):t()}},9044:(e,t,n)=>{"use strict";n.d(t,{z:()=>a});var r=n(23);function i(){return(0,r.J)(1)}var s=n(5994),o=n(3856);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i()((0,s.h)(e,(0,o.yG)(e)))}},482:(e,t,n)=>{"use strict";n.d(t,{P:()=>s});var r=n(1776),i=n(8476);function s(e){return new r.y(function(t){(0,i.Xf)(e()).subscribe(t)})}},6149:(e,t,n)=>{"use strict";n.d(t,{E:()=>r});var r=new(n(1776).y)(function(e){return e.complete()})},8476:(e,t,n)=>{"use strict";n.d(t,{Dp:()=>S,OO:()=>_,Xf:()=>w});var r=n(9162),i=n(4297),s=n(8853);function o(e){return(0,s.m)(null==e?void 0:e.then)}var a=n(8794),c=n(1776),u=n(8839),l=n(2504),h="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function d(e,t){if(!e)throw new Error("Iterable cannot be null");return new c.y(function(n){var r=new u.w0;return r.add(t.schedule(function(){var i=e[Symbol.asyncIterator]();r.add(t.schedule(function(){var e=this;i.next().then(function(t){t.done?n.complete():(n.next(t.value),e.schedule())})}))})),r})}function p(e){return(0,s.m)(e[a.L])}function f(e){return(0,s.m)(null==e?void 0:e[h])}function v(e){return Symbol.asyncIterator&&(0,s.m)(null==e?void 0:e[Symbol.asyncIterator])}function m(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function g(e){return(0,r.FC)(this,arguments,function(){var t,n,i;return(0,r.Jh)(this,function(s){switch(s.label){case 0:t=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,(0,r.qq)(t.read())];case 3:return n=s.sent(),i=n.value,n.done?[4,(0,r.qq)(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,(0,r.qq)(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function y(e){return(0,s.m)(null==e?void 0:e.getReader)}var b=n(8550);function S(e,t){return t?function(e,t){if(null!=e){if(p(e))return function(e,t){return new c.y(function(n){var r=new u.w0;return r.add(t.schedule(function(){var i=e[a.L]();r.add(i.subscribe({next:function(e){r.add(t.schedule(function(){return n.next(e)}))},error:function(e){r.add(t.schedule(function(){return n.error(e)}))},complete:function(){r.add(t.schedule(function(){return n.complete()}))}}))})),r})}(e,t);if((0,i.z)(e))return(0,l.r)(e,t);if(o(e))return function(e,t){return new c.y(function(n){return t.schedule(function(){return e.then(function(e){n.add(t.schedule(function(){n.next(e),n.add(t.schedule(function(){return n.complete()}))}))},function(e){n.add(t.schedule(function(){return n.error(e)}))})})})}(e,t);if(v(e))return d(e,t);if(f(e))return function(e,t){return new c.y(function(n){var r;return n.add(t.schedule(function(){r=e[h](),function(e,t,n,r){void 0===r&&(r=0);var i=t.schedule(function(){try{n.call(this)}catch(t){e.error(t)}},r);e.add(i)}(n,t,function(){var e=r.next(),t=e.value;e.done?n.complete():(n.next(t),this.schedule())})})),function(){return(0,s.m)(null==r?void 0:r.return)&&r.return()}})}(e,t);if(y(e))return function(e,t){return d(g(e),t)}(e,t)}throw m(e)}(e,t):w(e)}function w(e){if(e instanceof c.y)return e;if(null!=e){if(p(e))return u=e,new c.y(function(e){var t=u[a.L]();if((0,s.m)(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")});if((0,i.z)(e))return _(e);if(o(e))return n=e,new c.y(function(e){n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,b.h)});if(v(e))return C(e);if(f(e))return t=e,new c.y(function(e){var n,i;try{for(var s=(0,r.XA)(t),o=s.next();!o.done;o=s.next())if(e.next(o.value),e.closed)return}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}e.complete()});if(y(e))return C(g(e))}var t,n,u;throw m(e)}function _(e){return new c.y(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function C(e){return new c.y(function(t){(function(e,t){var n,i,s,o;return(0,r.mG)(this,void 0,void 0,function(){var a;return(0,r.Jh)(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=(0,r.KL)(e),c.label=1;case 1:return[4,n.next()];case 2:if((i=c.sent()).done)return[3,4];if(t.next(i.value),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),s={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),i&&!i.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})})(e,t).catch(function(e){return t.error(e)})})}},5994:(e,t,n)=>{"use strict";n.d(t,{h:()=>s});var r=n(2504),i=n(8476);function s(e,t){return t?(0,r.r)(e,t):(0,i.OO)(e)}},6937:(e,t,n)=>{"use strict";n.d(t,{R:()=>p});var r=n(9162),i=n(1776),s=n(7216),o=n(4297),a=n(8853),c=n(9607),u=n(5994),l=["addListener","removeListener"],h=["addEventListener","removeEventListener"],d=["on","off"];function p(e,t,n,v){if((0,a.m)(n)&&(v=n,n=void 0),v)return p(e,t,n).pipe((0,c.Z)(v));var m=(0,r.CR)(function(e){return(0,a.m)(e.addEventListener)&&(0,a.m)(e.removeEventListener)}(e)?h.map(function(r){return function(i){return e[r](t,i,n)}}):function(e){return(0,a.m)(e.addListener)&&(0,a.m)(e.removeListener)}(e)?l.map(f(e,t)):function(e){return(0,a.m)(e.on)&&(0,a.m)(e.off)}(e)?d.map(f(e,t)):[],2),g=m[0],y=m[1];if(!g&&(0,o.z)(e))return(0,s.z)(function(e){return p(e,t,n)})((0,u.h)(e));if(!g)throw new TypeError("Invalid event target");return new i.y(function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return g(t),function(){return y(t)}})}function f(e,t){return function(n){return function(r){return e[n](t,r)}}}},3763:(e,t,n)=>{"use strict";n.d(t,{T:()=>c});var r=n(23),i=n(5994),s=n(8476),o=n(6149),a=n(3856);function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,a.yG)(e),c=(0,a._6)(e,1/0),u=e;return u.length?1===u.length?(0,s.Xf)(u[0]):(0,r.J)(c)((0,i.h)(u,n)):o.E}},1964:(e,t,n)=>{"use strict";n.d(t,{of:()=>o});var r=n(5994),i=n(2504),s=n(3856);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,s.yG)(e);return n?(0,i.r)(e,n):(0,r.h)(e)}},8468:(e,t,n)=>{"use strict";n.d(t,{H:()=>o});var r=n(1776),i=n(6107),s=n(5097);function o(e,t,n){void 0===e&&(e=0),void 0===n&&(n=i.P);var o=-1;return null!=t&&((0,s.K)(t)?n=t:o=t),new r.y(function(t){var r,i=(r=e)instanceof Date&&!isNaN(r)?+e-n.now():e;i<0&&(i=0);var s=0;return n.schedule(function(){t.closed||(t.next(s++),0<=o?this.schedule(void 0,o):t.complete())},i)})}},5076:(e,t,n)=>{"use strict";n.d(t,{Q:()=>i});var r=n(9162),i=function(e){function t(t,n,r,i,s){var o=e.call(this,t)||this;return o.onFinalize=s,o._next=n?function(e){try{n(e)}catch(r){t.error(r)}}:e.prototype._next,o._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,o._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,o}return(0,r.ZT)(t,e),t.prototype.unsubscribe=function(){var t,n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))},t}(n(2049).Lv)},7783:(e,t,n)=>{"use strict";n.d(t,{e:()=>c});var r=n(6107),i=n(424),s=n(8476),o=n(5076),a=n(8468);function c(e,t){return void 0===t&&(t=r.P),n=function(){return(0,a.H)(e,t)},(0,i.e)(function(e,t){var r=!1,i=null,a=null,c=!1,u=function(){if(null==a||a.unsubscribe(),a=null,r){r=!1;var e=i;i=null,t.next(e)}c&&t.complete()},l=function(){a=null,c&&t.complete()};e.subscribe(new o.Q(t,function(e){r=!0,i=e,a||(0,s.Xf)(n()).subscribe(a=new o.Q(t,u,l))},function(){c=!0,(!r||!a||a.closed)&&t.complete()}))});var n}},2687:(e,t,n)=>{"use strict";n.d(t,{x:()=>o});var r=n(2738),i=n(424),s=n(5076);function o(e,t){return void 0===t&&(t=r.y),e=null!=e?e:a,(0,i.e)(function(n,r){var i,o=!0;n.subscribe(new s.Q(r,function(n){var s=t(n);!o&&e(i,s)||(o=!1,i=s,r.next(n))}))})}function a(e,t){return e===t}},4689:(e,t,n)=>{"use strict";n.d(t,{h:()=>s});var r=n(424),i=n(5076);function s(e,t){return(0,r.e)(function(n,r){var s=0;n.subscribe(new i.Q(r,function(n){return e.call(t,n,s++)&&r.next(n)}))})}},5207:(e,t,n)=>{"use strict";n.d(t,{U:()=>s});var r=n(424),i=n(5076);function s(e,t){return(0,r.e)(function(n,r){var s=0;n.subscribe(new i.Q(r,function(n){r.next(e.call(t,n,s++))}))})}},23:(e,t,n)=>{"use strict";n.d(t,{J:()=>s});var r=n(7216),i=n(2738);function s(e){return void 0===e&&(e=1/0),(0,r.z)(i.y,e)}},7216:(e,t,n)=>{"use strict";n.d(t,{z:()=>c});var r=n(5207),i=n(8476),s=n(424),o=n(5076),a=n(8853);function c(e,t,n){return void 0===n&&(n=1/0),(0,a.m)(t)?c(function(n,s){return(0,r.U)(function(e,r){return t(n,e,s,r)})((0,i.Xf)(e(n,s)))},n):("number"==typeof t&&(n=t),(0,s.e)(function(t,r){return function(e,t,n,r,s,a,c,u){var l=[],h=0,d=0,p=!1,f=function(){!p||l.length||h||t.complete()},v=function(e){h++;var s=!1;(0,i.Xf)(n(e,d++)).subscribe(new o.Q(t,function(e){t.next(e)},function(){s=!0},void 0,function(){if(s)try{for(h--;l.length&&h<r;)void 0,e=l.shift(),v(e);f()}catch(n){t.error(n)}var e}))};return e.subscribe(new o.Q(t,function(e){return h<r?v(e):l.push(e)},function(){p=!0,f()})),function(){}}(t,r,e,n)}))}},3681:(e,t,n)=>{"use strict";n.d(t,{x:()=>s});var r=n(424),i=n(5076);function s(){return(0,r.e)(function(e,t){var n=null;e._refCount++;var r=new i.Q(t,void 0,void 0,void 0,function(){if(!e||e._refCount<=0||0<--e._refCount)n=null;else{var r=e._connection,i=n;n=null,!r||i&&r!==i||r.unsubscribe(),t.unsubscribe()}});e.subscribe(r),r.closed||(n=e.connect())})}},7540:(e,t,n)=>{"use strict";n.d(t,{w:()=>o});var r=n(8476),i=n(424),s=n(5076);function o(e,t){return(0,i.e)(function(n,i){var o=null,a=0,c=!1,u=function(){return c&&!o&&i.complete()};n.subscribe(new s.Q(i,function(n){null==o||o.unsubscribe();var c=0,l=a++;(0,r.Xf)(e(n,l)).subscribe(o=new s.Q(i,function(e){return i.next(t?t(n,e,l,c++):e)},function(){o=null,u()}))},function(){c=!0,u()}))})}},4294:(e,t,n)=>{"use strict";n.d(t,{q:()=>o});var r=n(6149),i=n(424),s=n(5076);function o(e){return e<=0?function(){return r.E}:(0,i.e)(function(t,n){var r=0;t.subscribe(new s.Q(n,function(t){++r<=e&&(n.next(t),e<=r&&n.complete())}))})}},9922:(e,t,n)=>{"use strict";n.d(t,{b:()=>a});var r=n(8853),i=n(424),s=n(5076),o=n(2738);function a(e,t,n){var a=(0,r.m)(e)||t||n?{next:e,error:t,complete:n}:e;return a?(0,i.e)(function(e,t){e.subscribe(new s.Q(t,function(e){var n;null===(n=a.next)||void 0===n||n.call(a,e),t.next(e)},function(){var e;null===(e=a.complete)||void 0===e||e.call(a),t.complete()},function(e){var n;null===(n=a.error)||void 0===n||n.call(a,e),t.error(e)}))}):o.y}},2504:(e,t,n)=>{"use strict";n.d(t,{r:()=>i});var r=n(1776);function i(e,t){return new r.y(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}},6107:(e,t,n)=>{"use strict";n.d(t,{P:()=>h,z:()=>l});var r=n(9162),i=function(e){function t(t,n){return e.call(this)||this}return(0,r.ZT)(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(n(8839).w0),s={setInterval:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=s.delegate;return((null==n?void 0:n.setInterval)||setInterval).apply(void 0,(0,r.ev)([],(0,r.CR)(e)))},clearInterval:function(e){var t=s.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},o=n(5850),a=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return(0,r.ZT)(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),s.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;s.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,(0,o.P)(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(i),c=n(2248),u=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=c.l.now,e}(),l=new(function(e){function t(t,n){void 0===n&&(n=u.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r._scheduled=void 0,r}return(0,r.ZT)(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(u))(a),h=l},2248:(e,t,n)=>{"use strict";n.d(t,{l:()=>r});var r={now:function(){return(r.delegate||Date).now()},delegate:void 0}},9385:(e,t,n)=>{"use strict";n.d(t,{z:()=>i});var r=n(9162),i={setTimeout:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=i.delegate;return((null==n?void 0:n.setTimeout)||setTimeout).apply(void 0,(0,r.ev)([],(0,r.CR)(e)))},clearTimeout:function(e){var t=i.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0}},8794:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},3856:(e,t,n)=>{"use strict";n.d(t,{jO:()=>o,yG:()=>a,_6:()=>c});var r=n(8853),i=n(5097);function s(e){return e[e.length-1]}function o(e){return(0,r.m)(s(e))?e.pop():void 0}function a(e){return(0,i.K)(s(e))?e.pop():void 0}function c(e,t){return"number"==typeof s(e)?e.pop():t}},1260:(e,t,n)=>{"use strict";n.d(t,{D:()=>a});var r=Array.isArray,i=Object.getPrototypeOf,s=Object.prototype,o=Object.keys;function a(e){if(1===e.length){var t=e[0];if(r(t))return{args:t,keys:null};if((a=t)&&"object"==typeof a&&i(a)===s){var n=o(t);return{args:n.map(function(e){return t[e]}),keys:n}}}var a;return{args:e,keys:null}}},5850:(e,t,n)=>{"use strict";function r(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}n.d(t,{P:()=>r})},3864:(e,t,n)=>{"use strict";function r(e){var t=e(function(e){Error.call(e),e.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}n.d(t,{d:()=>r})},5526:(e,t,n)=>{"use strict";function r(e,t){return e.reduce(function(e,n,r){return e[n]=t[r],e},{})}n.d(t,{n:()=>r})},2738:(e,t,n)=>{"use strict";function r(e){return e}n.d(t,{y:()=>r})},4297:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},8853:(e,t,n)=>{"use strict";function r(e){return"function"==typeof e}n.d(t,{m:()=>r})},5097:(e,t,n)=>{"use strict";n.d(t,{K:()=>i});var r=n(8853);function i(e){return e&&(0,r.m)(e.schedule)}},424:(e,t,n)=>{"use strict";n.d(t,{A:()=>i,e:()=>s});var r=n(8853);function i(e){return(0,r.m)(null==e?void 0:e.lift)}function s(e){return function(t){if(i(t))return t.lift(function(t){try{return e(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}},9607:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(9162),i=n(5207),s=Array.isArray;function o(e){return(0,i.U)(function(t){return function(e,t){return s(t)?e.apply(void 0,(0,r.ev)([],(0,r.CR)(t))):e(t)}(e,t)})}},6186:(e,t,n)=>{"use strict";function r(){}n.d(t,{Z:()=>r})},8550:(e,t,n)=>{"use strict";n.d(t,{h:()=>s});var r=n(6806),i=n(9385);function s(e){i.z.setTimeout(function(){var t=r.v.onUnhandledError;if(!t)throw e;t(e)})}},449:function(e,t,n){var r;!function(i,s){"use strict";var o="function",a="undefined",c="object",u="string",l="model",h="name",d="type",p="vendor",f="version",v="architecture",m="console",g="mobile",y="tablet",b="smarttv",S="wearable",w="embedded",_="Amazon",C="Apple",T="ASUS",E="BlackBerry",x="Google",P="Huawei",k="LG",R="Microsoft",O="Motorola",I="Samsung",A="Sony",N="Xiaomi",D="Zebra",M="Facebook",L=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},j=function(e,t){return typeof e===u&&-1!==F(t).indexOf(F(e))},F=function(e){return e.toLowerCase()},B=function(e,t){if(typeof e===u)return e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof t===a?e:e.substring(0,255)},z=function(e,t){for(var n,r,i,a,u,l,h=0;h<t.length&&!u;){var d=t[h],p=t[h+1];for(n=r=0;n<d.length&&!u;)if(u=d[n++].exec(e))for(i=0;i<p.length;i++)l=u[++r],typeof(a=p[i])===c&&a.length>0?2===a.length?this[a[0]]=typeof a[1]==o?a[1].call(this,l):a[1]:3===a.length?this[a[0]]=typeof a[1]!==o||a[1].exec&&a[1].test?l?l.replace(a[1],a[2]):s:l?a[1].call(this,l,a[2]):s:4===a.length&&(this[a[0]]=l?a[3].call(this,l.replace(a[1],a[2])):s):this[a]=l||s;h+=2}},U=function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(j(t[n][r],e))return"?"===n?s:n}else if(j(t[n],e))return"?"===n?s:n;return e},H={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},V={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,f],[/opios[\/ ]+([\w\.]+)/i],[f,[h,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[f,[h,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[h,f],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[h,"UCBrowser"]],[/\bqbcore\/([\w\.]+)/i],[f,[h,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[f,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[h,"IE"]],[/yabrowser\/([\w\.]+)/i],[f,[h,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure Browser"],f],[/\bfocus\/([\w\.]+)/i],[f,[h,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[f,[h,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[h,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[h,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[f,[h,"Firefox"]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 Browser"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[h,f],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,M],f],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[h,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[h,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[h,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,"Chrome WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[h,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,f],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[f,[h,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[f,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[f,U,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[h,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[h,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,F]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[v,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[v,"armhf"]],[/windows (ce|mobile); ppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[v,/ower/,"",F]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[v,F]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[p,I],[d,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[l,[p,I],[d,g]],[/\((ip(?:hone|od)[\w ]*);/i],[l,[p,C],[d,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[p,C],[d,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[p,P],[d,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[l,[p,P],[d,g]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[l,/_/g," "],[p,N],[d,g]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[p,N],[d,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[p,"OPPO"],[d,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[p,"Vivo"],[d,g]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[l,[p,"Realme"],[d,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[p,O],[d,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[p,O],[d,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[p,k],[d,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[p,k],[d,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[p,"Lenovo"],[d,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[p,"Nokia"],[d,g]],[/(pixel c)\b/i],[l,[p,x],[d,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[p,x],[d,g]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[p,A],[d,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[p,A],[d,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[p,"OnePlus"],[d,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[p,_],[d,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[p,_],[d,g]],[/(playbook);[-\w\),; ]+(rim)/i],[l,p,[d,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[p,E],[d,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[p,T],[d,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[p,T],[d,g]],[/(nexus 9)/i],[l,[p,"HTC"],[d,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[p,[l,/_/g," "],[d,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[p,"Acer"],[d,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[p,"Meizu"],[d,g]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[p,"Sharp"],[d,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,l,[d,g]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,l,[d,y]],[/(surface duo)/i],[l,[p,R],[d,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[p,"Fairphone"],[d,g]],[/(u304aa)/i],[l,[p,"AT&T"],[d,g]],[/\bsie-(\w*)/i],[l,[p,"Siemens"],[d,g]],[/\b(rct\w+) b/i],[l,[p,"RCA"],[d,y]],[/\b(venue[\d ]{2,7}) b/i],[l,[p,"Dell"],[d,y]],[/\b(q(?:mv|ta)\w+) b/i],[l,[p,"Verizon"],[d,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[p,"Barnes & Noble"],[d,y]],[/\b(tm\d{3}\w+) b/i],[l,[p,"NuVision"],[d,y]],[/\b(k88) b/i],[l,[p,"ZTE"],[d,y]],[/\b(nx\d{3}j) b/i],[l,[p,"ZTE"],[d,g]],[/\b(gen\d{3}) b.+49h/i],[l,[p,"Swiss"],[d,g]],[/\b(zur\d{3}) b/i],[l,[p,"Swiss"],[d,y]],[/\b((zeki)?tb.*\b) b/i],[l,[p,"Zeki"],[d,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],l,[d,y]],[/\b(ns-?\w{0,9}) b/i],[l,[p,"Insignia"],[d,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[p,"NextBook"],[d,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],l,[d,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],l,[d,g]],[/\b(ph-1) /i],[l,[p,"Essential"],[d,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[p,"Envizen"],[d,y]],[/\b(trio[-\w\. ]+) b/i],[l,[p,"MachSpeed"],[d,y]],[/\btu_(1491) b/i],[l,[p,"Rotor"],[d,y]],[/(shield[\w ]+) b/i],[l,[p,"Nvidia"],[d,y]],[/(sprint) (\w+)/i],[p,l,[d,g]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[p,R],[d,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[p,D],[d,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[p,D],[d,g]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,l,[d,m]],[/droid.+; (shield) bui/i],[l,[p,"Nvidia"],[d,m]],[/(playstation [345portablevi]+)/i],[l,[p,A],[d,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[p,R],[d,m]],[/smart-tv.+(samsung)/i],[p,[d,b]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[p,I],[d,b]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,k],[d,b]],[/(apple) ?tv/i],[p,[l,"Apple TV"],[d,b]],[/crkey/i],[[l,"Chromecast"],[p,x],[d,b]],[/droid.+aft(\w)( bui|\))/i],[l,[p,_],[d,b]],[/\(dtv[\);].+(aquos)/i],[l,[p,"Sharp"],[d,b]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[p,B],[l,B],[d,b]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,b]],[/((pebble))app/i],[p,l,[d,S]],[/droid.+; (glass) \d/i],[l,[p,x],[d,S]],[/droid.+; (wt63?0{2,3})\)/i],[l,[p,D],[d,S]],[/(quest( 2)?)/i],[l,[p,M],[d,S]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[d,w]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[l,[d,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[d,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,y]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[d,g]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[h,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[h,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,f],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[h,[f,U,H]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[h,"Windows"],[f,U,H]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,"Mac OS"],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[f,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,f],[/\(bb(10);/i],[f,[h,E]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[h,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[h,"webOS"]],[/crkey\/([\d\.]+)/i],[f,[h,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[h,"Chromium OS"],f],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,f],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[h,f]]},q=function(e,t){if(typeof e===c&&(t=e,e=s),!(this instanceof q))return new q(e,t).getResult();var n=e||(typeof i!==a&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),r=t?function(e,t){var n={};for(var r in e)n[r]=t[r]&&t[r].length%2==0?t[r].concat(e[r]):e[r];return n}(V,t):V;return this.getBrowser=function(){var e,t={};return t.name=s,t.version=s,z.call(t,n,r.browser),t.major=typeof(e=t.version)===u?e.replace(/[^\d\.]/g,"").split(".")[0]:s,t},this.getCPU=function(){var e={};return e.architecture=s,z.call(e,n,r.cpu),e},this.getDevice=function(){var e={};return e.vendor=s,e.model=s,e.type=s,z.call(e,n,r.device),e},this.getEngine=function(){var e={};return e.name=s,e.version=s,z.call(e,n,r.engine),e},this.getOS=function(){var e={};return e.name=s,e.version=s,z.call(e,n,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=typeof e===u&&e.length>255?B(e,255):e,this},this.setUA(n),this};q.VERSION="1.0.2",q.BROWSER=L([h,f,"major"]),q.CPU=L([v]),q.DEVICE=L([l,p,d,m,g,b,y,S,w]),q.ENGINE=q.OS=L([h,f]),typeof t!==a?(e.exports&&(t=e.exports=q),t.UAParser=q):n.amdO?(r=(function(){return q}).call(t,n,t,e))===s||(e.exports=r):typeof i!==a&&(i.UAParser=q);var $=typeof i!==a&&(i.jQuery||i.Zepto);if($&&!$.ua){var G=new q;$.ua=G.getResult(),$.ua.get=function(){return G.getUA()},$.ua.set=function(e){G.setUA(e);var t=G.getResult();for(var n in t)$.ua[n]=t[n]}}}("object"==typeof window?window:this)},6118:(e,t,n)=>{"use strict";var r;n.d(t,{Z:()=>l});var i=new Uint8Array(16);function s(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}const o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,a=function(e){return"string"==typeof e&&o.test(e)};for(var c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));const l=function(e,t,n){var r=(e=e||{}).random||(e.rng||s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!a(n))throw TypeError("Stringified UUID is invalid");return n}(r)}},2293:(e,t,n)=>{"use strict";n.d(t,{B:()=>o});var r=n(4004),i=n(5040),s=n(8647);let o=(()=>{class e extends r.AE{constructor(e){super(e),this.store=e,this.user$=this.select("user"),this.bindings$=this.select("bindings"),this.state$=this.select()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(s.J))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},1352:(e,t,n)=>{"use strict";n.d(t,{K:()=>l});var r=n(4762),i=n(2340),s=n(2843),o=n(5050),a=n(5040),c=n(8647),u=n(9338);let l=(()=>{class e{constructor(e,t){this.emotesStore=e,this.toastService=t,this.UpdateKeyword=e=>this.emotesStore.update({keyword:e}),this.UpdateKeywordSecondary=e=>this.emotesStore.update({keyword_secondary:e}),this.AddBinding=()=>this.emotesStore.update(e=>{e.bindings.push(["",""])}),(0,s.iA)()===s.Bh.host&&this.Init()}RemoveBinding(e){this.emotesStore.update(t=>{t.bindings.splice(e,1)}),this.BuildCache()}UpdateBinding(e,t,n){this.emotesStore.update(r=>{r.bindings[e][t]=n}),this.BuildCache()}UploadConfig(){return(0,r.mG)(this,void 0,void 0,function*(){let e=null;try{e=yield(0,o.I$)({mimeTypes:["application/json"],extensions:[".json"]})}catch(t){}if(e)try{const t=yield e.text(),n=JSON.parse(t);this.emotesStore.update(e=>{e.bindings=Object.entries(n).filter(([e,t])=>"string"==typeof t)}),this.BuildCache()}catch(t){this.toastService.error("Invalid file",{theme:"snackbar",position:"bottom-right"})}})}BuildCache(){const e=this.emotesStore.getValue().bindings,t={};for(let n=0;n<e.length;n++){const r=e[n],i=r[0],s=r[1].split(" ");1===s.length&&s.push(""),t[s[0]]?t[s[0]][s[1]]=i:t[s[0]]={[s[1]]:i}}this.emotesStore.update({bindings_cache:t})}Init(){var e;return(0,r.mG)(this,void 0,void 0,function*(){if(!i.N.features.EMOTES)return;this.BuildCache();const t=localStorage.getItem("tw-key");if(!t)return;const n=yield fetch("https://api.twitch.tv/helix/users",{headers:[["Accept","application/vnd.twitchtv.v5+json"],["Client-ID",i.N.tw_client],["Authorization",`Bearer ${t}`]]}),r=yield n.json(),s=null===(e=r.data)||void 0===e?void 0:e[0];if(!s)return;this.emotesStore.update(e=>{e.user={name:s.display_name,avatar:s.profile_image_url}});let o=(yield Promise.allSettled([this.Load_TWITCH_GLOBAL(s.id,i.N.tw_client,t),this.Load_BTTV_GLOBAL(),this.Load_BTTV_CHANNEL(s.id),this.Load_FFZ_GLOBAL(),this.Load_FFZ_CHANNEL(s.id)])).reduce((e,{status:t,value:n})=>"fulfilled"===t?Object.assign(Object.assign({},e),n):e,{});this.emotesStore.update(e=>{for(let t in o)e.emotes[t[0]]&&(e.emotes[t[0]][t]=o[t])})})}LogOut(){return(0,r.mG)(this,void 0,void 0,function*(){localStorage.getItem("tw-key")&&(yield fetch(`https://id.twitch.tv/oauth2/revoke?client_id=${i.N.tw_client}&token=${localStorage.getItem("tw-key")}`,{method:"POST"})),this.emotesStore.update({user:null}),localStorage.setItem("tw-key","")})}SetupTwitchAuth(e){var t;e&&(null===(t=window.opener)||void 0===t||t.postMessage(`token:${e}`,"*")),window.close()}ApplyTwitchToken(e){if("string"!=typeof e.data||0!==e.data.indexOf("token:"))return;const t=e.data.slice(6);localStorage.setItem("tw-key",t),this.Init()}Login(){this.emotesStore.update({user:null});const e=window.open(`https://id.twitch.tv/oauth2/authorize?client_id=${i.N.tw_client}&redirect_uri=${i.N.twitchAuthPath}&response_type=token&scope=user_subscriptions`,"","width=600,height=600");e&&(e.onbeforeunload=e=>window.removeEventListener("message",e=>this.ApplyTwitchToken(e),!1),window.addEventListener("message",e=>this.ApplyTwitchToken(e),!1))}Load_TWITCH_GLOBAL(e,t,n){return(0,r.mG)(this,void 0,void 0,function*(){const r={},i=yield fetch(`https://api.twitch.tv/kraken/users/${e}/emotes`,{headers:[["Accept","application/vnd.twitchtv.v5+json"],["Client-ID",t],["Authorization",`OAuth ${n}`]]}),s=yield i.json();return Object.keys(s.emoticon_sets).forEach(e=>{s.emoticon_sets[e].forEach(e=>r[e.code]=`https://static-cdn.jtvnw.net/emoticons/v1/${e.id}/1.0`)}),r})}Load_BTTV_GLOBAL(){return(0,r.mG)(this,void 0,void 0,function*(){const e={},t=yield fetch("https://api.betterttv.net/3/cached/emotes/global"),n=yield t.json();for(let r=0;r<n.length;r++)e[n[r].code]=`https://cdn.betterttv.net/emote/${n[r].id}/1x`;return e})}Load_BTTV_CHANNEL(e){return(0,r.mG)(this,void 0,void 0,function*(){const t={},n=yield fetch(`https://api.betterttv.net/3/cached/users/twitch/${e}`),r=yield n.json();for(let e=0;e<r.channelEmotes.length;e++)t[r.channelEmotes[e].code]=`https://cdn.betterttv.net/emote/${r.channelEmotes[e].id}/1x`;for(let e=0;e<r.sharedEmotes.length;e++)t[r.sharedEmotes[e].code]=`https://cdn.betterttv.net/emote/${r.sharedEmotes[e].id}/1x`;return t})}ParseFFz(e){const t={};return Object.keys(e.sets).forEach(n=>{for(let r=0;r<e.sets[n].emoticons.length;r++){const i=e.sets[n].emoticons[r];t[i.name]=i.urls[1]}}),t}Load_FFZ_GLOBAL(){return(0,r.mG)(this,void 0,void 0,function*(){const e=yield fetch("https://api.frankerfacez.com/v1/set/global"),t=yield e.json();return this.ParseFFz(t)})}Load_FFZ_CHANNEL(e){return(0,r.mG)(this,void 0,void 0,function*(){const t=yield fetch(`https://api.frankerfacez.com/v1/room/id/${e}`),n=yield t.json();return this.ParseFFz(n)})}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(c.J),a.LFG(u.jE))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},8647:(e,t,n)=>{"use strict";n.d(t,{J:()=>a});var r=n(4762),i=n(4004),s=n(1100),o=n(5040);let a=class extends i.yh{constructor(){super({user:null,keyword:"em",keyword_secondary:"emote",emotes:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890!:".split("").reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:{}}),{}),bindings:[],bindings_cache:{}})}};a.\u0275fac=function(e){return new(e||a)},a.\u0275prov=o.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a=(0,r.gn)([(0,i.yC)({name:"emotes",producerFn:s.ZP,resettable:!0})],a)},4942:(e,t,n)=>{"use strict";n.d(t,{C:()=>l});var r=n(4762),i=n(5207),s=n(2687),o=n(5040),a=n(4004);let c=class extends a.yh{constructor(){super({})}};c.\u0275fac=function(e){return new(e||c)},c.\u0275prov=o.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c=(0,r.gn)([(0,a.yC)({name:"fonts"})],c);var u=n(9880);let l=(()=>{class e{constructor(e,t){this.fontsStore=e,this.styleQuery=t,this.fontsMap={}}LoadFonts(){var e,t;return(0,r.mG)(this,void 0,void 0,function*(){this.fontsMap="abcdefghijklmnopqrstuvwxyz".split("").reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:[]}),{});try{const n=yield fetch("https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyBLnmSeeiFBd2OQrizWjuYHTIFDm8XwL6k"),r=yield n.json();if(!(null===(e=r.items)||void 0===e?void 0:e.length))return;for(let e=0;e<r.items.length;e++){const n=null===(t=r.items[e].family[0])||void 0===t?void 0:t.toLocaleLowerCase();this.fontsMap[n]&&this.fontsMap[n].push(r.items[e])}this.styleQuery.current$.pipe((0,i.U)(e=>{var t;return null===(t=null==e?void 0:e.textStyle.fontFamily)||void 0===t?void 0:t.value[0]}),(0,s.x)()).subscribe(e=>{this.SelectFont(e.toString()||"")})}catch(n){throw new Error("Cannot load google fonts")}})}SelectFont(e){var t;if(!e)return;console.log("select font",e);const n=(null===(t=this.fontsMap[e[0].toLocaleLowerCase()])||void 0===t?void 0:t.find(t=>t.family===e))||null;if(!n)return;let r="https://fonts.googleapis.com/css2?family=";const i=!!n.files.italic;r+=n.family.replace(/ /g,"+");let s=Array.from(new Set(n.variants.map(e=>parseInt(e)).filter(e=>!isNaN(e))));if(n.variants.length>1&&i){r+=":ital,wght@";let e=[];for(let t of s)e.push(`0,${t}`);for(let t of s)e.push(`1,${t}`);r+=e.join(";")}else n.variants.length>1&&(r+=`:wght@${s.join(";")}`);r+="&display=swap";const o=document.createElement("link");o.href=r,o.rel="stylesheet",o.type="text/css",document.body.appendChild(o)}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(c),o.LFG(u.B))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},1628:(e,t,n)=>{"use strict";n.d(t,{s:()=>a});var r=n(4004),i=n(2687),s=n(5040),o=n(9585);let a=(()=>{class e extends r.AE{constructor(e){super(e),this.store=e,this.connectionState$=this.select("peerConnectionState").pipe((0,i.x)()),this.state$=this.select()}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(o.BH))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},2841:(e,t,n)=>{"use strict";n.d(t,{S:()=>p});var r=n(9585),i=n(9822),s=n(6118),o=n(805),a=n.n(o),c=n(6889),u=n(2340),l=n(5040),h=n(1628),d=n(9338);let p=(()=>{class e{constructor(e,t,n){this.networkStore=e,this.networkQuery=t,this.toastService=n,this.messages$=new c.x,this.onClientConnected$=new c.x,this.getPeerId=()=>{var e;return null===(e=this.peerInstance)||void 0===e?void 0:e.id},this.UpdateNetworkStatus=e=>this.networkStore.update({peerConnectionState:e})}CopyLink(){const e=`${this.networkQuery.getValue().networkMode===r.I.localhost?u.N.peerConfig.local.clientHost:u.N.peerConfig.remote.clientHost}/${null==this?void 0:this.getPeerId()}`;navigator.clipboard.writeText(e),this.toastService.success("Copied!",{theme:"snackbar",position:"bottom-right"})}SendAudio(e){this.SendMessage({type:"tts:play",data:e})}SendMessage(e){var t,n,r;if(!(null===(t=this.peerInstance)||void 0===t?void 0:t.disconnected))for(let i in null===(n=this.peerInstance)||void 0===n?void 0:n.connections)for(let t of null===(r=this.peerInstance)||void 0===r?void 0:r.connections[i])t.send(e)}ResetClient(e){var t,n;this.UpdateNetworkStatus(i.e.Disconnected),null===(t=this.connInstance)||void 0===t||t.close(),this.connInstance=void 0,null===(n=this.peerInstance)||void 0===n||n.destroy(),this.peerInstance=void 0,setTimeout(()=>{console.log("[Client] Reset"),this.InitClient(e)},2e3)}StopHost(){var e,t;this.UpdateNetworkStatus(i.e.Disconnected),!(null===(e=this.peerInstance)||void 0===e?void 0:e.destroyed)&&(null===(t=this.peerInstance)||void 0===t||t.destroy())}StartPeer(e){const t=this.networkStore.getValue().networkMode,n=t===r.I.localhost?u.N.peerConfig.local:u.N.peerConfig.remote;return new(a())(e,Object.assign(Object.assign({},n),t===r.I.localhost?{config:{iceServers:u.N.peerConfig.local.ice}}:{config:{iceServers:u.N.peerConfig.remote.ice}}))}InitClient(e){var t;this.UpdateNetworkStatus(i.e.Connecting),this.peerInstance=this.StartPeer((0,s.Z)()),null===(t=this.peerInstance)||void 0===t||t.on("open",t=>{var n,r,s,o;this.connInstance=null===(n=this.peerInstance)||void 0===n?void 0:n.connect(e,{reliable:!0}),null===(r=this.connInstance)||void 0===r||r.on("open",()=>{var e;null===(e=this.connInstance)||void 0===e||e.on("data",e=>this.messages$.next(e)),this.UpdateNetworkStatus(i.e.Connected)}),null===(s=this.connInstance)||void 0===s||s.on("close",()=>this.ResetClient(e)),null===(o=this.connInstance)||void 0===o||o.on("error",e=>{console.log(e)})}),this.peerInstance.on("disconnected",()=>{}),this.peerInstance.on("error",t=>{this.ResetClient(e)})}StartHost(){var e,t;this.UpdateNetworkStatus(i.e.Connecting);const n=this.networkQuery.getValue(),r=n.saveHost&&n.hostID||(0,s.Z)();this.peerInstance=this.StartPeer(r),null===(e=this.peerInstance)||void 0===e||e.on("error",e=>{this.toastService.error(e.message,{theme:"snackbar",position:"bottom-right"}),this.StopHost()}),null===(t=this.peerInstance)||void 0===t||t.on("open",()=>{var e,t;this.networkStore.update({hostID:null===(e=this.peerInstance)||void 0===e?void 0:e.id}),null===(t=this.peerInstance)||void 0===t||t.on("connection",e=>{e.on("open",()=>this.onClientConnected$.next(null))}),this.UpdateNetworkStatus(i.e.Connected)})}SwitchSaveHost(){this.networkStore.update(e=>({saveHost:!e.saveHost}))}SwitchNetworkMode(){this.networkStore.update(e=>({networkMode:e.networkMode===r.I.localhost?r.I.network:r.I.localhost}))}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(r.BH),l.LFG(h.s),l.LFG(d.jE))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},9585:(e,t,n)=>{"use strict";n.d(t,{I:()=>a,BH:()=>c});var r=n(4762),i=n(4004),s=n(9822),o=n(5040),a=(()=>(function(e){e[e.localhost=0]="localhost",e[e.network=1]="network"}(a||(a={})),a))();let c=class extends i.yh{constructor(){super({hostID:"",saveHost:!1,networkMode:a.localhost,peerConnectionState:s.e.Disconnected,crashError:""})}};c.\u0275fac=function(e){return new(e||c)},c.\u0275prov=o.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c=(0,r.gn)([(0,i.yC)({name:"network"})],c)},2332:(e,t,n)=>{"use strict";n.d(t,{g:()=>o});var r=n(4004),i=n(5040),s=n(864);let o=(()=>{class e extends r.AE{constructor(e){super(e),this.store=e,this.isVoicePlaying$=this.select("isVoicePlaying"),this.mute$=this.select("mute"),this.muteClient$=this.select("muteClient")}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(s.s))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},8289:(e,t,n)=>{"use strict";n.d(t,{y:()=>l});var r=n(4762),i=n(2843),s=n(5040),o=n(864),a=n(1944),c=n(9880),u=n(2841);let l=(()=>{class e{constructor(e,t,n,r){this.soundStore=e,this.speechQuery=t,this.styleQuery=n,this.networkService=r,this.queue=[],this.base64ToArrayBuffer=e=>Uint8Array.from(atob(e),e=>e.charCodeAt(0)).buffer,this.random=(e,t)=>Math.random()*(t-e)+e,t.onTypingEvent$.subscribe(()=>this.Play()),r.messages$.subscribe(e=>{"sound:mute"===e.type&&this.soundStore.update({muteClient:e.data})}),r.onClientConnected$.subscribe(e=>this.SendClientMuteState()),this.SoundGraphInit(),n.soundClip$.subscribe(e=>this.ResolveTypeAudio(null==e?void 0:e.value))}get IsClientMuted(){return(0,i.iA)()===i.Bh.client&&this.soundStore.getValue().muteClient}ResolveTypeAudio(e){return(0,r.mG)(this,void 0,void 0,function*(){if(null==e?void 0:e[0])if("base64"===e[1])this.typeAudioBuffer=yield this.audioContext.decodeAudioData(this.base64ToArrayBuffer(e[0]));else{const t=yield fetch(e[0]),n=yield t.arrayBuffer();this.typeAudioBuffer=yield this.audioContext.decodeAudioData(n)}})}SoundGraphInit(){this.audioContext=new AudioContext,this.typeGainNode=this.audioContext.createGain(),this.typeGainNode.connect(this.audioContext.destination),this.voiceGainNode=this.audioContext.createGain(),this.voiceGainNode.connect(this.audioContext.destination)}Play(){if(this.soundStore.getValue().mute)return;const e=this.styleQuery.getValue().currentStyle.soundStyle,t=this.IsClientMuted?0:parseFloat(e.volume.value[0]);if(0===t)return;this.typeGainNode.gain.setValueAtTime(null!=t?t:.5,this.audioContext.currentTime);const n=this.audioContext.createBufferSource();n.buffer=this.typeAudioBuffer,n.connect(this.typeGainNode);const r=e.typePlayback;r&&(n.playbackRate.value=r.linked?r.value[0]:this.random(Math.max(r.value[0],.1),Math.min(r.value[1],2)));const i=e.typeDetune;i&&(n.detune.value=i.linked?i.value[0]:this.random(Math.max(i.value[0],-1200),Math.min(i.value[1],1200))),n.start()}TryPlayFromQueue(){if(!this.queue.length||this.soundStore.getValue().isVoicePlaying)return;const e=this.queue.pop();if(!e)return;const t=this.IsClientMuted?0:parseFloat(this.styleQuery.getValue().currentStyle.soundStyle.voiceVolume.value[0]);if(0===t)return;this.voiceGainNode.gain.setValueAtTime(null!=t?t:.5,this.audioContext.currentTime);const n=this.audioContext.createBufferSource();n.buffer=e,n.connect(this.voiceGainNode),n.start(),this.soundStore.update({isVoicePlaying:!0}),n.onended=()=>{this.soundStore.update({isVoicePlaying:!1}),this.TryPlayFromQueue()}}PlaySpeech(e){return(0,r.mG)(this,void 0,void 0,function*(){const t=yield this.audioContext.decodeAudioData(e);this.queue.unshift(t),this.TryPlayFromQueue()})}SwitchMute(){this.soundStore.update(e=>{e.mute=!e.mute})}SendClientMuteState(){this.networkService.SendMessage({type:"sound:mute",data:this.soundStore.getValue().muteClient})}SwitchMuteClient(){this.soundStore.update(e=>{e.muteClient=!e.muteClient}),this.SendClientMuteState()}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(o.s),s.LFG(a.v),s.LFG(c.B),s.LFG(u.S))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},864:(e,t,n)=>{"use strict";n.d(t,{s:()=>a});var r=n(4762),i=n(4004),s=n(1100),o=n(5040);let a=class extends i.yh{constructor(){super({isVoicePlaying:!1,mute:!1,muteClient:!1})}};a.\u0275fac=function(e){return new(e||a)},a.\u0275prov=o.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a=(0,r.gn)([(0,i.yC)({name:"sound",producerFn:s.ZP})],a)},8269:(e,t,n)=>{"use strict";n.d(t,{s:()=>Ce});var r=n(4762),i=n(6889),s=n(5094),o=n(9822);class a{constructor(){this.onFinal$=new i.x,this.onInter$=new i.x,this.onPluginCrashed$=new i.x,this.onStatusChanged$=new s.X(o.e.Disconnected)}Start(e,t){return(0,r.mG)(this,void 0,void 0,function*(){this.onStatusChanged$.next(o.e.Connecting),console.log(`[Base speech] Start ${e}`)})}Stop(){return(0,r.mG)(this,void 0,void 0,function*(){console.log("[Base speech] Stop"),this.onStatusChanged$.next(o.e.Disconnected),this.onFinal$.complete(),this.onInter$.complete(),this.onPluginCrashed$.complete()})}}var c=n(449),u=n.n(c),l=n(1660),h=n(3662),d=n(9484),p=n(8230),f=n(3699),v=n(5517),m=(()=>(function(e){e[e.AtStart=0]="AtStart",e[e.Continuous=1]="Continuous"}(m||(m={})),m))(),g=(()=>(function(e){e[e.Accuracy=0]="Accuracy",e[e.Latency=1]="Latency"}(g||(g={})),g))();class y{constructor(){this.privProperties=new v.O,this.privProperties.setProperty(d.o.SpeechServiceConnection_AtStartLanguageIdPriority,"Latency"),this.privLanguageIdMode=m.AtStart}static fromOpenRange(){const e=new y;return e.properties.setProperty(d.o.SpeechServiceConnection_AutoDetectSourceLanguages,p.y0),e}static fromLanguages(e){f.a.throwIfArrayEmptyOrWhitespace(e,"languages");const t=new y;return t.properties.setProperty(d.o.SpeechServiceConnection_AutoDetectSourceLanguages,e.join()),t}static fromSourceLanguageConfigs(e){if(e.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const t=new y,n=[];return e.forEach(e=>{if(n.push(e.language),void 0!==e.endpointId&&""!==e.endpointId){const n=e.language+d.o.SpeechServiceConnection_EndpointId.toString();t.properties.setProperty(n,e.endpointId)}}),t.properties.setProperty(d.o.SpeechServiceConnection_AutoDetectSourceLanguages,n.join()),t}get properties(){return this.privProperties}set mode(e){e===m.Continuous?(this.privProperties.setProperty(d.o.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(d.o.SpeechServiceConnection_ContinuousLanguageIdPriority,"Latency")):(this.privProperties.setProperty(d.o.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(d.o.SpeechServiceConnection_ContinuousLanguageIdPriority,void 0)),this.privLanguageIdMode=e}set priority(e){e===g.Accuracy?this.privLanguageIdMode!==m.Continuous&&this.privProperties.setProperty(d.o.SpeechServiceConnection_AtStartLanguageIdPriority,"Accuracy"):(this.privProperties.setProperty(d.o.SpeechServiceConnection_ContinuousLanguageIdPriority,"Latency"),this.privProperties.setProperty(d.o.SpeechServiceConnection_AtStartLanguageIdPriority,"Latency"))}}var b=n(7957),S=n(8351),w=n(2373),_=n(6355),C=n(2292),T=n(6160),E=n(3383),x=n(4700);class P extends _._{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/speech/universal/v"}create(e,t,n){let r=e.parameters.getProperty(d.o.SpeechServiceConnection_Endpoint,void 0);const i=e.parameters.getProperty(d.o.SpeechServiceConnection_Region,void 0),s=_._.getHostSuffix(i),o=e.parameters.getProperty(d.o.SpeechServiceConnection_Host,"wss://"+i+".stt.speech"+s),a={},c=e.parameters.getProperty(d.o.SpeechServiceConnection_EndpointId,void 0),u=e.parameters.getProperty(d.o.SpeechServiceConnection_RecoLanguage,void 0);if(c?r&&-1!==r.search(x.o.CustomSpeechDeploymentId)||(a[x.o.CustomSpeechDeploymentId]=c):u&&(r&&-1!==r.search(x.o.Language)||(a[x.o.Language]=u)),r&&-1!==r.search(x.o.Format)||(a[x.o.Format]=e.parameters.getProperty(p.xv,w.W[w.W.Simple]).toLowerCase()),void 0!==e.autoDetectSourceLanguages&&(a[x.o.EnableLanguageId]="true"),this.setCommonUrlParams(e,a,r),!r)switch(e.recognitionMode){case C.jf.Conversation:r="true"===e.parameters.getProperty(p.CI,"false")?o+this.dictationRelativeUri:void 0!==e.recognitionEndpointVersion&&parseInt(e.recognitionEndpointVersion,10)>1?`${o}${this.universalUri}${e.recognitionEndpointVersion}`:o+this.conversationRelativeUri;break;case C.jf.Dictation:r=o+this.dictationRelativeUri;break;default:r=void 0!==e.recognitionEndpointVersion&&parseInt(e.recognitionEndpointVersion,10)>1?`${o}${this.universalUri}${e.recognitionEndpointVersion}`:o+this.interactiveRelativeUri}const l={};void 0!==t.token&&""!==t.token&&(l[t.headerName]=t.token),l[E.S.ConnectionId]=n,e.parameters.setProperty(d.o.SpeechServiceConnection_Url,r);const h="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new b.i(r,a,l,new T.D,S.i.fromRecognizerConfig(e),h,n)}}class k extends class{constructor(e,t,n,r,i,s,o,a,c,u){this.privResultId=e,this.privReason=t,this.privText=n,this.privDuration=r,this.privOffset=i,this.privLanguage=s,this.privLanguageDetectionConfidence=o,this.privErrorDetails=a,this.privJson=c,this.privProperties=u}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}{constructor(e,t,n,r,i,s,o,a,c,u,l){super(e,t,n,r,i,s,o,c,u,l),this.privSpeakerId=a}get speakerId(){return this.privSpeakerId}}var R=n(741);class O{constructor(e){this.privSessionId=e}get sessionId(){return this.privSessionId}}class I extends O{constructor(e,t){super(t),this.privOffset=e}get offset(){return this.privOffset}}class A extends I{constructor(e,t,n){super(t,n),this.privResult=e}get result(){return this.privResult}}var N=n(3512);class D extends I{constructor(e,t,n,r,i){super(r,i),this.privReason=e,this.privErrorDetails=t,this.privErrorCode=n}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}class M extends D{}class L{constructor(e,t){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=e,this.privBytesPerSecond=t}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&0!==this.privBuffers.length){let e=Math.round((this.privReplayOffset-this.privBufferStartOffset)*this.privBytesPerSecond*1e-7);0!=e%2&&e++;let t=0;for(;t<this.privBuffers.length&&e>=this.privBuffers[t].chunk.buffer.byteLength;)e-=this.privBuffers[t++].chunk.buffer.byteLength;if(t<this.privBuffers.length){const n=this.privBuffers[t].chunk.buffer.slice(e);return this.privReplayOffset+=n.byteLength/this.privBytesPerSecond*1e7,t===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:n,isEnd:!1,timeReceived:this.privBuffers[t].chunk.timeReceived})}}return this.privAudioNode.read().then(e=>(e&&e.buffer&&(this.privBuffers.push(new j(e,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=e.buffer.byteLength),e))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&0!==this.privBuffers.length&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(e){if(void 0===this.privBuffers||0===this.privBuffers.length)return;this.privLastShrinkOffset=e;let t=Math.round((e-this.privBufferStartOffset)*this.privBytesPerSecond*1e-7),n=0;for(;n<this.privBuffers.length&&t>=this.privBuffers[n].chunk.buffer.byteLength;)t-=this.privBuffers[n++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-t/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(n)}findTimeAtOffset(e){if(e<this.privBufferStartOffset||void 0===this.privBuffers)return 0;for(const t of this.privBuffers){const n=t.byteOffset/this.privBytesPerSecond*1e7,r=n+t.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=n&&e<=r)return t.chunk.timeReceived}return 0}}class j{constructor(e,t,n){this.chunk=e,this.serial=t,this.byteOffset=n}}var F=n(9877),B=n(7895);class z{static load(){const e=new Map([[0,()=>{}]]),t=new Map,n="data:text/javascript;base64,"+btoa('!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error(\'There is no interval scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error(\'The given method "\'.concat(e.method,\'" is not supported\'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);'),r=new Worker(n);return r.addEventListener("message",({data:n})=>{if(z.isCallNotification(n)){const{params:{timerId:r}}=n,i=e.get(r);if("number"==typeof i){const e=t.get(i);if(void 0===e||e!==r)throw new Error("The timer is in an undefined state.")}else{if(void 0===i)throw new Error("The timer is in an undefined state.");i(),e.delete(r)}}else{if(!z.isClearResponse(n)){const{error:{message:e}}=n;throw new Error(e)}{const{id:r}=n,i=t.get(r);if(void 0===i)throw new Error("The timer is in an undefined state.");t.delete(r),e.delete(i)}}}),{clearTimeout:n=>{const i=Math.random();t.set(i,n),e.set(n,i),r.postMessage({id:i,method:"clear",params:{timerId:n}})},setTimeout:(t,n)=>{const i=Math.random();return e.set(i,t),r.postMessage({id:null,method:"set",params:{delay:n,now:performance.now(),timerId:i}}),i}}}static loadWorkerTimers(){return()=>(null!==z.workerTimers||(z.workerTimers=z.load()),z.workerTimers)}static isCallNotification(e){return void 0!==e.method&&"call"===e.method}static isClearResponse(e){return null===e.error&&"number"==typeof e.id}}z.workerTimers=null,z.clearTimeout=e=>z.timers().clearTimeout(e),z.setTimeout=(e,t)=>z.timers().setTimeout(e,t),z.timers=z.loadWorkerTimers();var U=n(4089),H=n(1698),V=n(7550),q=n(1070),$=n(8422),G=n(4361),W=n(6910),Z=n(1340);class K extends Z.A{constructor(e,t,n,r=Z.t.Info){super(e,r),this.privRequestId=t,this.privSessionId=n}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}class Y extends K{constructor(e,t,n,r){super("RecognitionTriggeredEvent",e,t),this.privAudioSourceId=n,this.privAudioNodeId=r}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}class Q extends K{constructor(e,t,n,r){super("ListeningStartedEvent",e,t),this.privAudioSourceId=n,this.privAudioNodeId=r}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}class J extends K{constructor(e,t,n){super("ConnectingToServiceEvent",e,n),this.privAuthFetchEventid=t}get authFetchEventid(){return this.privAuthFetchEventid}}class X extends K{constructor(e,t,n,r,i){super("RecognitionStartedEvent",e,i),this.privAudioSourceId=t,this.privAudioNodeId=n,this.privAuthFetchEventId=r}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}var ee=n(2480);class te{constructor(e,t,n){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=e,this.privAudioSourceId=t,this.privAudioNodeId=n,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}hypothesisReceived(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}onEvent(e){!this.privIsDisposed&&(e instanceof Y&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof ee.i5&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof ee.sQ&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof ee.n0&&e.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof ee.hA&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof ee.He&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime})),e instanceof J&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof H.YF&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof H.Zk&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof H.xz&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof H.Qz&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path)&&(this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=new Array),this.privReceivedMessages[e.message.headers.path].length<50&&this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime))}getTelemetry(){const e=new Array;this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const t=JSON.stringify({Metrics:e,ReceivedMessages:this.privReceivedMessages});return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],t}get hasTelemetry(){return 0!==Object.keys(this.privReceivedMessages).length||null!==this.privListeningTriggerMetric||null!==this.privMicMetric||null!==this.privConnectionEstablishMetric||0!==this.privPhraseLatencies.length||0!==this.privHypothesisLatencies.length}dispose(){this.privIsDisposed=!0}getConnectionError(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}}}var ne=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})};class re{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=e,this.privRequestId=(0,q.Q)(),this.privAudioNodeId=(0,q.Q)(),this.privTurnDeferral=new G.BH,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}listenForServiceTelemetry(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new te(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new Y(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onAudioSourceAttachCompleted(e,t){return ne(this,void 0,void 0,function*(){this.privAudioNode=e,this.privIsAudioNodeDetached=!1,t?yield this.onComplete():this.onEvent(new Q(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))})}onPreConnectionStart(e,t){this.privAuthFetchEventId=e,this.privSessionId=t,this.onEvent(new J(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}onAuthCompleted(e){return ne(this,void 0,void 0,function*(){e&&(yield this.onComplete())})}onConnectionEstablishCompleted(e,t){return ne(this,void 0,void 0,function*(){if(200===e)return this.onEvent(new X(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,void(this.privBytesSent=0);403===e&&(yield this.onComplete())})}onServiceTurnEndResponse(e){return ne(this,void 0,void 0,function*(){this.privTurnDeferral.resolve(),!e||this.isSpeechEnded?(yield this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())})}onSpeechContext(){this.privRequestId=(0,q.Q)()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new G.BH}onHypothesis(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}onPhraseRecognized(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}onServiceRecognized(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0}onAudioSent(e){this.privBytesSent+=e}onRetryConnection(){this.privConnectionAttempts++}dispose(){return ne(this,void 0,void 0,function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)yield e.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}})}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}onStopRecognizing(){return ne(this,void 0,void 0,function*(){yield this.onComplete()})}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(e){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),W.z.instance.onEvent(e)}onComplete(){return ne(this,void 0,void 0,function*(){this.privIsRecognizing&&(this.privIsRecognizing=!1,yield this.detachAudioNode())})}detachAudioNode(){return ne(this,void 0,void 0,function*(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&(yield this.privAudioNode.detach()))})}}class ie{addPhrase(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(void 0===this.privGrammars&&void 0===this.privPhrases)return;const e={};if(e.ReferenceGrammars=this.privGrammars,void 0!==this.privPhrases&&0!==this.privPhrases.length){const t=[];this.privPhrases.forEach(e=>{t.push({Text:e})}),e.Groups=[{Type:"Generic",Items:t}]}return e}}class se{constructor(e){this.privContext={},this.privDynamicGrammar=e}setSection(e,t){this.privContext[e]=t}setPronunciationAssessmentParams(e){void 0===this.privContext.phraseDetection&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),-1===this.privContext.phraseOutput.detailed.options.indexOf("SNR")&&this.privContext.phraseOutput.detailed.options.push("SNR")}setWordLevelTimings(){void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),void 0===this.privContext.phraseOutput.detailed&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed",-1===this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}toJSON(){const e=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",e),JSON.stringify(this.privContext)}}var oe=n(1625);class ae{constructor(e){this.privSpeechStartDetected=JSON.parse(e)}static fromJSON(e){return new ae(e)}get Offset(){return this.privSpeechStartDetected.Offset}}var ce=n(1768),ue=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})};let le=(()=>{class e{constructor(e,t,n,r,i){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.recognizeOverride=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,!e)throw new F.Do("authentication");if(!t)throw new F.Do("connectionFactory");if(!n)throw new F.Do("audioSource");if(!r)throw new F.Do("recognizerConfig");this.privMustReportEndOfStream=!1,this.privAuthentication=e,this.privConnectionFactory=t,this.privAudioSource=n,this.privRecognizerConfig=r,this.privIsDisposed=!1,this.privRecognizer=i,this.privRequestSession=new re(this.privAudioSource.id()),this.privConnectionEvents=new B.n,this.privServiceEvents=new B.n,this.privDynamicGrammar=new ie,this.privSpeechContext=new se(this.privDynamicGrammar),this.privAgentConfig=new oe.H,"undefined"!=typeof Blob&&"undefined"!=typeof Worker&&(this.privSetTimeout=z.setTimeout),this.connectionEvents.attach(e=>{if("ConnectionClosedEvent"===e.name){const t=e;(1003===t.statusCode||1007===t.statusCode||1002===t.statusCode||4e3===t.statusCode||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal($._.Error,1007===t.statusCode?N.E.BadRequestParameters:N.E.ConnectionFailure,`${t.reason} websocket error code: ${t.statusCode}`)}})}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(e){this.privRecognizerConfig.parameters.setProperty(d.o.ConversationTranslator_Token,e)}set authentication(e){this.privAuthentication=this.authentication}isDisposed(){return this.privIsDisposed}dispose(e){return ue(this,void 0,void 0,function*(){if(this.privIsDisposed=!0,void 0!==this.privConnectionConfigurationPromise)try{const t=yield this.privConnectionConfigurationPromise;yield t.dispose(e)}catch(t){return}})}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}recognize(e,t,n){return ue(this,void 0,void 0,function*(){if(void 0!==this.recognizeOverride)return void(yield this.recognizeOverride(e,t,n));this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=e,this.privSuccessCallback=t,this.privErrorCallback=n,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const r=this.connectImpl();let i;try{const e=yield this.audioSource.attach(this.privRequestSession.audioNodeId),t=yield this.audioSource.format,n=yield this.audioSource.deviceInfo;this.privIsLiveAudio=n.type&&n.type===C.dt.Microphones,i=new L(e,t.avgBytesPerSec),yield this.privRequestSession.onAudioSourceAttachCompleted(i,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:n}}catch(o){throw yield this.privRequestSession.onStopRecognizing(),o}try{yield r}catch(o){return void(yield this.cancelRecognitionLocal($._.Error,N.E.ConnectionFailure,o))}const s=new O(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,s),this.receiveMessage(),this.sendAudio(i).catch(e=>ue(this,void 0,void 0,function*(){yield this.cancelRecognitionLocal($._.Error,N.E.RuntimeError,e)}))})}stopRecognizing(){return ue(this,void 0,void 0,function*(){if(this.privRequestSession.isRecognizing)try{yield this.audioSource.turnOff(),yield this.sendFinalAudio(),yield this.privRequestSession.onStopRecognizing(),yield this.privRequestSession.turnCompletionPromise}finally{yield this.privRequestSession.dispose()}})}connect(){return ue(this,void 0,void 0,function*(){return yield this.connectImpl(),Promise.resolve()})}connectAsync(e,t){this.connectImpl().then(()=>{try{e&&e()}catch(n){t&&t(n)}},e=>{try{t&&t(e)}catch(n){}})}disconnect(){return ue(this,void 0,void 0,function*(){if(yield this.cancelRecognitionLocal($._.Error,N.E.NoError,"Disconnecting"),void 0!==this.disconnectOverride&&(yield this.disconnectOverride()),void 0!==this.privConnectionPromise)try{yield(yield this.privConnectionPromise).dispose()}catch(e){}this.privConnectionPromise=void 0})}sendMessage(e){}sendNetworkMessage(e,t){return ue(this,void 0,void 0,function*(){const n="string"==typeof t?U.C.Text:U.C.Binary,r="string"==typeof t?"application/json":"";return(yield this.fetchConnection()).send(new ce.r(n,e,this.privRequestSession.requestId,r,t))})}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}sendTelemetryData(){return ue(this,void 0,void 0,function*(){const t=this.privRequestSession.getTelemetry();if(!0!==e.telemetryDataEnabled||this.privIsDisposed||null===t)return;if(e.telemetryData)try{e.telemetryData(t)}catch(r){}const n=yield this.fetchConnection();yield n.send(new ce.r(U.C.Text,"telemetry",this.privRequestSession.requestId,"application/json",t))})}cancelRecognitionLocal(e,t,n){return ue(this,void 0,void 0,function*(){this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,e,t,n))})}receiveMessage(){return ue(this,void 0,void 0,function*(){try{if(this.privIsDisposed)return;let e=yield this.fetchConnection();const t=yield e.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(!t)return this.privRequestSession.isRecognizing?this.receiveMessage():void 0;this.privServiceHasSentMessage=!0;const n=ce.r.fromConnectionMessage(t);if(n.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(n.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const t=ae.fromJSON(n.textBody),r=new I(t.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,r);break;case"speech.enddetected":let i;i=n.textBody.length>0?n.textBody:"{ Offset: 0 }";const s=ae.fromJSON(i);this.privRecognizerConfig.isContinuousRecognition&&this.privRequestSession.onServiceRecognized(s.Offset+this.privRequestSession.currentTurnAudioOffset);const o=new I(s.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,o);break;case"turn.end":yield this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,yield this.cancelRecognitionLocal($._.EndOfStream,N.E.NoError,void 0));const a=new O(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)return void(this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,a));e=yield this.fetchConnection(),yield this.sendPrePayloadJSON(e);break;default:(yield this.processTypeSpecificMessages(n))||this.privServiceEvents&&this.serviceEvents.onEvent(new H.e2(n.path.toLowerCase(),n.textBody))}return this.receiveMessage()}catch(e){return null}})}sendSpeechContext(e,t){const n=this.speechContext.toJSON();if(t&&this.privRequestSession.onSpeechContext(),n)return e.send(new ce.r(U.C.Text,"speech.context",this.privRequestSession.requestId,"application/json",n))}sendPrePayloadJSON(e,t=!0){return ue(this,void 0,void 0,function*(){if(void 0!==this.sendPrePayloadJSONOverride)return this.sendPrePayloadJSONOverride(e);yield this.sendSpeechContext(e,t),yield this.sendWaveHeader(e)})}sendWaveHeader(e){return ue(this,void 0,void 0,function*(){const t=yield this.audioSource.format;return e.send(new ce.r(U.C.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",t.header))})}connectImpl(){return void 0!==this.privConnectionPromise?this.privConnectionPromise.then(e=>e.state()===V.e.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),void 0!==this.postConnectImplOverride?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(t,n,r){if(n.onSpeechContext(),!0!==e.telemetryDataEnabled){const e=JSON.parse(r);r=JSON.stringify({context:{system:e.context.system}})}if("true"===this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()){const e=JSON.parse(r);e.context.DisableReferenceChannel="True",e.context.MicSpec="1_0_0",r=JSON.stringify(e)}if(r)return t.send(new ce.r(U.C.Text,"speech.config",n.requestId,"application/json",r))}fetchConnection(){return ue(this,void 0,void 0,function*(){return void 0!==this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then(e=>e.state()===V.e.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)})}sendAudio(e){return ue(this,void 0,void 0,function*(){const t=yield this.audioSource.format;let n=Date.now();const r=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),i=t.avgBytesPerSec/1e3*parseInt(r,10),s=this.privRequestSession.recogNumber,o=()=>ue(this,void 0,void 0,function*(){if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===s){const r=yield this.fetchConnection(),a=yield e.read();if(this.privRequestSession.isSpeechEnded)return;let c,u;if(!a||a.isEnd?(c=null,u=0):(c=a.buffer,this.privRequestSession.onAudioSent(c.byteLength),u=i>=this.privRequestSession.bytesSent?0:Math.max(0,n-Date.now())),0!==u&&(yield this.delay(u)),null!==c&&(n=Date.now()+1e3*c.byteLength/(2*t.avgBytesPerSec)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===s){if(r.send(new ce.r(U.C.Binary,"audio",this.privRequestSession.requestId,null,c)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),!(null==a?void 0:a.isEnd))return o();this.privIsLiveAudio||this.privRequestSession.onSpeechEnded()}}});return o()})}retryableConnect(){return ue(this,void 0,void 0,function*(){let e=!1;this.privAuthFetchEventId=(0,q.Q)();const t=this.privRequestSession.sessionId;this.privConnectionId=void 0!==t?t:(0,q.Q)(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let n=0,r="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){const t=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId),i=yield t;yield this.privRequestSession.onAuthCompleted(!1);const s=this.privConnectionFactory.create(this.privRecognizerConfig,i,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(s.events),s.events.attach(e=>{this.connectionEvents.onEvent(e)});const o=yield s.open();if(200===o.statusCode)return yield this.privRequestSession.onConnectionEstablishCompleted(o.statusCode),Promise.resolve(s);1006===o.statusCode&&(e=!0),n=o.statusCode,r=o.reason,this.privRequestSession.onRetryConnection()}return yield this.privRequestSession.onConnectionEstablishCompleted(n,r),Promise.reject(`Unable to contact server. StatusCode: ${n}, ${this.privRecognizerConfig.parameters.getProperty(d.o.SpeechServiceConnection_Endpoint)} Reason: ${r}`)})}delay(e){return new Promise(t=>this.privSetTimeout(t,e))}writeBufferToConsole(e){let t="Buffer Size: ";if(null===e)t+="null";else{const n=new Uint8Array(e);t+=`${e.byteLength}\r\n`;for(let r=0;r<e.byteLength;r++)t+=n[r].toString(16).padStart(2,"0")+" ",(r+1)%16==0&&(console.info(t),t="")}console.info(t)}sendFinalAudio(){return ue(this,void 0,void 0,function*(){const e=yield this.fetchConnection();yield e.send(new ce.r(U.C.Binary,"audio",this.privRequestSession.requestId,null,null))})}configureConnection(){return ue(this,void 0,void 0,function*(){const e=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(yield this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendPrePayloadJSON(e,!1),e)})}}return e.telemetryDataEnabled=!0,e})();class he{constructor(e){this.privSpeechHypothesis=JSON.parse(e)}static fromJSON(e){return new he(e)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}var de=(()=>(function(e){e[e.Success=0]="Success",e[e.NoMatch=1]="NoMatch",e[e.InitialSilenceTimeout=2]="InitialSilenceTimeout",e[e.BabbleTimeout=3]="BabbleTimeout",e[e.Error=4]="Error",e[e.EndOfDictation=5]="EndOfDictation",e[e.TooManyRequests=6]="TooManyRequests",e[e.BadRequest=7]="BadRequest",e[e.Forbidden=8]="Forbidden"}(de||(de={})),de))();class pe{constructor(e){this.privSimpleSpeechPhrase=JSON.parse(e),this.privSimpleSpeechPhrase.RecognitionStatus=de[this.privSimpleSpeechPhrase.RecognitionStatus]}static fromJSON(e){return new pe(e)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}}class fe{static implTranslateRecognitionResult(e){let t=R.s.Canceled;switch(e){case de.Success:t=R.s.RecognizedSpeech;break;case de.NoMatch:case de.InitialSilenceTimeout:case de.BabbleTimeout:case de.EndOfDictation:t=R.s.NoMatch;break;case de.Error:case de.BadRequest:case de.Forbidden:default:t=R.s.Canceled}return t}static implTranslateCancelResult(e){let t=$._.EndOfStream;switch(e){case de.Success:case de.EndOfDictation:case de.NoMatch:t=$._.EndOfStream;break;case de.InitialSilenceTimeout:case de.BabbleTimeout:case de.Error:case de.BadRequest:case de.Forbidden:default:t=$._.Error}return t}static implTranslateCancelErrorCode(e){let t=N.E.NoError;switch(e){case de.Error:t=N.E.ServiceError;break;case de.TooManyRequests:t=N.E.TooManyRequests;break;case de.BadRequest:t=N.E.BadRequestParameters;break;case de.Forbidden:t=N.E.Forbidden;break;default:t=N.E.NoError}return t}static implTranslateErrorDetails(e){let t="The speech service encountered an internal error and could not continue.";switch(e){case N.E.Forbidden:t="The recognizer is using a free subscription that ran out of quota.";break;case N.E.BadRequestParameters:t="Invalid parameter or unsupported audio format in the request.";break;case N.E.TooManyRequests:t="The number of parallel requests exceeded the number of allowed concurrent transcriptions."}return t}}class ve{constructor(e){this.privDetailedSpeechPhrase=JSON.parse(e),this.privDetailedSpeechPhrase.RecognitionStatus=de[this.privDetailedSpeechPhrase.RecognitionStatus]}static fromJSON(e){return new ve(e)}getJsonWithCorrectedOffsets(e){if(this.privDetailedSpeechPhrase.NBest){let t;for(const e of this.privDetailedSpeechPhrase.NBest)if(e.Words&&e.Words[0]){t=e.Words[0].Offset;break}if(t&&t<e){const n=e-t;for(const e of this.privDetailedSpeechPhrase.NBest)if(e.Words)for(const t of e.Words)t.Offset+=n}}return JSON.stringify(this.privDetailedSpeechPhrase)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}}class me extends le{constructor(e,t,n,r,i){super(e,t,n,r,i),this.privSpeechRecognizer=i;const s={},o=r.parameters.getProperty(d.o.Speech_SegmentationSilenceTimeoutMs,void 0);if(void 0!==o){const e=parseInt(o,10);s.mode="INTERACTIVE",s.INTERACTIVE={segmentation:{mode:"Custom",segmentationSilenceTimeoutMs:e}}}if(void 0!==r.autoDetectSourceLanguages){const e=r.autoDetectSourceLanguages.split(",");this.privSpeechContext.setSection("languageId",{Priority:r.languageIdPriority,languages:e,mode:r.languageIdMode,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});const t=r.sourceLanguageModels;void 0!==t&&(s.customModels=t,s.onInterim={action:"None"},s.onSuccess={action:"None"})}(e=>{for(const t in e)return!1;return!0})(s)||this.privSpeechContext.setSection("phraseDetection",s)}processTypeSpecificMessages(e){return t=this,void 0,r=function*(){let t;const n=new v.O;n.setProperty(d.o.SpeechServiceResponse_JsonResult,e.textBody);let r=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const o=he.fromJSON(e.textBody),a=o.Offset+this.privRequestSession.currentTurnAudioOffset;t=new k(this.privRequestSession.requestId,R.s.RecognizingSpeech,o.Text,o.Duration,a,o.Language,o.LanguageDetectionConfidence,void 0,void 0,e.textBody,n),this.privRequestSession.onHypothesis(a);const c=new A(t,o.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,c)}catch(i){}r=!0;break;case"speech.phrase":const u=pe.fromJSON(e.textBody),l=fe.implTranslateRecognitionResult(u.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+u.Offset+u.Duration),R.s.Canceled===l){const e=fe.implTranslateCancelResult(u.RecognitionStatus),t=fe.implTranslateCancelErrorCode(u.RecognitionStatus);yield this.cancelRecognitionLocal(e,t,fe.implTranslateErrorDetails(t))}else{if(!this.privRequestSession.isSpeechEnded||l!==R.s.NoMatch||u.RecognitionStatus===de.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(p.xv)===w.W[w.W.Simple])t=new k(this.privRequestSession.requestId,l,u.DisplayText,u.Duration,u.Offset+this.privRequestSession.currentTurnAudioOffset,u.Language,u.LanguageDetectionConfidence,void 0,void 0,e.textBody,n);else{const r=ve.fromJSON(e.textBody),i=r.Offset+this.privRequestSession.currentTurnAudioOffset,s=r.getJsonWithCorrectedOffsets(i);t=new k(this.privRequestSession.requestId,l,r.RecognitionStatus===de.Success?r.NBest[0].Display:void 0,r.Duration,i,r.Language,r.LanguageDetectionConfidence,void 0,void 0,s,n)}const r=new A(t,t.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,r)}catch(i){}}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(s){this.privErrorCallback&&this.privErrorCallback(s)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}r=!0}return r},new((n=void 0)||(n=Promise))(function(e,i){function s(e){try{a(r.next(e))}catch(t){i(t)}}function o(e){try{a(r.throw(e))}catch(t){i(t)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(s,o)}a((r=r.apply(t,[])).next())});var t,n,r}cancelRecognition(e,t,n,r,i){const s=new v.O;if(s.setProperty(p.oo,N.E[r]),this.privSpeechRecognizer.canceled){const t=new M(n,i,r,void 0,e);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,t)}catch(o){}}if(this.privSuccessCallback){const e=new k(t,R.s.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,i,void 0,s);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(a){}}}}var ge=n(3423),ye=n(9370),be=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})};class Se{constructor(e,t,n){this.audioConfig=void 0!==e?e:l.rU.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=t.clone(),this.privConnectionFactory=n,this.implCommonRecognizerSetup()}close(e,t){f.a.throwIfDisposed(this.privDisposed),(0,G.Kb)(this.dispose(!0),e,t)}get internalData(){return this.privReco}dispose(e){return be(this,void 0,void 0,function*(){this.privDisposed||(this.privDisposed=!0,e&&this.privReco&&(yield this.privReco.audioSource.turnOff(),yield this.privReco.dispose()))})}static get telemetryEnabled(){return le.telemetryDataEnabled}static enableTelemetry(e){le.telemetryDataEnabled=e}implCommonRecognizerSetup(){let e="undefined"!=typeof window?"Browser":"Node",t="unknown",n="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,n=navigator.appVersion);const r=this.createRecognizerConfig(new C.pu(new C._y(new C.OS(e,t,n))));this.privReco=this.createServiceRecognizer(Se.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,r)}recognizeOnceAsyncImpl(e){return be(this,void 0,void 0,function*(){f.a.throwIfDisposed(this.privDisposed);const t=new G.BH;yield this.implRecognizerStop(),yield this.privReco.recognize(e,t.resolve,t.reject);const n=yield t.promise;return yield this.implRecognizerStop(),n})}startContinuousRecognitionAsyncImpl(e){return be(this,void 0,void 0,function*(){f.a.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop(),yield this.privReco.recognize(e,void 0,void 0)})}stopContinuousRecognitionAsyncImpl(){return be(this,void 0,void 0,function*(){f.a.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop()})}implRecognizerStop(){return be(this,void 0,void 0,function*(){this.privReco&&(yield this.privReco.stopRecognizing())})}static getAuthFromProperties(e){const t=e.getProperty(d.o.SpeechServiceConnection_Key,void 0);return t&&""!==t?new ge.U(t):new ye.w(()=>{const t=e.getProperty(d.o.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(t)},()=>{const t=e.getProperty(d.o.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(t)})}}class we extends Se{constructor(e,t){const n=e;f.a.throwIfNull(n,"speechConfig"),f.a.throwIfNullOrWhitespace(n.properties.getProperty(d.o.SpeechServiceConnection_RecoLanguage),d.o[d.o.SpeechServiceConnection_RecoLanguage]),super(t,n.properties,new P),this.privDisposedRecognizer=!1}static FromConfig(e,t,n){return t.properties.mergeTo(e.properties),new we(e,n)}get endpointId(){return f.a.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(d.o.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(d.o.SpeechServiceAuthorization_Token)}set authorizationToken(e){f.a.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(d.o.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return f.a.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(d.o.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return f.a.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(p.xv,w.W[w.W.Simple])===w.W[w.W.Simple]?w.W.Simple:w.W.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(e,t){(0,G.Kb)(this.recognizeOnceAsyncImpl(C.jf.Interactive),e,t)}startContinuousRecognitionAsync(e,t){(0,G.Kb)(this.startContinuousRecognitionAsyncImpl(C.jf.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){(0,G.Kb)(this.stopContinuousRecognitionAsyncImpl(),e,t)}startKeywordRecognitionAsync(e,t,n){f.a.throwIfNull(e,"model"),n&&n("Not yet implemented.")}stopKeywordRecognitionAsync(e){e&&e()}close(e,t){f.a.throwIfDisposed(this.privDisposedRecognizer),(0,G.Kb)(this.dispose(!0),e,t)}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return n=this,void 0,i=function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield t.dispose.call(this,e))},new((r=void 0)||(r=Promise))(function(e,t){function s(e){try{a(i.next(e))}catch(n){t(n)}}function o(e){try{a(i.throw(e))}catch(n){t(n)}}function a(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(s,o)}a((i=i.apply(n,[])).next())});var n,r,i}createRecognizerConfig(e){return new C.Xj(e,this.properties)}createServiceRecognizer(e,t,n,r){return new me(e,t,n,r,this)}}var _e=n(2340);const Ce={native:{name:"Native",plugin:class extends a{constructor(){super(),this.stopInProgress=!1}BindSpeech(){this.instance&&(this.instance.onresult=e=>{let t="",n="";this.lastResultDate=Date.now();for(let r=e.resultIndex;r<e.results.length;++r)e.results[r].isFinal?(n+=e.results[r][0].transcript,this.onFinal$.next(n)):(t+=e.results[r][0].transcript,this.onInter$.next(t))})}BindSilence(){this.lastResultDate=Date.now(),this.refreshInterval=setInterval(()=>{var e;if(this.onStatusChanged$.value!==o.e.Connected)return;const t=Date.now();this.stopInProgress||t-(this.lastResultDate||t)<6400||(null===(e=this.instance)||void 0===e||e.stop(),this.stopInProgress=!0,setTimeout(()=>{var e;try{null===(e=this.instance)||void 0===e||e.start(),this.lastResultDate=Date.now()}catch(t){}finally{this.stopInProgress=!1}},"Edge"===this.browserAgent?700:300))},500)}Start(e,t){const n=Object.create(null,{Start:{get:()=>super.Start}});return(0,r.mG)(this,void 0,void 0,function*(){const r=new(u());return this.browserAgent=r.getBrowser().name,yield navigator.mediaDevices.getUserMedia({video:!1,audio:!0}),yield n.Start.call(this,e,t),window.webkitSpeechRecognition?(this.instance=new window.webkitSpeechRecognition,this.instance?(this.instance.lang=e,this.instance.continuous=!0,this.instance.interimResults=!0,this.instance.addEventListener("start",()=>{this.lastResultDate=Date.now()}),this.instance.addEventListener("error",e=>{this.onStatusChanged$.value===o.e.Connected&&console.log(`[Native] Error: ${e.error}`)}),this.instance.addEventListener("end",e=>{this.onStatusChanged$.value!==o.e.Connected&&clearInterval(this.refreshInterval)}),this.instance.start(),this.onStatusChanged$.next(o.e.Connected),this.BindSilence(),console.log("[Native] Started"),window.addEventListener("beforeunload",()=>{var e;this.onStatusChanged$.value===o.e.Connected&&(null===(e=this.instance)||void 0===e||e.stop())}),void this.BindSpeech()):this.onPluginCrashed$.next("[Native] Cannot spawn native instance")):this.onPluginCrashed$.next("[Native] Native STT is not supported")})}Stop(){const e=Object.create(null,{Stop:{get:()=>super.Stop}});var t;return(0,r.mG)(this,void 0,void 0,function*(){yield e.Stop.call(this),console.log("[Native] Stopped"),null===(t=this.instance)||void 0===t||t.stop()})}},platformValidate:()=>{const e=new(u());return"app"===_e.N.platform||"Edge"===e.getBrowser().name||"Chrome"===e.getBrowser().name},dataFields:[],throttleInterim:140},azure:{name:"Azure Cognitive Services",plugin:class extends a{constructor(){super()}Start(e,t){const n=Object.create(null,{Start:{get:()=>super.Start}});return(0,r.mG)(this,void 0,void 0,function*(){if(!(t[0]&&t[1]&&t[2]&&t[3]))throw new Error("[Azure] Invalid configuration");let r=parseInt(t[2])||20;r=Math.abs(r),r*=1e3,yield navigator.mediaDevices.getUserMedia({video:!1,audio:!0}),yield n.Start.call(this,e,t);const i=l.rU.fromDefaultMicrophoneInput(),s=h.c.fromSubscription(t[0],t[1]);s.setProperty(d.o.SpeechServiceResponse_ProfanityOption,t[3]),s.setProperty(d.o.SpeechServiceConnection_InitialSilenceTimeoutMs,"60000"),s.setProperty(d.o.SpeechServiceConnection_EndSilenceTimeoutMs,r.toString()),s.enableDictation();const a=y.fromLanguages([e]);this.instance=we.FromConfig(s,a,i),this.instance.recognizing=(e,t)=>!!t.result.text&&this.onInter$.next(t.result.text),this.instance.recognized=(e,t)=>{this.onFinal$.next(t.result.text)},this.onStatusChanged$.next(o.e.Connecting),this.instance.sessionStopped=(e,t)=>{console.log("[Azure] Session stopped")},this.instance.sessionStarted=(e,t)=>{console.log("[Azure] Session started"),this.onStatusChanged$.next(o.e.Connected)},this.instance.canceled=(e,t)=>{console.log(`[Azure] ${N.E[t.errorCode]}`),N.E.NoError||this.onPluginCrashed$.next(`[Azure] ${N.E[t.errorCode]}`)},this.instance.startContinuousRecognitionAsync(void 0,e=>this.onPluginCrashed$.next(e))})}Stop(){const e=Object.create(null,{Stop:{get:()=>super.Stop}});return(0,r.mG)(this,void 0,void 0,function*(){yield e.Stop.call(this),yield new Promise((e,t)=>{var n;null===(n=this.instance)||void 0===n||n.stopContinuousRecognitionAsync(()=>{var n;return null===(n=this.instance)||void 0===n?void 0:n.close(()=>{console.log("[Azure] Stopped"),e(null)},e=>t(e))},e=>t(e))})})}},platformValidate:()=>!0,throttleInterim:0,dataFields:[{name:"Service key",description:"Api key (KEY 1 or KEY 2 from your resource)",type:"input",textInputType:"password",defaultValue:""},{name:"Service location",description:"Resource location",type:"input",textInputType:"password",defaultValue:""},{name:"Silence Timeout",description:"Amount of seconds of silence required to put azure in sleeping mode. Default is 20 seconds",type:"input",textInputType:"number",defaultValue:"20"},{name:"Profanity filter",description:"Profanity filter",type:"select",options:["masked","removed","raw"],defaultValue:"masked"}]}}},1944:(e,t,n)=>{"use strict";n.d(t,{v:()=>h});var r=n(4004),i=n(5207),s=n(2687),o=n(6889),a=n(5040),c=n(9050),u=n(9880),l=n(2332);let h=(()=>{class e extends r.Gv{constructor(e,t,n){super(e),this.store=e,this.styleQuery=t,this.soundQuery=n,this.list$=this.selectAll(),this.state$=this.select(),this.profanityWords$=this.select("profanityWords"),this.showBubble$=(0,r.WZ)([this.select(),this.selectCount(),this.styleQuery.globalConfig$,this.soundQuery.isVoicePlaying$]).pipe((0,i.U)(([e,t,n,r])=>{var i;return!(null===(i=n.hideOnInactivity)||void 0===i?void 0:i.value[0])||r||e.show&&t>0}),(0,s.x)()),this.onTypingEvent$=new o.x,this.onNewLastSentence$=this.selectAll().pipe((0,i.U)(e=>{var t;const n=e.filter(e=>e.finalized);return null!==(t=n[n.length-1])&&void 0!==t?t:null}),(0,s.x)((e,t)=>(null==e?void 0:e.id)===(null==t?void 0:t.id)))}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(c.eb),a.LFG(u.B),a.LFG(l.g))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},539:(e,t,n)=>{"use strict";n.d(t,{v:()=>N});var r=n(4762),i=n(9050),s=n(4004),o=n(8269),a=n(8468),c=n(6107),u=n(424),l=n(5076),h=n(8476),d={leading:!0,trailing:!1},p=n(4294),f=n(5094);class v{constructor(e){this.isPlayed=!1,this.AnimatedValue=new f.X([]),this.cancelToken=!1,this.BindTypeEvent=e=>this.CallTypeEvent=e,Object.assign(this,e)}get data(){return{animation:this.animation,finalized:this.finalized,id:this.id,ttsValue:this.ttsValue,type:this.type,valueNext:this.valueNext}}Run(){return(0,r.mG)(this,void 0,void 0,function*(){!this.isPlayed&&this.finalized&&(yield this.animation.animate?this.RunStagger():this.RunSimple(),this.isPlayed=!0)})}Update(e){var t;Object.assign(this,e),this.animation.animate||(this.AnimatedValue.next(e.valueNext),null===(t=this.CallTypeEvent)||void 0===t||t.call(this))}Dispose(){this.cancelToken=!0,this.AnimatedValue.complete()}RunSimple(){var e;return(0,r.mG)(this,void 0,void 0,function*(){this.AnimatedValue.next(this.valueNext),null===(e=this.CallTypeEvent)||void 0===e||e.call(this)})}RunStagger(){return new Promise((e,t)=>{let n=new Array(this.valueNext.length).fill(null).map((e,t)=>new Array(this.valueNext[t].length).fill(null)),r=0,i=0;var s,o,h,d;(h=this.animation.interval,void 0===h&&(h=0),void 0===d&&(d=c.z),h<0&&(h=0),(0,a.H)(h,h,d)).pipe((s=e=>!this.cancelToken&&i<this.valueNext.length,void 0===o&&(o=!1),(0,u.e)(function(e,t){e.subscribe(new l.Q(t,function(e){var n=s();(n||o)&&t.next(e),!n&&t.complete()}))}))).subscribe({next:()=>{var e,t;const s=this.valueNext[i];this.animation.animateWords?(n[i]=s,i++,null===(e=this.CallTypeEvent)||void 0===e||e.call(this)):r<s.length?(n[i][r]=s[r],r++," "!==s[r]&&(null===(t=this.CallTypeEvent)||void 0===t||t.call(this))):(i++,r=0),this.AnimatedValue.next(n)},complete:()=>e(null)})})}}var m=n(2340),g=Math.floor,y=Math.random;const b=function(e){var t,n=e.length;return n?e[(0,t=n-1,0+g(y()*(t-0+1)))]:void 0};var S=n(4265),w=n(6781);const _=function(e){return b(null==(t=e)?[]:function(e,t){return(0,S.Z)(t,function(t){return e[t]})}(t,(0,w.Z)(t)));var t};var C=n(4663);var T=n(9822),E=n(2843),x=n(5040),P=n(9880),k=n(1944),R=n(2293),O=n(2841),I=n(1628),A=n(9338);class N{constructor(e,t,n,r,i,s,a){this.speechStore=e,this.styleQuery=t,this.speechQuery=n,this.emotesQuery=r,this.networkService=i,this.networkQuery=s,this.toastService=a,this.SelectPlugin=e=>{const t=o.s[e];this.speechStore.update(n=>{n.selectedPluginData=new Array(t.dataFields.length).fill(null);for(let e=0;e<t.dataFields.length;e++)n.selectedPluginData[e]=t.dataFields[e].defaultValue;n.selectedPlugin=[e,n.selectedPlugin[1]]})},this.UpdatePluginData=(e,t)=>this.speechStore.update(n=>{n.selectedPluginData[e]=t}),this.SelectLanguage=e=>this.speechStore.update(t=>({selectedLanguage:[parseInt(e),0]})),this.SelectDialect=e=>this.speechStore.update(t=>({selectedLanguage:[t.selectedLanguage[0],parseInt(e)]})),this.isRunningSentence=!1,s.connectionState$.subscribe(e=>e===T.e.Connected&&(0,E.iA)()===E.Bh.client&&this.DoClearSentences()),i.messages$.subscribe(e=>{"stt:clear"===e.type&&this.DoClearSentences(),"stt:updatesentence"===e.type&&this.DoUpsertSentence(e.data)})}StopHost(){var e;return(0,r.mG)(this,void 0,void 0,function*(){yield null===(e=this.activePlugin)||void 0===e?void 0:e.Stop(),this.activePlugin=void 0})}StartHost(){const e=o.s[this.speechQuery.getValue().selectedPlugin[0]],t=new e.plugin,n=this.speechQuery.getValue().selectedLanguage,r=this.speechQuery.getValue().selectedPluginData,s=i.Mj[n[0]][n[1]+1][0];this.activePlugin=t,this.activePlugin.onInter$.pipe(function(e,t,n){void 0===t&&(t=c.z),void 0===n&&(n=d);var r,i,s,o,p,f=(0,a.H)(e,t);return r=function(){return f},o=(s=void 0===(i=n)?d:i).leading,p=s.trailing,(0,u.e)(function(e,t){var n=!1,i=null,s=null,a=!1,c=function(){null==s||s.unsubscribe(),s=null,p&&(f(),a&&t.complete())},u=function(){s=null,a&&t.complete()},d=function(e){return s=(0,h.Xf)(r()).subscribe(new l.Q(t,c,u))},f=function(){if(n){n=!1;var e=i;i=null,t.next(e),!a&&d()}};e.subscribe(new l.Q(t,function(e){n=!0,i=e,(!s||s.closed)&&(o?f():d())},function(){a=!0,(!(p&&n&&s)||s.closed)&&t.complete()}))})}(e.throttleInterim)).subscribe(e=>this.UpsertSentence(e,!1,i._q.voice)),this.activePlugin.onFinal$.subscribe(e=>this.UpsertSentence(e,!0,i._q.voice)),this.activePlugin.onStatusChanged$.subscribe(e=>this.speechStore.update({connectionState:e})),this.activePlugin.onPluginCrashed$.pipe((0,p.q)(1)).subscribe(e=>{this.toastService.error(e,{theme:"snackbar",position:"bottom-right"}),this.StopHost()}),this.activePlugin.Start(s,r).catch(e=>this.toastService.error(e.message,{theme:"snackbar",position:"bottom-right"}))}TriggerShowTimer(){var e;const t=this.styleQuery.getValue().currentStyle.globalStyle,n=this.styleQuery.getValue().currentStyle.boxStyle,r=parseInt((null===(e=t.inactivityTimer)||void 0===e?void 0:e.value[0])||"1000");this.speechStore.update({show:!0}),this.timeout&&!this.timeout.closed&&this.timeout.unsubscribe(),this.timeout=(0,a.H)(r).subscribe(e=>{var r;t.hideOnInactivity.value[0]&&t.keepSingleSentence.value[0]&&0===n.opacity.value[1]||(null===(r=t.clearOnInactivity)||void 0===r?void 0:r.value[0])&&this.DoClearFinishedSentences(),this.speechStore.update({show:!1})})}TryRunNext(){var e;return(0,r.mG)(this,void 0,void 0,function*(){if(this.isRunningSentence)return;const t=this.speechQuery.getAll().find(e=>!e.isPlayed&&e.finalized);if(!t)return;const n=this.styleQuery.getValue().currentStyle.globalStyle;(null===(e=n.keepSingleSentence)||void 0===e?void 0:e.value[0])&&this.DoClearFinishedSentences(),this.isRunningSentence=!0,yield t.Run(),this.isRunningSentence=!1,this.TryRunNext()})}DoUpsertSentence(e){var t,n;const r=this.speechQuery.getAll({filterBy:t=>!t.finalized&&t.type===i._q.voice&&t.id!==e.id});r.forEach(e=>e.Dispose()),this.speechStore.remove(r.map(e=>e.id));const s=this.speechQuery.hasEntity(e.id);this.speechStore.upsert(e.id,e,{baseClass:v});const o=this.speechQuery.getEntity(e.id);if(!s){null==o||o.BindTypeEvent(()=>{this.TriggerShowTimer(),this.speechQuery.onTypingEvent$.next(null)});const e=this.styleQuery.getValue().currentStyle.globalStyle;!(null===(t=e.typingAnimation)||void 0===t?void 0:t.value[0])&&(null===(n=e.keepSingleSentence)||void 0===n?void 0:n.value[0])&&this.DoClearFinishedSentences()}null==o||o.Update(e),this.TryRunNext()}UpsertSentence(e,t=!1,n=i._q.voice){var r;const o=function(e,t=!1,n=i._q.voice,r,o,a){var c,u,l,h;if(void 0===e||" "===e)return null;const d=o.getAll().filter(e=>e.type===n),p=a.getValue().currentStyle.globalStyle;if(""===e&&t){const e=d.findIndex(e=>!e.finalized);return-1===e?null:Object.assign(Object.assign({},d[e]),{finalized:!0})}let f=e.trim().split(" "),v=[],g=o.getValue().profanityWords,y=new Set(g);if(t&&y.size>0)for(let i=0;i<f.length;i++)if("*"===f[i][0]||"*"===f[i][1]||"*"===f[i][2]){0===y.size&&(y=new Set(g));let e=(S=Array.from(y),((0,C.Z)(S)?b:_)(S));e&&(y.delete(e),f[i]=e)}var S;let w,T=f.join(" ");if(m.N.features.EMOTES){const e=r.getValue(),t=e.bindings_cache,n=e.keyword.toLocaleLowerCase(),i=e.keyword_secondary.toLocaleLowerCase();if(n||i)for(let r=0;r<f.length&&r+1!==f.length;r++){const e=f[r].toLocaleLowerCase();if(e===n||e===i){const e=null===(c=f[r+1])||void 0===c?void 0:c.replace(".","").replace(",",""),n=null===(u=f[r+2])||void 0===u?void 0:u.replace(".","").replace(",","");(null===(l=t[e])||void 0===l?void 0:l[n])?f.splice(r,3,t[e][n]):(null===(h=t[e])||void 0===h?void 0:h[""])&&f.splice(r,2,t[e][""])}}T=f.join(" "),v=f.map((t,n)=>{var r,i;const s=t[0],o=t.replace(".","");return(null===(r=e.emotes[s])||void 0===r?void 0:r[o])?[`<img class="emote" src="${null===(i=e.emotes[s])||void 0===i?void 0:i[o]}">`," "]:[...t.split("")," "]})}else v=f.map(e=>[...e.split("")," "]);if(t){const e=v[v.length-1];/[.,\/#!?$%\^&\*;:{}=\-_`~()]/g.test(e[e.length-2])||(e.splice(-1,0,"."),v[v.length-1]=e)}let E={animate:!!p.typingAnimation.value[0],animateWords:!!p.typeWords.value[0],interval:p.typingDelay.value[0]};return w=0===d.length||d[d.length-1].finalized?{finalized:t,valueNext:v,id:(0,s.M8)(),type:n,ttsValue:T,animation:E}:Object.assign(Object.assign({},d[d.length-1]),{finalized:t,valueNext:v,ttsValue:T}),w}(e,t,n,this.emotesQuery,this.speechQuery,this.styleQuery);o&&(this.DoUpsertSentence(o),this.networkService.SendMessage({type:"stt:updatesentence",data:null===(r=this.speechQuery.getEntity(o.id))||void 0===r?void 0:r.data}))}DoClearFinishedSentences(){const e=this.speechQuery.getAll({filterBy:e=>e.finalized&&e.isPlayed});e.forEach(e=>e.Dispose()),this.speechStore.remove(e.map(e=>e.id))}DoClearSentences(){this.speechQuery.getAll().forEach(e=>e.Dispose()),this.speechStore.remove()}ClearSentences(){this.DoClearSentences(),this.networkService.SendMessage({type:"stt:clear",data:null})}InterimTextInput(e){this.speechStore.update({textInput:e}),this.styleQuery.getValue().currentStyle.globalStyle.realtimeTyping.value[0]&&this.UpsertSentence(e,!1,i._q.text)}SendTextInput(e){var t;let n=null===(t=e.target)||void 0===t?void 0:t.value;""!==n&&(this.speechStore.update({textInput:""}),this.UpsertSentence(n,!0,i._q.text))}AddProfanityWord(){this.speechStore.update(e=>({profanityWords:[...e.profanityWords,"haha"]}))}UpdateProfanityWord(e,t){this.speechStore.update(n=>{n.profanityWords[t]=e})}RemoveProfanityWord(e){this.speechStore.update(t=>{t.profanityWords.splice(e,1)})}InterimAddEmote(e){const t=this.speechQuery.getAll().filter(e=>e.type===i._q.text&&!e.finalized);this.InterimTextInput(t.length?`${t[0].ttsValue} ${e}`:e)}}N.\u0275fac=function(e){return new(e||N)(x.LFG(i.eb),x.LFG(P.B),x.LFG(k.v),x.LFG(R.B),x.LFG(O.S),x.LFG(I.s),x.LFG(A.jE))},N.\u0275prov=x.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),(0,r.gn)([(0,s.PS)()],N.prototype,"InterimTextInput",null),(0,r.gn)([(0,s.PS)()],N.prototype,"SendTextInput",null)},9050:(e,t,n)=>{"use strict";n.d(t,{_q:()=>c,eb:()=>u,Mj:()=>l});var r=n(4762),i=n(4004),s=n(9822),o=n(1100),a=n(5040),c=(()=>(function(e){e[e.voice=0]="voice",e[e.text=1]="text"}(c||(c={})),c))();let u=class extends i.cf{constructor(){super({selectedPlugin:["native",null],selectedPluginData:[],selectedLanguage:[0,0],connectionState:s.e.Disconnected,textInput:"",show:!1,profanityWords:[]})}};u.\u0275fac=function(e){return new(e||u)},u.\u0275prov=a.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u=(0,r.gn)([(0,i.yC)({name:"speech",producerFn:o.ZP})],u);const l=[["Dansk",["da-DK"]],["Deutsch",["de-DE"]],["English",["en-AU","Australia"],["en-CA","Canada"],["en-IN","India"],["en-GB","United Kingdom"],["en-US","United States"]],["Espa\xf1ol",["es-ES","Espa\xf1a"],["es-MX","M\xe9xico"]],["Fran\xe7ais",["fr-FR"]],["Italiano",["it-IT"]],["Nederlands",["nl-NL"]],["Norsk bokm\xe5l",["nb-NO"]],["Polski",["pl-PL"]],["Portugu\xeas",["pt-BR","Brasil"],["pt-PT","Portugal"]],["Suomi",["fi-FI"]],["Svenska",["sv-SE"]],["P\u0443\u0441\u0441\u043a\u0438\u0439",["ru-RU"]],["\ud55c\uad6d\uc5b4",["ko-KR"]],["\u4e2d\u6587",["cmn-Hans-CN"]],["\u65e5\u672c\u8a9e",["ja-JP"]],["\u0939\u093f\u0928\u094d\u0926\u0940",["hi-IN"]],["\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",["th-TH"]]]},8208:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var r=n(3875),i=n(9225),s=n.n(i);const o=[function(e){return console.log("migrate 0 -> 1"),e},function(e){var t,n,i,o,a,c,u,l,h,d,p,f,v,m,g,y,b,S;console.log("migrate 1 -> 2");const w=s()(r.PW,e,{arrayMerge:(e,t,n)=>t});w.avatarStyle.bottom&&delete w.avatarStyle.bottom,w.avatarStyle.left&&delete w.avatarStyle.left,w.avatarStyle.animationName&&delete w.avatarStyle.animationName,w.avatarStyle.animationDuration&&delete w.avatarStyle.animationDuration,w.globalStyle.clearOnHide&&delete w.globalStyle.clearOnHide,w.globalStyle.alwaysShow&&delete w.globalStyle.alwaysShow,w.globalStyle.hideAfter&&delete w.globalStyle.hideAfter,w.textStyle.alignItems&&(w.textStyle.alignContent.value=w.textStyle.alignItems.value,delete w.textStyle.alignItems);const _=w.textStyle;_.top&&(w.textStyle.marginTop.value=_.top.value,delete w.textStyle.top),_.bottom&&(w.textStyle.marginBottom.value=_.bottom.value,delete w.textStyle.bottom),_.left&&(w.textStyle.marginLeft.value=_.left.value,delete w.textStyle.left),_.right&&(w.textStyle.marginRight.value=_.right.value,delete w.textStyle.right),"object"!=typeof _.marginRight&&(w.textStyle.marginRight=r.PW.textStyle.marginRight),"object"!=typeof _.marginLeft&&(w.textStyle.marginLeft=r.PW.textStyle.marginLeft),"object"!=typeof _.marginTop&&(w.textStyle.marginTop=r.PW.textStyle.marginTop),"object"!=typeof _.marginBottom&&(w.textStyle.marginBottom=r.PW.textStyle.marginBottom),"string"==typeof _.scaleMin.value&&(w.textStyle.scaleMin.value=parseFloat(_.scaleMin.value)),"string"==typeof _.scaleMax.value&&(w.textStyle.scaleMax.value=parseFloat(_.scaleMax.value)),"string"==typeof _.durationMin.value&&(w.textStyle.durationMin.value=parseFloat(_.durationMin.value)),"string"==typeof _.durationMax.value&&(w.textStyle.durationMax.value=parseFloat(_.durationMax.value)),"string"==typeof _.rotationMin.value&&(w.textStyle.rotationMin.value=parseFloat(_.rotationMin.value)),"string"==typeof _.rotationMax.value&&(w.textStyle.rotationMax.value=parseFloat(_.rotationMax.value)),"string"==typeof _.translationXMin.value&&(w.textStyle.translationXMin.value=parseFloat(_.translationXMin.value)),"string"==typeof _.translationXMax.value&&(w.textStyle.translationXMax.value=parseFloat(_.translationXMax.value)),"string"==typeof _.translationYMin.value&&(w.textStyle.translationYMin.value=parseFloat(_.translationYMin.value)),"string"==typeof _.translationYMax.value&&(w.textStyle.translationYMax.value=parseFloat(_.translationYMax.value));for(let r of["boxStyle","textStyle","avatarStyle","soundStyle","globalStyle"])for(let e in w[r]){const t=w[r][e].value;Array.isArray(t)||(delete w[r][e].iValue,w[r][e].value=[t,t])}if(w.avatarStyleComposite){const e=null===(i=null===(n=null===(t=w.avatarStyleComposite)||void 0===t?void 0:t.transform)||void 0===n?void 0:n.x)||void 0===i?void 0:i.value,r=null===(c=null===(a=null===(o=w.avatarStyleComposite)||void 0===o?void 0:o.transform)||void 0===a?void 0:a.y)||void 0===c?void 0:c.value;w.avatarStyle.transformX.value=e?[e,e]:[0,0],w.avatarStyle.transformY.value=e?[r,r]:[0,0],console.log(w.avatarStyle.transformX,w.avatarStyle.transformY),delete w.avatarStyleComposite}if(w.textStyleComposite){const e=null===(h=null===(l=null===(u=w.textStyleComposite)||void 0===u?void 0:u.textShadow)||void 0===l?void 0:l.x)||void 0===h?void 0:h.value,t=null===(f=null===(p=null===(d=w.textStyleComposite)||void 0===d?void 0:d.textShadow)||void 0===p?void 0:p.y)||void 0===f?void 0:f.value,n=null===(g=null===(m=null===(v=w.textStyleComposite)||void 0===v?void 0:v.textShadow)||void 0===m?void 0:m.b)||void 0===g?void 0:g.value,r=null===(S=null===(b=null===(y=w.textStyleComposite)||void 0===y?void 0:y.textShadow)||void 0===b?void 0:b.color)||void 0===S?void 0:S.value;w.textStyle.shadowX.value=e?[e,e]:["0","0"],w.textStyle.shadowY.value=t?[t,t]:["0","0"],w.textStyle.shadowB.value=n?[n,n]:["0","0"],w.textStyle.shadowColor.value=r?[r,r]:["black","black"]}return w.version=2,w},function(e){console.log("migrate 2 -> 3");const t=s()(r.PW,e,{arrayMerge:(e,t,n)=>t});return t.version=3,t},function(e){console.log("migrate 3 -> 4");const t=s()(r.PW,e,{arrayMerge:(e,t,n)=>t});return t.version=4,t},function(e){console.log("migrate 4 -> 5");const t=s()(r.PW,e,{arrayMerge:(e,t,n)=>t});return t.version=5,t},function(e){console.log("migrate 5 -> 6");const t=s()(r.PW,e,{arrayMerge:(e,t,n)=>t});return t.version=6,t},function(e){console.log("migrate 6 -> 7");const t=s()(r.PW,e,{arrayMerge:(e,t,n)=>t});return t.version=7,t},function(e){console.log("migrate 7 -> 8");const t=s()(r.PW,e,{arrayMerge:(e,t,n)=>t});return t.version=8,t},function(e){console.log("migrate 8 -> 9");const t=s()(r.PW,e,{arrayMerge:(e,t,n)=>t});return t.version=9,t}];function a(e){if(e.version===r.PW.version)return e;let t=Object.assign({},e);console.log("[Migrate] template from",e.version);for(let n=e.version||0;n<r.PW.version;n++)n<r.PW.version&&(t=o[n](t));return t}},9880:(e,t,n)=>{"use strict";n.d(t,{B:()=>c});var r=n(4004),i=n(5207),s=n(2687),o=n(5040),a=n(3875);let c=(()=>{class e extends r.AE{constructor(e){super(e),this.store=e,this.state$=this.select(),this.currentTemplate$=this.select("currentTemplate"),this.templates$=this.select("templates"),this.current$=this.select("currentStyle"),this.globalConfig$=this.select("currentStyle").pipe((0,i.U)(e=>e.globalStyle)),this.soundClip$=this.select("currentStyle").pipe((0,i.U)(e=>e.soundStyle.typeClip),(0,s.x)())}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(a.eJ))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},7911:(e,t,n)=>{"use strict";n.d(t,{v:()=>y});var r=n(4762),i=n(3875),s=n(5050),o=n(8208);const a=document.documentElement.style;function c(e,t){a.setProperty(e,t(0)),a.setProperty(e+"-alt",t(1))}function u(e){c("--stt-box-width",t=>e.width.value[t]+"px"),c("--stt-box-bg-color",t=>e.backgroundColor.value[t]),c("--stt-box-opacity",t=>e.opacity.value[t]),c("--stt-box-transform",t=>`translateX(${e.transformX.value[t]}px) translateY(${e.transformY.value[t]}px) scale(${e.scale.value[t]})`),c("--stt-box-shadow",t=>`${e.shadowX.value[t]}px ${e.shadowY.value[t]}px ${e.shadowB.value[t]}px ${e.shadowSpread.value[0]}px ${e.shadowColor.value[t]}`),"grow"===e.heightMode.value[0]?(c("--stt-box-height",e=>"auto"),c("--stt-box-max-height",t=>e.height.value[t]+"px")):(c("--stt-box-height",t=>e.height.value[t]+"px"),c("--stt-box-max-height",e=>"none")),"normal"===e.bgStyle.value[0]?(c("--stt-box-bg-image",t=>`url('${e.backgroundImage.value[t]}')`),c("--stt-box-border",t=>`${e.borderWidth.value[t]}px solid ${e.borderColor.value[t]}`),c("--stt-box-border-radius",t=>`${e.borderRadius.value[t]}px`),c("--stt-box-border-image-slice",e=>"none"),c("--stt-box-border-image-width",e=>"none")):(c("--stt-box-bg-image",e=>"none"),c("--stt-box-border",e=>"0px solid transparent"),c("--stt-box-border-radius",e=>0),c("--stt-box-border-image-slice",t=>`${e.borderWidthTop.value[t]} ${e.borderWidthRight.value[t]} ${e.borderWidthBottom.value[t]} ${e.borderWidthLeft.value[t]} fill`),c("--stt-box-border-image-width",t=>`${e.borderWidthTop.value[t]}px ${e.borderWidthRight.value[t]}px ${e.borderWidthBottom.value[t]}px ${e.borderWidthLeft.value[t]}px`))}function l(e){c("--stt-text-color",t=>e.color.value[t]),c("--stt-text-font-family",t=>e.fontFamily.value[t]),c("--stt-text-font-size",t=>`${e.fontSize.value[t]}px`),c("--stt-text-line-height",t=>e.lineHeight.value[t]),c("--stt-text-font-weight",t=>e.fontWeight.value[t]),c("--stt-text-text-transform",t=>e.textTransform.value[t]),c("--stt-text-justify-content",t=>e.justifyContent.value[t]),c("--stt-text-align-content",t=>e.alignContent.value[t]),c("--stt-text-margin",t=>`${e.marginTop.value[t]}px ${e.marginRight.value[t]}px ${e.marginBottom.value[t]}px ${e.marginLeft.value[t]}px`),c("--stt-text-padding",t=>`${e.paddingTop.value[t]}px ${e.paddingRight.value[t]}px ${e.paddingBottom.value[t]}px ${e.paddingLeft.value[t]}px`),c("--stt-text-shadow",t=>`${e.shadowX.value[t]}px ${e.shadowY.value[t]}px ${e.shadowB.value[t]}px ${e.shadowColor.value[t]}`),c("--stt-text-stroke",t=>`${e.webkitTextStrokeWidth.value[t]}px ${e.webkitTextStrokeColor.value[t]}`)}function h(e){c("--stt-avatar-order",t=>e.order.value[t]),c("--stt-avatar-width",t=>`${e.width.value[t]}px`),c("--stt-avatar-height",t=>`${e.height.value[t]}px`),c("--stt-avatar-bg-image",t=>`url('${e.backgroundImage.value[t]}')`),c("--stt-avatar-opacity",t=>e.opacity.value[t]),c("--stt-avatar-transform",t=>`translateX(${e.transformX.value[t]}px) translateY(${e.transformY.value[t]}px)`)}function d(e){c("--stt-emote-height",t=>`${e.emoteHeight.value[0]}px`)}function p(e){var t;(null===(t=document.documentElement)||void 0===t?void 0:t.style)&&(u(e.boxStyle),l(e.textStyle),h(e.avatarStyle),d(e.globalStyle))}var f=n(2843),v=n(5040),m=n(2841),g=n(9338);let y=(()=>{class e{constructor(e,t,n){var r;this.styleStore=e,this.networkService=t,this.toastService=n,(r=document.createElement("style")).innerHTML="\n    .stt-box {\n      width: var(--stt-box-width);\n      height: var(--stt-box-height);\n      max-height: var(--stt-box-max-height);\n      background-color: var(--stt-box-bg-color);\n      background-image: var(--stt-box-bg-image);\n      transform: var(--stt-box-transform);\n      opacity: var(--stt-box-opacity);\n      box-shadow: var(--stt-box-shadow);\n      border: var(--stt-box-border);\n      border-radius: var(--stt-box-border-radius);\n      border-image-slice: var(--stt-box-border-image-slice);\n      border-image-width: var(--stt-box-border-image-width);\n    }\n    .hide .stt-box {\n      width: var(--stt-box-width-alt);\n      height: var(--stt-box-height-alt);\n      max-height: var(--stt-box-max-height-alt);\n      background-color: var(--stt-box-bg-color-alt);\n      background-image: var(--stt-box-bg-image-alt);\n      transform: var(--stt-box-transform-alt);\n      opacity: var(--stt-box-opacity-alt);\n      box-shadow: var(--stt-box-shadow-alt);\n      border: var(--stt-box-border-alt);\n      border-radius: var(--stt-box-border-radius-alt);\n      border-image-slice: var(--stt-box-border-image-slice-alt);\n      border-image-width: var(--stt-box-border-image-width-alt);\n    }\n    \n    .stt-box-text {\n      color: var(--stt-text-color);\n      font-size: var(--stt-text-font-size);\n      font-family: var(--stt-text-font-family);\n      line-height: var(--stt-text-line-height);\n      font-weight: var(--stt-text-font-weight);\n      text-transform: var(--stt-text-text-transform);\n      justify-content: var(--stt-text-justify-content);\n      align-content: var(--stt-text-align-content);\n      margin: var(--stt-text-margin);\n      padding: var(--stt-text-padding);\n      text-shadow: var(--stt-text-shadow);\n      -webkit-text-stroke: var(--stt-text-stroke);\n    }\n    \n    .hide .stt-box-text {\n      color: var(--stt-text-color-alt);\n      font-size: var(--stt-text-font-size-alt);\n      font-family: var(--stt-text-font-family-alt);\n      line-height: var(--stt-text-line-height-alt);\n      font-weight: var(--stt-text-font-weight-alt);\n      text-transform: var(--stt-text-text-transform-alt);\n      justify-content: var(--stt-text-justify-content-alt);\n      align-content: var(--stt-text-align-content-alt);\n      margin: var(--stt-text-margin-alt);\n      padding: var(--stt-text-padding-alt);\n      text-shadow: var(--stt-text-shadow-alt);\n      -webkit-text-stroke: var(--stt-text-stroke-alt);\n    }\n    \n    .stt-box-avatar {\n      order: var(--stt-avatar-order);\n      width: var(--stt-avatar-width);\n      height: var(--stt-avatar-height);\n      background-image: var(--stt-avatar-bg-image);\n      opacity: var(--stt-avatar-opacity);\n      transform: var(--stt-avatar-transform);\n    }\n    \n    .hide .stt-box-avatar {\n      order: var(--stt-avatar-order-alt);\n      width: var(--stt-avatar-width-alt);\n      height: var(--stt-avatar-height-alt);\n      background-image: var(--stt-avatar-bg-image-alt);\n      opacity: var(--stt-avatar-opacity-alt);\n      transform: var(--stt-avatar-transform-alt);\n    }\n    \n    .emote {\n      height: var(--stt-emote-height);\n    }\n  ",document.head.appendChild(r),p(e.getValue().currentStyle),t.messages$.subscribe(e=>{"style"===e.type&&this.ReceiveFullStyle(e.data),"style:partial"===e.type&&this.ReceivePartialStyle(e.data)}),t.onClientConnected$.subscribe(e=>this.SendFullStyle())}CreateTemplate(e){this.styleStore.update(t=>{t.templates.push({name:e,value:i.PW})}),this.SelectTemplate(this.styleStore.getValue().templates.length-1)}DuplicateTemplate(e){this.styleStore.update(t=>{t.templates.push({name:e,value:t.currentStyle})}),this.SelectTemplate(this.styleStore.getValue().templates.length-1)}SelectTemplate(e){this.styleStore.update(t=>{t.templates[e]&&(t.currentTemplate=e,t.currentStyle=Object.assign({},t.templates[e].value))}),this.SendFullStyle()}DeleteTemplate(){window.confirm("Remove current template")&&this.styleStore.update(e=>{null!==e.currentTemplate&&(e.templates.splice(e.currentTemplate,1),e.currentTemplate=null)})}ImportTemplate(){return(0,r.mG)(this,void 0,void 0,function*(){let e=null;try{e=yield(0,s.I$)({mimeTypes:["application/json"],extensions:[".json"]})}catch(t){}if(e)try{const t=yield e.text(),n=JSON.parse(t);if(!n.name||!n.value)return;const r=Object.assign(Object.assign({},n),{value:(0,o.w)(n.value)});this.styleStore.update(e=>{e.templates.push(r)}),this.toastService.success(`Imported: ${r.name}`,{theme:"snackbar",position:"bottom-right"})}catch(t){throw new Error(t)}})}ExportTemplate(){const e=this.styleStore.getValue();if(null===e.currentTemplate)return;const t=e.templates[e.currentTemplate],n=new Blob([JSON.stringify(t)]),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`${t.name}.json`,i.click(),URL.revokeObjectURL(r),this.toastService.success(`Exported: ${t.name}`,{theme:"snackbar",position:"bottom-right"})}ImportAudio(){return(0,r.mG)(this,void 0,void 0,function*(){let e=null;try{e=yield(0,s.I$)({mimeTypes:["application/audio"],extensions:[".wav",".mp3",".ogg"]})}catch(n){console.log(n)}if(e)try{if(e.size>2e4)return void this.toastService.error("Audio file is too large",{theme:"snackbar",position:"bottom-right"});const n=yield e.arrayBuffer(),r=new Blob([n],{type:e.type});var t=new FileReader;t.onload=e=>{var t;let n=null===(t=e.target)||void 0===t?void 0:t.result;if("string"!=typeof n)return;const[r,i]=n.split("base64,"),s=[i,"base64"];this.styleStore.update(e=>{e.currentStyle.soundStyle.typeClip.value=s}),this.SendPartialStyle(["soundStyle","typeClip",s]),this.toastService.success("Typing audio updated",{theme:"snackbar",position:"bottom-right"})},t.readAsDataURL(r)}catch(r){throw new Error(r)}})}SendFullStyle(){(0,f.iA)()===f.Bh.host&&this.ReceiveFullStyle(this.styleStore.getValue().currentStyle),this.networkService.SendMessage({type:"style",data:this.styleStore.getValue().currentStyle})}SendPartialStyle(e){(0,f.iA)()===f.Bh.host&&this.ReceivePartialStyle(e),this.networkService.SendMessage({type:"style:partial",data:e})}ReceiveFullStyle(e){this.styleStore.update(t=>{t.currentStyle=e,p(e)})}ReceivePartialStyle(e){this.styleStore.update(t=>{var n,r;t.currentStyle[e[0]][e[1]].value=e[2],(0,f.iA)()===f.Bh.host&&null!==t.currentTemplate&&(t.templates[t.currentTemplate].value[e[0]][e[1]].value=e[2]),r=t.currentStyle[e[0]],"avatarStyle"===(n=e[0])&&h(r),"boxStyle"===n&&u(r),"textStyle"===n&&l(r),"globalStyle"===n&&d(r)})}UpdateNormalStyles(e,t,n,r){let i=this.styleStore.getValue().currentStyle[e][t];this.SendPartialStyle([e,t,i.linked?[n,n]:0===r?[n,i.value[1]]:[i.value[0],n]])}UpdateLinkSwitch(e,t){this.styleStore.update(n=>{if(n.currentStyle[e][t].linked=!n.currentStyle[e][t].linked,!n.currentStyle[e][t].linked)return;const r=n.currentStyle[e][t].value[0];n.currentStyle[e][t].value=[r,r],this.SendPartialStyle([e,t,[r,r]])})}}return e.\u0275fac=function(t){return new(t||e)(v.LFG(i.eJ),v.LFG(m.S),v.LFG(g.jE))},e.\u0275prov=v.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},3875:(e,t,n)=>{"use strict";n.d(t,{PW:()=>u,eJ:()=>h});var r=n(4762),i=n(4004),s=n(1100),o=n(8208),a=n(5040),c=(()=>(function(e){e[e.string=0]="string",e[e.pixels=1]="pixels",e[e.ms=2]="ms",e[e.url=3]="url",e[e.bool=4]="bool",e[e.translateX=5]="translateX",e[e.translateY=6]="translateY",e[e.scale=7]="scale",e[e.logic=8]="logic",e[e.number=9]="number",e[e.audioFile=10]="audioFile"}(c||(c={})),c))();const u={version:9,boxStyle:{width:{type:c.pixels,value:["300","300"],linked:!0},height:{type:c.pixels,value:["100","100"],linked:!0},transformX:{type:c.number,value:[0,0],linked:!0},transformY:{type:c.number,value:[0,0],linked:!0},scale:{type:c.number,value:[1,1],linked:!0},heightMode:{type:c.logic,value:["fixed","fixed"],linked:!0},backgroundImage:{type:c.logic,value:["",""],linked:!0},backgroundColor:{type:c.string,value:["transparent","transparent"],linked:!0},borderRadius:{type:c.pixels,value:["0","0"],linked:!0},borderWidth:{type:c.pixels,value:["0","0"],linked:!0},borderColor:{type:c.string,value:["transparent","transparent"],linked:!0},borderWidthTop:{type:c.logic,value:["0","0"],linked:!0},borderWidthRight:{type:c.logic,value:["0","0"],linked:!0},borderWidthBottom:{type:c.logic,value:["0","0"],linked:!0},borderWidthLeft:{type:c.logic,value:["0","0"],linked:!0},bgStyle:{type:c.logic,value:["normal","normal"],linked:!0},opacity:{type:c.number,value:[1,1],linked:!0},shadowX:{type:c.pixels,value:["0","0"],linked:!0},shadowY:{type:c.pixels,value:["0","0"],linked:!0},shadowB:{type:c.pixels,value:["0","0"],linked:!0},shadowSpread:{type:c.pixels,value:["0","0"],linked:!0},shadowColor:{type:c.string,value:["transparent","transparent"],linked:!0}},textStyle:{fontFamily:{type:c.string,value:["Roboto","Roboto"],linked:!0},color:{type:c.string,value:["white","white"],linked:!0},fontSize:{type:c.pixels,value:["18","18"],linked:!0},lineHeight:{type:c.string,value:["1.2","1.2"],linked:!0},fontWeight:{type:c.string,value:["500","500"],linked:!0},textTransform:{type:c.string,value:["none","none"],linked:!0},justifyContent:{type:c.string,value:["flex-start","flex-start"],linked:!0},alignContent:{type:c.string,value:["flex-start","flex-start"],linked:!0},marginTop:{type:c.pixels,value:["0","0"],linked:!0},marginBottom:{type:c.pixels,value:["0","0"],linked:!0},marginLeft:{type:c.pixels,value:["10","10"],linked:!0},marginRight:{type:c.pixels,value:["10","10"],linked:!0},paddingTop:{type:c.pixels,value:["0","0"],linked:!0},paddingBottom:{type:c.pixels,value:["0","0"],linked:!0},paddingLeft:{type:c.pixels,value:["0","0"],linked:!0},paddingRight:{type:c.pixels,value:["0","0"],linked:!0},scaleMin:{type:c.number,value:[1,1],linked:!0},scaleMax:{type:c.number,value:[1,1],linked:!0},durationMin:{type:c.number,value:[.1,.1],linked:!0},durationMax:{type:c.number,value:[.1,.1],linked:!0},rotationMin:{type:c.number,value:[0,0],linked:!0},rotationMax:{type:c.number,value:[0,0],linked:!0},translationXMin:{type:c.number,value:[0,0],linked:!0},translationXMax:{type:c.number,value:[0,0],linked:!0},translationYMin:{type:c.number,value:[0,0],linked:!0},translationYMax:{type:c.number,value:[0,0],linked:!0},shadowX:{type:c.pixels,value:["0","0"],linked:!0},shadowY:{type:c.pixels,value:["0","0"],linked:!0},shadowB:{type:c.pixels,value:["0","0"],linked:!0},shadowColor:{type:c.string,value:["transparent","transparent"],linked:!0},webkitTextStrokeWidth:{type:c.pixels,value:["0","0"],linked:!0},webkitTextStrokeColor:{type:c.string,value:["black","black"],linked:!0}},avatarStyle:{order:{type:c.string,value:["0","0"],linked:!0},width:{type:c.pixels,value:["120","120"],linked:!0},height:{type:c.pixels,value:["120","120"],linked:!0},backgroundImage:{type:c.url,value:["",""],linked:!0},animationName:{type:c.string,value:["none","none"],linked:!0},animationDuration:{type:c.ms,value:["2000","2000"],linked:!0},transformX:{type:c.number,value:[0,0],linked:!0},transformY:{type:c.number,value:[0,0],linked:!0},opacity:{type:c.number,value:[1,1],linked:!0}},soundStyle:{volume:{type:c.string,value:["0.5","0.5"],linked:!0},typeClip:{type:c.audioFile,value:["assets/sounds/type_1.wav","url"],linked:!0},typeDetune:{type:c.number,value:[0,0],linked:!0},typePlayback:{type:c.number,value:[1,1],linked:!0},voiceVolume:{type:c.string,value:["0.5","0.5"],linked:!0}},globalStyle:{emoteHeight:{type:c.pixels,value:["24","24"],linked:!0},hideOnInactivity:{type:c.bool,value:["",""],linked:!0},keepSingleSentence:{type:c.bool,value:["",""],linked:!0},clearOnInactivity:{type:c.bool,value:["",""],linked:!0},realtimeTyping:{type:c.bool,value:["1","1"],linked:!0},inactivityTimer:{type:c.string,value:["5000","5000"],linked:!0},typingAnimation:{type:c.bool,value:["",""],linked:!0},typeWords:{type:c.bool,value:["",""],linked:!0},typingDelay:{type:c.number,value:[80,80],linked:!0}},particleStyles:{enable:{type:c.bool,value:["",""],linked:!0},url:{type:c.string,value:["assets/particles/particle-1.png","assets/particles/particle-1.png"],linked:!0},duration:{type:c.number,value:[300,500],linked:!0},scale:{type:c.number,value:[.6,1],linked:!0},particles:{type:c.number,value:[2,2],linked:!0},rotation:{type:c.number,value:[-180,180],linked:!1},opacity:{type:c.number,value:[1,1],linked:!0},x:{type:c.number,value:[20,100],linked:!1},y:{type:c.number,value:[-20,-150],linked:!0}}},l={currentStyle:u,templates:[],currentTemplate:null};let h=class extends i.yh{constructor(){super(l),(0,i.h3)().subscribe(e=>{this.update({currentStyle:(0,o.w)(this.getValue().currentStyle),templates:this.getValue().templates.map(e=>Object.assign(Object.assign({},e),{value:(0,o.w)(e.value)}))})})}};h.\u0275fac=function(e){return new(e||h)},h.\u0275prov=a.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h=(0,r.gn)([(0,i.yC)({name:"style",producerFn:s.ZP})],h)},7552:(e,t,n)=>{"use strict";n.d(t,{H:()=>Q});var r=n(4762),i=n(6889),s=n(5094),o=n(9822);class a{constructor(){this.onFinal$=new i.x,this.onNotification$=new i.x,this.onPluginCrashed$=new i.x,this.onStatusChanged$=new s.X(o.e.Disconnected)}Start(e,t,n){return(0,r.mG)(this,void 0,void 0,function*(){this.onStatusChanged$.next(o.e.Connecting),console.log(`[Base voice] Start ${e}`)})}RequestPlay(e,t){}Stop(){return(0,r.mG)(this,void 0,void 0,function*(){console.log("[Base voice] Stop"),this.onStatusChanged$.next(o.e.Disconnected),this.onFinal$.complete(),this.onNotification$.complete(),this.onPluginCrashed$.complete()})}}var c=n(3662),u=n(8230),l=n(7957),h=n(8351),d=n(9484),p=n(6355),f=n(6160),v=n(3383),m=n(4700);class g{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1"}create(e,t,n){let r=e.parameters.getProperty(d.o.SpeechServiceConnection_Endpoint,void 0);const i=e.parameters.getProperty(d.o.SpeechServiceConnection_Region,void 0),s=p._.getHostSuffix(i),o=e.parameters.getProperty(d.o.SpeechServiceConnection_EndpointId,void 0),a=e.parameters.getProperty(d.o.SpeechServiceConnection_Host,"wss://"+i+"."+(void 0===o?"tts":"voice")+".speech"+s);r||(r=a+this.synthesisUri);const c={};void 0!==t.token&&""!==t.token&&(c[t.headerName]=t.token),c[v.S.ConnectionId]=n,void 0!==o&&(c[m.o.CustomVoiceDeploymentId]=o),e.parameters.setProperty(d.o.SpeechServiceConnection_Url,r);const u="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new l.i(r,{},c,new f.D,h.i.fromParameters(e.parameters),u,n)}}var y=n(2292),b=(()=>(function(e){e[e.Standard=0]="Standard",e[e.Custom=1]="Custom"}(b||(b={})),b))();class S{constructor(e,t){this.privSynthesisServiceType=b.Standard,this.privSpeechServiceConfig=e||new y.pu(new y._y(null)),this.privParameters=t}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(e){this.privSynthesisServiceType=e}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}var w=n(1883),_=n(3423),C=n(9370);let T=(()=>{class e{static get requestOptions(){return e.privDefaultRequestOptions}static get configParams(){return e.privDefaultParams}static get restErrors(){return e.privRestErrors}}return e.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},e.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},e.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"},e})();var E=n(1311),x=n.n(E),P=n(9877),k=n(4361),R=(()=>(function(e){e.Get="GET",e.Post="POST",e.Delete="DELETE",e.File="file"}(R||(R={})),R))();class O{constructor(e){if(!e)throw new P.Do("configParams");this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}static extractHeaderValue(e,t){let n="";try{const r=t.trim().split(/[\r\n]+/),i={};r.forEach(e=>{const t=e.split(": "),n=t.shift().toLowerCase(),r=t.join(": ");i[n]=r}),n=i[e.toLowerCase()]}catch(r){}return n}set options(e){this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}setHeaders(e,t){this.privHeaders[e]=t}request(e,t,n={},r=null,i=null){const s=new k.BH,o=e===R.File?"POST":e,a=(e,t={})=>{const n=e;return{data:JSON.stringify(t),headers:JSON.stringify(e.headers),json:t,ok:e.statusCode>=200&&e.statusCode<300,status:e.statusCode,statusText:t.error?t.error.message:n.statusText?n.statusText:n.statusMessage}},c=r=>{x()(t,o,this.privHeaders,200,201,202,204,400,401,402,403,404)(""===this.queryParams(n)?"":`?${this.queryParams(n)}`,r).then(t=>{return n=this,void 0,i=function*(){if(e===R.Delete||204===t.statusCode)s.resolve(a(t));else try{const e=yield t.json();s.resolve(a(t,e))}catch(n){s.resolve(a(t))}},new((r=void 0)||(r=Promise))(function(e,t){function s(e){try{a(i.next(e))}catch(n){t(n)}}function o(e){try{a(i.throw(e))}catch(n){t(n)}}function a(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(s,o)}a((i=i.apply(n,[])).next())});var n,r,i}).catch(e=>{s.reject(e)})};if(this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),e===R.File&&i){const e="multipart/form-data";this.privHeaders["content-type"]=e,this.privHeaders["Content-Type"]=e,"undefined"!=typeof Blob&&i instanceof Blob?(e=>{const t=new FileReader;return t.readAsArrayBuffer(e),new Promise(e=>{t.onloadend=()=>{e(t.result)}})})(i).then(e=>{c(e)}).catch(e=>{s.reject(e)}):c(i)}else e===R.Post&&r&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),c(r);return s.promise}withQuery(e,t={}){const n=this.queryParams(t);return n?e+(-1===e.indexOf("?")?"?":"&")+n:e}queryParams(e={}){return Object.keys(e).map(t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t])).join("&")}}class I{constructor(e,t){let n=e.parameters.getProperty(d.o.SpeechServiceConnection_Endpoint,void 0);if(!n){const t=e.parameters.getProperty(d.o.SpeechServiceConnection_Region,"westus"),r=p._.getHostSuffix(t);n=e.parameters.getProperty(d.o.SpeechServiceConnection_Host,`https://${t}.tts.speech${r}`)}this.privUri=`${n}/cognitiveservices/voices/list`,this.privRestAdapter=new O(T.requestOptions),this.privAuthentication=t}getVoicesList(e){return this.privRestAdapter.setHeaders(v.S.ConnectionId,e),this.privAuthentication.fetch(e).then(e=>(this.privRestAdapter.setHeaders(e.headerName,e.token),this.privRestAdapter.request(R.Get,this.privUri)))}}var A=n(7817),N=n(1070),D=n(3689),M=n(9390),L=n(2916),j=n(3699),F=n(1660),B=n(9816),z=n(576),U=n(4909),H=n(741),V=n(5517),q=(()=>(function(e){e[e.Unknown=0]="Unknown",e[e.Female=1]="Female",e[e.Male=2]="Male"}(q||(q={})),q))(),$=(()=>(function(e){e[e.OnlineNeural=1]="OnlineNeural",e[e.OnlineStandard=2]="OnlineStandard",e[e.OfflineNeural=3]="OfflineNeural",e[e.OfflineStandard=4]="OfflineStandard"}($||($={})),$))();class G{constructor(e){if(this.privStyleList=[],this.privVoicePath="",e&&(this.privName=e.Name,this.privLocale=e.Locale,this.privShortName=e.ShortName,this.privLocalName=e.LocalName,this.privVoiceType=e.VoiceType.endsWith("Standard")?$.OnlineStandard:$.OnlineNeural,this.privGender="Male"===e.Gender?q.Male:"Female"===e.Gender?q.Female:q.Unknown,e.StyleList&&Array.isArray(e.StyleList)))for(const t of e.StyleList)this.privStyleList.push(t)}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get localName(){return this.privLocalName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get voicePath(){return this.privVoicePath}}class W extends U.A{constructor(e,t,n){if(Array.isArray(t)){super(e,H.s.VoicesListRetrieved,void 0,new V.O),this.privVoices=[];for(const e of t)this.privVoices.push(new G(e))}else super(e,H.s.Canceled,n||"Error information unavailable",new V.O)}get voices(){return this.privVoices}}var Z=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})};class K{constructor(e,t){const n=e;j.a.throwIfNull(n,"speechConfig"),null!==t&&(this.audioConfig=void 0===t?"undefined"==typeof window?void 0:F.rU.fromDefaultSpeakerOutput():t),this.privProperties=n.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.privConnectionFactory=new g,this.synthesisRequestQueue=new A.c,this.implCommonSynthesizeSetup()}get authorizationToken(){return this.properties.getProperty(d.o.SpeechServiceAuthorization_Token)}set authorizationToken(e){j.a.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(d.o.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(d.o.SpeechServiceConnection_AutoDetectSourceLanguages)===u.y0}static FromConfig(e,t,n){return t.properties.mergeTo(e.properties),new K(e,n)}buildSsml(e){let t=this.properties.getProperty(d.o.SpeechServiceConnection_SynthLanguage,"en-US"),n=this.properties.getProperty(d.o.SpeechServiceConnection_SynthVoice,""),r=K.XMLEncode(e);return this.autoDetectSourceLanguage?t="en-US":n=n||{"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-JennyNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"}[t],n&&(r=`<voice name='${n}'>${r}</voice>`),r=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${t}'>${r}</speak>`,r}speakTextAsync(e,t,n,r){this.speakImpl(e,!1,t,n,r)}speakSsmlAsync(e,t,n,r){this.speakImpl(e,!0,t,n,r)}getVoicesAsync(e=""){return Z(this,void 0,void 0,function*(){return this.getVoices(e)})}close(e,t){j.a.throwIfDisposed(this.privDisposed),(0,k.Kb)(this.dispose(!0),e,t)}get internalData(){return this.privAdapter}dispose(e){return Z(this,void 0,void 0,function*(){this.privDisposed||(e&&this.privAdapter&&(yield this.privAdapter.dispose()),this.privDisposed=!0)})}createSynthesizerConfig(e){return new S(e,this.privProperties)}createSynthesisAdapter(e,t,n,r){return new w.E(e,t,r,this,this.audioConfig)}implCommonSynthesizeSetup(){let e="undefined"!=typeof window?"Browser":"Node",t="unknown",n="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,n=navigator.appVersion);const r=this.createSynthesizerConfig(new y.pu(new y._y(new y.OS(e,t,n)))),i=this.privProperties.getProperty(d.o.SpeechServiceConnection_Key,void 0),s=i&&""!==i?new _.U(i):new C.w(()=>{const e=this.privProperties.getProperty(d.o.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(e)},()=>{const e=this.privProperties.getProperty(d.o.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(e)});this.privAdapter=this.createSynthesisAdapter(s,this.privConnectionFactory,this.audioConfig,r),this.privAdapter.audioOutputFormat=M.d.fromSpeechSynthesisOutputFormat(B.Y[this.properties.getProperty(d.o.SpeechServiceConnection_SynthOutputFormat,void 0)]),this.privRestAdapter=new I(r,s)}speakImpl(e,t,n,r,i){try{j.a.throwIfDisposed(this.privDisposed);const s=(0,N.Q)();let o;o=i instanceof z.y?new L.KS(i):i instanceof L.Ao?i:void 0!==i?new D.O(i):void 0,this.synthesisRequestQueue.enqueue(new Y(s,e,t,e=>{if(this.privSynthesizing=!1,n)try{n(e)}catch(e){r&&r(e)}n=void 0,this.adapterSpeak().catch(()=>{})},e=>{r&&r(e)},o)),this.adapterSpeak().catch(()=>{})}catch(s){r&&(s instanceof Error?r(s.name+": "+s.message):r(s)),this.dispose(!0).catch(()=>{})}}getVoices(e){return Z(this,void 0,void 0,function*(){const t=(0,N.Q)(),n=yield this.privRestAdapter.getVoicesList(t);if(n.ok&&Array.isArray(n.json)){let r=n.json;return e&&e.length>0&&(r=r.filter(t=>!!t.Locale&&t.Locale.toLowerCase()===e.toLowerCase())),new W(t,r,void 0)}return new W(t,void 0,`Error: ${n.status}: ${n.statusText}`)})}adapterSpeak(){return Z(this,void 0,void 0,function*(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const e=yield this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(e.text,e.isSSML,e.requestId,e.cb,e.err,e.dataStream)}})}static XMLEncode(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}}class Y{constructor(e,t,n,r,i,s){this.requestId=e,this.text=t,this.isSSML=n,this.cb=r,this.err=i,this.dataStream=s}}const Q=[{name:"Native",plugin:class extends a{constructor(){super()}Start(e,t,n){const i=Object.create(null,{Start:{get:()=>super.Start}});return(0,r.mG)(this,void 0,void 0,function*(){i.Start.call(this,e,t,n);const r=window.NativeVoices;this.instance=new SpeechSynthesisUtterance;const s=r.find(e=>t===e.voiceURI);s?(this.instance.onstart=()=>console.log("start"),this.instance.lang=e,this.instance.volume=1,this.instance.voice=s,this.onStatusChanged$.next(o.e.Connected)):this.onPluginCrashed$.next("[Native] cannot initialize voice")})}RequestPlay(e,t){this.instance&&(this.instance.text=e,this.instance.volume="string"==typeof t?parseFloat(t):t,window.speechSynthesis.speak(this.instance))}Stop(){const e=Object.create(null,{Stop:{get:()=>super.Stop}});return(0,r.mG)(this,void 0,void 0,function*(){e.Stop.call(this)})}},languages:()=>{var e;return(null===(e=window)||void 0===e?void 0:e.NativeVoicesGroups)||[]},platformValidate:()=>!0,pluginDataFields:[]},{name:"Azure Cognitive Services",plugin:class extends a{constructor(){super()}RequestPlay(e){this.instance.speakTextAsync(e,e=>{this.onFinal$.next(e.audioData)},e=>{console.log(e)})}Start(e,t,n){const i=Object.create(null,{Start:{get:()=>super.Start}});return(0,r.mG)(this,void 0,void 0,function*(){if(!n[0]||!n[1])throw new Error("[Azure] Invalid voice configuration");try{i.Start.call(this,e,t,n);const r=c.c.fromSubscription(n[0],n[1]);r.speechSynthesisLanguage=e,r.speechSynthesisVoiceName=t,this.instance=new K(r,null),this.onStatusChanged$.next(o.e.Connected)}catch(r){this.onPluginCrashed$.next(r.message||r)}})}Stop(){const e=Object.create(null,{Stop:{get:()=>super.Stop}});var t;return(0,r.mG)(this,void 0,void 0,function*(){null===(t=this.instance)||void 0===t||t.close(),e.Stop.call(this)})}},languages:()=>[["Arabic (Egypt)","ar-EG",[["SalmaNeural","ar-EG-SalmaNeural"],["ShakirNeural","ar-EG-ShakirNeural"]]],["Arabic (Saudi Arabia)","ar-SA",[["ZariyahNeural","ar-SA-ZariyahNeural"],["HamedNeural","ar-SA-HamedNeural"]]],["Bulgarian (Bulgaria)","bg-BG",[["KalinaNeural","bg-BG-KalinaNeural"],["BorislavNeural","bg-BG-BorislavNeural"]]],["Catalan (Spain)","ca-ES",[["AlbaNeural","ca-ES-AlbaNeural"],["JoanaNeural","ca-ES-JoanaNeural"],["EnricNeural","ca-ES-EnricNeural"]]],["Chinese (Cantonese, Traditional)","zh-HK",[["HiuGaaiNeural","zh-HK-HiuGaaiNeural"],["HiuMaanNeural","zh-HK-HiuMaanNeural"],["WanLungNeural","zh-HK-WanLungNeural"]]],["Chinese (Mandarin, Simplified)","zh-CN",[["XiaoxiaoNeural","zh-CN-XiaoxiaoNeural"],["XiaoyouNeural","zh-CN-XiaoyouNeural"],["XiaomoNeural","zh-CN-XiaomoNeural"],["XiaoxuanNeural","zh-CN-XiaoxuanNeural"],["XiaohanNeural","zh-CN-XiaohanNeural"],["XiaoruiNeural","zh-CN-XiaoruiNeural"],["YunyangNeural","zh-CN-YunyangNeural"],["YunyeNeural","zh-CN-YunyeNeural"],["YunxiNeural","zh-CN-YunxiNeural"]]],["Chinese (Taiwanese Mandarin)","zh-TW",[["HsiaoChenNeural","zh-TW-HsiaoChenNeural"],["HsiaoYuNeural","zh-TW-HsiaoYuNeural"],["YunJheNeural","zh-TW-YunJheNeural"]]],["Croatian (Croatia)","hr-HR",[["GabrijelaNeural","hr-HR-GabrijelaNeural"],["SreckoNeural","hr-HR-SreckoNeural"]]],["Czech (Czech)","cs-CZ",[["VlastaNeural","cs-CZ-VlastaNeural"],["AntoninNeural","cs-CZ-AntoninNeural"]]],["Danish (Denmark)","da-DK",[["ChristelNeural","da-DK-ChristelNeural"],["JeppeNeural","da-DK-JeppeNeural"]]],["Dutch (Belgium)","nl-BE",[["DenaNeural","nl-BE-DenaNeural"],["ArnaudNeural","nl-BE-ArnaudNeural"]]],["Dutch (Netherlands)","nl-NL",[["ColetteNeural","nl-NL-ColetteNeural"],["FennaNeural","nl-NL-FennaNeural"],["MaartenNeural","nl-NL-MaartenNeural"]]],["English (Australia)","en-AU",[["NatashaNeural","en-AU-NatashaNeural"],["WilliamNeural","en-AU-WilliamNeural"]]],["English (Canada)","en-CA",[["ClaraNeural","en-CA-ClaraNeural"],["LiamNeural","en-CA-LiamNeural"]]],["English (Hongkong)","en-HK",[["YanNeural","en-HK-YanNeural"],["SamNeural","en-HK-SamNeural"]]],["English (India)","en-IN",[["NeerjaNeural","en-IN-NeerjaNeural"],["PrabhatNeural","en-IN-PrabhatNeural"]]],["English (Ireland)","en-IE",[["EmilyNeural","en-IE-EmilyNeural"],["ConnorNeural","en-IE-ConnorNeural"]]],["English (New Zealand)","en-NZ",[["MollyNeural","en-NZ-MollyNeural"],["MitchellNeural","en-NZ-MitchellNeural"]]],["English (Philippines)","en-PH",[["RosaNeural","en-PH-RosaNeural"],["JamesNeural","en-PH-JamesNeural"]]],["English (Singapore)","en-SG",[["LunaNeural","en-SG-LunaNeural"],["WayneNeural","en-SG-WayneNeural"]]],["English (South Africa)","en-ZA",[["LeahNeural","en-ZA-LeahNeural"],["LukeNeural","en-ZA-LukeNeural"]]],["English (United Kingdom)","en-GB",[["LibbyNeural","en-GB-LibbyNeural"],["MiaNeural","en-GB-MiaNeural"],["RyanNeural","en-GB-RyanNeural"]]],["English (United States)","en-US",[["AriaNeural","en-US-AriaNeural"],["JennyNeural","en-US-JennyNeural"],["GuyNeural","en-US-GuyNeural"]]],["Estonian (Estonia)","et-EE",[["AnuNeural","et-EE-AnuNeural"],["KertNeural","et-EE-KertNeural"]]],["Finnish (Finland)","fi-FI",[["NooraNeural","fi-FI-NooraNeural"],["SelmaNeural","fi-FI-SelmaNeural"],["HarriNeural","fi-FI-HarriNeural"]]],["French (Belgium)","fr-BE",[["CharlineNeural","fr-BE-CharlineNeural"],["GerardNeural","fr-BE-GerardNeural"]]],["French (Canada)","fr-CA",[["SylvieNeural","fr-CA-SylvieNeural"],["AntoineNeural","fr-CA-AntoineNeural"],["JeanNeural","fr-CA-JeanNeural"]]],["French (France)","fr-FR",[["DeniseNeural","fr-FR-DeniseNeural"],["HenriNeural","fr-FR-HenriNeural"]]],["French (Switzerland)","fr-CH",[["ArianeNeural","fr-CH-ArianeNeural"],["FabriceNeural","fr-CH-FabriceNeural"]]],["German (Austria)","de-AT",[["IngridNeural","de-AT-IngridNeural"],["JonasNeural","de-AT-JonasNeural"]]],["German (Germany)","de-DE",[["KatjaNeural","de-DE-KatjaNeural"],["ConradNeural","de-DE-ConradNeural"]]],["German (Switzerland)","de-CH",[["LeniNeural","de-CH-LeniNeural"],["JanNeural","de-CH-JanNeural"]]],["Greek (Greece)","el-GR",[["AthinaNeural","el-GR-AthinaNeural"],["NestorasNeural","el-GR-NestorasNeural"]]],["Gujarati (India)","gu-IN",[["DhwaniNeural","gu-IN-DhwaniNeural"],["NiranjanNeural","gu-IN-NiranjanNeural"]]],["Hebrew (Israel)","he-IL",[["HilaNeural","he-IL-HilaNeural"],["AvriNeural","he-IL-AvriNeural"]]],["Hindi (India)","hi-IN",[["SwaraNeural","hi-IN-SwaraNeural"],["MadhurNeural","hi-IN-MadhurNeural"]]],["Hungarian (Hungary)","hu-HU",[["NoemiNeural","hu-HU-NoemiNeural"],["TamasNeural","hu-HU-TamasNeural"]]],["Indonesian (Indonesia)","id-ID",[["GadisNeural","id-ID-GadisNeural"],["ArdiNeural","id-ID-ArdiNeural"]]],["Irish (Ireland)","ga-IE",[["OrlaNeural","ga-IE-OrlaNeural"],["ColmNeural","ga-IE-ColmNeural"]]],["Italian (Italy)","it-IT",[["ElsaNeural","it-IT-ElsaNeural"],["IsabellaNeural","it-IT-IsabellaNeural"],["DiegoNeural","it-IT-DiegoNeural"]]],["Japanese (Japan)","ja-JP",[["NanamiNeural","ja-JP-NanamiNeural"],["KeitaNeural","ja-JP-KeitaNeural"]]],["Korean (Korea)","ko-KR",[["SunHiNeural","ko-KR-SunHiNeural"],["InJoonNeural","ko-KR-InJoonNeural"]]],["Latvian (Latvia)","lv-LV",[["EveritaNeural","lv-LV-EveritaNeural"],["NilsNeural","lv-LV-NilsNeural"]]],["Lithuanian (Lithuania)","lt-LT",[["OnaNeural","lt-LT-OnaNeural"],["LeonasNeural","lt-LT-LeonasNeural"]]],["Malay (Malaysia)","ms-MY",[["YasminNeural","ms-MY-YasminNeural"],["OsmanNeural","ms-MY-OsmanNeural"]]],["Maltese (Malta)","mt-MT",[["GraceNeural","mt-MT-GraceNeural"],["JosephNeural","mt-MT-JosephNeural"]]],["Marathi (India)","mr-IN",[["AarohiNeural","mr-IN-AarohiNeural"],["ManoharNeural","mr-IN-ManoharNeural"]]],["Norwegian (Bokm\xe5l, Norway)","nb-NO",[["IselinNeural","nb-NO-IselinNeural"],["PernilleNeural","nb-NO-PernilleNeural"],["FinnNeural","nb-NO-FinnNeural"]]],["Polish (Poland)","pl-PL",[["AgnieszkaNeural","pl-PL-AgnieszkaNeural"],["ZofiaNeural","pl-PL-ZofiaNeural"],["MarekNeural","pl-PL-MarekNeural"]]],["Portuguese (Brazil)","pt-BR",[["FranciscaNeural","pt-BR-FranciscaNeural"],["AntonioNeural","pt-BR-AntonioNeural"]]],["Portuguese (Portugal)","pt-PT",[["FernandaNeural","pt-PT-FernandaNeural"],["RaquelNeural","pt-PT-RaquelNeural"],["DuarteNeural","pt-PT-DuarteNeural"]]],["Romanian (Romania)","ro-RO",[["AlinaNeural","ro-RO-AlinaNeural"],["EmilNeural","ro-RO-EmilNeural"]]],["Russian (Russia)","ru-RU",[["DariyaNeural","ru-RU-DariyaNeural"],["SvetlanaNeural","ru-RU-SvetlanaNeural"],["DmitryNeural","ru-RU-DmitryNeural"]]],["Slovak (Slovakia)","sk-SK",[["ViktoriaNeural","sk-SK-ViktoriaNeural"],["LukasNeural","sk-SK-LukasNeural"]]],["Slovenian (Slovenia)","sl-SI",[["PetraNeural","sl-SI-PetraNeural"],["RokNeural","sl-SI-RokNeural"]]],["Spanish (Argentina)","es-AR",[["ElenaNeural","es-AR-ElenaNeural"],["TomasNeural","es-AR-TomasNeural"]]],["Spanish (Colombia)","es-CO",[["SalomeNeural","es-CO-SalomeNeural"],["GonzaloNeural","es-CO-GonzaloNeural"]]],["Spanish (Mexico)","es-MX",[["DaliaNeural","es-MX-DaliaNeural"],["JorgeNeural","es-MX-JorgeNeural"]]],["Spanish (Spain)","es-ES",[["ElviraNeural","es-ES-ElviraNeural"],["AlvaroNeural","es-ES-AlvaroNeural"]]],["Spanish (US)","es-US",[["PalomaNeural","es-US-PalomaNeural"],["AlonsoNeural","es-US-AlonsoNeural"]]],["Swahili (Kenya)","sw-KE",[["ZuriNeural","sw-KE-ZuriNeural"],["RafikiNeural","sw-KE-RafikiNeural"]]],["Swedish (Sweden)","sv-SE",[["HilleviNeural","sv-SE-HilleviNeural"],["SofieNeural","sv-SE-SofieNeural"],["MattiasNeural","sv-SE-MattiasNeural"]]],["Tamil (India)","ta-IN",[["PallaviNeural","ta-IN-PallaviNeural"],["ValluvarNeural","ta-IN-ValluvarNeural"]]],["Telugu (India)","te-IN",[["ShrutiNeural","te-IN-ShrutiNeural"],["MohanNeural","te-IN-MohanNeural"]]],["Thai (Thailand)","th-TH",[["AcharaNeural","th-TH-AcharaNeural"],["PremwadeeNeural","th-TH-PremwadeeNeural"],["NiwatNeural","th-TH-NiwatNeural"]]],["Turkish (Turkey)","tr-TR",[["EmelNeural","tr-TR-EmelNeural"],["AhmetNeural","tr-TR-AhmetNeural"]]],["Ukrainian (Ukraine)","uk-UA",[["PolinaNeural","uk-UA-PolinaNeural"],["OstapNeural","uk-UA-OstapNeural"]]],["Urdu (Pakistan)","ur-PK",[["UzmaNeural","ur-PK-UzmaNeural"],["AsadNeural","ur-PK-AsadNeural"]]],["Vietnamese (Vietnam)","vi-VN",[["HoaiMyNeural","vi-VN-HoaiMyNeural"],["NamMinhNeural","vi-VN-NamMinhNeural"]]],["Welsh (United Kingdom)","cy-GB",[["NiaNeural","cy-GB-NiaNeural"],["AledNeural","cy-GB-AledNeural"]]]],pluginDataFields:["Service key","Service location"],platformValidate:()=>!0}]},2211:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(4762),i=n(7552),s=n(2843),o=n(4294),a=n(5040),c=n(6006),u=n(1944),l=n(9338),h=n(2841),d=n(8289),p=n(2332),f=n(9880);let v=(()=>{class e{constructor(e,t,n,r,o,a,c){this.voiceStore=e,this.speechQuery=t,this.toastService=n,this.networkService=r,this.soundService=o,this.soundQuery=a,this.styleQuery=c,this.SelectPlugin=e=>{this.voiceStore.update(t=>({selectedPluginData:new Array(i.H[e].pluginDataFields.length).fill(null),selectedPlugin:[e,0,0]}))},this.SelectLanguage=e=>this.voiceStore.update(t=>({selectedPlugin:[t.selectedPlugin[0],e,0]})),this.SelectVoice=e=>this.voiceStore.update(t=>({selectedPlugin:[t.selectedPlugin[0],t.selectedPlugin[1],e]})),this.UpdatePluginData=(e,t)=>this.voiceStore.update(n=>{n.selectedPluginData[e]=t}),(0,s.iA)()===s.Bh.host&&t.onNewLastSentence$.subscribe(e=>this.Enqueue(null==e?void 0:e.ttsValue)),r.messages$.subscribe(e=>{"tts:play"===e.type&&o.PlaySpeech(e.data)})}Enqueue(e){var t;e&&this.pluginInstance&&this.pluginInstance.RequestPlay(e,(null===(t=this.styleQuery.getValue().currentStyle.soundStyle.voiceVolume)||void 0===t?void 0:t.value[0])||1)}StartHost(){const e=this.voiceStore.getValue(),t=i.H[e.selectedPlugin[0]];this.pluginInstance=new t.plugin;const n=t.languages()[e.selectedPlugin[1]][1],r=t.languages()[e.selectedPlugin[1]][2][e.selectedPlugin[2]][1];this.pluginInstance.onStatusChanged$.subscribe(e=>this.voiceStore.update({connectionState:e})),this.pluginInstance.onPluginCrashed$.pipe((0,o.q)(1)).subscribe(e=>{this.toastService.error(e,{theme:"snackbar",position:"bottom-right"}),this.StopHost()}),this.pluginInstance.onFinal$.subscribe(e=>{(null==e?void 0:e.byteLength)&&(this.networkService.SendAudio(e),!this.soundQuery.getValue().mute&&this.soundService.PlaySpeech(e))}),this.pluginInstance.Start(n,r,e.selectedPluginData).catch(e=>this.toastService.error(e.message,{theme:"snackbar",position:"bottom-right"}))}StopHost(){var e;return(0,r.mG)(this,void 0,void 0,function*(){yield null===(e=this.pluginInstance)||void 0===e?void 0:e.Stop(),this.pluginInstance=void 0})}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(c.I),a.LFG(u.v),a.LFG(l.jE),a.LFG(h.S),a.LFG(d.y),a.LFG(p.g),a.LFG(f.B))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},6006:(e,t,n)=>{"use strict";n.d(t,{I:()=>c});var r=n(4762),i=n(4004),s=n(9822),o=n(1100),a=n(5040);let c=class extends i.yh{constructor(){super({selectedPlugin:[0,0,0],selectedPluginData:[],connectionState:s.e.Disconnected})}};c.\u0275fac=function(e){return new(e||c)},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c=(0,r.gn)([(0,i.yC)({name:"voice",producerFn:o.ZP})],c)},2843:(e,t,n)=>{"use strict";n.d(t,{Bh:()=>r,x6:()=>i,iA:()=>s});var r=(()=>(function(e){e[e.host=0]="host",e[e.client=1]="client"}(r||(r={})),r))();function i(){return!!window.obsstudio}function s(){return"/"===location.pathname||"/auth/twitch"===location.pathname||"/simple-obs-stt/"===location.pathname||"/simple-obs-stt/auth/twitch"===location.pathname?r.host:r.client}},9822:(e,t,n)=>{"use strict";n.d(t,{e:()=>r});var r=(()=>(function(e){e[e.Disconnected=0]="Disconnected",e[e.Connecting=1]="Connecting",e[e.Connected=2]="Connected"}(r||(r={})),r))()},2340:(e,t,n)=>{"use strict";n.d(t,{N:()=>r});const r={platform:"web",peerConfig:{local:{host:"peerjs.apdow.net",clientHost:"https://mmpneo.github.io/simple-obs-stt/client",port:443,key:"peerjs",path:"server",secure:!0,ice:[{url:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{url:"turn:0.peerjs.com:3478",username:"peerjs",credential:"peerjsp"}]},remote:{host:"peerjs.apdow.net",clientHost:"https://mmpneo.github.io/simple-obs-stt/client",port:443,key:"peerjs",path:"server",secure:!0,ice:[{url:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{url:"turn:0.peerjs.com:3478",username:"peerjs",credential:"peerjsp"}]}},tw_client:"u93n4exg8mhj8m1my8ko8pf2fxpqmw",production:!0,clientPath:"https://mmpneo.github.io/simple-obs-stt/client",twitchAuthPath:"https://mmpneo.github.io/simple-obs-stt/auth/twitch",features:{EMOTES:!0,SHAREABLE:!1,TTS:!0}}},7645:(e,t,n)=>{"use strict";var r=n(9075),i=n(5040),s=n(4154);const o=[{path:"",loadChildren:()=>Promise.all([n.e(361),n.e(741)]).then(n.bind(n,7741)).then(e=>e.ServerModule)},{path:"client",loadChildren:()=>Promise.all([n.e(361),n.e(56)]).then(n.bind(n,4056)).then(e=>e.ClientModule)},{path:"auth",loadChildren:()=>n.e(100).then(n.bind(n,8100)).then(e=>e.AuthModule)}];let a=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[s.Bz.forRoot(o)],s.Bz]}),e})();var c=n(2843),u=n(2340),l=n(539),h=n(2211),d=n(2841),p=n(7911),f=n(4942),v=n(8289),m=n(1352),g=n(9338),y=n(8583),b=n(482),S=n(1776),w=n(8853),_=n(6937),C=n(1964),T=n(9044),E=n(6889),x=n(6186),P=new S.y(x.Z),k=n(3763),R=n(5207),O=n(4689),I=n(7540),A=n(7331),N=n(8476),D=n(424),M={connector:function(){return new E.x}};function L(e,t){void 0===t&&(t=M);var n=t.connector;return(0,D.e)(function(t,r){var i,s=n();(0,N.Dp)(e((i=s,new S.y(function(e){return i.subscribe(e)})))).subscribe(r),r.add(t.subscribe(s))})}var j=n(4294),F=n(9922),B=n(6107),z=n(5076),U=n(7216);function H(e,t){return t?function(n){return(0,T.z)(t.pipe((0,j.q)(1),(0,D.e)(function(e,t){e.subscribe(new z.Q(t,x.Z))})),n.pipe(H(e)))}:(0,U.z)(function(t,n){return e(t,n).pipe((0,j.q)(1),function(e){return(0,R.U)(function(){return e})}(t))})}var V=n(8468);const q="Service workers are disabled or not supported by this browser";class ${constructor(e){if(this.serviceWorker=e,e){const t=(0,_.R)(e,"controllerchange").pipe((0,R.U)(()=>e.controller)),n=(0,b.P)(()=>(0,C.of)(e.controller)),r=(0,T.z)(n,t);this.worker=r.pipe((0,O.h)(e=>!!e)),this.registration=this.worker.pipe((0,I.w)(()=>e.getRegistration()));const i=(0,_.R)(e,"message").pipe((0,R.U)(e=>e.data)).pipe((0,O.h)(e=>e&&e.type)).pipe(function(e,t){var n=(0,w.m)(e)?e:function(){return e};return(0,w.m)(t)?L(t,{connector:n}):function(e){return new A.c(e,n)}}(new E.x));i.connect(),this.events=i}else this.worker=this.events=this.registration=(q,(0,b.P)(()=>{return e=new Error("Service workers are disabled or not supported by this browser"),t=(0,w.m)(e)?e:function(){return e},new S.y(function(e){return e.error(t())});var e,t}))}postMessage(e,t){return this.worker.pipe((0,j.q)(1),(0,F.b)(n=>{n.postMessage(Object.assign({action:e},t))})).toPromise().then(()=>{})}postMessageWithStatus(e,t,n){const r=this.waitForStatus(n),i=this.postMessage(e,t);return Promise.all([r,i]).then(()=>{})}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){return this.events.pipe((0,O.h)(t=>t.type===e))}nextEventOfType(e){return this.eventsOfType(e).pipe((0,j.q)(1))}waitForStatus(e){return this.eventsOfType("STATUS").pipe((0,O.h)(t=>t.nonce===e),(0,j.q)(1),(0,R.U)(e=>{if(!e.status)throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let G=(()=>{class e{constructor(e){if(this.sw=e,this.subscriptionChanges=new E.x,!e.isEnabled)return this.messages=P,this.notificationClicks=P,void(this.subscription=P);this.messages=this.sw.eventsOfType("PUSH").pipe((0,R.U)(e=>e.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,R.U)(e=>e.data)),this.pushManager=this.sw.registration.pipe((0,R.U)(e=>e.pushManager));const t=this.pushManager.pipe((0,I.w)(e=>e.getSubscription()));this.subscription=(0,k.T)(t,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(e){if(!this.sw.isEnabled)return Promise.reject(new Error(q));const t={userVisibleOnly:!0};let n=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),r=new Uint8Array(new ArrayBuffer(n.length));for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return t.applicationServerKey=r,this.pushManager.pipe((0,I.w)(e=>e.subscribe(t)),(0,j.q)(1)).toPromise().then(e=>(this.subscriptionChanges.next(e),e))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,j.q)(1),(0,I.w)(e=>{if(null===e)throw new Error("Not subscribed to push notifications.");return e.unsubscribe().then(e=>{if(!e)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(q))}decodeBase64(e){return atob(e)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG($))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),W=(()=>{class e{constructor(e){if(this.sw=e,!e.isEnabled)return this.available=P,this.activated=P,void(this.unrecoverable=P);this.available=this.sw.eventsOfType("UPDATE_AVAILABLE"),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(q));const e=this.sw.generateNonce();return this.sw.postMessageWithStatus("CHECK_FOR_UPDATES",{statusNonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(q));const e=this.sw.generateNonce();return this.sw.postMessageWithStatus("ACTIVATE_UPDATE",{statusNonce:e},e)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG($))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class Z{}const K=new i.OlP("NGSW_REGISTER_SCRIPT");function Y(e,t,n,r){return()=>{if(!(0,y.NF)(r)||!("serviceWorker"in navigator)||!1===n.enabled)return;let s;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof n.registrationStrategy)s=n.registrationStrategy();else{const[t,...r]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(t){case"registerImmediately":s=(0,C.of)(null);break;case"registerWithDelay":s=Q(+r[0]||0);break;case"registerWhenStable":s=r[0]?(0,k.T)(J(e),Q(+r[0])):J(e);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}e.get(i.R0b).runOutsideAngular(()=>s.pipe((0,j.q)(1)).subscribe(()=>navigator.serviceWorker.register(t,{scope:n.scope}).catch(e=>console.error("Service worker registration failed with:",e))))}}function Q(e){return(0,C.of)(null).pipe(function(e,t){void 0===t&&(t=B.z);var n=(0,V.H)(e,t);return H(function(){return n})}(e))}function J(e){return e.get(i.z2F).isStable.pipe((0,O.h)(e=>e))}function X(e,t){return new $((0,y.NF)(t)&&!1!==e.enabled?navigator.serviceWorker:void 0)}let ee=(()=>{class e{static register(t,n={}){return{ngModule:e,providers:[{provide:K,useValue:t},{provide:Z,useValue:n},{provide:$,useFactory:X,deps:[Z,i.Lbi]},{provide:i.ip1,useFactory:Y,deps:[i.zs3,K,Z,i.Lbi],multi:!0}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[G,W]}),e})();function te(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",1),i.TgZ(1,"div",2),i._UZ(2,"img",3),i.TgZ(3,"div",4),i._uU(4,"Simple STT"),i.qZA(),i.qZA(),i.TgZ(5,"div",2),i.TgZ(6,"button",5),i.NdJ("click",function(){i.CHM(e);const t=i.oxw();return null==t.appWindow?null:t.appWindow.minimize()}),i.O4$(),i.TgZ(7,"svg",6),i._UZ(8,"path",7),i.qZA(),i.qZA(),i.kcU(),i.TgZ(9,"button",5),i.NdJ("click",function(){i.CHM(e);const t=i.oxw();return null==t.appWindow?null:t.appWindow.maximize()}),i.O4$(),i.TgZ(10,"svg",8),i._UZ(11,"path",9),i.qZA(),i.qZA(),i.kcU(),i.TgZ(12,"button",5),i.NdJ("click",function(){i.CHM(e);const t=i.oxw();return null==t.appWindow?null:t.appWindow.close()}),i.O4$(),i.TgZ(13,"svg",6),i._UZ(14,"path",10),i.qZA(),i.qZA(),i.qZA(),i.qZA()}}let ne=(()=>{class e{constructor(e,t,n,r,i,s,o,a,l,h){var d,p;this._speechService=e,this._voiceService=t,this._networkService=n,this._styleService=r,this._fontsService=i,this._soundService=s,this._emotesService=o,this.router=a,this.toast=l,this.updates=h,this.appWindow=null===(p=null===(d=window.__TAURI__)||void 0===d?void 0:d.window)||void 0===p?void 0:p.appWindow,this.clientType=(0,c.iA)(),window.addEventListener("contextmenu",function(e){e.preventDefault()},!1),console.log("[System] platform:",u.N.platform),"web"===u.N.platform&&this.CheckUpdate();let f=localStorage.getItem("path"),v=localStorage.getItem("path-fragment");f&&(localStorage.removeItem("path"),localStorage.removeItem("path-fragment"),this.router.navigate([f.replace("simple-obs-stt","")],{fragment:v||void 0}))}CheckUpdate(){(0,c.iA)()!==c.Bh.client&&"app"!==u.N.platform&&u.N.production&&(this.updates.available.subscribe(e=>{this.updates.activateUpdate().then(e=>this.toast.success("Update available. Refresh page"))}),this.updates.checkForUpdate())}ngOnInit(){this.appWindow&&document.body.classList.add("app")}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(l.v),i.Y36(h.Z),i.Y36(d.S),i.Y36(p.v),i.Y36(f.C),i.Y36(v.y),i.Y36(m.K),i.Y36(s.F0),i.Y36(g.jE),i.Y36(W,8))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-root"]],decls:2,vars:1,consts:[["data-tauri-drag-region","","class","px-4 py-2 w-screen flex justify-between space-x-2 bg-base-200",4,"ngIf"],["data-tauri-drag-region","",1,"px-4","py-2","w-screen","flex","justify-between","space-x-2","bg-base-200"],[1,"flex","space-x-2"],["src","assets/logo.png",1,"pointer-events-none","object-contain","h-6","self-start"],[1,"text-base-content","font-semibold"],[1,"btn","btn-xs","btn-circle","btn-ghost",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 12H4"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-3","w-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"]],template:function(e,t){1&e&&(i.YNc(0,te,15,0,"div",0),i._UZ(1,"router-outlet")),2&e&&i.Q6J("ngIf",t.appWindow&&0===t.clientType)},directives:[y.O5,s.lC],encapsulation:2,changeDetection:0}),e})();var re=n(4004);const ie=new i.OlP("DevtoolsOptions");let se=(()=>{class e{constructor(e,t){this.ngZone=e,this.options=t,(0,re.Me)(this.ngZone,this.options)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.R0b),i.LFG(ie))},e.\u0275prov=(0,i.Yz7)({factory:function(){return new e((0,i.LFG)(i.R0b),(0,i.LFG)(ie))},token:e,providedIn:"root"}),e})();function oe(){}function ae(e){return oe}se.ctorParameters=()=>[{type:i.R0b},{type:void 0,decorators:[{type:i.tBr,args:[ie]}]}];let ce=(()=>{class e{static forRoot(t){return{ngModule:e,providers:[{provide:ie,useValue:t},{provide:i.ip1,useFactory:ae,deps:[se],multi:!0}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({}),e})();var ue=n(9855);const le={name:"applyMaxSize",enabled:!0,phase:"beforeWrite",requires:["maxSize"],fn(e){const{height:t}=e.state.modifiersData.maxSize;e.state.styles.popper.maxHeight=`${t}px`}};var he=n(8542);const de={name:"maxSize",enabled:!0,phase:"main",requiresIfExists:["offset","preventOverflow","flip"],fn:function(e){var t=e.state,n=e.name,r=(0,he.Z)(t,e.options),i=t.modifiersData.preventOverflow||{x:0,y:0},s=i.x,o=i.y,a=t.rects.popper,c=a.width,u=a.height,l=t.placement.split("-")[0];t.modifiersData[n]={width:c-r["left"===l?"left":"right"]-s,height:u-r["top"===l?"top":"bottom"]-o}}};var pe,fe=n(4762),ve=n(6872),me=n(1886),ge=me.Z["__core-js_shared__"],ye=(pe=/[^.]+$/.exec(ge&&ge.keys&&ge.keys.IE_PROTO||""))?"Symbol(src)_1."+pe:"",be=n(692),Se=Function.prototype.toString;const we=function(e){if(null!=e){try{return Se.call(e)}catch(t){}try{return e+""}catch(t){}}return""};var _e=/^\[object .+?Constructor\]$/,Ce=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Te=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!(0,be.Z)(e)||(t=e,ye&&ye in t))&&((0,ve.Z)(e)?Ce:_e).test(we(e));var t}(n)?n:void 0},Ee=function(){try{var e=Te(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),xe=function(e,t,n,r){for(var i=-1,s=null==e?0:e.length;++i<s;){var o=e[i];t(r,o,n(o),e)}return r};var Pe=n(6781),ke=n(4969);const Re=(Oe=function(e,t){return e&&function(e,t,n){for(var r=-1,i=Object(e),s=n(e),o=s.length;o--;){var a=s[++r];if(!1===t(i[a],a,i))break}return e}(e,t,Pe.Z)},function(e,t){if(null==e)return e;if(!(0,ke.Z)(e))return Oe(e,t);for(var n=e.length,r=-1,i=Object(e);++r<n&&!1!==t(i[r],r,i););return e});var Oe;const Ie=function(e,t,n,r){return Re(e,function(e,i,s){t(r,e,n(e),s)}),r},Ae=function(e,t){return e===t||e!=e&&t!=t},Ne=function(e,t){for(var n=e.length;n--;)if(Ae(e[n][0],t))return n;return-1};var De=Array.prototype.splice;function Me(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Me.prototype.clear=function(){this.__data__=[],this.size=0},Me.prototype.delete=function(e){var t=this.__data__,n=Ne(t,e);return!(n<0||(n==t.length-1?t.pop():De.call(t,n,1),--this.size,0))},Me.prototype.get=function(e){var t=this.__data__,n=Ne(t,e);return n<0?void 0:t[n][1]},Me.prototype.has=function(e){return Ne(this.__data__,e)>-1},Me.prototype.set=function(e,t){var n=this.__data__,r=Ne(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};const Le=Me,je=Te(me.Z,"Map"),Fe=Te(Object,"create");var Be=Object.prototype.hasOwnProperty,ze=Object.prototype.hasOwnProperty;function Ue(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ue.prototype.clear=function(){this.__data__=Fe?Fe(null):{},this.size=0},Ue.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ue.prototype.get=function(e){var t=this.__data__;if(Fe){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Be.call(t,e)?t[e]:void 0},Ue.prototype.has=function(e){var t=this.__data__;return Fe?void 0!==t[e]:ze.call(t,e)},Ue.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Fe&&void 0===t?"__lodash_hash_undefined__":t,this};const He=Ue,Ve=function(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map};function qe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}qe.prototype.clear=function(){this.size=0,this.__data__={hash:new He,map:new(je||Le),string:new He}},qe.prototype.delete=function(e){var t=Ve(this,e).delete(e);return this.size-=t?1:0,t},qe.prototype.get=function(e){return Ve(this,e).get(e)},qe.prototype.has=function(e){return Ve(this,e).has(e)},qe.prototype.set=function(e,t){var n=Ve(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};const $e=qe;function Ge(e){var t=this.__data__=new Le(e);this.size=t.size}Ge.prototype.clear=function(){this.__data__=new Le,this.size=0},Ge.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Ge.prototype.get=function(e){return this.__data__.get(e)},Ge.prototype.has=function(e){return this.__data__.has(e)},Ge.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Le){var r=n.__data__;if(!je||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new $e(r)}return n.set(e,t),this.size=n.size,this};const We=Ge;function Ze(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new $e;++t<n;)this.add(e[t])}Ze.prototype.add=Ze.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ze.prototype.has=function(e){return this.__data__.has(e)};const Ke=Ze,Ye=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},Qe=function(e,t,n,r,i,s){var o=1&n,a=e.length,c=t.length;if(a!=c&&!(o&&c>a))return!1;var u=s.get(e),l=s.get(t);if(u&&l)return u==t&&l==e;var h=-1,d=!0,p=2&n?new Ke:void 0;for(s.set(e,t),s.set(t,e);++h<a;){var f=e[h],v=t[h];if(r)var m=o?r(v,f,h,t,e,s):r(f,v,h,e,t,s);if(void 0!==m){if(m)continue;d=!1;break}if(p){if(!Ye(t,function(e,t){if(!p.has(t)&&(f===e||i(f,e,n,r,s)))return p.push(t)})){d=!1;break}}else if(f!==v&&!i(f,v,n,r,s)){d=!1;break}}return s.delete(e),s.delete(t),d};var Je=n(1908);const Xe=me.Z.Uint8Array,et=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n},tt=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n};var nt=Je.Z?Je.Z.prototype:void 0,rt=nt?nt.valueOf:void 0,it=n(4663),st=Object.prototype.propertyIsEnumerable,ot=Object.getOwnPropertySymbols;const at=ot?function(e){return null==e?[]:(e=Object(e),function(t,n){for(var r=-1,i=null==t?0:t.length,s=0,o=[];++r<i;){var a=t[r];st.call(e,a)&&(o[s++]=a)}return o}(ot(e)))}:function(){return[]},ct=function(e){return function(e,t,n){var r=t(e);return(0,it.Z)(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Pe.Z,at)};var ut=Object.prototype.hasOwnProperty;const lt=Te(me.Z,"DataView"),ht=Te(me.Z,"Promise"),dt=Te(me.Z,"Set"),pt=Te(me.Z,"WeakMap");var ft=n(2733),vt="[object Map]",mt="[object Promise]",gt="[object Set]",yt="[object WeakMap]",bt="[object DataView]",St=we(lt),wt=we(je),_t=we(ht),Ct=we(dt),Tt=we(pt),Et=ft.Z;(lt&&Et(new lt(new ArrayBuffer(1)))!=bt||je&&Et(new je)!=vt||ht&&Et(ht.resolve())!=mt||dt&&Et(new dt)!=gt||pt&&Et(new pt)!=yt)&&(Et=function(e){var t=(0,ft.Z)(e),n="[object Object]"==t?e.constructor:void 0,r=n?we(n):"";if(r)switch(r){case St:return bt;case wt:return vt;case _t:return mt;case Ct:return gt;case Tt:return yt}return t});const xt=Et;var Pt=n(6565),kt=n(6643),Rt="[object Arguments]",Ot="[object Array]",It="[object Object]",At=Object.prototype.hasOwnProperty;var Nt=n(6165);const Dt=function e(t,n,r,i,s){return t===n||(null==t||null==n||!(0,Nt.Z)(t)&&!(0,Nt.Z)(n)?t!=t&&n!=n:function(e,t,n,r,i,s){var o=(0,it.Z)(e),a=(0,it.Z)(t),c=o?Ot:xt(e),u=a?Ot:xt(t),l=(c=c==Rt?It:c)==It,h=(u=u==Rt?It:u)==It,d=c==u;if(d&&(0,Pt.Z)(e)){if(!(0,Pt.Z)(t))return!1;o=!0,l=!1}if(d&&!l)return s||(s=new We),o||(0,kt.Z)(e)?Qe(e,t,n,r,i,s):function(e,t,n,r,i,s,o){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new Xe(e),new Xe(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ae(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=et;case"[object Set]":if(a||(a=tt),e.size!=t.size&&!(1&r))return!1;var c=o.get(e);if(c)return c==t;r|=2,o.set(e,t);var u=Qe(a(e),a(t),r,i,s,o);return o.delete(e),u;case"[object Symbol]":if(rt)return rt.call(e)==rt.call(t)}return!1}(e,t,c,n,r,i,s);if(!(1&n)){var p=l&&At.call(e,"__wrapped__"),f=h&&At.call(t,"__wrapped__");if(p||f){var v=p?e.value():e,m=f?t.value():t;return s||(s=new We),i(v,m,n,r,s)}}return!!d&&(s||(s=new We),function(e,t,n,r,i,s){var o=1&n,a=ct(e),c=a.length;if(c!=ct(t).length&&!o)return!1;for(var u=c;u--;){var l=a[u];if(!(o?l in t:ut.call(t,l)))return!1}var h=s.get(e),d=s.get(t);if(h&&d)return h==t&&d==e;var p=!0;s.set(e,t),s.set(t,e);for(var f=o;++u<c;){var v=e[l=a[u]],m=t[l];if(r)var g=o?r(m,v,l,t,e,s):r(v,m,l,e,t,s);if(!(void 0===g?v===m||i(v,m,n,r,s):g)){p=!1;break}f||(f="constructor"==l)}if(p&&!f){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return s.delete(e),s.delete(t),p}(e,t,n,r,i,s))}(t,n,r,i,e,s))},Mt=function(e){return e==e&&!(0,be.Z)(e)},Lt=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}},jt=function(e){return"symbol"==typeof e||(0,Nt.Z)(e)&&"[object Symbol]"==(0,ft.Z)(e)};var Ft=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bt=/^\w*$/;const zt=function(e,t){if((0,it.Z)(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!jt(e))||Bt.test(e)||!Ft.test(e)||null!=t&&e in Object(t)};function Ut(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=e.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(Ut.Cache||$e),n}Ut.Cache=$e;var Ht=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vt=/\\(\\)?/g;const qt=($t=Ut(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ht,function(e,n,r,i){t.push(r?i.replace(Vt,"$1"):n||e)}),t},function(e){return 500===Gt.size&&Gt.clear(),e}),Gt=$t.cache,$t);var $t,Gt,Wt=n(4265),Zt=Je.Z?Je.Z.prototype:void 0,Kt=Zt?Zt.toString:void 0;const Yt=function e(t){if("string"==typeof t)return t;if((0,it.Z)(t))return(0,Wt.Z)(t,e)+"";if(jt(t))return Kt?Kt.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},Qt=function(e){return null==e?"":Yt(e)},Jt=function(e,t){return(0,it.Z)(e)?e:zt(e,t)?[e]:qt(Qt(e))},Xt=function(e){if("string"==typeof e||jt(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},en=function(e,t){for(var n=0,r=(t=Jt(t,e)).length;null!=e&&n<r;)e=e[Xt(t[n++])];return n&&n==r?e:void 0},tn=function(e,t){return null!=e&&t in Object(e)};var nn=n(8901),rn=n(6641),sn=n(6997);const on=function(e,t){return zt(e)&&Mt(t)?Lt(Xt(e),t):function(n){var r=function(e,t,n){var r=null==e?void 0:en(e,t);return void 0===r?void 0:r}(n,e);return void 0===r&&r===t?function(e,t){return null!=e&&function(e,t,n){for(var r=-1,i=(t=Jt(t,e)).length,s=!1;++r<i;){var o=Xt(t[r]);if(!(s=null!=e&&n(e,o)))break;e=e[o]}return s||++r!=i?s:!!(i=null==e?0:e.length)&&(0,sn.Z)(i)&&(0,rn.Z)(o,i)&&((0,it.Z)(e)||(0,nn.Z)(e))}(e,t,tn)}(n,e):Dt(t,r,3)}},an=function(e){return e};var cn=Object.prototype.hasOwnProperty;const un=(ln=function(e,t,n){cn.call(e,n)?e[n].push(t):function(e,t,n){"__proto__"==t&&Ee?Ee(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}(e,n,[t])},function(e,t){var n,r,i,s,o;return((0,it.Z)(e)?xe:Ie)(e,ln,"function"==typeof(n=t)?n:null==n?an:"object"==typeof n?(0,it.Z)(n)?on(n[0],n[1]):1==(o=function(e){for(var t=(0,Pe.Z)(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Mt(i)]}return t}(s=n)).length&&o[0][2]?Lt(o[0][0],o[0][1]):function(e){return e===s||function(e,t,n,r){var i=n.length,s=i;if(null==e)return!s;for(e=Object(e);i--;){var o=n[i];if(o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++i<s;){var a=(o=n[i])[0],c=e[a],u=o[1];if(o[2]){if(void 0===c&&!(a in e))return!1}else{var l,h=new We;if(!(void 0===l?Dt(u,c,3,r,h):l))return!1}}return!0}(e,0,o)}:zt(r=n)?(i=Xt(r),function(e){return null==e?void 0:e[i]}):function(e){return function(t){return en(t,e)}}(r),{})});var ln,hn=n(449),dn=n.n(hn);const pn={provide:i.ip1,useFactory:function(e){return()=>(0,fe.mG)(this,void 0,void 0,function*(){try{yield e.LoadFonts();const t=new(dn());return!(!(0,c.x6)()&&(0,c.iA)()!==c.Bh.client&&void 0!==window.speechSynthesis.onvoiceschanged&&("Firefox"===t.getBrowser().name?(window.speechSynthesis.getVoices().length||(yield new Promise(e=>speechSynthesis.addEventListener("voiceschanged",e,{once:!0}))),fn(),0):(yield new Promise((e,t)=>{window.speechSynthesis.onvoiceschanged=()=>{fn(),e(null)}}),0)))}catch(t){return!0}})},deps:[f.C],multi:!0};function fn(){const e=window.speechSynthesis.getVoices(),t=un(e,e=>e.lang),n=Object.keys(t).map(e=>[e,e,t[e].map(e=>[e.name,e.voiceURI])]);window.NativeVoices=e,window.NativeVoicesGroups=n}var vn=n(7238);function mn(){return"undefined"!=typeof window&&void 0!==window.document}function gn(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function yn(e){switch(e.length){case 0:return new vn.ZN;case 1:return e[0];default:return new vn.ZE(e)}}function bn(e,t,n,r,i={},s={}){const o=[],a=[];let c=-1,u=null;if(r.forEach(e=>{const n=e.offset,r=n==c,l=r&&u||{};Object.keys(e).forEach(n=>{let r=n,a=e[n];if("offset"!==n)switch(r=t.normalizePropertyName(r,o),a){case vn.k1:a=i[n];break;case vn.l3:a=s[n];break;default:a=t.normalizeStyleValue(n,r,a,o)}l[r]=a}),r||a.push(l),u=l,c=n}),o.length){const e="\n - ";throw new Error(`Unable to animate due to the following errors:${e}${o.join(e)}`)}return a}function Sn(e,t,n,r){switch(t){case"start":e.onStart(()=>r(n&&wn(n,"start",e)));break;case"done":e.onDone(()=>r(n&&wn(n,"done",e)));break;case"destroy":e.onDestroy(()=>r(n&&wn(n,"destroy",e)))}}function wn(e,t,n){const r=n.totalTime,i=_n(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==r?e.totalTime:r,!!n.disabled),s=e._data;return null!=s&&(i._data=s),i}function _n(e,t,n,r,i="",s=0,o){return{element:e,triggerName:t,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Cn(e,t,n){let r;return e instanceof Map?(r=e.get(t),r||e.set(t,r=n)):(r=e[t],r||(r=e[t]=n)),r}function Tn(e){const t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}let En=(e,t)=>!1,xn=(e,t)=>!1,Pn=(e,t,n)=>[];const kn=gn();(kn||"undefined"!=typeof Element)&&(En=mn()?(e,t)=>{for(;t&&t!==document.documentElement;){if(t===e)return!0;t=t.parentNode||t.host}return!1}:(e,t)=>e.contains(t),xn=(()=>{if(kn||Element.prototype.matches)return(e,t)=>e.matches(t);{const e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?(e,n)=>t.apply(e,[n]):xn}})(),Pn=(e,t,n)=>{let r=[];if(n){const n=e.querySelectorAll(t);for(let e=0;e<n.length;e++)r.push(n[e])}else{const n=e.querySelector(t);n&&r.push(n)}return r});let Rn=null,On=!1;function In(e){Rn||(Rn=("undefined"!=typeof document?document.body:null)||{},On=!!Rn.style&&"WebkitAppearance"in Rn.style);let t=!0;return Rn.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&(t=e in Rn.style,!t&&On)&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in Rn.style),t}const An=xn,Nn=En,Dn=Pn;function Mn(e){const t={};return Object.keys(e).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=e[n]}),t}let Ln=(()=>{class e{validateStyleProperty(e){return In(e)}matchesElement(e,t){return An(e,t)}containsElement(e,t){return Nn(e,t)}query(e,t,n){return Dn(e,t,n)}computeStyle(e,t,n){return n||""}animate(e,t,n,r,i,s=[],o){return new vn.ZN(n,r)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class jn{}jn.NOOP=new Ln;const Fn="ng-enter",Bn="ng-leave",zn="ng-trigger",Un=".ng-trigger",Hn="ng-animating",Vn=".ng-animating";function qn(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:$n(parseFloat(t[1]),t[2])}function $n(e,t){switch(t){case"s":return 1e3*e;default:return e}}function Gn(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){let r,i=0,s="";if("string"==typeof e){const n=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return t.push(`The provided timing value "${e}" is invalid.`),{duration:0,delay:0,easing:""};r=$n(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(i=$n(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else r=e;if(!n){let n=!1,s=t.length;r<0&&(t.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(t.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&t.splice(s,0,`The provided timing value "${e}" is invalid.`)}return{duration:r,delay:i,easing:s}}(e,t,n)}function Wn(e,t={}){return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}function Zn(e,t,n={}){if(t)for(let r in e)n[r]=e[r];else Wn(e,n);return n}function Kn(e,t,n){return n?t+":"+n+";":""}function Yn(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style.item(n);t+=Kn(0,r,e.style.getPropertyValue(r))}for(const n in e.style)e.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=Kn(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[n]));e.setAttribute("style",t)}function Qn(e,t,n){e.style&&(Object.keys(t).forEach(r=>{const i=sr(r);n&&!n.hasOwnProperty(r)&&(n[r]=e.style[i]),e.style[i]=t[r]}),gn()&&Yn(e))}function Jn(e,t){e.style&&(Object.keys(t).forEach(t=>{const n=sr(t);e.style[n]=""}),gn()&&Yn(e))}function Xn(e){return Array.isArray(e)?1==e.length?e[0]:(0,vn.vP)(e):e}const er=new RegExp("{{\\s*(.+?)\\s*}}","g");function tr(e){let t=[];if("string"==typeof e){let n;for(;n=er.exec(e);)t.push(n[1]);er.lastIndex=0}return t}function nr(e,t,n){const r=e.toString(),i=r.replace(er,(e,r)=>{let i=t[r];return t.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?e:i}function rr(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}const ir=/-+([a-z0-9])/g;function sr(e){return e.replace(ir,(...e)=>e[1].toUpperCase())}function or(e,t){return 0===e||0===t}function ar(e,t,n){const r=Object.keys(n);if(r.length&&t.length){let s=t[0],o=[];if(r.forEach(e=>{s.hasOwnProperty(e)||o.push(e),s[e]=n[e]}),o.length)for(var i=1;i<t.length;i++){let n=t[i];o.forEach(function(t){n[t]=ur(e,t)})}}return t}function cr(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function ur(e,t){return window.getComputedStyle(e)[t]}const lr="*";function hr(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(e=>function(e,t,n){if(":"==e[0]){const r=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,t)=>parseFloat(t)>parseFloat(e);case":decrement":return(e,t)=>parseFloat(t)<parseFloat(e);default:return t.push(`The transition alias value "${e}" is not supported`),"* => *"}}(e,n);if("function"==typeof r)return void t.push(r);e=r}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${e}" is not supported`),t;const i=r[1],s=r[2],o=r[3];t.push(fr(i,o)),"<"!=s[0]||i==lr&&o==lr||t.push(fr(o,i))}(e,n,t)):n.push(e),n}const dr=new Set(["true","1"]),pr=new Set(["false","0"]);function fr(e,t){const n=dr.has(e)||pr.has(e),r=dr.has(t)||pr.has(t);return(i,s)=>{let o=e==lr||e==i,a=t==lr||t==s;return!o&&n&&"boolean"==typeof i&&(o=i?dr.has(e):pr.has(e)),!a&&r&&"boolean"==typeof s&&(a=s?dr.has(t):pr.has(t)),o&&a}}const vr=new RegExp("s*:selfs*,?","g");function mr(e,t,n){return new gr(e).build(t,n)}class gr{constructor(e){this._driver=e}build(e,t){const n=new yr(t);return this._resetContextStyleTimingState(n),cr(this,Xn(e),n)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0;const i=[],s=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(e=>{if(this._resetContextStyleTimingState(t),0==e.type){const n=e,r=n.name;r.toString().split(/\s*,\s*/).forEach(e=>{n.name=e,i.push(this.visitState(n,t))}),n.name=r}else if(1==e.type){const i=this.visitTransition(e,t);n+=i.queryCount,r+=i.depCount,s.push(i)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:i,transitions:s,queryCount:n,depCount:r,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){const i=new Set,s=r||{};if(n.styles.forEach(e=>{if(br(e)){const t=e;Object.keys(t).forEach(e=>{tr(t[e]).forEach(e=>{s.hasOwnProperty(e)||i.add(e)})})}}),i.size){const n=rr(i.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=cr(this,Xn(e.animation),t);return{type:1,matchers:hr(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:Sr(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(e=>cr(this,e,t)),options:Sr(e.options)}}visitGroup(e,t){const n=t.currentTime;let r=0;const i=e.steps.map(e=>{t.currentTime=n;const i=cr(this,e,t);return r=Math.max(r,t.currentTime),i});return t.currentTime=r,{type:3,steps:i,options:Sr(e.options)}}visitAnimate(e,t){const n=function(e,t){let n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return wr(Gn(e,t).duration,0,"");const r=e;if(r.split(/\s+/).some(e=>"{"==e.charAt(0)&&"{"==e.charAt(1))){const e=wr(0,0,"");return e.dynamic=!0,e.strValue=r,e}return n=n||Gn(r,t),wr(n.duration,n.delay,n.easing)}(e.timings,t.errors);let r;t.currentAnimateTimings=n;let i=e.styles?e.styles:(0,vn.oB)({});if(5==i.type)r=this.visitKeyframes(i,t);else{let i=e.styles,s=!1;if(!i){s=!0;const e={};n.easing&&(e.easing=n.easing),i=(0,vn.oB)(e)}t.currentTime+=n.duration+n.delay;const o=this.visitStyle(i,t);o.isEmptyStep=s,r=o}return t.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[];Array.isArray(e.styles)?e.styles.forEach(e=>{"string"==typeof e?e==vn.l3?n.push(e):t.errors.push(`The provided style string value ${e} is not allowed.`):n.push(e)}):n.push(e.styles);let r=!1,i=null;return n.forEach(e=>{if(br(e)){const t=e,n=t.easing;if(n&&(i=n,delete t.easing),!r)for(let e in t)if(t[e].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let r=t.currentTime,i=t.currentTime;n&&i>0&&(i-=n.duration+n.delay),e.styles.forEach(e=>{"string"!=typeof e&&Object.keys(e).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void t.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=t.collectedStyles[t.currentQuerySelector],o=s[n];let a=!0;o&&(i!=r&&i>=o.startTime&&r<=o.endTime&&(t.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=o.startTime),a&&(s[n]={startTime:i,endTime:r}),t.options&&function(e,t,n){const r=t.params||{},i=tr(e);i.length&&i.forEach(e=>{r.hasOwnProperty(e)||n.push(`Unable to resolve the local animation param ${e} in the given list of values`)})}(e[n],t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let s=!1,o=!1,a=0;const c=e.steps.map(e=>{const n=this._makeStyleAst(e,t);let c=null!=n.offset?n.offset:function(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(e=>{if(br(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}});else if(br(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}return t}(n.styles),u=0;return null!=c&&(r++,u=n.offset=c),o=o||u<0||u>1,s=s||u<a,a=u,i.push(u),n});o&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&t.errors.push("Please ensure that all keyframe offsets are in order");const u=e.steps.length;let l=0;r>0&&r<u?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(u-1));const h=u-1,d=t.currentTime,p=t.currentAnimateTimings,f=p.duration;return c.forEach((e,r)=>{const s=l>0?r==h?1:l*r:i[r],o=s*f;t.currentTime=d+p.delay+o,p.duration=o,this._validateStyleAst(e,t),e.offset=s,n.styles.push(e)}),n}visitReference(e,t){return{type:8,animation:cr(this,Xn(e.animation),t),options:Sr(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Sr(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Sr(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[i,s]=function(e){const t=!!e.split(/\s*,\s*/).find(e=>":self"==e);return t&&(e=e.replace(vr,"")),[e=e.replace(/@\*/g,Un).replace(/@\w+/g,e=>".ng-trigger-"+e.substr(1)).replace(/:animating/g,Vn),t]}(e.selector);t.currentQuerySelector=n.length?n+" "+i:i,Cn(t.collectedStyles,t.currentQuerySelector,{});const o=cr(this,Xn(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:o,originalSelector:e.selector,options:Sr(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:Gn(e.timings,t.errors,!0);return{type:12,animation:cr(this,Xn(e.animation),t),timings:n,options:null}}}class yr{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function br(e){return!Array.isArray(e)&&"object"==typeof e}function Sr(e){var t;return e?(e=Wn(e)).params&&(e.params=(t=e.params)?Wn(t):null):e={},e}function wr(e,t,n){return{duration:e,delay:t,easing:n}}function _r(e,t,n,r,i,s,o=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class Cr{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Tr=new RegExp(":enter","g"),Er=new RegExp(":leave","g");function xr(e,t,n,r,i,s={},o={},a,c,u=[]){return(new Pr).buildKeyframes(e,t,n,r,i,s,o,a,c,u)}class Pr{buildKeyframes(e,t,n,r,i,s,o,a,c,u=[]){c=c||new Cr;const l=new Rr(e,t,c,r,i,u,[]);l.options=a,l.currentTimeline.setStyles([s],null,l.errors,a),cr(this,n,l);const h=l.timelines.filter(e=>e.containsAnimation());if(h.length&&Object.keys(o).length){const e=h[h.length-1];e.allowOnlyTimelineStyles()||e.setStyles([o],null,l.errors,a)}return h.length?h.map(e=>e.buildKeyframes()):[_r(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.consume(t.element);if(n){const r=t.createSubContext(e.options),i=t.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,n){let r=t.currentTimeline.currentTime;const i=null!=n.duration?qn(n.duration):null,s=null!=n.delay?qn(n.delay):null;return 0!==i&&e.forEach(e=>{const n=t.appendInstructionToTimeline(e,i,s);r=Math.max(r,n.duration+n.delay)}),r}visitReference(e,t){t.updateOptions(e.options,!0),cr(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let r=t;const i=e.options;if(i&&(i.params||i.delay)&&(r=t.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=kr);const e=qn(i.delay);r.delayNextStep(e)}e.steps.length&&(e.steps.forEach(e=>cr(this,e,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let r=t.currentTimeline.currentTime;const i=e.options&&e.options.delay?qn(e.options.delay):0;e.steps.forEach(s=>{const o=t.createSubContext(e.options);i&&o.delayNextStep(i),cr(this,s,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(e=>t.currentTimeline.mergeTimelineCollectedStyles(e)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return Gn(t.params?nr(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());const i=e.style;5==i.type?this.visitKeyframes(i,t):(t.incrementTime(n.duration),this.visitStyle(i,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(i):n.setStyles(e.styles,i,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,r=t.currentTimeline.duration,i=n.duration,s=t.createSubContext().currentTimeline;s.easing=n.easing,e.styles.forEach(e=>{s.forwardTime((e.offset||0)*i),s.setStyles(e.styles,e.easing,t.errors,t.options),s.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(s),t.transformIntoNewTimeline(r+i),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,r=e.options||{},i=r.delay?qn(r.delay):0;i&&(6===t.previousNode.type||0==n&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=kr);let s=n;const o=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{t.currentQueryIndex=r;const o=t.createSubContext(e.options,n);i&&o.delayNextStep(i),n===t.element&&(a=o.currentTimeline),cr(this,e.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),a&&(t.currentTimeline.mergeTimelineCollectedStyles(a),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,r=t.currentTimeline,i=e.timings,s=Math.abs(i.duration),o=s*(t.currentQueryTotal-1);let a=s*t.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const c=t.currentTimeline;a&&c.delayNextStep(a);const u=c.currentTime;cr(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-u+(r.startTime-n.currentTimeline.startTime)}}const kr={};class Rr{constructor(e,t,n,r,i,s,o,a){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=kr,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new Or(this._driver,t,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let r=this.options;null!=n.duration&&(r.duration=qn(n.duration)),null!=n.delay&&(r.delay=qn(n.delay));const i=n.params;if(i){let e=r.params;e||(e=this.options.params={}),Object.keys(i).forEach(n=>{t&&e.hasOwnProperty(n)||(e[n]=nr(i[n],e,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(e=>{n[e]=t[e]})}}return e}createSubContext(e=null,t,n){const r=t||this.element,i=new Rr(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(e),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(e){return this.previousNode=kr,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},i=new Ir(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,i,s){let o=[];if(r&&o.push(this.element),e.length>0){e=(e=e.replace(Tr,"."+this._enterClassName)).replace(Er,"."+this._leaveClassName);let t=this._driver.query(this.element,e,1!=n);0!==n&&(t=n<0?t.slice(t.length+n,t.length):t.slice(0,n)),o.push(...t)}return i||0!=o.length||s.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),o}}class Or{constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Or(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||vn.l3,this._currentKeyframe[e]=vn.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&(this._previousKeyframe.easing=t);const i=r&&r.params||{},s=function(e,t){const n={};let r;return e.forEach(e=>{"*"===e?(r=r||Object.keys(t),r.forEach(e=>{n[e]=vn.l3})):Zn(e,!1,n)}),n}(e,this._globalTimelineStyles);Object.keys(s).forEach(e=>{const t=nr(s[e],i,n);this._pendingStyles[e]=t,this._localTimelineStyles.hasOwnProperty(e)||(this._backFill[e]=this._globalTimelineStyles.hasOwnProperty(e)?this._globalTimelineStyles[e]:vn.l3),this._updateStyle(e,t)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(t=>{this._currentKeyframe[t]=e[t]}),Object.keys(this._localTimelineStyles).forEach(e=>{this._currentKeyframe.hasOwnProperty(e)||(this._currentKeyframe[e]=this._localTimelineStyles[e])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const n=this._styleSummary[t],r=e._styleSummary[t];(!n||r.time>n.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,s)=>{const o=Zn(i,!0);Object.keys(o).forEach(n=>{const r=o[n];r==vn.k1?e.add(n):r==vn.l3&&t.add(n)}),n||(o.offset=s/this.duration),r.push(o)});const i=e.size?rr(e.values()):[],s=t.size?rr(t.values()):[];if(n){const e=r[0],t=Wn(e);e.offset=0,t.offset=1,r=[e,t]}return _r(this.element,r,i,s,this.duration,this.startTime,this.easing,!1)}}class Ir extends Or{constructor(e,t,n,r,i,s,o=!1){super(e,t,s.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const i=[],s=n+t,o=t/s,a=Zn(e[0],!1);a.offset=0,i.push(a);const c=Zn(e[0],!1);c.offset=Ar(o),i.push(c);const u=e.length-1;for(let r=1;r<=u;r++){let o=Zn(e[r],!1);o.offset=Ar((t+o.offset*n)/s),i.push(o)}n=s,t=0,r="",e=i}return _r(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}}function Ar(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}class Nr{}class Dr extends Nr{normalizePropertyName(e,t){return sr(e)}normalizeStyleValue(e,t,n,r){let i="";const s=n.toString().trim();if(Mr[t]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const t=n.match(/^[+-]?[\d\.]+([a-z]*)$/);t&&0==t[1].length&&r.push(`Please provide a CSS unit value for ${e}:${n}`)}return s+i}}const Mr=(()=>function(e){const t={};return e.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Lr(e,t,n,r,i,s,o,a,c,u,l,h,d){return{type:0,element:e,triggerName:t,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:u,postStyleProps:l,totalTime:h,errors:d}}const jr={};class Fr{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return function(e,t,n,r,i){return e.some(e=>e(t,n,r,i))}(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){const r=this._stateStyles["*"],i=this._stateStyles[e],s=r?r.buildStyles(t,n):{};return i?i.buildStyles(t,n):s}build(e,t,n,r,i,s,o,a,c,u){const l=[],h=this.ast.options&&this.ast.options.params||jr,d=this.buildStyles(n,o&&o.params||jr,l),p=a&&a.params||jr,f=this.buildStyles(r,p,l),v=new Set,m=new Map,g=new Map,y="void"===r,b={params:Object.assign(Object.assign({},h),p)},S=u?[]:xr(e,t,this.ast.animation,i,s,d,f,b,c,l);let w=0;if(S.forEach(e=>{w=Math.max(e.duration+e.delay,w)}),l.length)return Lr(t,this._triggerName,n,r,y,d,f,[],[],m,g,w,l);S.forEach(e=>{const n=e.element,r=Cn(m,n,{});e.preStyleProps.forEach(e=>r[e]=!0);const i=Cn(g,n,{});e.postStyleProps.forEach(e=>i[e]=!0),n!==t&&v.add(n)});const _=rr(v.values());return Lr(t,this._triggerName,n,r,y,d,f,S,_,m,g,w)}}class Br{constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){const n={},r=Wn(this.defaultParams);return Object.keys(e).forEach(t=>{const n=e[t];null!=n&&(r[t]=n)}),this.styles.styles.forEach(e=>{if("string"!=typeof e){const i=e;Object.keys(i).forEach(e=>{let s=i[e];s.length>1&&(s=nr(s,r,t));const o=this.normalizer.normalizePropertyName(e,t);s=this.normalizer.normalizeStyleValue(e,o,s,t),n[o]=s})}}),n}}class zr{constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,this.transitionFactories=[],this.states={},t.states.forEach(e=>{this.states[e.name]=new Br(e.style,e.options&&e.options.params||{},n)}),Ur(this.states,"true","1"),Ur(this.states,"false","0"),t.transitions.forEach(t=>{this.transitionFactories.push(new Fr(e,t,this.states))}),this.fallbackTransition=new Fr(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(e,t)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(i=>i.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function Ur(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}const Hr=new Cr;class Vr{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(e,t){const n=[],r=mr(this._driver,t,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[e]=r}_buildPlayer(e,t,n){const r=e.element,i=bn(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,i,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const r=[],i=this._animations[e];let s;const o=new Map;if(i?(s=xr(this._driver,t,i,Fn,Bn,{},{},n,Hr,r),s.forEach(e=>{const t=Cn(o,e.element,{});e.postStyleProps.forEach(e=>t[e]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);o.forEach((e,t)=>{Object.keys(e).forEach(n=>{e[n]=this._driver.computeStyle(t,n,vn.l3)})});const a=yn(s.map(e=>{const t=o.get(e.element);return this._buildPlayer(e,{},t)}));return this._playersById[e]=a,a.onDestroy(()=>this.destroy(e)),this.players.push(a),a}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,n,r){const i=_n(t,"","","");return Sn(this._getPlayer(e),n,i,r),()=>{}}command(e,t,n,r){if("register"==n)return void this.register(e,r[0]);if("create"==n)return void this.create(e,t,r[0]||{});const i=this._getPlayer(e);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const qr="ng-animate-queued",$r="ng-animate-disabled",Gr=".ng-animate-disabled",Wr=[],Zr={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Kr={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Yr{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=null!=(r=n?e.value:e)?r:null,n){const t=Wn(e);delete t.value,this.options=t}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const e=this.options.params;Object.keys(t).forEach(n=>{null==e[n]&&(e[n]=t[n])})}}}const Qr="void",Jr=new Yr(Qr);class Xr{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,oi(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${t}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${t}" is not supported!`);var i;const s=Cn(this._elementListeners,e,[]),o={name:t,phase:n,callback:r};s.push(o);const a=Cn(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(oi(e,zn),oi(e,"ng-trigger-"+t),a[t]=Jr),()=>{this._engine.afterFlush(()=>{const e=s.indexOf(o);e>=0&&s.splice(e,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,n,r=!0){const i=this._getTrigger(t),s=new ti(this.id,t,e);let o=this._engine.statesByElement.get(e);o||(oi(e,zn),oi(e,"ng-trigger-"+t),this._engine.statesByElement.set(e,o={}));let a=o[t];const c=new Yr(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&c.absorbOptions(a.options),o[t]=c,a||(a=Jr),c.value!==Qr&&a.value===c.value){if(!function(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!t.hasOwnProperty(r)||e[r]!==t[r])return!1}return!0}(a.params,c.params)){const t=[],n=i.matchStyles(a.value,a.params,t),r=i.matchStyles(c.value,c.params,t);t.length?this._engine.reportError(t):this._engine.afterFlush(()=>{Jn(e,n),Qn(e,r)})}return}const u=Cn(this._engine.playersByElement,e,[]);u.forEach(e=>{e.namespaceId==this.id&&e.triggerName==t&&e.queued&&e.destroy()});let l=i.matchTransition(a.value,c.value,e,c.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:l,fromState:a,toState:c,player:s,isFallbackTransition:h}),h||(oi(e,qr),s.onStart(()=>{ai(e,qr)})),s.onDone(()=>{let t=this.players.indexOf(s);t>=0&&this.players.splice(t,1);const n=this._engine.playersByElement.get(e);if(n){let e=n.indexOf(s);e>=0&&n.splice(e,1)}}),this.players.push(s),u.push(s),s}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,n)=>{delete t[e]}),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(t=>t.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(e=>e.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,Un,!0);n.forEach(e=>{if(e.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(e);n.size?n.forEach(n=>n.triggerLeaveAnimation(e,t,!1,!0)):this.clearElementCache(e)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(e=>this.clearElementCache(e)))}triggerLeaveAnimation(e,t,n,r){const i=this._engine.statesByElement.get(e);if(i){const s=[];if(Object.keys(i).forEach(t=>{if(this._triggers[t]){const n=this.trigger(e,t,Qr,r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&yn(s).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){const r=new Set;t.forEach(t=>{const i=t.name;if(r.has(i))return;r.add(i);const s=this._triggers[i].fallbackTransition,o=n[i]||Jr,a=new Yr(Qr),c=new ti(this.id,i,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:i,transition:s,fromState:o,toState:a,player:c,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){const t=n.players.length?n.playersByQueriedElement.get(e):[];if(t&&t.length)r=!0;else{let t=e;for(;t=t.parentNode;)if(n.statesByElement.get(t)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{const r=e.__ng_removed;r&&r!==Zr||(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){oi(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,s=this._elementListeners.get(i);s&&s.forEach(t=>{if(t.name==n.triggerName){const r=_n(i,n.triggerName,n.fromState.value,n.toState.value);r._data=e,Sn(n.player,t.phase,r,t.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((e,t)=>{const n=e.transition.ast.depCount,r=t.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(e.element,t.element)?1:-1})}destroy(e){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(t=>t.element===e)||t,t}}class ei{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(e,t)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(t=>{t.queued&&e.push(t)})}),e}createNamespace(e,t){const n=new Xr(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,t)){this._namespaceList.splice(i+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const t=this._namespaceList.indexOf(n);t>=0&&this._namespaceList.splice(t,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n){const e=Object.keys(n);for(let r=0;r<e.length;r++){const i=n[e[r]].namespaceId;if(i){const e=this._fetchNamespace(i);e&&t.add(e)}}}return t}trigger(e,t,n,r){if(ni(t)){const i=this._fetchNamespace(e);if(i)return i.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!ni(t))return;const i=t.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const e=this.collectedLeaveElements.indexOf(t);e>=0&&this.collectedLeaveElements.splice(e,1)}if(e){const r=this._fetchNamespace(e);r&&r.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),oi(e,$r)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),ai(e,$r))}removeNode(e,t,n,r){if(ni(t)){const i=e?this._fetchNamespace(e):null;if(i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){const n=this.namespacesByHostElement.get(t);n&&n.id!==e&&n.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,n,r){this.collectedLeaveElements.push(t),t.__ng_removed={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(e,t,n,r,i){return ni(t)?this._fetchNamespace(e).listen(t,n,r,i):()=>{}}_buildInstruction(e,t,n,r,i){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,i)}destroyInnerAnimations(e){let t=this.driver.query(e,Un,!0);t.forEach(e=>this.destroyActiveAnimationsForElement(e)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Vn,!0),t.forEach(e=>this.finishActiveQueriedAnimationOnElement(e)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(e=>{e.queued?e.markedForDestroy=!0:e.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(e=>e.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return yn(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e.__ng_removed;if(t&&t.setForRemoval){if(e.__ng_removed=Zr,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,Gr)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Gr,!0).forEach(e=>{this.markElementAsDisabled(e,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((e,t)=>this._balanceNamespaceList(e,t)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)oi(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let e=0;e<n.length;e++)n[e]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(e=>e()),this._flushFns=[],this._whenQuietFns.length){const e=this._whenQuietFns;this._whenQuietFns=[],t.length?yn(t).onDone(()=>{e.forEach(e=>e())}):e.forEach(e=>e())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const n=new Cr,r=[],i=new Map,s=[],o=new Map,a=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(e=>{u.add(e);const t=this.driver.query(e,".ng-animate-queued",!0);for(let n=0;n<t.length;n++)u.add(t[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=si(h,this.collectedEnterElements),p=new Map;let f=0;d.forEach((e,t)=>{const n=Fn+f++;p.set(t,n),e.forEach(e=>oi(e,n))});const v=[],m=new Set,g=new Set;for(let O=0;O<this.collectedLeaveElements.length;O++){const e=this.collectedLeaveElements[O],t=e.__ng_removed;t&&t.setForRemoval&&(v.push(e),m.add(e),t.hasAnimation?this.driver.query(e,".ng-star-inserted",!0).forEach(e=>m.add(e)):g.add(e))}const y=new Map,b=si(h,Array.from(m));b.forEach((e,t)=>{const n=Bn+f++;y.set(t,n),e.forEach(e=>oi(e,n))}),e.push(()=>{d.forEach((e,t)=>{const n=p.get(t);e.forEach(e=>ai(e,n))}),b.forEach((e,t)=>{const n=y.get(t);e.forEach(e=>ai(e,n))}),v.forEach(e=>{this.processLeaveNode(e)})});const S=[],w=[];for(let O=this._namespaceList.length-1;O>=0;O--)this._namespaceList[O].drainQueuedTransitions(t).forEach(e=>{const t=e.player,i=e.element;if(S.push(t),this.collectedEnterElements.length){const e=i.__ng_removed;if(e&&e.setForMove)return void t.destroy()}const u=!l||!this.driver.containsElement(l,i),h=y.get(i),d=p.get(i),f=this._buildInstruction(e,n,d,h,u);if(f.errors&&f.errors.length)w.push(f);else{if(u)return t.onStart(()=>Jn(i,f.fromStyles)),t.onDestroy(()=>Qn(i,f.toStyles)),void r.push(t);if(e.isFallbackTransition)return t.onStart(()=>Jn(i,f.fromStyles)),t.onDestroy(()=>Qn(i,f.toStyles)),void r.push(t);f.timelines.forEach(e=>e.stretchStartingKeyframe=!0),n.append(i,f.timelines),s.push({instruction:f,player:t,element:i}),f.queriedElements.forEach(e=>Cn(o,e,[]).push(t)),f.preStyleProps.forEach((e,t)=>{const n=Object.keys(e);if(n.length){let e=a.get(t);e||a.set(t,e=new Set),n.forEach(t=>e.add(t))}}),f.postStyleProps.forEach((e,t)=>{const n=Object.keys(e);let r=c.get(t);r||c.set(t,r=new Set),n.forEach(e=>r.add(e))})}});if(w.length){const e=[];w.forEach(t=>{e.push(`@${t.triggerName} has failed due to:\n`),t.errors.forEach(t=>e.push(`- ${t}\n`))}),S.forEach(e=>e.destroy()),this.reportError(e)}const _=new Map,C=new Map;s.forEach(e=>{const t=e.element;n.has(t)&&(C.set(t,t),this._beforeAnimationBuild(e.player.namespaceId,e.instruction,_))}),r.forEach(e=>{const t=e.element;this._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach(e=>{Cn(_,t,[]).push(e),e.destroy()})});const T=v.filter(e=>li(e,a,c)),E=new Map;ii(E,this.driver,g,c,vn.l3).forEach(e=>{li(e,a,c)&&T.push(e)});const x=new Map;d.forEach((e,t)=>{ii(x,this.driver,new Set(e),a,vn.k1)}),T.forEach(e=>{const t=E.get(e),n=x.get(e);E.set(e,Object.assign(Object.assign({},t),n))});const P=[],k=[],R={};s.forEach(e=>{const{element:t,player:s,instruction:o}=e;if(n.has(t)){if(u.has(t))return s.onDestroy(()=>Qn(t,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void r.push(s);let e=R;if(C.size>1){let n=t;const r=[];for(;n=n.parentNode;){const t=C.get(n);if(t){e=t;break}r.push(n)}r.forEach(t=>C.set(t,e))}const n=this._buildAnimation(s.namespaceId,o,_,i,x,E);if(s.setRealPlayer(n),e===R)P.push(s);else{const t=this.playersByElement.get(e);t&&t.length&&(s.parentPlayer=yn(t)),r.push(s)}}else Jn(t,o.fromStyles),s.onDestroy(()=>Qn(t,o.toStyles)),k.push(s),u.has(t)&&r.push(s)}),k.forEach(e=>{const t=i.get(e.element);if(t&&t.length){const n=yn(t);e.setRealPlayer(n)}}),r.forEach(e=>{e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(let O=0;O<v.length;O++){const e=v[O],t=e.__ng_removed;if(ai(e,Bn),t&&t.hasAnimation)continue;let n=[];if(o.size){let t=o.get(e);t&&t.length&&n.push(...t);let r=this.driver.query(e,Vn,!0);for(let e=0;e<r.length;e++){let t=o.get(r[e]);t&&t.length&&n.push(...t)}}const r=n.filter(e=>!e.destroyed);r.length?ci(this,e,r):this.processLeaveNode(e)}return v.length=0,P.forEach(e=>{this.players.push(e),e.onDone(()=>{e.destroy();const t=this.players.indexOf(e);this.players.splice(t,1)}),e.play()}),P}elementContainsData(e,t){let n=!1;const r=t.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,i){let s=[];if(t){const t=this.playersByQueriedElement.get(e);t&&(s=t)}else{const t=this.playersByElement.get(e);if(t){const e=!i||i==Qr;t.forEach(t=>{t.queued||(e||t.triggerName==r)&&s.push(t)})}}return(n||r)&&(s=s.filter(e=>!(n&&n!=e.namespaceId||r&&r!=e.triggerName))),s}_beforeAnimationBuild(e,t,n){const r=t.element,i=t.isRemovalTransition?void 0:e,s=t.isRemovalTransition?void 0:t.triggerName;for(const o of t.timelines){const e=o.element,a=e!==r,c=Cn(n,e,[]);this._getPreviousPlayers(e,a,i,s,t.toState).forEach(e=>{const t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),c.push(e)})}Jn(r,t.fromStyles)}_buildAnimation(e,t,n,r,i,s){const o=t.triggerName,a=t.element,c=[],u=new Set,l=new Set,h=t.timelines.map(t=>{const h=t.element;u.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new vn.ZN(t.duration,t.delay);const p=h!==a,f=function(e){const t=[];return ui(e,t),t}((n.get(h)||Wr).map(e=>e.getRealPlayer())).filter(e=>!!e.element&&e.element===h),v=i.get(h),m=s.get(h),g=bn(0,this._normalizer,0,t.keyframes,v,m),y=this._buildPlayer(t,g,f);if(t.subTimeline&&r&&l.add(h),p){const t=new ti(e,o,h);t.setRealPlayer(y),c.push(t)}return y});c.forEach(e=>{Cn(this.playersByQueriedElement,e.element,[]).push(e),e.onDone(()=>function(e,t,n){let r;if(e instanceof Map){if(r=e.get(t),r){if(r.length){const e=r.indexOf(n);r.splice(e,1)}0==r.length&&e.delete(t)}}else if(r=e[t],r){if(r.length){const e=r.indexOf(n);r.splice(e,1)}0==r.length&&delete e[t]}return r}(this.playersByQueriedElement,e.element,e))}),u.forEach(e=>oi(e,Hn));const d=yn(h);return d.onDestroy(()=>{u.forEach(e=>ai(e,Hn)),Qn(a,t.toStyles)}),l.forEach(e=>{Cn(r,e,[]).push(d)}),d}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new vn.ZN(e.duration,e.delay)}}class ti{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new vn.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(n=>Sn(e,t,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Cn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function ni(e){return e&&1===e.nodeType}function ri(e,t){const n=e.style.display;return e.style.display=null!=t?t:"none",n}function ii(e,t,n,r,i){const s=[];n.forEach(e=>s.push(ri(e)));const o=[];r.forEach((n,r)=>{const s={};n.forEach(e=>{const n=s[e]=t.computeStyle(r,e,i);n&&0!=n.length||(r.__ng_removed=Kr,o.push(r))}),e.set(r,s)});let a=0;return n.forEach(e=>ri(e,s[a++])),o}function si(e,t){const n=new Map;if(e.forEach(e=>n.set(e,[])),0==t.length)return n;const r=new Set(t),i=new Map;function s(e){if(!e)return 1;let t=i.get(e);if(t)return t;const o=e.parentNode;return t=n.has(o)?o:r.has(o)?1:s(o),i.set(e,t),t}return t.forEach(e=>{const t=s(e);1!==t&&n.get(t).push(e)}),n}function oi(e,t){if(e.classList)e.classList.add(t);else{let n=e.$$classes;n||(n=e.$$classes={}),n[t]=!0}}function ai(e,t){if(e.classList)e.classList.remove(t);else{let n=e.$$classes;n&&delete n[t]}}function ci(e,t,n){yn(n).onDone(()=>e.processLeaveNode(t))}function ui(e,t){for(let n=0;n<e.length;n++){const r=e[n];r instanceof vn.ZE?ui(r.players,t):t.push(r)}}function li(e,t,n){const r=n.get(e);if(!r)return!1;let i=t.get(e);return i?r.forEach(e=>i.add(e)):t.set(e,r),n.delete(e),!0}class hi{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(e,t)=>{},this._transitionEngine=new ei(e,t,n),this._timelineEngine=new Vr(e,t,n),this._transitionEngine.onRemovalComplete=(e,t)=>this.onRemovalComplete(e,t)}registerTrigger(e,t,n,r,i){const s=e+"-"+r;let o=this._triggerCache[s];if(!o){const e=[],t=mr(this._driver,i,e);if(e.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${e.join("\n - ")}`);o=function(e,t,n){return new zr(e,t,n)}(r,t,this._normalizer),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(t,r,o)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if("@"==n.charAt(0)){const[e,i]=Tn(n);this._timelineEngine.command(e,t,i,r)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,i){if("@"==n.charAt(0)){const[e,r]=Tn(n);return this._timelineEngine.listen(e,t,r,i)}return this._transitionEngine.listen(e,t,n,r,i)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function di(e,t){let n=null,r=null;return Array.isArray(t)&&t.length?(n=fi(t[0]),t.length>1&&(r=fi(t[t.length-1]))):t&&(n=fi(t)),n||r?new pi(e,n,r):null}class pi{constructor(e,t,n){this._element=e,this._startStyles=t,this._endStyles=n,this._state=0;let r=pi.initialStylesByElement.get(e);r||pi.initialStylesByElement.set(e,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Qn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Qn(this._element,this._initialStyles),this._endStyles&&(Qn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(pi.initialStylesByElement.delete(this._element),this._startStyles&&(Jn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Jn(this._element,this._endStyles),this._endStyles=null),Qn(this._element,this._initialStyles),this._state=3)}}function fi(e){let t=null;const n=Object.keys(e);for(let r=0;r<n.length;r++){const i=n[r];vi(i)&&(t=t||{},t[i]=e[i])}return t}function vi(e){return"display"===e||"position"===e}pi.initialStylesByElement=new WeakMap;const mi="animation",gi="animationend";class yi{constructor(e,t,n,r,i,s,o){this._element=e,this._name=t,this._duration=n,this._delay=r,this._easing=i,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=e=>this._handleCallback(e)}apply(){!function(e,t){const n=Ti(e,"").trim();n.length&&(function(e,t){let n=0;for(let r=0;r<e.length;r++)","===e.charAt(r)&&n++}(n),t=`${n}, ${t}`),Ci(e,"",t)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),_i(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){bi(this._element,this._name,"paused")}resume(){bi(this._element,this._name,"running")}setPosition(e){const t=Si(this._element,this._name);this._position=e*this._duration,Ci(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),_i(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(e,t){const n=Ti(e,"").split(","),r=wi(n,t);r>=0&&(n.splice(r,1),Ci(e,"",n.join(",")))}(this._element,this._name))}}function bi(e,t,n){Ci(e,"PlayState",n,Si(e,t))}function Si(e,t){const n=Ti(e,"");return n.indexOf(",")>0?wi(n.split(","),t):wi([n],t)}function wi(e,t){for(let n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function _i(e,t,n){n?e.removeEventListener(gi,t):e.addEventListener(gi,t)}function Ci(e,t,n,r){const i=mi+t;if(null!=r){const t=e.style[i];if(t.length){const e=t.split(",");e[r]=n,n=e.join(",")}}e.style[i]=n}function Ti(e,t){return e.style[mi+t]||""}class Ei{constructor(e,t,n,r,i,s,o,a){this.element=e,this.keyframes=t,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+i,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new yi(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(e[n]=t?this._finalStyles[n]:ur(this.element,n))})}this.currentSnapshot=e}}class xi extends vn.ZN{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=Mn(t)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class Pi{constructor(){this._count=0}validateStyleProperty(e){return In(e)}matchesElement(e,t){return An(e,t)}containsElement(e,t){return Nn(e,t)}query(e,t,n){return Dn(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,n){n=n.map(e=>Mn(e));let r=`@keyframes ${t} {\n`,i="";n.forEach(e=>{i=" ";const t=parseFloat(e.offset);r+=`${i}${100*t}% {\n`,i+=" ",Object.keys(e).forEach(t=>{const n=e[t];switch(t){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${t}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const s=document.createElement("style");return s.textContent=r,s}animate(e,t,n,r,i,s=[],o){const a=s.filter(e=>e instanceof Ei),c={};or(n,r)&&a.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>c[e]=t[e])});const u=function(e){let t={};return e&&(Array.isArray(e)?e:[e]).forEach(e=>{Object.keys(e).forEach(n=>{"offset"!=n&&"easing"!=n&&(t[n]=e[n])})}),t}(t=ar(e,t,c));if(0==n)return new xi(e,u);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(e,l,t);(function(e){var t;const n=null===(t=e.getRootNode)||void 0===t?void 0:t.call(e);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(e).appendChild(h);const d=di(e,t),p=new Ei(e,t,l,n,r,i,u,d);return p.onDestroy(()=>{var e;(e=h).parentNode.removeChild(e)}),p}}class ki{constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,n){return e.animate(t,n)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:ur(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class Ri{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Oi().toString()),this._cssKeyframesDriver=new Pi}validateStyleProperty(e){return In(e)}matchesElement(e,t){return An(e,t)}containsElement(e,t){return Nn(e,t)}query(e,t,n){return Dn(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,n,r,i,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,n,r,i,s);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const c={},u=s.filter(e=>e instanceof ki);or(n,r)&&u.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>c[e]=t[e])});const l=di(e,t=ar(e,t=t.map(e=>Zn(e,!1)),c));return new ki(e,t,a,l)}}function Oi(){return mn()&&Element.prototype.animate||{}}let Ii=(()=>{class e extends vn._j{constructor(e,t){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(t.body,{id:"0",encapsulation:i.ifc.None,styles:[],data:{animation:[]}})}build(e){const t=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(e)?(0,vn.vP)(e):e;return Di(this._renderer,null,t,"register",[n]),new Ai(t,this._renderer)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.FYo),i.LFG(y.K0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class Ai extends vn.LC{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Ni(this._id,e,t||{},this._renderer)}}class Ni{constructor(e,t,n,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Di(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function Di(e,t,n,r,i){return e.setProperty(t,`@@${n}:${r}`,i)}const Mi="@",Li="@.disabled";let ji=(()=>{class e{constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),t.onRemovalComplete=(e,t)=>{t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}createRenderer(e,t){const n=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){let e=this._rendererCache.get(n);return e||(e=new Fi("",n,this.engine),this._rendererCache.set(n,e)),e}const r=t.id,i=t.id+"-"+this._currentId;this._currentId++,this.engine.register(i,e);const s=t=>{Array.isArray(t)?t.forEach(s):this.engine.registerTrigger(r,i,e,t.name,t)};return t.data.animation.forEach(s),new Bi(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){e>=0&&e<this._microtaskId?this._zone.run(()=>t(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(e=>{const[t,n]=e;t(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([t,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.FYo),i.LFG(hi),i.LFG(i.R0b))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class Fi{constructor(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?e=>t.destroyNode(e):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,r=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==Mi&&t==Li?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Bi extends Fi{constructor(e,t,n,r){super(t,n,r),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==Mi?"."==t.charAt(1)&&t==Li?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if(t.charAt(0)==Mi){const r=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e);let i=t.substr(1),s="";return i.charAt(0)!=Mi&&([i,s]=function(e){const t=e.indexOf(".");return[e.substring(0,t),e.substr(t+1)]}(i)),this.engine.listen(this.namespaceId,r,i,s,e=>{this.factory.scheduleListenerCallback(e._data||-1,n,e)})}return this.delegate.listen(e,t,n)}}let zi=(()=>{class e extends hi{constructor(e,t,n){super(e.body,t,n)}ngOnDestroy(){this.flush()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(y.K0),i.LFG(jn),i.LFG(Nr))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const Ui=new i.OlP("AnimationModuleType"),Hi=[{provide:vn._j,useClass:Ii},{provide:Nr,useFactory:function(){return new Dr}},{provide:hi,useClass:zi},{provide:i.FYo,useFactory:function(e,t,n){return new ji(e,t,n)},deps:[r.se,hi,i.R0b]}],Vi=[{provide:jn,useFactory:function(){return"function"==typeof Oi()?new Ri:new Pi}},{provide:Ui,useValue:"BrowserAnimations"},...Hi],qi=[{provide:jn,useClass:Ln},{provide:Ui,useValue:"NoopAnimations"},...Hi];let $i=(()=>{class e{static withConfig(t){return{ngModule:e,providers:t.disableAnimations?qi:Vi}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:Vi,imports:[r.b2]}),e})(),Gi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e,bootstrap:[ne]}),e.\u0275inj=i.cJS({providers:[pn],imports:[[r.b2,$i,a,u.N.production?[]:ce.forRoot(),"web"!==u.N.platform?[]:ee.register("ngsw-worker.js",{enabled:u.N.production,registrationStrategy:"registerWhenStable:30000"}),ue.GV.forRoot({defaultVariation:"tooltip",variations:{tooltip:Object.assign(Object.assign({},ue.F7),{arrow:!0,offset:[0,10]}),popper:Object.assign(Object.assign({},ue.lz),{theme:void 0,offset:[0,15],role:"popper",maxWidth:"25rem",arrow:!0,popperOptions:{modifiers:[{name:"preventOverflow",options:{padding:20}},de,le]}}),menu:Object.assign(Object.assign({},ue.lz),{role:"popper",trigger:"mouseenter",appendTo:"parent",theme:void 0,popperOptions:{modifiers:[de,le,{name:"preventOverflow",options:{padding:20}}]}}),color_menu:Object.assign(Object.assign({},ue.lz),{role:"popper",theme:"raw",popperOptions:{modifiers:[{name:"preventOverflow",options:{padding:20}}]}})}}),g.kR.forRoot()]]}),e})();if((0,re.Ux)(),u.N.production&&(0,i.G48)(),(0,c.iA)()===c.Bh.host){const e=(0,re.xi)({include:["application","network","speech","sound","voice","style","emotes"],preStorageUpdate:(e,t)=>"emotes"===e?{bindings:t.bindings,keyword:t.keyword}:"network"===e?{saveHost:t.saveHost,hostID:t.saveHost?t.hostID:null}:"speech"===e?{selectedPlugin:t.selectedPlugin,selectedPluginData:t.selectedPluginData,selectedLanguage:t.selectedLanguage,profanityWords:t.profanityWords}:"voice"===e?{selectedPlugin:t.selectedPlugin,selectedPluginData:t.selectedPluginData,selectedLanguage:t.selectedLanguage}:"sound"===e?{mute:t.mute,muteClient:t.muteClient}:t});r.q6([{provide:"persistStorage",useValue:e,multi:!0}]).bootstrapModule(Gi).catch(e=>console.error(e))}else(function(){var e,t;return(0,fe.mG)(this,void 0,void 0,function*(){let n=yield caches.keys();n=n.filter(e=>/^(ngsw).*api.*/.test(e));const r=n.map(e=>caches.delete(e));if(yield Promise.all(r),console.log("[System] Clear client cache"),null===(e=navigator.serviceWorker)||void 0===e?void 0:e.getRegistrations){const e=yield null===(t=navigator.serviceWorker)||void 0===t?void 0:t.getRegistrations();for(let t of e)t.unregister()}})})().then(e=>r.q6().bootstrapModule(Gi,{ngZoneEventCoalescing:!0}).catch(e=>console.error(e)))},9162:(e,t,n)=>{"use strict";n.d(t,{ZT:()=>i,mG:()=>s,Jh:()=>o,XA:()=>a,CR:()=>c,ev:()=>u,qq:()=>l,FC:()=>h,KL:()=>d});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function s(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})}function o(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function a(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function u(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}function l(e){return this instanceof l?(this.v=e,this):new l(e)}function h(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){i[e]&&(r[e]=function(t){return new Promise(function(n,r){s.push([e,t,n,r])>1||a(e,t)})})}function a(e,t){try{(n=i[e](t)).value instanceof l?Promise.resolve(n.value.v).then(c,u):h(s[0][2],n)}catch(r){h(s[0][3],r)}var n}function c(e){a("next",e)}function u(e){a("throw",e)}function h(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function d(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=a(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,i,(t=e[n](t)).done,t.value)})}}}},4762:(e,t,n)=>{"use strict";function r(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function i(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function o(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})}n.d(t,{_T:()=>r,gn:()=>i,w6:()=>s,mG:()=>o})},5784:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=5784,e.exports=t},3339:()=>{},3108:()=>{},8275:()=>{},2505:()=>{},146:()=>{},173:()=>{},1137:()=>{},592:()=>{}},e=>{"use strict";e(e.s=7645)}]);